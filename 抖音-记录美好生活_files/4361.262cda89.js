"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[4361],{71780:function(e,n,o){o.d(n,{r:function(){return t}});var t=(0,o(21528).createContext)(null)},79100:function(e,n,o){o.d(n,{l:function(){return Q}});var t=o(68671),l=o(29588),i=o(41257),r=o(11789),a=o(23947),u=o.n(a),d=o(63862),c=o.n(d),s=o(21528),v=o(1384),m=o(4158),f=o(3616),h=o(18653),g=o(41122),p=o(88263),_=o(42457),C=o(73824),w=o(76375),I=o(53549),y=o(86358),b=o(21144),L=o(41316),k=o(59013),S=o(66870),Z=o(47999),E=o(70335),T=o.n(E),x=o(54748),A=o(73567),R=o(26195),P=o(86164),M=o(98821),V=o(79876),N=o(46407),F=o(70333),B=o(86230),H=o(87500),W=o(25955),D=o(52974),O=o(18881),U=o(93506),G=o(8395),q=o(97921),X=o(94344),Y=o(9187),j=(0,M.default)({resolved:{},chunkName:function(){return"Comment"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(640),o.e(1456)]).then(o.bind(o,88023))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 88023}},{ssr:!1,resolveComponent:function(e){return e.Comment}}),z=(0,M.default)({resolved:{},chunkName:function(){return"RelatedVideoCard"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(7345),o.e(640),o.e(2519)]).then(o.bind(o,56910))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 56910}},{ssr:!1});function K(e,n){var o,a,d,E,M,K,Q,J,$,ee,ne,oe,te,le,ie,re,ae,ue,de,ce,se,ve,me,fe,he,ge,pe,_e,Ce=e.item,we=e.playPrevFunc,Ie=e.playNextFunc,ye=e.deleteCurrentSwiper,be=e.fullScreenTarget,Le=e.isActive,ke=e.isNext,Se=e.swiper,Ze=e.children,Ee=e.customProps,Te=e.isLast,xe=e.isTransition,Ae=void 0!==xe&&xe,Re=e.handleNextOnLast,Pe=e.slideListInsideFunc,Me=e.InnerPlayer,Ve=e.className,Ne=e.defaultCommentShow,Fe=void 0!==Ne&&Ne,Be=e.isShowGuide,He=e.isClientMiniWin,We=e.defaultComment,De=e.ctr,Oe=e.moreBoxShowList,Ue=e.modalEnterFrom,Ge=e.isCollectFolderCard,qe=e.collectFolderId,Xe=e.collectionFolderInfo,Ye=e.isDefaultShowRelatedCard,je=void 0!==Ye&&Ye,ze=e.defaultForceOpenTab,Ke=Ee||{},Qe=Ke.shouldPreload,Je=Ke.abtestData,$e=(0,s.useContext)(q.Cv),en=$e.globalIsCommentShow,nn=$e.setIsCommentShowFunc,on=$e.isFullScreen,tn=$e.setTargetVideoRef,ln=$e.videoToast,rn="modal"===(null==Ee?void 0:Ee.tab)?function(e){return X.F.info(e)}:ln,an=Ee.userContext||{},un=an.userInfo,dn=an.dispatch,cn=(un||{}).isLogin,sn=(0,s.useState)(en||Fe),vn=(0,r.Z)(sn,2),mn=vn[0],fn=vn[1],hn=(0,s.useState)(je),gn=(0,r.Z)(hn,2),pn=gn[0],_n=gn[1],Cn=(0,s.useRef)(null),wn=(0,s.useRef)(!1),In=(0,s.useRef)(null),yn=(0,s.useState)(ze),bn=(0,r.Z)(yn,2),Ln=bn[0],kn=bn[1];(0,s.useEffect)((function(){ze&&"comment"!==ze&&h.Le.setConfig(h.gI.PlayerCardInfo,{cardType:ze,isActive:Le})}),[]);var Sn=(0,B.M)({player:null===(o=Cn.current)||void 0===o?void 0:o.player,originAwemeInfo:Ce,isActive:Le,isLast:Te,isLogin:cn,isShowAuthorCardLoginGuide:wn.current,toast:rn,curCard:(0,N._)(null===(a=In.current)||void 0===a?void 0:a.getCurTab()),handleNextOnLast:Re,handleOuterPlayNext:Ie,handleOuterPlayPrev:we,isInnerFeedCondition:pn}),Zn=Sn.changeNextVideo,En=Sn.changePrevVideo,Tn=Sn.awemeInfo,xn=Sn.setAwemeInfo,An=Sn.setNextAwemeInfo,Rn=Sn.setPrevAwemeInfo,Pn=Sn.prevAwemeInfo,Mn=Sn.nextAwemeInfo,Vn=Sn.updateInnerVideoInfo,Nn=Sn.isInnerFeed,Fn=(0,s.useState)(!(en||Fe)),Bn=(0,r.Z)(Fn,2),Hn=Bn[0],Wn=Bn[1],Dn=(0,s.useState)(!1),On=(0,r.Z)(Dn,2),Un=On[0],Gn=On[1],qn=(0,s.useState)((null==Tn||null===(d=Tn.stats)||void 0===d?void 0:d.commentCount)||0),Xn=(0,r.Z)(qn,2),Yn=Xn[0],jn=Xn[1],zn=(0,s.useState)(!1),Kn=(0,r.Z)(zn,2),Qn=Kn[0],Jn=Kn[1],$n=(0,s.useRef)(""),eo=(0,s.useState)(null),no=(0,r.Z)(eo,2),oo=no[0],to=no[1],lo=(0,s.useState)(g.O(Tn)),io=(0,r.Z)(lo,2),ro=io[0],ao=io[1],uo=(0,s.useState)(),co=(0,r.Z)(uo,2),so=co[0],vo=co[1],mo=(0,H.$)({awemeInfo:Tn}).hotData,fo=(0,s.useCallback)((function(){_n(!1)}),[]),ho=(0,s.useRef)(null),go=(0,s.useRef)(Tn),po=(0,s.useRef)(pn),_o=(0,s.useRef)(Le),Co=(0,s.useRef)(Qn),wo=(0,s.useRef)(null);_o.current=Le;var Io=(0,s.useMemo)((function(){var e,n;return null===(e=In.current)||void 0===e||null===(n=e.getCurTopic)||void 0===n?void 0:n.call(e)}),[In.current]),yo=(0,s.useMemo)((function(){return p.emit(p.EVENT.changeVideoSideBar,{isShowComment:mn,isAuthorCardShow:!1,isShowRelatedCard:pn}),pn||mn}),[pn,mn]),bo=(0,s.useCallback)((function(e){var n,o,t=e.tab,l=e.clickMethod,i=void 0===l?"":l;pn&&t===In.current.getCurTab()&&!Co.current?(_n(!1),_.i.sendLog("closeVideoCard",{type:t,enter_method:i,enter_from_merge:C.vM()})):(_n(!0),_.i.sendLog("enterVideoCardTab",{from_group_id:Ce.groupId,type:t,enter_method:null!=i?i:"",enter_from_merge:C.vM()})),Co.current&&(Jn(!1),_.i.sendLog("expandVideoCard",{type:t,enter_method:null!=i?i:"",enter_from_merge:C.vM()})),null===(n=In.current)||void 0===n||null===(o=n.setTab)||void 0===o||o.call(n,t),vo(t)}),[pn,In,Co,Ce]),Lo=(0,W.l)({originAwemeInfo:Ce,awemeInfo:Tn,logParams:null==Ee?void 0:Ee.logParams,tagId:Io,curCard:(0,N._)(null===(E=In.current)||void 0===E?void 0:E.getCurTab()),expandCard:Qn?(0,N._)(null===(M=In.current)||void 0===M?void 0:M.getCurTab()):""}).reportParams,ko=(0,D.D)({reportParams:Lo,abTest:Je,originAwemeInfo:Ce,awemeInfo:Tn,updateVideoInfo:Vn,curCard:(0,N._)(null===(K=In.current)||void 0===K?void 0:K.getCurTab()),toast:rn,canShowMixCard:!0,canShowRelatedCard:!0,handleAvatarClick:function(e,n){var o=(n||{}).clickMethod;kn(w.L.Author),bo({tab:w.L.Author,clickMethod:"hot_key"===o?"hot_key":"click_icon"})},handleMixClick:function(){return bo({tab:w.L.Mix,clickMethod:"click_feed_bar"})},handleMusicClick:function(){return bo({tab:w.L.Music,clickMethod:"click_feed_bar"})},handleRelatedClick:function(){return bo({tab:w.L.Related,clickMethod:"click_feed_bar"})},handleHotClick:function(){return bo({tab:w.L.Hot,clickMethod:"click_feed_bar"})},isShowSideBar:yo,canShowRelatedSearchFeedBar:!0}),So=ko.relatedVideoConfig,Zo=ko.onAvatarClick,Eo=ko.onMusicClick,To=ko.moreConfig,xo=ko.relatedDefaultList,Ao=ko.relatedReqCount,Ro=ko.videoInfoTags;(0,s.useEffect)((function(){yo&&Gn(!0)}),[yo]);var Po=(0,Y.O)({player:oo,isActive:Le}).inImmersive,Mo=(0,R.OM)({selfUid:null==un||null===(Q=un.info)||void 0===Q?void 0:Q.uid,actionUid:null==Tn||null===(J=Tn.authorInfo)||void 0===J?void 0:J.uid,defaultFollowerStatus:null==Tn||null===($=Tn.authorInfo)||void 0===$?void 0:$.followerStatus,defaultFollowStatus:null==Tn||null===(ee=Tn.authorInfo)||void 0===ee?void 0:ee.followStatus,logExtraParams:Lo,isLogin:cn,accountParentEl:I.r()&&be,onLoginSuccess:function(){return null==dn?void 0:dn({type:"updateUserInfo"})},success:function(e){var n,o,t,l,r,a,u,d,c,s,v,m,f=e.logPb,h=e.action,g=e.clickFrom,p=void 0===g?"icon":g,w=e.beforeFollowStatus;"follow"===h?_.i.sendLog("follow",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==Tn||null===(n=Tn.authorInfo)||void 0===n?void 0:n.uid,group_id:null==Tn?void 0:Tn.awemeId,log_pb:f,enter_from:C.mo(),is_full_screen:I.r()?"1":"0",tab_name:y.getTabName()||b.Rs("tab_name")||"",click_method:p,from_group_id:null==Ce?void 0:Ce.awemeId,music_id:null==Tn||null===(o=Tn.music)||void 0===o?void 0:o.mid,compilation_id:null==Tn||null===(t=Tn.mixInfo)||void 0===t?void 0:t.mixId,tag_id:null===(l=In.current)||void 0===l||null===(r=l.getCurTopic)||void 0===r?void 0:r.call(l),aweme_type:null==Tn?void 0:Tn.awemeType,is_pure:Po?"1":"0",to_user_id:null==Tn||null===(a=Tn.authorInfo)||void 0===a?void 0:a.uid},Lo),{},{relation:String(w)})):_.i.sendLog("followCancel",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==Tn||null===(u=Tn.authorInfo)||void 0===u?void 0:u.uid,group_id:null==Tn?void 0:Tn.awemeId,log_pb:f,enter_from:C.mo(),is_full_screen:I.r()?"1":"0",tab_name:y.getTabName()||b.Rs("tab_name")||"",click_method:p,from_group_id:null==Ce?void 0:Ce.awemeId,music_id:null==Tn||null===(d=Tn.music)||void 0===d?void 0:d.mid,compilation_id:null==Tn||null===(c=Tn.mixInfo)||void 0===c?void 0:c.mixId,tag_id:null===(s=In.current)||void 0===s||null===(v=s.getCurTopic)||void 0===v?void 0:v.call(s),to_user_id:null==Tn||null===(m=Tn.authorInfo)||void 0===m?void 0:m.uid,is_pure:Po?"1":"0"},Lo),{},{relation:String(w)}))}}),Vo=Mo.follow,No=Mo.unFollow,Fo=(0,P.r)({selfUid:null==un||null===(ne=un.info)||void 0===ne?void 0:ne.uid,actionUid:null==Tn||null===(oe=Tn.authorInfo)||void 0===oe?void 0:oe.uid,defaultFollowerStatus:null==Tn||null===(te=Tn.authorInfo)||void 0===te?void 0:te.followerStatus,defaultFollowStatus:null==Tn||null===(le=Tn.authorInfo)||void 0===le?void 0:le.followStatus}).followStatus;(0,s.useEffect)((function(){Tn!==Ce&&xn(Ce),ao(g.O(Ce))}),[Ce]);var Bo=(0,s.useCallback)((function(e){return Vn({inComingAwemeInfo:e,card:"author_card"})}),[Vn]),Ho=(0,s.useCallback)((function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:F.Le.Related,o=(0,N._)(n);Vn({inComingAwemeInfo:e,card:o})}),[Vn]),Wo=(0,O.x)({awemeInfo:Tn}),Do=Wo.fetchComment,Oo=Wo.fetchReply,Uo=Wo.fetchCommentMention,Go=Wo.deleteCommentItem,qo=Wo.publishCommentItem,Xo=Wo.diggCommentItem,Yo=(0,s.useCallback)((function(e){var n=e||{},o=n.isShow,t=n.clickMethod,l=o;return fn((function(e){return"boolean"!=typeof o?(null==nn||nn(!e),e||Wn(!1),l=!e,!e):(null==nn||nn(o),o&&Wn(!1),o)})),l&&_.i.sendLog("enterVideoCardTab",{from_group_id:Ce.groupId,type:"comment",enter_method:"hot_key"===t?"hot_key":"click_icon",enter_from_merge:C.vM()}),l}),[nn]);(0,s.useEffect)((function(){_o.current&&(mn?po.current&&Jn(!0):po.current&&Jn(!1))}),[mn]),(0,s.useEffect)((function(){pn&&(Qn||Yo({isShow:!1})),po.current=pn,Co.current=Qn}),[pn,Yo,Qn]),(0,s.useEffect)((function(){p.emit(p.EVENT.feedVideoCardLocateCurrentVideo)}),[Qn]),(0,s.useEffect)((function(){var e,n;(null===(e=go.current)||void 0===e?void 0:e.awemeId)!==(null==Tn?void 0:Tn.awemeId)&&Le&&(null!=Tn&&Tn.awemeId&&null!==(n=go.current)&&void 0!==n&&n.awemeId&&p.emit(p.EVENT.videoChange),go.current=Tn,jn((function(e){var n,o=(null==Tn||null===(n=Tn.stats)||void 0===n?void 0:n.commentCount)||0;return o===e?"".concat(o):o})))}),[Tn,Le]),(0,s.useEffect)((function(){Ee.tab!==L.lT.Modal&&(en?(Wn(!1),fn(!0)):(Wn(!0),fn(!1)))}),[en,Ee.tab]),(0,s.useEffect)((function(){if(Le)return mn&&Wn(!1),function(){xn(Ce),Rn(null),An(null),_n(!1)}}),[Le]),(0,U.o)({refScrollEl:ho,changeNextVideo:Zn,changePrevVideo:En,swiper:Se,isActive:Le,player:null===(ie=Cn.current)||void 0===ie?void 0:ie.player});var jo=(0,s.useCallback)((function(){return Jn((function(e){return!e}))}),[]);(0,s.useEffect)((function(){var e=p.listen(p.EVENT.videoTitleClick,(function(e){var n,o,t,l,r;(null===(n=go.current)||void 0===n?void 0:n.awemeId)===e&&(x.Z.sendLog("clickAuthorHead",(0,i.Z)((0,i.Z)({click_from:"title",action:yo&&"author_card"===(null===(o=In.current)||void 0===o||null===(t=o.getCurTab)||void 0===t?void 0:t.call(o))?"close":"open",urlParamList:["previous_page"],author_id:null==Tn||null===(l=Tn.authorInfo)||void 0===l?void 0:l.uid,group_id:null==Tn?void 0:Tn.awemeId,log_pb:null==Tn?void 0:Tn.logPb,enter_from:C.mo(),is_full_screen:I.r()?"1":"0",from_follow_list:null!==(r=h.Le.getConfig(h.gI.FromFollowList))&&void 0!==r&&r.tag?"1":"0"},k.t()),Lo)),bo({tab:F.Le.Author,clickMethod:"click_title"}))}));return function(){null==e||e()}}),[Lo,Tn,bo,yo,so]),(0,s.useEffect)((function(){Tn&&(Le?p.emit(p.EVENT.postCurVideoInfo,{awemeId:null==Tn?void 0:Tn.awemeId,groupId:null==Tn?void 0:Tn.groupId,scene:null==Ee?void 0:Ee.tab,existedSuggestWords:null==Tn?void 0:Tn.suggestWords}):ke&&p.emit(p.EVENT.postCurVideoInfo,{awemeId:null==Tn?void 0:Tn.awemeId,groupId:null==Tn?void 0:Tn.groupId,scene:null==Ee?void 0:Ee.tab,existedSuggestWords:null==Tn?void 0:Tn.suggestWords,preload:!0}))}),[Tn,null==Ee?void 0:Ee.tab,Le,ke]);var zo=(0,s.useMemo)((function(){var e,n,o,t=[F.Le.Author];return Ge&&t.unshift(F.Le.CollectFolder),(null==Tn?void 0:Tn.awemeType)===S.ed.XgVideo&&t.push(F.Le.Related),null!=Tn&&null!==(e=Tn.mixInfo)&&void 0!==e&&e.mixId&&t.push(F.Le.Mix),null!=Tn&&Tn.hotList&&51!==(null==Tn||null===(n=Tn.hotList)||void 0===n?void 0:n.rank)&&2!==(null==Tn||null===(o=Tn.hotList)||void 0===o?void 0:o.type)&&t.push(F.Le.Hot),t}),[Tn,Ge]),Ko=(0,G.E)({awemeInfo:Tn,abtestData:Je,showRelatedTabList:zo,ctr:De,useCTR:"recommend"===(null==Ee?void 0:Ee.tab)}),Qo=Ko.defaultCard,Jo=Ko.videoTag,$o=new(u())([[F.Le.Mix,"\u5408\u96c6"],[F.Le.Hot,"\u70ed\u70b9"],[F.Le.Author,"TA\u7684\u4f5c\u54c1"],[F.Le.Comment,"\u8bc4\u8bba"],[F.Le.Related,"\u76f8\u5173\u63a8\u8350"],[F.Le.CollectFolder,"\u6536\u85cf\u5939"],["mix","\u5408\u96c6"],["hot","\u70ed\u70b9"],["related","\u76f8\u5173\u63a8\u8350"]]),et=(0,s.useMemo)((function(){return{isShow:!0,canHoverShowTitle:!0,title:$o.get(F.Le.CollectFolder),sideBarShow:yo,cardType:(0,N._)(w.L.CollectFolder),onClick:function(){bo({tab:F.Le.CollectFolder,clickMethod:"click_icon"})}}}),[yo,Qn,Qo,bo]);(0,s.useEffect)((function(){Jo&&Ce.awemeId===Tn.awemeId&&($n.current=Jo)}),[Jo]);var nt=(0,s.useMemo)((function(){return(null==Tn?void 0:Tn.awemeId)!==(null==Ce?void 0:Ce.awemeId)?[]:c()(Ro).call(Ro,(function(e){return e.type===$n.current&&"related"!==e.type}))}),[Ro,Jo,yo,pn]),ot=(0,s.useMemo)((function(){return{awemeInfo:Tn,onLoginGuideShowChange:function(e){wn.current=e},sense:"slider_video",onCloseClick:function(){},onCollapseClick:function(){},userContext:Ee.userContext,abtestData:null==Ee?void 0:Ee.abtestData,changeLoginStatus:function(){dn({type:"updateUserInfo"})},logParams:Lo}}),[Tn,Ee,dn,Lo]);return(0,s.useImperativeHandle)(n,(function(){return{getPlayer:function(){var e;return null===(e=Cn.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:_n,setIsShowRelatedCard:_n}}),[Le]),s.createElement(m.v.Provider,{value:{playerScene:null==Ee?void 0:Ee.tab,globalCommentCount:Yn,setGlobalCommentCount:jn,authorVideoCardClick:Bo,setNextAemeInfo:An,setPrevAwemeInfo:Rn,modalEnterFrom:Ue}},s.createElement("div",{"data-e2e":Le?"feed-active-video":"feed-video",className:T()(A.Z.playerCommentWrapper,Ve,{isMiniWindow:He})},s.createElement("div",{className:T()(A.Z.playerContainer,"playerContainer",(re={},(0,l.Z)(re,A.Z.isHavePlayer,Tn),(0,l.Z)(re,A.Z.isSafari,Z.G6()),re))},Ze,s.createElement("div",{className:T()(A.Z.playerWrap,"slider-video"),ref:function(e){Le?wo.current||(wo.current=e,tn(wo)):wo.current=null}},(null==Tn?void 0:Tn.debugInfo)&&s.createElement(f.W,{req:null==Tn||null===(ae=Tn.debugInfo)||void 0===ae?void 0:ae.web_debug_req,video:null==Tn||null===(ue=Tn.debugInfo)||void 0===ue?void 0:ue.client_rec_debug_info,size:{height:null==oo?void 0:oo._videoHeight,width:null==oo?void 0:oo._videoWidth},gear:null==Tn||null===(de=Tn.video)||void 0===de||null===(ce=de.bitRateList)||void 0===ce||null===(se=ce[0])||void 0===se?void 0:se.gearName,showPanelRightside:!0}),s.createElement(Me,(0,t.Z)({},e,{actionFollow:Vo,actionUnFollow:No,userInfo:un,dispatch:dn,awemeInfo:Tn,nextAwemeInfo:Mn,prevAwemeInfo:Pn,playNextFunc:Zn,playPrevFunc:En,deleteCurrentSwiper:ye,ref:Cn,toggleComment:Yo,onAvatarClick:Zo,logParams:(0,i.Z)((0,i.Z)({},Lo),{},{relation:String(Fo),is_click_cover:Number(Ce!==Tn)}),videoToast:rn,abtestData:null==Ee?void 0:Ee.abtestData,isFullScreen:on,isAuthorCardShow:!1,slideListInsideFunc:Pe,relatedVideoConfig:"collection_folder"===Ue?et:So,isShowRelatedCard:pn,onMusicClick:Eo,videoTags:nt,moreConfig:To,isInnerFeed:Nn,showMusicEntry:Ee.showTopicAndMusicCard,videoHashtagClassName:Ee.showTopicAndMusicCard?A.Z.linkHashTag:null,isTopicLinkSearchResult:!0,isShowGuide:Be,moreBoxShowList:(0,i.Z)((0,i.Z)({},Oe),{},{notInterestingIcon:!1!==(null==Oe?void 0:Oe.notInterestingIcon)&&!Nn,unfollow:null===(ve=null==Oe?void 0:Oe.unfollow)||void 0===ve||ve,report:null===(me=null==Oe?void 0:Oe.report)||void 0===me||me})}),s.createElement(V.x,{onPlayer:to})))),s.createElement("div",{id:"videoSideBar",className:T()(A.Z.sideBar,A.Z.sideBarDefaultWidth,(fe={},(0,l.Z)(fe,A.Z.sideBarHidden,!yo),(0,l.Z)(fe,A.Z.acCollapseSideBarWidth,!mn&&pn&&Qn),(0,l.Z)(fe,A.Z.acAndCommentSideBarWidth,mn&&pn&&Qn),(0,l.Z)(fe,A.Z.noTransition,!0),fe)),onWheel:function(e){return e.stopPropagation()},ref:ho},s.createElement("div",{className:T()(A.Z.sideBarCommentWrapper,(he={},(0,l.Z)(he,A.Z.sideBarInnerHidden,!mn),(0,l.Z)(he,A.Z.commentWithCollapse,pn&&Qn),(0,l.Z)(he,A.Z.hiddenWithBigCard,!mn),(0,l.Z)(he,A.Z.noTransition,!0),he))},(null===(ge=go.current)||void 0===ge?void 0:ge.awemeId)!==(null==Tn?void 0:Tn.awemeId)?null:!Hn&&Le&&s.createElement(j,{suggestWords:Tn.suggestWords,abtestData:null==Ee?void 0:Ee.abtestData,fullScreenTarget:be,isDetail:!1,isShowComment:mn,isTransition:Ae,total:0,onCloseCommentClick:Yo,awemeInfo:Tn,awemelogPb:null==Tn?void 0:Tn.logPb,userInfo:un,scrollContainerEl:null==ho?void 0:ho.current,player:oo,shortcutMode:null==Ee||null===(pe=Ee.abtestData)||void 0===pe?void 0:pe.shortcutMode,fetchComment:Do,fetchReply:Oo,fetchEmoticonGif:v.D2,fetchCommentMetionList:Uo,diggCommentItem:Xo,deleteCommentItem:Go,puhlishCommentItem:qo,count:20,defaultCommentList:Qe&&(null==We?void 0:We.comments)||[],defaultCursor:Qe&&(null==We?void 0:We.cursor)||0,defaultHotsoonHasMoreRef:Qe&&(null==We?void 0:We.hotsoonHasMore)||0,defaultHasMore:!Qe||(null==We?void 0:We.hasMore),defaultStatusCode:Qe&&(null==We?void 0:We.statusCode)||0,defaultCommentId:null==Ee?void 0:Ee.insertCommentId,isNeedCommentInput:!0,changeLoginStatus:function(){return dn({type:"updateUserInfo"})},reportExtraParams:(0,i.Z)({},Lo)})),zo.length>0&&s.createElement("div",{className:T()(A.Z.sideBarInnerWrapper,A.Z.authorCard,(_e={},(0,l.Z)(_e,A.Z.sideBarInnerHidden,!pn),(0,l.Z)(_e,A.Z.authorCardCollapse,Qn),(0,l.Z)(_e,A.Z.noTransition,!0),_e))},s.createElement(z,{isLogin:cn,ref:In,collapse:Qn,isShow:pn,scene:"recommend",awemeInfo:Tn,originFeedAwemeInfo:Ce,handleClose:fo,isRender:Un,customProps:Ee,showLookRelatedType:F.no.MergeAuthor,abtestData:Je,logParams:Lo,handleCollapse:jo,userContext:Ee.userContext,handleRelatedVideoChange:Ho,defaultList:xo,relatedReqCount:Ao,tab:Ln||Qo,showTabList:zo,defaultTopicData:ro,relatedAuthorConfig:ot,defaultHotData:mo,onTabChange:function(e){vo(e)},collectFolderId:qe,collectionFolderInfo:Xe})),s.createElement("div",{className:A.Z.sideBarBackground}))))}var Q=(0,s.forwardRef)(K)},37525:function(e,n,o){o.d(n,{i:function(){return ue}});var t=o(68671),l=o(29588),i=o(41257),r=o(11789),a=o(10396),u=o.n(a),d=o(11235),c=o.n(d),s=o(23947),v=o.n(s),m=o(63862),f=o.n(m),h=o(21528),g=o(1384),p=o(4158),_=o(3616),C=o(30234),w=o(41122),I=o(42457),y=o(73824),b=o(88263),L=o(53549),k=o(86358),S=o(21144),Z=o(18653),E=o(59013),T=o(24206),x=o(66870),A=o(47999),R=o(76944),P=o(70335),M=o.n(P),V=o(54748),N=o(39960),F=o(94344),B=o(26195),H=o(86164),W=o(98821),D=o(79876),O=o(46407),U=o(70333),G=o(86230),q=o(87500),X=o(25955),Y=o(52974),j=o(18881),z=o(93506),K=o(8395),Q=o(81536),J=o(33238),$=o(97921),ee=o(68037),ne=o(9187),oe=o(24713),te=o(72850),le=o(26856),ie=o(82496),re=(0,W.default)({resolved:{},chunkName:function(){return"RelatedVideoCard"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(7345),o.e(640),o.e(2519)]).then(o.bind(o,56910))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 56910}},{ssr:!1});function ae(e,n){var o,a,d,s,m,P,W,ae,ue,de,ce,se,ve,me,fe,he,ge,pe,_e,Ce,we,Ie,ye,be,Le,ke,Se,Ze,Ee,Te,xe,Ae,Re,Pe,Me,Ve,Ne,Fe,Be,He,We,De,Oe,Ue,Ge,qe,Xe=e.item,Ye=e.playPrevFunc,je=e.playNextFunc,ze=e.deleteCurrentSwiper,Ke=e.fullScreenTarget,Qe=e.isActive,Je=e.isNext,$e=e.swiper,en=e.children,nn=e.customProps,on=e.isLast,tn=e.isTransition,ln=void 0!==tn&&tn,rn=e.handleNextOnLast,an=e.slideListInsideFunc,un=e.InnerPlayer,dn=e.className,cn=e.isShowGuide,sn=e.isClientMiniWin,vn=e.style,mn=e.isModal,fn=void 0!==mn&&mn,hn=e.close,gn=e.hotDefaultList,pn=e.mixDefault,_n=e.relatedDefault,Cn=e.currentAwemeInfo,wn=e.ctr,In=e.clickedCard,yn=e.moreBoxShowList,bn=e.getCurrentTime,Ln=e.modalEnterFrom,kn=(0,h.useContext)($.Cv),Sn=kn.globalIsSideBarShow,Zn=kn.setIsSideBarShowFunc,En=kn.isFullScreen,Tn=kn.isCssFullScreen,xn=kn.setTargetVideoRef,An=kn.slideVideoTab,Rn=kn.videoToast,Pn=(0,h.useState)(!0),Mn=(0,r.Z)(Pn,2),Vn=Mn[0],Nn=Mn[1],Fn=function(e){fn?Nn(e):((0,le.K)({isShowCard:e,abVal:Dn.lookUiAdapter}),Zn(e))},Bn=fn?Vn:Sn,Hn=(0,h.useRef)(!1),Wn=fn||"modal"===(null==nn?void 0:nn.tab)?function(e){return F.F.info(e)}:Rn,Dn=(nn||{}).abtestData,On=nn.userContext||{},Un=On.userInfo,Gn=On.dispatch,qn=(Un||{}).isLogin,Xn=(0,h.useState)(In||U.Le.Author),Yn=(0,r.Z)(Xn,2),jn=Yn[0],zn=Yn[1],Kn=(0,h.useState)(jn),Qn=(0,r.Z)(Kn,2),Jn=Qn[0],$n=Qn[1],eo=(0,h.useRef)(null),no=(0,h.useRef)(!1),oo=(0,h.useRef)(null),to=(0,h.useMemo)((function(){var e,n="circle";if(!u()(e=[C.RelatedVideoEntryABVal.TopRight,C.RelatedVideoEntryABVal.TopRightHover]).call(e,null==Dn?void 0:Dn.relatedVideoEntry))return Dn.relatedVideoEntry===C.RelatedVideoEntryABVal.Center&&(n="rectangle"),n}),[]),lo=(0,h.useState)(!1),io=(0,r.Z)(lo,2),ro=io[0],ao=io[1],uo=(0,h.useState)(null),co=(0,r.Z)(uo,2),so=co[0],vo=co[1],mo=(0,h.useState)(null),fo=(0,r.Z)(mo,2),ho=fo[0],go=fo[1],po=(0,h.useState)(!1),_o=(0,r.Z)(po,2),Co=_o[0],wo=_o[1],Io=(0,h.useRef)(null),yo=(0,h.useRef)(null===(o=oo.current)||void 0===o||null===(a=o.getCurTab)||void 0===a?void 0:a.call(o)),bo=(0,h.useRef)(""),Lo=(0,h.useRef)(Bn),ko=(0,h.useRef)(!1),So=(0,h.useRef)(In||U.Le.Author);((0,h.useEffect)((function(){var e,n;ko.current?Qe&&Bn&&ao(!0):n=c()((function(){Qe&&Bn&&ao(!0)}),3e3);var o=function(){ko.current=!0,clearTimeout(n),Bn&&ao(!0)};return null==so||null===(e=so.on)||void 0===e||e.call(so,oe.CANPLAY,o),function(){var e;null==so||null===(e=so.off)||void 0===e||e.call(so,oe.CANPLAY,o),clearTimeout(n)}}),[so,Qe,Bn]),u()(d=[U.Le.Author,U.Le.Hot,U.Le.Mix,U.Le.Related]).call(d,null===(s=oo.current)||void 0===s||null===(m=s.getCurTab)||void 0===m?void 0:m.call(s)))&&(yo.current=null===(Ge=oo.current)||void 0===Ge||null===(qe=Ge.getCurTab)||void 0===qe?void 0:qe.call(Ge));(0,h.useEffect)((function(){if(fn&&so){var e=null==bn?void 0:bn(),n=function(){e&&so.seek(e,"play")};return so.once("canplay",n),function(){so.off("canplay",n)}}}),[so]);var Zo=(0,h.useRef)(null),Eo=(0,G.M)({player:null===(P=eo.current)||void 0===P?void 0:P.player,originAwemeInfo:Cn||Xe,isActive:Qe,isLast:on,isLogin:qn,isShowAuthorCardLoginGuide:no.current,toast:Wn,curCard:(0,O._)(null===(W=oo.current)||void 0===W||null===(ae=W.getCurTab)||void 0===ae?void 0:ae.call(W)),handleNextOnLast:rn,handleOuterPlayNext:je,handleOuterPlayPrev:Ye,isInnerFeedCondition:fn,reportParams:fn?{enter_from:yo.current}:{}}),To=Eo.changeNextVideo,xo=Eo.changePrevVideo,Ao=Eo.awemeInfo,Ro=Eo.setAwemeInfo,Po=Eo.setNextAwemeInfo,Mo=Eo.setPrevAwemeInfo,Vo=Eo.prevAwemeInfo,No=Eo.nextAwemeInfo,Fo=Eo.updateInnerVideoInfo,Bo=Eo.isInnerFeed,Ho=(0,h.useState)(w.O(Ao)),Wo=(0,r.Z)(Ho,2),Do=Wo[0],Oo=Wo[1],Uo=(0,h.useRef)(Ao),Go=(0,h.useState)((null==Ao||null===(ue=Ao.stats)||void 0===ue?void 0:ue.commentCount)||0),qo=(0,r.Z)(Go,2),Xo=qo[0],Yo=qo[1],jo=(0,q.$)({awemeInfo:Ao}).hotData,zo=(0,h.useMemo)((function(){var e,n;return null===(e=oo.current)||void 0===e||null===(n=e.getCurTopic)||void 0===n?void 0:n.call(e)}),[oo.current]),Ko=(0,h.useCallback)((function(e){var n,o,t,l,i,r,a=e.tab,d=e.clickMethod,c=void 0===d?"":d,s=e.isEnterModal,v=void 0===s||s;(fn||Bn||!u()(n=[U.Le.Author,U.Le.Mix,U.Le.Hot]).call(n,a)||Dn.newLookRelated!==C.LookRelatedABValV2.ModalFrameFast)&&(Bn&&a===(null===(i=oo.current)||void 0===i||null===(r=i.getCurTab)||void 0===r?void 0:r.call(i))?(Fn(!1),Lo.current=!1,I.i.sendLog("closeVideoCard",{type:a,enter_method:c,enter_from_merge:y.vM()})):(Fn(!0),Lo.current=!0,I.i.sendLog("enterVideoCardTab",{from_group_id:Xe.groupId,type:a,enter_method:c,enter_from_merge:y.vM()})));null===(o=oo.current)||void 0===o||null===(t=o.setTab)||void 0===t||t.call(o,a),$n(a),So.current=a,!fn&&!Bn&&u()(l=[U.Le.Author,U.Le.Mix,U.Le.Hot]).call(l,a)&&v&&Dn.newLookRelated===C.LookRelatedABValV2.ModalFrameFast&&go(Ao)}),[Bn,Ao,fn,Dn]);(0,h.useEffect)((function(){var e;return Bn&&(e=c()((function(){return b.emit(b.EVENT.feedVideoCardLocateCurrentVideo)}),0)),b.emit(b.EVENT.changeVideoSideBar,{isShowLookRelated:Bn}),function(){clearTimeout(e)}}),[Bn]);var Qo=new(v())([[U.Le.Mix,"\u5408\u96c6"],[U.Le.Hot,"\u70ed\u70b9"],[U.Le.Author,"TA\u7684\u4f5c\u54c1"],[U.Le.Comment,"\u8bc4\u8bba"],[U.Le.Related,"\u76f8\u5173\u63a8\u8350"],["mix","\u5408\u96c6"],["hot","\u70ed\u70b9"],["related","\u76f8\u5173\u63a8\u8350"]]),Jo=(0,X.l)({originAwemeInfo:Xe,awemeInfo:Ao,logParams:null==nn?void 0:nn.logParams,tagId:zo,curCard:(0,O._)(null===(de=oo.current)||void 0===de?void 0:de.getCurTab()),expandCard:Bn?(0,O._)(null===(ce=oo.current)||void 0===ce?void 0:ce.getCurTab()):"",isSideBarShow:Lo.current}).reportParams,$o=(0,Y.D)({reportParams:Jo,originAwemeInfo:Xe,awemeInfo:Ao,canShowMixCard:!0,canShowRelatedCard:!0,updateVideoInfo:Fo,curCard:(0,O._)(null===(se=oo.current)||void 0===se?void 0:se.getCurTab()),toast:Wn,handleAvatarClick:function(e,n){var o=(n||{}).clickMethod;Ko({tab:U.Le.Author,clickMethod:"hot_key"===o?"hot_key":"click_icon"})},handleMixClick:function(){return Ko({tab:U.Le.Mix,clickMethod:"click_feed_bar"})},handleMusicClick:function(){return Ko({tab:U.Le.Music,clickMethod:"click_feed_bar"})},handleRelatedClick:function(){return Ko({tab:U.Le.Related,clickMethod:"click_feed_bar"})},handleHotClick:function(){return Ko({tab:U.Le.Hot,clickMethod:"click_feed_bar"})},isShowSideBar:Lo.current,canShowRelatedSearchFeedBar:!0,relatedVideoEntryIsShow:u()(ve=[C.RelatedVideoEntryABVal.TopRight,C.RelatedVideoEntryABVal.TopRightHover]).call(ve,null==Dn?void 0:Dn.relatedVideoEntry),isCanHoverRelatedVideoEntry:C.RelatedVideoEntryABVal.TopRightHover===(null==Dn?void 0:Dn.relatedVideoEntry),isMiniWin:Co}),et=$o.relatedVideoConfig,nt=$o.onAvatarClick,ot=$o.onMusicClick,tt=$o.moreConfig,lt=$o.relatedDefaultList,it=$o.relatedReqCount,rt=$o.videoInfoTags,at=(0,ne.O)({player:so,isActive:Qe}).inImmersive,ut=(0,B.OM)({selfUid:null==Un||null===(me=Un.info)||void 0===me?void 0:me.uid,actionUid:null==Ao||null===(fe=Ao.authorInfo)||void 0===fe?void 0:fe.uid,defaultFollowerStatus:null==Ao||null===(he=Ao.authorInfo)||void 0===he?void 0:he.followerStatus,defaultFollowStatus:null==Ao||null===(ge=Ao.authorInfo)||void 0===ge?void 0:ge.followStatus,logExtraParams:Jo,isLogin:qn,accountParentEl:L.r()&&Ke,onLoginSuccess:function(){return null==Gn?void 0:Gn({type:"updateUserInfo"})},success:function(e){var n,o,t,l,r,a,u,d,c,s,v,m,f=e.logPb,h=e.action,g=e.clickFrom,p=void 0===g?"icon":g,_=e.beforeFollowStatus;"follow"===h?I.i.sendLog("follow",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==Ao||null===(n=Ao.authorInfo)||void 0===n?void 0:n.uid,group_id:null==Ao?void 0:Ao.awemeId,log_pb:f,enter_from:y.mo(),is_full_screen:L.r()?"1":"0",tab_name:k.getTabName()||S.Rs("tab_name")||"",click_method:p,from_group_id:null==Xe?void 0:Xe.awemeId,music_id:null==Ao||null===(o=Ao.music)||void 0===o?void 0:o.mid,compilation_id:null==Ao||null===(t=Ao.mixInfo)||void 0===t?void 0:t.mixId,tag_id:null===(l=oo.current)||void 0===l||null===(r=l.getCurTopic)||void 0===r?void 0:r.call(l),aweme_type:null==Ao?void 0:Ao.awemeType,is_pure:at?"1":"0",to_user_id:null==Ao||null===(a=Ao.authorInfo)||void 0===a?void 0:a.uid},Jo),{},{relation:String(_)})):I.i.sendLog("followCancel",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==Ao||null===(u=Ao.authorInfo)||void 0===u?void 0:u.uid,group_id:null==Ao?void 0:Ao.awemeId,log_pb:f,enter_from:y.mo(),is_full_screen:L.r()?"1":"0",tab_name:k.getTabName()||S.Rs("tab_name")||"",click_method:p,from_group_id:null==Xe?void 0:Xe.awemeId,music_id:null==Ao||null===(d=Ao.music)||void 0===d?void 0:d.mid,compilation_id:null==Ao||null===(c=Ao.mixInfo)||void 0===c?void 0:c.mixId,tag_id:null===(s=oo.current)||void 0===s||null===(v=s.getCurTopic)||void 0===v?void 0:v.call(s),to_user_id:null==Ao||null===(m=Ao.authorInfo)||void 0===m?void 0:m.uid,is_pure:at?"1":"0"},Jo),{},{relation:String(_)}))}}),dt=ut.follow,ct=ut.unFollow,st=(0,H.r)({selfUid:null==Un||null===(pe=Un.info)||void 0===pe?void 0:pe.uid,actionUid:null==Ao||null===(_e=Ao.authorInfo)||void 0===_e?void 0:_e.uid,defaultFollowerStatus:null==Ao||null===(Ce=Ao.authorInfo)||void 0===Ce?void 0:Ce.followerStatus,defaultFollowStatus:null==Ao||null===(we=Ao.authorInfo)||void 0===we?void 0:we.followStatus}).followStatus;(0,h.useEffect)((function(){Oo(w.O(Xe))}),[Xe]);var vt=(0,h.useCallback)((function(e){fn?Fo({inComingAwemeInfo:e,card:"author_card"}):go(e)}),[Fo,fn]),mt=(0,h.useCallback)((function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:U.Le.Related;if(fn){var o=(0,O._)(n);Fo({inComingAwemeInfo:e,card:o})}else go(e)}),[Fo,fn,Dn]),ft=(0,j.x)({awemeInfo:Ao}),ht=ft.fetchComment,gt=ft.fetchReply,pt=ft.fetchCommentMention,_t=ft.deleteCommentItem,Ct=ft.publishCommentItem,wt=ft.diggCommentItem,It=(0,h.useCallback)((function(e){var n=(e||{}).clickMethod;return Ko({tab:U.Le.Comment,clickMethod:"hot_key"===n?"hot_key":"click_icon"}),Lo.current}),[oo.current,Bn,Ko]);(0,h.useEffect)((function(){var e,n;(null===(e=Uo.current)||void 0===e?void 0:e.awemeId)!==(null==Ao?void 0:Ao.awemeId)&&Qe&&(null!=Ao&&Ao.awemeId&&null!==(n=Uo.current)&&void 0!==n&&n.awemeId&&b.emit(b.EVENT.videoChange),Uo.current=Ao,Yo((function(e){var n,o=(null==Ao||null===(n=Ao.stats)||void 0===n?void 0:n.commentCount)||0;return o===e?"".concat(o):o})))}),[Ao,Qe]),(0,h.useEffect)((function(){if(Qe)return function(){Ro(Xe),Mo(null),Po(null)}}),[Qe]),(0,z.o)({refScrollEl:Io,changeNextVideo:To,changePrevVideo:xo,swiper:$e,isActive:Qe&&!ho||fn,player:null===(Ie=eo.current)||void 0===Ie?void 0:Ie.player}),(0,h.useEffect)((function(){var e=b.listen(b.EVENT.videoTitleClick,(function(e){var n,o,t;(null===(n=Uo.current)||void 0===n?void 0:n.awemeId)===e&&(Ko({tab:U.Le.Author,clickMethod:"click_title"}),V.Z.sendLog("clickAuthorHead",(0,i.Z)((0,i.Z)({click_from:"title",urlParamList:["previous_page"],author_id:null==Ao||null===(o=Ao.authorInfo)||void 0===o?void 0:o.uid,group_id:null==Ao?void 0:Ao.awemeId,log_pb:null==Ao?void 0:Ao.logPb,enter_from:y.mo(),is_full_screen:L.r()?"1":"0",from_follow_list:null!==(t=Z.Le.getConfig(Z.gI.FromFollowList))&&void 0!==t&&t.tag?"1":"0"},Jo),{},{action:Lo.current?"open":"close"},E.t())))}));return function(){null==e||e()}}),[Jo,Ao,Ko,Jn]),(0,h.useEffect)((function(){Ao&&(Qe?b.emit(b.EVENT.postCurVideoInfo,{awemeId:null==Ao?void 0:Ao.awemeId,groupId:null==Ao?void 0:Ao.groupId,scene:null==nn?void 0:nn.tab,existedSuggestWords:null==Ao?void 0:Ao.suggestWords}):Je&&b.emit(b.EVENT.postCurVideoInfo,{awemeId:null==Ao?void 0:Ao.awemeId,groupId:null==Ao?void 0:Ao.groupId,scene:null==nn?void 0:nn.tab,existedSuggestWords:null==Ao?void 0:Ao.suggestWords,preload:!0}))}),[Ao,null==nn?void 0:nn.tab,Qe,Je]);var yt=(0,h.useMemo)((function(){var e,n,o,t,l,i,r,a=[U.Le.Comment];return(null==Ao?void 0:Ao.awemeType)!==(null==T?void 0:x.ed.XgVideo)&&a.unshift(U.Le.Author),(jn===U.Le.Related&&!oo.current||(null===(e=oo.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e))===U.Le.Related||yo.current===U.Le.Related&&(null===(o=oo.current)||void 0===o||null===(t=o.getCurTab)||void 0===t?void 0:t.call(o))===U.Le.Comment)&&(bo.current=Ao.awemeId),null!=Ao&&null!==(l=Ao.mixInfo)&&void 0!==l&&l.mixId&&a.push(U.Le.Mix),null!=Ao&&Ao.hotList&&51!==(null==Ao||null===(i=Ao.hotList)||void 0===i?void 0:i.rank)&&2!==(null==Ao||null===(r=Ao.hotList)||void 0===r?void 0:r.type)&&a.push(U.Le.Hot),a}),[Ao]),bt=(0,K.E)({awemeInfo:Ao,abtestData:Dn,showRelatedTabList:yt,ctr:wn}),Lt=bt.defaultCard,kt=bt.videoTag,St=(0,h.useMemo)((function(){return fn?[]:f()(rt).call(rt,(function(e){return e.type===kt&&"related"!==e.type}))}),[rt,kt,Ao,Xe]);(0,h.useEffect)((function(){if(!fn){var e=An===U.Le.Comment?U.Le.Comment:Lt;zn(e)}}),[Qe,An]);var Zt=(0,h.useMemo)((function(){return{awemeInfo:Ao,onLoginGuideShowChange:function(e){no.current=e},sense:"slider_video",onCloseClick:function(){},onCollapseClick:function(){},userContext:nn.userContext,abtestData:null==nn?void 0:nn.abtestData,changeLoginStatus:function(){Gn({type:"updateUserInfo"})},logParams:Jo}}),[Ao,nn,Gn,Jo]),Et={abtestData:null==nn?void 0:nn.abtestData,fullScreenTarget:Ke,isDetail:!1,isShowComment:(null==oo||null===(ye=oo.current)||void 0===ye?void 0:ye.getCurTab())===U.Le.Comment,isTransition:ln,total:0,onCloseCommentClick:It,awemeInfo:Ao,awemelogPb:null==Ao?void 0:Ao.logPb,userInfo:Un,scrollContainerEl:null==Io?void 0:Io.current,player:so,shortcutMode:null==nn||null===(be=nn.abtestData)||void 0===be?void 0:be.shortcutMode,fetchComment:ht,fetchReply:gt,fetchEmoticonGif:g.D2,fetchCommentMetionList:pt,diggCommentItem:wt,deleteCommentItem:_t,puhlishCommentItem:Ct,count:20,defaultommentList:[],defaultCursor:0,defaultHotsoonHasMoreRef:0,defaultHasMore:!0,defaultStatusCode:0,defaultCommentId:null==nn?void 0:nn.insertCommentId,isNeedCommentInput:!0,changeLoginStatus:function(){return Gn({type:"updateUserInfo"})},reportExtraParams:(0,i.Z)((0,i.Z)({},Jo),{},{relation:String(st)})};(0,h.useImperativeHandle)(n,(function(){return{getPlayer:function(){var e;return null===(e=eo.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:Fn,setIsShowRelatedCard:Fn,getCurTab:function(){var e;return null==oo||null===(e=oo.current)||void 0===e?void 0:e.getCurTab()}}}),[Qe]),(0,h.useEffect)((function(){if(Qe&&Hn.current){fn?(Tn&&Fn(!0),En&&Fn(!0),Tn||En||Fn(!0)):(Tn&&Fn(false),En&&Fn(!1),Tn||En||Fn(false))}}),[En,Tn]),(0,h.useEffect)((function(){!ho&&Qe&&Hn.current&&(En||Tn)&&Fn(!1)}),[ho]),(0,h.useEffect)((function(){var e=b.listen(b.EVENT.triggerModalPlayerClose,(function(){var e;return null==hn?void 0:hn("click_button",null===(e=oo.current)||void 0===e?void 0:e.getCurTab())}));return function(){null==e||e()}}),[]),(0,h.useEffect)((function(){var e=b.listen(b.EVENT.changeMinWindows,(function(e){var n=e.isMiniWin;wo(n)}));return function(){return e()}}),[]),(0,h.useEffect)((function(){Hn.current=!0}),[]);var Tt=(null==Dn||null===(Le=Dn.danmaku)||void 0===Le?void 0:Le.douyin_danmaku)||(null==Dn||null===(ke=Dn.backendAbTest)||void 0===ke||null===(Se=ke.douyin)||void 0===Se?void 0:Se.douyin_danmaku)||!1;return h.createElement(h.Fragment,null,h.createElement(p.v.Provider,{value:{playerScene:null==nn?void 0:nn.tab,globalCommentCount:Xo,setGlobalCommentCount:Yo,authorVideoCardClick:vt,setNextAemeInfo:Po,setPrevAwemeInfo:Mo,modalEnterFrom:Ln}},h.createElement("div",{"data-e2e":Qe?"feed-active-video":"feed-video","data-e2e-vid":Ao.awemeId,id:fn?"slideMode":"sliderVideo",className:M()(N.Z.playerCommentWrapper,dn,(Ze={isMiniWindow:sn},(0,l.Z)(Ze,N.Z.isFullScreen,En),(0,l.Z)(Ze,N.Z.inOutFeed,!fn),(0,l.Z)(Ze,N.Z.miniWidth,Bn),(0,l.Z)(Ze,"relatedUiAdapter",Dn.lookUiAdapter!==C.LookUiAdapter.Default),(0,l.Z)(Ze,N.Z.adapterThird,Dn.lookUiAdapter===C.LookUiAdapter.Third),(0,l.Z)(Ze,N.Z.adapterSeventh,Dn.lookUiAdapter===C.LookUiAdapter.Seventh),Ze)),style:vn},h.createElement("div",{className:M()(N.Z.playerContainer,"playerContainer",(Ee={},(0,l.Z)(Ee,N.Z.isHavePlayer,Ao),(0,l.Z)(Ee,N.Z.isSafari,A.G6()),(0,l.Z)(Ee,N.Z.showSideBar,Bn),(0,l.Z)(Ee,N.Z.noTransition,!Bn),Ee))},en,h.createElement("div",{className:M()(N.Z.playerWrap,"slider-video"),ref:function(e){Qe?Zo.current||(Zo.current=e,xn(Zo)):Zo.current=null}},(null==Ao?void 0:Ao.debugInfo)&&h.createElement(_.W,{req:null==Ao||null===(Te=Ao.debugInfo)||void 0===Te?void 0:Te.web_debug_req,video:null==Ao||null===(xe=Ao.debugInfo)||void 0===xe?void 0:xe.client_rec_debug_info,size:{height:null==so?void 0:so._videoHeight,width:null==so?void 0:so._videoWidth},gear:null==Ao||null===(Ae=Ao.video)||void 0===Ae||null===(Re=Ae.bitRateList)||void 0===Re||null===(Pe=Re[0])||void 0===Pe?void 0:Pe.gearName,showPanelRightside:!0}),h.createElement(un,(0,t.Z)({},e,{actionFollow:dt,actionUnFollow:ct,userInfo:Un,dispatch:Gn,awemeInfo:Ao,nextAwemeInfo:No,prevAwemeInfo:Vo,videoTags:St,isInnerFeed:Bo,playNextFunc:To,playPrevFunc:xo,deleteCurrentSwiper:ze,ref:eo,toggleComment:It,onAvatarClick:nt,logParams:(0,i.Z)((0,i.Z)({},Jo),{},{relation:String(st),is_click_cover:Number(fn||Xe!==Ao),enter_from:fn?yo.current:null==Jo?void 0:Jo.enter_from}),videoToast:Wn,abtestData:null==nn?void 0:nn.abtestData,isFullScreen:En,isAuthorCardShow:!1,slideListInsideFunc:an,relatedVideoConfig:(0,i.Z)((0,i.Z)({},et),{},{sideBarShow:Bn,cardType:yo.current||Lt,onClick:function(){var e,n;Bn?(Fn(!1),I.i.sendLog("closeVideoCard",{type:(null===(e=oo.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e))||Lt,enter_from_merge:y.vM(),enter_method:"click_card_entrance"})):(Fn(!0),Dn.newLookRelated!==C.LookRelatedABValV2.ModalFrameFast?Ko({tab:yo.current||Lt,clickMethod:"click_card_entrance"}):Ko({tab:yo.current||Lt,clickMethod:"click_card_entrance",isEnterModal:!1}))},title:Qo.get(yo.current||Lt)}),isShowRelatedCard:fn,onMusicClick:ot,moreConfig:tt,showMusicEntry:nn.showTopicAndMusicCard,videoHashtagClassName:nn.showTopicAndMusicCard?N.Z.linkHashTag:null,isTopicLinkSearchResult:!0,isShowGuide:cn,showPlaySwitch:Tn||En||!1,moreBoxShowList:(0,i.Z)((0,i.Z)({},yn),{},{notInterestingIcon:!Bo&&(null==Xe?void 0:Xe.awemeId)===(null==Ao?void 0:Ao.awemeId),unfollow:!0,report:!0}),shortCutFiltered:(null==Xe?void 0:Xe.awemeId)!==(null==Ao?void 0:Ao.awemeId)||fn?[R.getShortcut().dislike.key]:[],positionBoxClassName:{right:A.vU()&&(null==Ao?void 0:Ao.awemeType)===x.ed.Normal||Bn?null:N.Z.interactionPos}}),h.createElement(D.x,{onPlayer:vo}))),Boolean(to)&&(null==Ao?void 0:Ao.awemeType)!==x.ed.XgVideo&&h.createElement(te._,{onClick:function(){var e,n;Fn(!0),Lo.current=!0,I.i.sendLog("enterVideoCardTab",{from_group_id:Xe.groupId,type:null===(e=oo.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e),enter_method:"click_card_entrance",enter_from_merge:y.vM()})},className:M()(N.Z.btn,(0,l.Z)({},N.Z.hide,Bn||Co)),type:to})),h.createElement("div",{id:"videoSideBar",className:M()(N.Z.sideBar,N.Z.sideBarDefaultWidth,"isDark",(Me={},(0,l.Z)(Me,N.Z.sideBarHidden,!Bn),(0,l.Z)(Me,N.Z.noTransition,!Bn),Me)),onWheel:function(e){return e.stopPropagation()},ref:Io},h.createElement("div",{className:M()(N.Z.sideBarInnerWrapper,N.Z.relatedVertical,(Ve={},(0,l.Z)(Ve,N.Z.sideBarInnerHidden,!Bn),(0,l.Z)(Ve,N.Z.inFullScreen,Tn||En),Ve))},h.createElement(re,{ref:oo,collapse:!1,scene:"recommend",isShow:Bn,awemeInfo:Ao,originFeedAwemeInfo:Xe,isRender:ro,isActive:Qe,showLookRelatedType:U.no.MergeAll,customProps:nn,abtestData:Dn,userContext:nn.userContext,handleRelatedVideoChange:mt,defaultList:lt,relatedReqCount:it,tab:(null==Ao?void 0:Ao.awemeType)===x.ed.XgVideo?U.Le.Comment:jn,showTabList:yt,defaultTopicData:Do,relatedAuthorConfig:Zt,relatedCommentConfig:Et,defaultHotData:jo,hotDefaultList:gn,mixDefault:pn,relatedDefault:_n,onTabChange:function(e){$n(e)}})),to&&(null==Ao?void 0:Ao.awemeType)!==x.ed.XgVideo&&h.createElement(te._,{className:M()(N.Z.btn,N.Z.putBtn,(0,l.Z)({},N.Z.hide,!Bn)),onClick:function(){var e,n;Fn(!1),Lo.current=!1,I.i.sendLog("closeVideoCard",{type:null===(e=oo.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e),enter_from_merge:y.vM(),enter_method:"click_card_entrance"})},type:to})),h.createElement(Q._,{awemeInfo:Ao,showImg:!1,className:N.Z.bigBackgroundImg,controlHeight:(0,ie.L)({hasDanmakuStyle:Tt,changePlayerHeight:null==Dn||null===(Ne=Dn.playerControl)||void 0===Ne?void 0:Ne.height})}))),fn&&!(En||Tn)&&h.createElement(ee.I,{playNextFunc:function(){return To(undefined,{from:"click_button"})},playPrevFunc:function(){return xo(undefined,{from:"click_button"})},disableNext:!No,disablePrev:!Vo,style:{position:"absolute",left:(document.body.clientWidth-vn.width)/2+vn.width+24,top:document.body.clientHeight/2-40}}),ho&&h.createElement(J.Z,(0,t.Z)({},e,{close:function(e,n){V.Z.sendLog("closePlayer",{click_method:e,enter_from:n});var o=e;"click_screen"===e&&(o="click_blank"),I.i.sendLog("closeVideoCard",{enter_method:o,type:n,enter_from_merge:y.vM()}),go(null)},item:Xe,getCurrentTime:function(){return ho.awemeId===Xe.awemeId?so.currentTime:null},clickedCard:ro?null==oo||null===(Fe=oo.current)||void 0===Fe?void 0:Fe.getCurTab():So.current,hotDefaultList:(null==oo||null===(Be=oo.current)||void 0===Be?void 0:Be.getCurTab())===U.Le.Hot?null==oo||null===(He=oo.current)||void 0===He?void 0:He.getHotDefaultList():null,mixDefault:(null==oo||null===(We=oo.current)||void 0===We?void 0:We.getCurTab())===U.Le.Mix?null==oo||null===(De=oo.current)||void 0===De?void 0:De.getMixDefaultParam():null,relatedDefault:(null==oo||null===(Oe=oo.current)||void 0===Oe?void 0:Oe.getCurTab())===U.Le.Related?null==oo||null===(Ue=oo.current)||void 0===Ue?void 0:Ue.getRelatedDefaultParam():null,currentAwemeInfo:ho,isActive:!0})))}var ue=(0,h.forwardRef)(ae)},33238:function(e,n,o){o.d(n,{Z:function(){return X}});var t,l,i=o(68671),r=o(41257),a=o(29588),u=o(11789),d=o(10396),c=o.n(d),s=o(24514),v=o.n(s),m=o(54882),f=o.n(m),h=o(21528),g=o(77060),p=o(70335),_=o.n(p),C=o(37525),w=o(39338),I=o(97921),y="cu4637EW",b="N_pbezMl",L="T0jvaw1C",k="xGLChQgy",S="rEn3uMSv",Z="DWKLQwFX",E="ubFQS5Nh",T="Rdkm80SF",x=o(24189),A=o(88263),R=o(18653),P=o(40494),M=o(48718),V=o(94),N="KbX4L1ZW",F="nz4f9u0e";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},B.apply(this,arguments)}var H=function(e){return h.createElement("svg",B({width:27,height:27,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=h.createElement("path",{d:"M24.5 14.334c0 5.983-4.85 10.833-10.833 10.833-5.983 0-10.834-4.85-10.834-10.833C2.833 8.35 7.683 3.5 13.667 3.5 19.65 3.5 24.5 8.35 24.5 14.334z",stroke:"#fff",strokeOpacity:.9,strokeWidth:1.667})),l||(l=h.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.81 13.434a.836.836 0 00-.464.778.833.833 0 00.463.78l2.843 2.842a.835.835 0 001.181-1.18l-1.486-1.486h8.486a.833.833 0 000-1.667h-8.73l1.73-1.729a.835.835 0 00-1.18-1.18l-2.844 2.842z",fill:"#EAEAEB"})))},W=function(e){var n=e.word,o=void 0===n?"\u9000\u51fa\u5408\u96c6":n,t=e.style,l=e.onClick,i=(0,h.useRef)(o);return o&&(i.current=o),h.createElement("div",{className:N,style:(0,r.Z)({width:20*i.current.length+54},t),onClick:l},h.createElement(V.Z,{viewBox:"0 0 27 27",src:H,width:23,height:23,className:F}),i.current)},D=o(70333),O="undefined"!=typeof window?h.useLayoutEffect:h.useEffect,U=function(e,n){return window.getComputedStyle?window.getComputedStyle(e,null)[n]:""},G=function(e){var n,o,t=e.close,l=e.clickedCard,i=(0,h.useState)({}),d=(0,u.Z)(i,2),s=d[0],m=d[1],f=(0,h.useContext)(I.Cv),g=f.isCssFullScreen,p=f.isFullScreen,x=(0,h.useState)(!1),V=(0,u.Z)(x,2),N=V[0],F=V[1],B=(0,h.useRef)(null),H=(0,h.useRef)(null),G=(0,h.useRef)(null),q=(0,h.useRef)("click_screen"),X=(0,h.useState)(""),Y=(0,u.Z)(X,2),j=Y[0],z=Y[1];(0,h.useEffect)((function(){var e,n,o,t,i,r=c()(e=[D.Le.Author,D.Le.Hot,D.Le.Mix,D.Le.Music,D.Le.Related,D.Le.Topic]).call(e,(null===(n=G.current)||void 0===n||null===(o=n.getCurTab)||void 0===o?void 0:o.call(n))||l)?"\u9000\u51fa".concat(D.Yv.get((null===(t=G.current)||void 0===t||null===(i=t.getCurTab)||void 0===i?void 0:i.call(t))||l)):"";j!==r&&z(r)}));var K=(0,h.useCallback)((function(e){e.target===B.current&&(q.current="click_screen",F(!0))}),[]),Q=(0,h.useCallback)((function(){var e,n,o=document.getElementById("sliderVideo");m({width:Number(v()(e=U(o,"width")).call(e,0,-2)),height:Number(v()(n=U(o,"height")).call(n,0,-2))})}),[]);return(0,h.useEffect)((function(){var e;Q(),window.addEventListener("resize",Q),A.emit(A.EVENT.videoPause);var n=null===P.Z||void 0===P.Z||null===(e=P.Z.getCurrentUserActivePlayerId)||void 0===e?void 0:e.call(P.Z);return function(){var e,o;window.removeEventListener("resize",Q),P.Z.setCurrentUserActive(n,!0);var t=null===M.Z||void 0===M.Z||null===(e=M.Z.pluginGroup)||void 0===e||null===(o=e[n])||void 0===o?void 0:o._player;null==t||t.play(),A.emit(A.EVENT.syncInteraction)}}),[]),O((function(){return R.Le.setConfig(R.gI.IsInLookMiniModal,{isInMiniModal:!0}),function(){R.Le.setConfig(R.gI.IsInLookMiniModal,{isInMiniModal:!1})}}),[]),(0,h.useEffect)((function(){var e=function(e){e.shiftKey||e.metaKey||e.ctrlKey||"Escape"!==e.code||g||p||t("esc",G.current.getCurTab())},n=function e(){var n;N&&(null==t||t(q.current,G.current.getCurTab()),null===(n=H.current)||void 0===n||n.removeEventListener("animationend",e))};return document.addEventListener("keydown",e),H.current.addEventListener("animationend",n),function(){var o;document.removeEventListener("keydown",e),null===(o=H.current)||void 0===o||o.removeEventListener("animationend",n)}}),[g,p,N,t]),(0,h.useEffect)((function(){if(g)return m({}),function(){Q()}}),[g]),(0,h.useEffect)((function(){if(p)return m({}),function(){Q()}}),[p]),h.createElement(w.T,{onMaskClick:function(){q.current="click_screen",F(!0)},className:_()(T,Z,(0,a.Z)({},E,N))},h.createElement("div",{className:_()(b,(n={},(0,a.Z)(n,k,g||p),(0,a.Z)(n,L,!g&&!p),n)),ref:B,onClick:K},h.createElement(W,{onClick:function(){q.current="click_button",F(!0)},word:j,style:{position:p||g?"absolute":"relative",left:p||g?34:0,top:p||g?45:0}}),h.createElement("div",{className:_()(S,Z,(o={},(0,a.Z)(o,k,g||p),(0,a.Z)(o,E,N),o)),ref:H},h.createElement(C.i,(0,r.Z)((0,r.Z)({},e),{},{style:s,isModal:!0,className:y,close:t,ref:G,showLookRelatedType:4})))))},q=(0,h.memo)((function(e){var n=(0,h.useRef)(document.createElement("div")),o=(0,h.useContext)(I.Cv);return(0,h.useEffect)((function(){g.render(h.createElement(I.Cv.Provider,{value:o},h.createElement(G,(0,i.Z)({},e,{close:function(){var o,t,l,i,r;g.unmountComponentAtNode(n.current),null===(o=n.current)||void 0===o||o.remove();for(var a=arguments.length,u=new Array(a),d=0;d<a;d++)u[d]=arguments[d];null==e||null===(t=e.close)||void 0===t||t.call.apply(t,f()(l=[e]).call(l,u)),A.emit(null==x||null===(i=A)||void 0===i||null===(r=i.EVENT)||void 0===r?void 0:r.clarityRel,{exitInner:!0})}}))),n.current)})),(0,h.useEffect)((function(){var e=document.getElementById("slidelist");return null==e||e.appendChild(n.current),function(){var e;g.unmountComponentAtNode(n.current),null===(e=n.current)||void 0===e||e.remove(),n.current=null}}),[]),h.createElement(h.Fragment,null)})),X=q},3356:function(e,n,o){o.d(n,{p:function(){return C}});var t,l,i,r=o(29588),a=o(21528),u=o(94),d="AYqoByts",c="ULoXQ8XC",s="y4kDAdoO",v="eFHMfgjN",m="GoxDHMZj",f="tzdPkXD6";function h(){return h=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},h.apply(this,arguments)}var g=function(e){return a.createElement("svg",h({width:16,height:16,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=a.createElement("path",{d:"M14.64 15.6H5.688c-.448 0-.8-.36-.8-.8 0-.44.36-.8.8-.8h8.144V2.008H5.688c-.448 0-.8-.36-.8-.8 0-.44.36-.8.8-.8h8.952c.448 0 .8.36.8.8V14.8c0 .44-.36.8-.8.8z",fill:"#fff"})),l||(l=a.createElement("path",{d:"M4.384 11.8a.82.82 0 01-.568-.232L.8 8.56a.814.814 0 01-.24-.568.8.8 0 01.24-.568L3.824 4.44a.8.8 0 011.136.008.8.8 0 01-.008 1.136L2.504 7.992l2.448 2.432a.8.8 0 010 1.136.78.78 0 01-.568.24z",fill:"#fff"})),i||(i=a.createElement("path",{d:"M9.48 8.8H1.856c-.448 0-.8-.36-.8-.8 0-.44.36-.8.8-.8H9.48c.448 0 .8.36.8.8 0 .44-.352.8-.8.8z",fill:"#fff"})))},p=o(70335),_=o.n(p),C=function(e){var n=e.word,o=void 0===n?"\u9000\u51fa\u5408\u96c6":n,t=(e.style,e.onClick),l=e.Collapse,i=(0,a.useRef)(o);return o&&(i.current=o),a.createElement("div",{className:_()(d,(0,r.Z)({},f,l))},a.createElement("button",{className:c,onClick:function(){null==t||t()}},a.createElement("div",{className:s}),a.createElement(u.Z,{viewBox:"0 0 16 16",src:g,width:16,height:16,className:m}),a.createElement("span",{className:v},l?"\u9000\u51fa":i.current)))}},37707:function(e,n,o){o.d(n,{m:function(){return ie}});var t=o(68671),l=o(29588),i=o(41257),r=o(11789),a=o(10396),u=o.n(a),d=o(11235),c=o.n(d),s=o(23947),v=o.n(s),m=o(63862),f=o.n(m),h=o(21528),g=o(1384),p=o(4158),_=o(3616),C=o(42457),w=o(73824),I=o(30234),y=o(88263),b=o(53549),L=o(86358),k=o(21144),S=o(18653),Z=o(24206),E=o(66870),T=o(47999),x=o(76944),A=o(70335),R=o.n(A),P=o(54748),M=o(61433),V=o(26195),N=o(86164),F=o(98821),B=o(79876),H=o(46407),W=o(70333),D=o(86230),O=o(87500),U=o(25955),G=o(52974),q=o(18881),X=o(93506),Y=o(8395),j=o(81536),z=o(94344),K=o(97921),Q=o(3356),J=o(9187),$=o(24713),ee=o(72850),ne=o(26856),oe=o(82496),te=(0,F.default)({resolved:{},chunkName:function(){return"RelatedVideoCard"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(7345),o.e(640),o.e(2519)]).then(o.bind(o,56910))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 56910}},{ssr:!1});function le(e,n){var o,a,d,s,m,A,F,le,ie,re,ae,ue,de,ce,se,ve,me,fe,he,ge,pe,_e,Ce,we,Ie,ye,be,Le=e.item,ke=e.playPrevFunc,Se=e.playNextFunc,Ze=e.deleteCurrentSwiper,Ee=e.fullScreenTarget,Te=e.isActive,xe=e.isNext,Ae=e.swiper,Re=e.children,Pe=e.customProps,Me=e.isLast,Ve=e.isTransition,Ne=void 0!==Ve&&Ve,Fe=e.handleNextOnLast,Be=e.slideListInsideFunc,He=e.InnerPlayer,We=e.className,De=e.isShowGuide,Oe=e.isClientMiniWin,Ue=e.style,Ge=(e.close,e.hotDefaultList),qe=e.mixDefault,Xe=e.relatedDefault,Ye=e.currentAwemeInfo,je=e.ctr,ze=e.clickedCard,Ke=void 0===ze?W.Le.Author:ze,Qe=e.moreBoxShowList,Je=e.onFeedStreamChange,$e=e.modalEnterFrom,en=(0,h.useContext)(K.Cv),nn=en.globalIsSideBarShow,on=en.setIsSideBarShowFunc,tn=en.isFullScreen,ln=en.isCssFullScreen,rn=en.setTargetVideoRef,an=en.slideVideoTab,un=en.setSlideVideoTab,dn=en.videoToast,cn="modal"===(null==Pe?void 0:Pe.tab)?function(e){return z.F.info(e)}:dn,sn=(0,h.useState)(!1),vn=(0,r.Z)(sn,2),mn=vn[0],fn=vn[1],hn=!!mn||nn,gn=(0,h.useState)(!1),pn=(0,r.Z)(gn,2),_n=pn[0],Cn=pn[1],wn=(0,h.useState)(!1),In=(0,r.Z)(wn,2),yn=In[0],bn=In[1],Ln=(0,h.useRef)(!1),kn=(0,h.useState)(null),Sn=(0,r.Z)(kn,2),Zn=Sn[0],En=Sn[1],Tn=(0,h.useRef)(""),xn=function(e){mn||(on(e),(0,ne.K)({isShowCard:e,abVal:Rn.lookUiAdapter}))},An=(0,h.useCallback)((function(e){var n,o=e.tab,t=e.clickMethod,l=void 0===t?"":t;mn?yn?(bn(!1),C.i.sendLog("expandVideoCard",{type:o,enter_method:l,enter_from_merge:w.vM()})):yn||Zn!==o||(fn(!1),C.i.sendLog("closeVideoCard",{type:o,enter_method:l,enter_from_merge:w.vM()})):hn&&o===Zn?(xn(!1),Qn.current=!1,C.i.sendLog("closeVideoCard",{type:o,enter_method:l,enter_from_merge:w.vM()})):(xn(!0),Qn.current=!0,u()(n=[W.Le.Author,W.Le.Mix,W.Le.Hot]).call(n,o)&&!hn&&"related_video_entry"!==l&&fn(!0),C.i.sendLog("enterVideoCardTab",{from_group_id:Le.groupId,type:o,enter_method:"related_video_entry"===l?"click_card_entrance":l,enter_from_merge:w.vM()}));En(o)}),[hn,Zn,mn,yn]),Rn=(Pe||{}).abtestData,Pn=Pe.userContext||{},Mn=Pn.userInfo,Vn=Pn.dispatch,Nn=(Mn||{}).isLogin,Fn=(0,h.useRef)(null),Bn=(0,h.useRef)(!1),Hn=(0,h.useMemo)((function(){var e,n="circle";if(!u()(e=[I.RelatedVideoEntryABVal.TopRight,I.RelatedVideoEntryABVal.TopRightHover]).call(e,null==Rn?void 0:Rn.relatedVideoEntry))return Rn.relatedVideoEntry===I.RelatedVideoEntryABVal.Center&&(n="rectangle"),n}),[]),Wn=(0,h.useState)(!1),Dn=(0,r.Z)(Wn,2),On=Dn[0],Un=Dn[1],Gn=(0,h.useState)(null),qn=(0,r.Z)(Gn,2),Xn=qn[0],Yn=qn[1],jn=(0,h.useRef)(null),zn=(0,h.useRef)(Zn),Kn=(0,h.useRef)(""),Qn=(0,h.useRef)(hn),Jn=(0,h.useRef)(!1),$n=(0,h.useMemo)((function(){var e;if(mn)return u()(e=[W.Le.Author,W.Le.Hot,W.Le.Mix,W.Le.Music,W.Le.Related,W.Le.Topic]).call(e,Zn)?"\u9000\u51fa".concat(W.Yv.get(Zn)):""}),[Zn,mn]);(0,h.useEffect)((function(){var e,n;Jn.current?Te&&hn&&Un(!0):n=c()((function(){Te&&hn&&Un(!0)}),3e3);var o=function(){Jn.current=!0,clearTimeout(n),hn&&Un(!0)};return null==Xn||null===(e=Xn.on)||void 0===e||e.call(Xn,$.CANPLAY,o),function(){var e;null==Xn||null===(e=Xn.off)||void 0===e||e.call(Xn,$.CANPLAY,o),clearTimeout(n)}}),[Xn,Te,hn]),u()(o=[W.Le.Author,W.Le.Hot,W.Le.Mix,W.Le.Related]).call(o,Zn)&&(zn.current=Zn);var eo=(0,h.useRef)(null),no=(0,D.M)({player:null===(a=Fn.current)||void 0===a?void 0:a.player,originAwemeInfo:Ye||Le,isActive:Te,isLast:Me,isLogin:Nn,isShowAuthorCardLoginGuide:Bn.current,toast:cn,curCard:(0,H._)(Zn),handleNextOnLast:Fe,handleOuterPlayNext:Se,handleOuterPlayPrev:ke,isInnerFeedCondition:mn,reportParams:mn?{enter_from:zn.current}:{}}),oo=no.changeNextVideo,to=no.changePrevVideo,lo=no.awemeInfo,io=no.setAwemeInfo,ro=no.setNextAwemeInfo,ao=no.setPrevAwemeInfo,uo=no.prevAwemeInfo,co=no.nextAwemeInfo,so=no.updateInnerVideoInfo,vo=no.isInnerFeed,mo=(0,h.useRef)(lo),fo=(0,h.useState)((null==lo||null===(d=lo.stats)||void 0===d?void 0:d.commentCount)||0),ho=(0,r.Z)(fo,2),go=ho[0],po=ho[1],_o=(0,O.$)({awemeInfo:lo}).hotData;(0,h.useEffect)((function(){var e;return hn&&(e=c()((function(){return y.emit(y.EVENT.feedVideoCardLocateCurrentVideo)}),0)),y.emit(y.EVENT.changeVideoSideBar,{isShowLookRelated:hn}),function(){clearTimeout(e)}}),[hn]);var Co=(0,U.l)({originAwemeInfo:Le,awemeInfo:lo,logParams:null==Pe?void 0:Pe.logParams,curCard:(0,H._)(Zn),expandCard:hn?(0,H._)(Zn):"",isSideBarShow:Qn.current}).reportParams,wo=(0,G.D)({reportParams:Co,originAwemeInfo:Le,awemeInfo:lo,canShowMixCard:!0,canShowRelatedCard:!0,updateVideoInfo:so,curCard:(0,H._)(Zn),toast:cn,handleAvatarClick:function(e,n){var o=(n||{}).clickMethod;An({tab:W.Le.Author,clickMethod:"hot_key"===o?"hot_key":"click_icon"})},handleMixClick:function(){return An({tab:W.Le.Mix,clickMethod:"click_feed_bar"})},handleMusicClick:function(){return An({tab:W.Le.Music,clickMethod:"click_feed_bar"})},handleRelatedClick:function(){return An({tab:W.Le.Related,clickMethod:"click_feed_bar"})},handleHotClick:function(){return An({tab:W.Le.Hot,clickMethod:"click_feed_bar"})},isShowSideBar:Qn.current,canShowRelatedSearchFeedBar:!0,relatedVideoEntryIsShow:u()(s=[I.RelatedVideoEntryABVal.TopRight,I.RelatedVideoEntryABVal.TopRightHover]).call(s,null==Rn?void 0:Rn.relatedVideoEntry),isCanHoverRelatedVideoEntry:I.RelatedVideoEntryABVal.TopRightHover===(null==Rn?void 0:Rn.relatedVideoEntry),isMiniWin:_n}),Io=wo.relatedVideoConfig,yo=wo.onAvatarClick,bo=wo.onMusicClick,Lo=wo.moreConfig,ko=wo.relatedDefaultList,So=wo.relatedReqCount,Zo=wo.videoInfoTags,Eo=new(v())([[W.Le.Mix,"\u5408\u96c6"],[W.Le.Hot,"\u70ed\u70b9"],[W.Le.Author,"TA\u7684\u4f5c\u54c1"],[W.Le.Comment,"\u8bc4\u8bba"],[W.Le.Related,"\u76f8\u5173\u63a8\u8350"],["mix","\u5408\u96c6"],["hot","\u70ed\u70b9"],["related","\u76f8\u5173\u63a8\u8350"]]),To=(0,J.O)({player:Xn,isActive:Te}).inImmersive,xo=(0,V.OM)({selfUid:null==Mn||null===(m=Mn.info)||void 0===m?void 0:m.uid,actionUid:null==lo||null===(A=lo.authorInfo)||void 0===A?void 0:A.uid,defaultFollowerStatus:null==lo||null===(F=lo.authorInfo)||void 0===F?void 0:F.followerStatus,defaultFollowStatus:null==lo||null===(le=lo.authorInfo)||void 0===le?void 0:le.followStatus,isLogin:Nn,accountParentEl:b.r()&&Ee,onLoginSuccess:function(){return null==Vn?void 0:Vn({type:"updateUserInfo"})},success:function(e){var n,o,t,l,r,a,u,d,c=e.logPb,s=e.action,v=e.clickFrom,m=void 0===v?"icon":v,f=e.beforeFollowStatus;"follow"===s?C.i.sendLog("follow",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==lo||null===(n=lo.authorInfo)||void 0===n?void 0:n.uid,group_id:null==lo?void 0:lo.awemeId,log_pb:c,enter_from:w.mo(),is_full_screen:b.r()?"1":"0",tab_name:L.getTabName()||k.Rs("tab_name")||"",click_method:m,from_group_id:null==Le?void 0:Le.awemeId,music_id:null==lo||null===(o=lo.music)||void 0===o?void 0:o.mid,compilation_id:null==lo||null===(t=lo.mixInfo)||void 0===t?void 0:t.mixId,aweme_type:null==lo?void 0:lo.awemeType,is_pure:To?"1":"0",to_user_id:null==lo||null===(l=lo.authorInfo)||void 0===l?void 0:l.uid},Co),{},{relation:String(f)})):C.i.sendLog("followCancel",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==lo||null===(r=lo.authorInfo)||void 0===r?void 0:r.uid,group_id:null==lo?void 0:lo.awemeId,log_pb:c,enter_from:w.mo(),is_full_screen:b.r()?"1":"0",tab_name:L.getTabName()||k.Rs("tab_name")||"",click_method:m,from_group_id:null==Le?void 0:Le.awemeId,music_id:null==lo||null===(a=lo.music)||void 0===a?void 0:a.mid,compilation_id:null==lo||null===(u=lo.mixInfo)||void 0===u?void 0:u.mixId,to_user_id:null==lo||null===(d=lo.authorInfo)||void 0===d?void 0:d.uid,is_pure:To?"1":"0"},Co),{},{relation:String(f)}))}}),Ao=xo.follow,Ro=xo.unFollow,Po=(0,N.r)({selfUid:null==Mn||null===(ie=Mn.info)||void 0===ie?void 0:ie.uid,actionUid:null==lo||null===(re=lo.authorInfo)||void 0===re?void 0:re.uid,defaultFollowerStatus:null==lo||null===(ae=lo.authorInfo)||void 0===ae?void 0:ae.followerStatus,defaultFollowStatus:null==lo||null===(ue=lo.authorInfo)||void 0===ue?void 0:ue.followStatus}).followStatus,Mo=(0,h.useCallback)((function(e){fn(!0),so({inComingAwemeInfo:e,card:"author_card"})}),[so,mn]),Vo=(0,h.useCallback)((function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:W.Le.Related;fn(!0);var o=(0,H._)(n);so({inComingAwemeInfo:e,card:o})}),[so,mn,Rn]);(0,h.useEffect)((function(){y.emit(y.EVENT.feedVideoCardLocateCurrentVideo)}),[yn]);var No=(0,q.x)({awemeInfo:lo}),Fo=No.fetchComment,Bo=No.fetchReply,Ho=No.fetchCommentMention,Wo=No.deleteCommentItem,Do=No.publishCommentItem,Oo=No.diggCommentItem,Uo=(0,h.useCallback)((function(e){var n=(e||{}).clickMethod;return An({tab:W.Le.Comment,clickMethod:"hot_key"===n?"hot_key":"click_icon"}),Qn.current}),[hn,An]);(0,h.useEffect)((function(){var e,n;(null===(e=mo.current)||void 0===e?void 0:e.awemeId)!==(null==lo?void 0:lo.awemeId)&&Te&&(null!=lo&&lo.awemeId&&null!==(n=mo.current)&&void 0!==n&&n.awemeId&&y.emit(y.EVENT.videoChange),mo.current=lo,po((function(e){var n,o=(null==lo||null===(n=lo.stats)||void 0===n?void 0:n.commentCount)||0;return o===e?"".concat(o):o})))}),[lo,Te]),(0,h.useEffect)((function(){if(Te)return function(){io(Le),ao(null),ro(null)}}),[Te]),(0,X.o)({refScrollEl:jn,changeNextVideo:oo,changePrevVideo:to,swiper:Ae,isActive:Te,player:null===(de=Fn.current)||void 0===de?void 0:de.player}),(0,h.useEffect)((function(){var e=y.listen(y.EVENT.videoTitleClick,(function(e){var n,o,t;(null===(n=mo.current)||void 0===n?void 0:n.awemeId)===e&&(P.Z.sendLog("clickAuthorHead",(0,i.Z)((0,i.Z)({click_from:"title",urlParamList:["previous_page"],author_id:null==lo||null===(o=lo.authorInfo)||void 0===o?void 0:o.uid,group_id:null==lo?void 0:lo.awemeId,log_pb:null==lo?void 0:lo.logPb,enter_from:w.mo(),is_full_screen:b.r()?"1":"0",from_follow_list:null!==(t=S.Le.getConfig(S.gI.FromFollowList))&&void 0!==t&&t.tag?"1":"0"},Co),{},{action:Qn.current?"open":"close"})),An({tab:W.Le.Author,clickMethod:"click_title"}))}));return function(){null==e||e()}}),[Co,lo,An]),(0,h.useEffect)((function(){lo&&(Te?y.emit(y.EVENT.postCurVideoInfo,{awemeId:null==lo?void 0:lo.awemeId,groupId:null==lo?void 0:lo.groupId,scene:null==Pe?void 0:Pe.tab,existedSuggestWords:null==lo?void 0:lo.suggestWords}):xe&&y.emit(y.EVENT.postCurVideoInfo,{awemeId:null==lo?void 0:lo.awemeId,groupId:null==lo?void 0:lo.groupId,scene:null==Pe?void 0:Pe.tab,existedSuggestWords:null==lo?void 0:lo.suggestWords,preload:!0}))}),[lo,null==Pe?void 0:Pe.tab,Te,xe]);var Go=(0,h.useMemo)((function(){var e,n,o,t=[W.Le.Comment];return(null==lo?void 0:lo.awemeType)!==(null==Z?void 0:E.ed.XgVideo)&&t.unshift(W.Le.Author),(Ke===W.Le.Related||Zn===W.Le.Related||zn.current===W.Le.Related&&Zn===W.Le.Comment)&&(Kn.current=lo.awemeId),null!=lo&&null!==(e=lo.mixInfo)&&void 0!==e&&e.mixId&&t.push(W.Le.Mix),null!=lo&&lo.hotList&&51!==(null==lo||null===(n=lo.hotList)||void 0===n?void 0:n.rank)&&2!==(null==lo||null===(o=lo.hotList)||void 0===o?void 0:o.type)&&t.push(W.Le.Hot),t}),[lo]),qo=(0,Y.E)({awemeInfo:lo,abtestData:Rn,showRelatedTabList:Go,ctr:je}),Xo=qo.defaultCard,Yo=qo.videoTag;(0,h.useEffect)((function(){Yo&&Ln&&Le.awemeId===lo.awemeId&&(Tn.current=Yo)}),[Yo]);var jo=(0,h.useMemo)((function(){return lo.awemeId!==Le.awemeId?[]:f()(Zo).call(Zo,(function(e){return e.type===Tn.current&&"related"!==e.type}))}),[Zo,Yo,lo,Le,mn]);(0,h.useEffect)((function(){Te&&(null==un||un(Zn))}),[Zn]),(0,h.useEffect)((function(){if(!mn){var e=an===W.Le.Comment?W.Le.Comment:Xo;En(e)}}),[Te]);var zo=(0,h.useMemo)((function(){return{awemeInfo:lo,onLoginGuideShowChange:function(e){Bn.current=e},sense:"slider_video",onCloseClick:function(){},onCollapseClick:function(){},userContext:Pe.userContext,abtestData:null==Pe?void 0:Pe.abtestData,changeLoginStatus:function(){Vn({type:"updateUserInfo"})},logParams:Co}}),[lo,Pe,Vn,Co]),Ko={abtestData:null==Pe?void 0:Pe.abtestData,fullScreenTarget:Ee,isDetail:!1,isShowComment:Zn===W.Le.Comment,isTransition:Ne,total:0,onCloseCommentClick:Uo,awemeInfo:lo,awemelogPb:null==lo?void 0:lo.logPb,userInfo:Mn,scrollContainerEl:null==jn?void 0:jn.current,player:Xn,shortcutMode:null==Pe||null===(ce=Pe.abtestData)||void 0===ce?void 0:ce.shortcutMode,fetchComment:Fo,fetchReply:Bo,fetchEmoticonGif:g.D2,fetchCommentMetionList:Ho,diggCommentItem:Oo,deleteCommentItem:Wo,puhlishCommentItem:Do,count:20,defaultommentList:[],defaultCursor:0,defaultHotsoonHasMoreRef:0,defaultHasMore:!0,defaultStatusCode:0,defaultCommentId:null==Pe?void 0:Pe.insertCommentId,isNeedCommentInput:!0,changeLoginStatus:function(){return Vn({type:"updateUserInfo"})},reportExtraParams:(0,i.Z)((0,i.Z)({},Co),{},{relation:String(Po)})};(0,h.useImperativeHandle)(n,(function(){return{getPlayer:function(){var e;return null===(e=Fn.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:xn,setIsShowRelatedCard:xn,getCurTab:function(){return Zn}}}),[Te]),(0,h.useEffect)((function(){if(Te&&Ln.current){mn?(ln&&xn(!0),tn&&xn(!0),ln||tn||xn(!0)):(ln&&xn(false),tn&&xn(!1),ln||tn||xn(false))}}),[tn,ln]),(0,h.useEffect)((function(){if(!mn&&Te&&Ln.current&&!tn&&!ln){xn(!1)}!mn&&Te&&Ln.current&&(tn||ln)&&xn(!1)}),[mn]),(0,h.useEffect)((function(){var e=y.listen(y.EVENT.emitVideoSwitch,(function(e){var n=e.scene,o=e.feedStream,t=e.action,l=e.method;Te&&"inner"===o&&"recommend"===n&&("next"===t&&oo(undefined,{from:l}),"prev"===t&&to(undefined,{from:l}))}));return function(){e()}}),[Te,oo,to]),(0,h.useEffect)((function(){Te&&Ln.current&&(null==Je||Je({stream:mn?"inner":"outer",disableNext:!co,disablePrev:!uo}))}),[mn,co,Te,uo]),(0,h.useEffect)((function(){var e=y.listen(y.EVENT.changeMinWindows,(function(e){var n=e.isMiniWin;Cn(n)}));return function(){return e()}}),[]),(0,h.useEffect)((function(){Ln.current=!0}),[]);var Qo=(null==Rn||null===(se=Rn.danmaku)||void 0===se?void 0:se.douyin_danmaku)||(null==Rn||null===(ve=Rn.backendAbTest)||void 0===ve||null===(me=ve.douyin)||void 0===me?void 0:me.douyin_danmaku)||!1;return h.createElement(h.Fragment,null,h.createElement(p.v.Provider,{value:{playerScene:null==Pe?void 0:Pe.tab,globalCommentCount:go,setGlobalCommentCount:po,authorVideoCardClick:Mo,setNextAemeInfo:ro,setPrevAwemeInfo:ao,modalEnterFrom:$e}},h.createElement("div",{"data-e2e":Te?"feed-active-video":"feed-video","data-e2e-vid":lo.awemeId,id:"sliderVideo",className:R()(M.Z.playerCommentWrapper,We,(fe={isMiniWindow:Oe},(0,l.Z)(fe,M.Z.isFullScreen,tn),(0,l.Z)(fe,M.Z.inOutFeed,!mn),(0,l.Z)(fe,M.Z.miniWidth,hn),(0,l.Z)(fe,"relatedUiAdapter",Rn.lookUiAdapter!==I.LookUiAdapter.Default),(0,l.Z)(fe,M.Z.adapterThird,Rn.lookUiAdapter===I.LookUiAdapter.Third),(0,l.Z)(fe,M.Z.adapterSeventh,Rn.lookUiAdapter===I.LookUiAdapter.Seventh),fe)),style:Ue},h.createElement("div",{className:R()(M.Z.playerContainer,"playerContainer",(he={},(0,l.Z)(he,M.Z.isHavePlayer,lo),(0,l.Z)(he,M.Z.isSafari,T.G6()),(0,l.Z)(he,M.Z.showSideBar,hn),(0,l.Z)(he,M.Z.acCollapseSideBarWidth,hn&&yn),(0,l.Z)(he,M.Z.noTransition,hn&&yn),he))},Re,h.createElement("div",{className:R()(M.Z.playerWrap,"slider-video"),ref:function(e){Te?eo.current||(eo.current=e,rn(eo)):eo.current=null}},(null==lo?void 0:lo.debugInfo)&&h.createElement(_.W,{req:null==lo||null===(ge=lo.debugInfo)||void 0===ge?void 0:ge.web_debug_req,video:null==lo||null===(pe=lo.debugInfo)||void 0===pe?void 0:pe.client_rec_debug_info,size:{height:null==Xn?void 0:Xn._videoHeight,width:null==Xn?void 0:Xn._videoWidth},gear:null==lo||null===(_e=lo.video)||void 0===_e||null===(Ce=_e.bitRateList)||void 0===Ce||null===(we=Ce[0])||void 0===we?void 0:we.gearName,showPanelRightside:!0}),h.createElement(He,(0,t.Z)({},e,{actionFollow:Ao,actionUnFollow:Ro,userInfo:Mn,dispatch:Vn,awemeInfo:lo,nextAwemeInfo:co,prevAwemeInfo:uo,videoTags:jo,isInnerFeed:vo,playNextFunc:oo,playPrevFunc:to,deleteCurrentSwiper:Ze,ref:Fn,toggleComment:Uo,onAvatarClick:yo,logParams:(0,i.Z)((0,i.Z)({},Co),{},{relation:String(Po),is_click_cover:Number(mn||Le!==lo),enter_from:mn?zn.current:null==Co?void 0:Co.enter_from}),videoToast:cn,abtestData:null==Pe?void 0:Pe.abtestData,isFullScreen:tn,isAuthorCardShow:!1,slideListInsideFunc:Be,relatedVideoConfig:(0,i.Z)((0,i.Z)({},Io),{},{relatedCardIsCollapse:yn,sideBarShow:hn,cardType:zn.current||Xo,onClick:function(){hn?(xn(!1),mn?(Zn===W.Le.Comment&&An({tab:zn.current,clickMethod:"click_card_entrance"}),yn?C.i.sendLog("enterVideoCardTab",{type:Zn,enter_from_merge:w.vM(),enter_method:"click_card_entrance",from_group_id:lo.awemeId}):C.i.sendLog("foldVideoCard",{type:Zn,enter_method:"click_card_entrance",enter_from_merge:w.vM(),tab_name:L.getTabName()||k.Rs("tab_name")||""}),bn((function(e){return!e})),xn(!1)):C.i.sendLog("closeVideoCard",{type:Zn,enter_method:"click_card_entrance",enter_from_merge:w.vM()})):(An({tab:zn.current||Xo,clickMethod:"related_video_entry"}),xn(!0))},title:Eo.get(zn.current||Xo)}),isShowRelatedCard:mn,onMusicClick:bo,moreConfig:Lo,showMusicEntry:Pe.showTopicAndMusicCard,videoHashtagClassName:Pe.showTopicAndMusicCard?M.Z.linkHashTag:null,isTopicLinkSearchResult:!0,isShowGuide:De,showPlaySwitch:ln||tn||!1,moreBoxShowList:(0,i.Z)((0,i.Z)({},Qe),{},{notInterestingIcon:!vo&&(null==Le?void 0:Le.awemeId)===(null==lo?void 0:lo.awemeId),unfollow:!0,report:!0}),shortCutFiltered:(null==Le?void 0:Le.awemeId)!==(null==lo?void 0:lo.awemeId)||mn?[x.getShortcut().dislike.key]:[],positionBoxClassName:{right:T.vU()&&(null==lo?void 0:lo.awemeType)===E.ed.Normal||hn?null:M.Z.interactionPos}}),h.createElement(B.x,{onPlayer:Yn}))),Boolean(Hn)&&(null==lo?void 0:lo.awemeType)!==E.ed.XgVideo&&h.createElement(ee._,{onClick:function(){xn(!0),mn?(bn(!1),C.i.sendLog("expandVideoCard",{type:Zn,enter_from_merge:w.vM(),enter_method:"click_card_entrance"})):C.i.sendLog("enterVideoCardTab",{type:Zn,enter_from_merge:w.vM(),enter_method:"click_card_entrance",from_group_id:Le.awemeId}),Qn.current=!0},className:R()(M.Z.btn,(0,l.Z)({},M.Z.hide,hn&&!yn||_n)),type:Hn})),h.createElement("div",{id:"videoSideBar",className:R()(M.Z.sideBar,M.Z.sideBarDefaultWidth,"isDark",(Ie={},(0,l.Z)(Ie,M.Z.sideBarHidden,!hn),(0,l.Z)(Ie,M.Z.acCollapseSideBarWidth,hn&&yn),Ie)),onWheel:function(e){return e.stopPropagation()},ref:jn},h.createElement("div",{className:R()(M.Z.sideBarInnerWrapper,M.Z.relatedVertical,(ye={},(0,l.Z)(ye,M.Z.sideBarInnerHidden,!hn),(0,l.Z)(ye,M.Z.inFullScreen,ln||tn),(0,l.Z)(ye,M.Z.collapeseFullScreen,(ln||tn)&&yn),ye)),"data-card":Zn},yn&&h.createElement("div",{className:M.Z.collapseTitle},W.Yv.get(Zn)),h.createElement(te,{collapse:yn,isShow:hn,awemeInfo:lo,scene:"recommend",originFeedAwemeInfo:Le,isRender:On,isActive:Te,isInnerFeed:mn,showLookRelatedType:W.no.NewMergeAll,customProps:Pe,abtestData:Rn,userContext:Pe.userContext,handleRelatedVideoChange:Vo,defaultList:ko,relatedReqCount:So,tab:(null==lo?void 0:lo.awemeType)===E.ed.XgVideo?W.Le.Comment:Zn,lastTab:zn.current,onTabChange:function(e){En(e),C.i.sendLog("enterVideoCardTab",{from_group_id:Le.groupId,type:e,enter_method:"click_tab",enter_from_merge:w.vM()})},showTabList:Go,relatedAuthorConfig:zo,relatedCommentConfig:Ko,defaultHotData:_o,hotDefaultList:Ge,mixDefault:qe,relatedDefault:Xe}),mn&&h.createElement(Q.p,{onClick:function(){fn(!1),bn(!1),C.i.sendLog("closeVideoCard",{enter_method:"click_button",type:Zn,enter_from_merge:w.vM()})},Collapse:yn,word:$n})),Boolean(Hn)&&(null==lo?void 0:lo.awemeType)!==E.ed.XgVideo&&h.createElement(ee._,{className:R()(M.Z.btn,M.Z.putBtn,(0,l.Z)({},M.Z.hide,!hn||yn)),onClick:function(){xn(!1),mn&&(Zn===W.Le.Comment&&An({tab:zn.current,clickMethod:"click_card_entrance"}),bn(!0)),Qn.current=!1,mn?C.i.sendLog("foldVideoCard",{type:Zn,enter_method:"click_card_entrance",enter_from_merge:w.vM(),tab_name:L.getTabName()||k.Rs("tab_name")||""}):C.i.sendLog("closeVideoCard",{type:Zn,enter_method:"click_card_entrance",enter_from_merge:w.vM()})},type:Hn})),h.createElement(j._,{awemeInfo:lo,showImg:!1,className:M.Z.bigBackgroundImg,controlHeight:(0,oe.L)({hasDanmakuStyle:Qo,changePlayerHeight:null==Rn||null===(be=Rn.playerControl)||void 0===be?void 0:be.height})}))))}var ie=(0,h.forwardRef)(le)},52214:function(e,n,o){o.d(n,{m:function(){return z}});var t=o(68671),l=o(29588),i=o(41257),r=o(11789),a=o(10396),u=o.n(a),d=o(11235),c=o.n(d),s=o(21528),v=o(1384),m=o(4158),f=o(3616),h=o(41122),g=o(18653),p=o(53549),_=o(42457),C=o(73824),w=o(86358),I=o(21144),y=o(88263),b=o(94574),L=o(59013),k=o(47999),S=o(76944),Z=o(70335),E=o.n(Z),T=o(54748),x=o(61883),A=o(26195),R=o(86164),P=o(94),M=o(98821),V=o(79876),N=o(70333),F=o(76501),B=o(86230),H=o(87500),W=o(25955),D=o(52974),O=o(18881),U=o(93506),G=o(97921),q=o(71780),X=o(9187),Y=(0,M.default)({resolved:{},chunkName:function(){return"RelatedVideoCard"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(7345),o.e(640),o.e(2519)]).then(o.bind(o,56910))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 56910}},{ssr:!1});function j(e,n){var o,a,d,Z,M,j,z,K,Q,J,$,ee,ne,oe,te,le,ie,re,ae,ue,de,ce,se,ve,me,fe,he,ge,pe,_e,Ce,we,Ie,ye=e.item,be=e.playPrevFunc,Le=e.playNextFunc,ke=e.deleteCurrentSwiper,Se=e.fullScreenTarget,Ze=e.isActive,Ee=e.swiper,Te=e.children,xe=e.customProps,Ae=e.isFirst,Re=e.isLast,Pe=e.isTransition,Me=void 0!==Pe&&Pe,Ve=e.handleNextOnLast,Ne=e.slideListInsideFunc,Fe=e.InnerPlayer,Be=e.className,He=e.isShowGuide,We=e.isClientMiniWin,De=e.showRelatedTabList,Oe=e.relatedDefaultTab,Ue=e.handlePickVideo,Ge=e.relatedCardNameMap,qe=e.originAwemeInfo,Xe=e.moreBoxShowList,Ye=e.defaultShowSideBar,je=void 0===Ye||Ye,ze=e.modalEnterFrom,Ke=(0,s.useContext)(G.Cv),Qe=Ke.globalIsCommentShow,Je=Ke.setIsCommentShowFunc,$e=Ke.isFullScreen,en=Ke.setTargetVideoRef,nn=Ke.videoToast,on=Ke.isCssFullScreen,tn=xe.userContext||{},ln=tn.userInfo,rn=tn.dispatch,an=(ln||{}).isLogin,un=(null==xe?void 0:xe.abtestData)||{},dn=(0,s.useState)(je),cn=(0,r.Z)(dn,2),sn=cn[0],vn=cn[1],mn=(0,s.useState)(!0),fn=(0,r.Z)(mn,1)[0],hn=(0,s.useRef)(null),gn=(0,s.useRef)(!1),pn=(0,s.useRef)(!1),_n=(0,s.useRef)(null),Cn=(0,B.M)({player:null===(o=hn.current)||void 0===o?void 0:o.player,originAwemeInfo:qe,isActive:Ze,isLast:Re,isLogin:an,isShowAuthorCardLoginGuide:pn.current,toast:nn,curCard:null===(a=_n.current)||void 0===a||null===(d=a.getCurTab)||void 0===d?void 0:d.call(a),handleNextOnLast:Ve,handleOuterPlayNext:Le,handleOuterPlayPrev:be,isInnerFeedCondition:!1}),wn=Cn.changeNextVideo,In=Cn.changePrevVideo,yn=Cn.awemeInfo,bn=Cn.setAwemeInfo,Ln=Cn.setNextAwemeInfo,kn=Cn.setPrevAwemeInfo,Sn=Cn.prevAwemeInfo,Zn=Cn.nextAwemeInfo,En=Cn.updateInnerVideoInfo,Tn=(0,s.useState)((null==yn||null===(Z=yn.stats)||void 0===Z?void 0:Z.commentCount)||0),xn=(0,r.Z)(Tn,2),An=xn[0],Rn=xn[1],Pn=(0,s.useState)(!$e),Mn=(0,r.Z)(Pn,2),Vn=Mn[0],Nn=Mn[1],Fn=(0,s.useState)(!1),Bn=(0,r.Z)(Fn,2),Hn=Bn[0],Wn=Bn[1],Dn=(0,s.useState)(!1),On=(0,r.Z)(Dn,2),Un=On[0],Gn=On[1],qn=(0,s.useState)(null),Xn=(0,r.Z)(qn,2),Yn=Xn[0],jn=Xn[1],zn=(0,s.useState)(h.O(yn)),Kn=(0,r.Z)(zn,2),Qn=Kn[0],Jn=Kn[1],$n=(0,s.useRef)(null),eo=(0,s.useRef)(yn),no=(0,s.useRef)(Un),oo=(0,s.useRef)(Ze),to=(0,s.useRef)(Hn),lo=(0,s.useRef)(null);oo.current=Ze;var io=(0,H.$)({awemeInfo:yn}).hotData,ro=(0,s.useContext)(q.r)||{},ao=ro.setModalAwemeInfo,uo=ro.curTab,co=(0,s.useMemo)((function(){var e,n;return null===(e=_n.current)||void 0===e||null===(n=e.getCurTopic)||void 0===n?void 0:n.call(e)}),[_n.current]),so=(0,W.l)({originAwemeInfo:qe,awemeInfo:yn,logParams:null==xe?void 0:xe.logParams,tagId:co,curCard:(null===(M=g.Le.getConfig(g.gI.CurLookCard))||void 0===M?void 0:M.curCard)||(null===(j=_n.current)||void 0===j||null===(z=j.getCurTab)||void 0===z?void 0:z.call(j)),expandCard:Hn?null===(K=_n.current)||void 0===K||null===(Q=K.getCurTab)||void 0===Q?void 0:Q.call(K):"",isInnerFeedCondition:!0}).reportParams,vo=(0,X.O)({player:Yn,isActive:Ze}).inImmersive,mo=(0,A.OM)({selfUid:null==ln||null===(J=ln.info)||void 0===J?void 0:J.uid,actionUid:null==yn||null===($=yn.authorInfo)||void 0===$?void 0:$.uid,defaultFollowerStatus:null==yn||null===(ee=yn.authorInfo)||void 0===ee?void 0:ee.followerStatus,defaultFollowStatus:null==yn||null===(ne=yn.authorInfo)||void 0===ne?void 0:ne.followStatus,logExtraParams:so,isLogin:an,accountParentEl:p.r()&&Se,onLoginSuccess:function(){return null==rn?void 0:rn({type:"updateUserInfo"})},success:function(e){var n,o,t,l,r,a,u,d,c,s,v,m,f=e.logPb,h=e.action,g=e.clickFrom,y=void 0===g?"icon":g,b=e.beforeFollowStatus;"follow"===h?_.i.sendLog("follow",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==yn||null===(n=yn.authorInfo)||void 0===n?void 0:n.uid,group_id:null==yn?void 0:yn.awemeId,log_pb:f,enter_from:C.mo(),is_full_screen:p.r()?"1":"0",tab_name:w.getTabName()||I.Rs("tab_name")||"",click_method:y,from_group_id:null==ye?void 0:ye.awemeId,music_id:null==yn||null===(o=yn.music)||void 0===o?void 0:o.mid,compilation_id:null==yn||null===(t=yn.mixInfo)||void 0===t?void 0:t.mixId,tag_id:null===(l=_n.current)||void 0===l||null===(r=l.getCurTopic)||void 0===r?void 0:r.call(l),aweme_type:null==yn?void 0:yn.awemeType,is_pure:vo?"1":"0",to_user_id:null==yn||null===(a=yn.authorInfo)||void 0===a?void 0:a.uid},so),{},{relation:String(b)})):_.i.sendLog("followCancel",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==yn||null===(u=yn.authorInfo)||void 0===u?void 0:u.uid,group_id:null==yn?void 0:yn.awemeId,log_pb:f,enter_from:C.mo(),is_full_screen:p.r()?"1":"0",tab_name:w.getTabName()||I.Rs("tab_name")||"",click_method:y,from_group_id:null==ye?void 0:ye.awemeId,music_id:null==yn||null===(d=yn.music)||void 0===d?void 0:d.mid,compilation_id:null==yn||null===(c=yn.mixInfo)||void 0===c?void 0:c.mixId,tag_id:null===(s=_n.current)||void 0===s||null===(v=s.getCurTopic)||void 0===v?void 0:v.call(s),to_user_id:null==yn||null===(m=yn.authorInfo)||void 0===m?void 0:m.uid,is_pure:vo?"1":"0"},so),{},{relation:String(b)}))}}),fo=mo.follow,ho=mo.unFollow,go=(0,R.r)({selfUid:null==ln||null===(oe=ln.info)||void 0===oe?void 0:oe.uid,actionUid:null==yn||null===(te=yn.authorInfo)||void 0===te?void 0:te.uid,defaultFollowerStatus:null==yn||null===(le=yn.authorInfo)||void 0===le?void 0:le.followerStatus,defaultFollowStatus:null==yn||null===(ie=yn.authorInfo)||void 0===ie?void 0:ie.followStatus}).followStatus,po=(0,s.useCallback)((function(e){var n,o,t=e.tab,l=e.clickMethod,i=void 0===l?"":l;_.i.sendLog("enterVideoCardTab",{from_group_id:ye.groupId,type:t,enter_method:i,enter_from_merge:C.yW(),tab_name:null==so?void 0:so.tab_name}),vn(!0),null===(n=_n.current)||void 0===n||null===(o=n.setTab)||void 0===o||o.call(n,t)}),[sn,$e,on,so]);(0,s.useEffect)((function(){return function(){g.Le.setConfig(g.gI.PlayerCardInfo,{cardType:Oe,isActive:!1})}}),[]),(0,s.useEffect)((function(){Ze&&(null==Je||Je(sn))}),[sn,Je,Ze]);var _o=(0,D.D)({originAwemeInfo:qe,awemeInfo:yn,updateVideoInfo:En,curCard:null===(re=_n.current)||void 0===re||null===(ae=re.getCurTab)||void 0===ae?void 0:ae.call(re),toast:nn,canShowMixCard:!0,canShowRelatedCard:!0,reportParams:so,handleAvatarClick:function(e){var n=(e||{}).clickMethod;po({tab:N.Le.Author,clickMethod:"hot_key"===n?"hot_key":"click_icon"})},handleMixClick:function(){return po({tab:N.Le.Mix,clickMethod:"click_feed_bar"})},handleMusicClick:function(){return po({tab:N.Le.Music,clickMethod:"click_feed_bar"})},handleRelatedClick:function(){return po({tab:N.Le.Related,clickMethod:"click_feed_bar"})},handleHotClick:function(){return po({tab:N.Le.Hot,clickMethod:"click_feed_bar"})},canShowRelatedSearchFeedBar:!0}),Co=_o.relatedVideoConfig,wo=_o.onAvatarClick,Io=_o.onMusicClick,yo=_o.moreConfig,bo=_o.relatedDefaultList,Lo=_o.relatedReqCount;(0,s.useEffect)((function(){Ae&&(null==Je||Je(!0))}),[Ae,Je]),(0,s.useEffect)((function(){yn.awemeId!==(null==ye?void 0:ye.awemeId)&&bn(ye),ao(ye)}),[ye]);var ko=(0,s.useCallback)((function(e){En({inComingAwemeInfo:e,card:"author_card"}),null==Ue||Ue({aweme:e,card:N.Le.Author})}),[En,Ue]),So=(0,s.useCallback)((function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:N.Le.Related;En({inComingAwemeInfo:e,card:n}),null==Ue||Ue({aweme:e,card:n})}),[En,Ue]),Zo=(0,O.x)({awemeInfo:yn}),Eo=Zo.fetchComment,To=Zo.fetchReply,xo=Zo.fetchCommentMention,Ao=Zo.deleteCommentItem,Ro=Zo.publishCommentItem,Po=Zo.diggCommentItem,Mo=(0,s.useCallback)((function(e){var n=(e||{}).clickMethod;_n.current.setTab(N.Le.Comment),_.i.sendLog("enterVideoCardTab",{from_group_id:ye.groupId,type:"comment",enter_method:"hot_key"===n?"hot_key":"click_icon",enter_from_merge:C.yW(),tab_name:null==so?void 0:so.tab_name}),vn(!0)}),[_n,$e,on,sn,so]);(0,s.useEffect)((function(){return y.emit(y.EVENT.feedVideoCardLocateCurrentVideo)}),[Hn]),(0,s.useEffect)((function(){var e,n;(null===(e=eo.current)||void 0===e?void 0:e.awemeId)!==(null==yn?void 0:yn.awemeId)&&Ze&&(null!=yn&&yn.awemeId&&null!==(n=eo.current)&&void 0!==n&&n.awemeId&&y.emit(y.EVENT.videoChange),eo.current=yn,Rn((function(e){var n,o=(null==yn||null===(n=yn.stats)||void 0===n?void 0:n.commentCount)||0;return o===e?"".concat(o):o})))}),[yn,Ze]),(0,U.o)({refScrollEl:$n,changeNextVideo:wn,changePrevVideo:In,swiper:Ee,isActive:Ze,player:null===(ue=hn.current)||void 0===ue?void 0:ue.player});var Vo=(0,b.O)({fullscreenState:p.r()}).isFullscreen;(0,s.useEffect)((function(){Vo&&vn(!1)}),[Vo]),(0,s.useEffect)((function(){gn.current&&(on||$e||(vn(!0),null==Je||Je(!0)),on&&vn(Qe),$e?Vn?(vn(!1),null==Je||Je(!1),Nn(!1)):vn(Qe):Nn(!0))}),[$e,on,Qe]);var No=(0,s.useCallback)((function(){return Wn((function(e){return!e}))}),[]);(0,s.useEffect)((function(){var e=y.listen(y.EVENT.videoTitleClick,(function(e){var n,o,t,l,r;(null===(n=eo.current)||void 0===n?void 0:n.awemeId)===e&&(vn(!0),T.Z.sendLog("clickAuthorHead",(0,i.Z)((0,i.Z)({click_from:"title",action:_n.current?"close":"open",urlParamList:["previous_page"],author_id:null==yn||null===(o=yn.authorInfo)||void 0===o?void 0:o.uid,group_id:null==yn?void 0:yn.awemeId,log_pb:null==yn?void 0:yn.logPb,enter_from:C.mo(),is_full_screen:p.r()?"1":"0",from_follow_list:null!==(t=g.Le.getConfig(g.gI.FromFollowList))&&void 0!==t&&t.tag?"1":"0"},L.t()),so)),no.current?to.current?Wn(!1):Gn(!1):(Gn(!0),null===(l=_n.current)||void 0===l||null===(r=l.setTab)||void 0===r||r.call(l,N.Le.Author)))}));return function(){null==e||e()}}),[]),(0,s.useEffect)((function(){var e=y.listen(y.EVENT.videoTopicClick,(function(e){if(xe.showTopicAndMusicCard){var n,o,t=e.awemeId,l=e.hashtagId,i=e.hashtagName,a=e.isCommerce,d=i;if(u()(i).call(i,"#")){var c=d.split("#");d=(0,r.Z)(c,2)[1]}if(yn.awemeId===t)Gn(!0),to.current&&Wn(!1),null===(n=_n.current)||void 0===n||null===(o=n.setTab)||void 0===o||o.call(n,N.Le.Topic),Jn({hashtagId:l,hashtagName:d,isCommerce:a})}}));return function(){e()}}),[yn,xe.showTopicAndMusicCard]),(0,s.useEffect)((function(){yn&&Ze&&y.emit(y.EVENT.postCurVideoInfo,{awemeId:null==yn?void 0:yn.awemeId,groupId:null==yn?void 0:yn.groupId,scene:null==xe?void 0:xe.tab})}),[yn,null==xe?void 0:xe.tab,Ze]),(0,s.useEffect)((function(){sn&&c()((function(){y.emit(y.EVENT.feedVideoCardLocateCurrentVideo)}),0)}),[sn]),(0,s.useImperativeHandle)(n,(function(){var e,n;return{getMouseLocation:null===(e=_n.current)||void 0===e?void 0:e.getMouseLocation,setTab:null===(n=_n.current)||void 0===n?void 0:n.setTab,getCurTab:function(){var e,n;return null===(e=_n.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e)}}}),[Ze,_n.current]),(0,s.useEffect)((function(){gn.current=!0}),[]);var Fo=(0,s.useMemo)((function(){return{awemeInfo:yn,onLoginGuideShowChange:function(e){pn.current=e},sense:"modal_video",onCloseClick:function(){},onCollapseClick:function(){},userContext:xe.userContext,abtestData:null==xe?void 0:xe.abtestData,changeLoginStatus:function(){rn({type:"updateUserInfo"})},logParams:so}}),[yn,xe,rn,so]),Bo={abtestData:null==xe?void 0:xe.abtestData,fullScreenTarget:Se,isDetail:!1,isShowComment:uo===N.Le.Comment,isTransition:Me,total:0,onCloseCommentClick:Mo,awemeInfo:yn,awemelogPb:null==yn?void 0:yn.logPb,userInfo:ln,scrollContainerEl:null==$n?void 0:$n.current,player:Yn,shortcutMode:null==xe||null===(de=xe.abtestData)||void 0===de?void 0:de.shortcutMode,fetchComment:Eo,fetchReply:To,fetchEmoticonGif:v.D2,fetchCommentMetionList:xo,diggCommentItem:Po,deleteCommentItem:Ao,puhlishCommentItem:Ro,count:20,defaultommentList:[],defaultCursor:0,defaultHotsoonHasMoreRef:0,defaultHasMore:!0,defaultStatusCode:0,defaultCommentId:null==xe?void 0:xe.insertCommentId,isNeedCommentInput:!0,changeLoginStatus:function(){return rn({type:"updateUserInfo"})},reportExtraParams:(0,i.Z)((0,i.Z)({},so),{},{relation:String(go)})};return s.createElement(m.v.Provider,{value:{playerScene:null==xe?void 0:xe.tab,globalCommentCount:An,setGlobalCommentCount:Rn,authorVideoCardClick:ko,setNextAemeInfo:Ln,setPrevAwemeInfo:kn,modalEnterFrom:ze}},s.createElement("div",{className:E()(x.Z.playerCommentWrapper,Be,{isMiniWindow:We})},s.createElement("div",{className:E()(x.Z.playerContainer,"playerContainer",(ce={},(0,l.Z)(ce,x.Z.isHavePlayer,yn),(0,l.Z)(ce,x.Z.isSafari,k.G6()),ce))},Te,s.createElement("div",{className:E()(x.Z.playerWrap,x.Z.modalPlayerWrap,"slider-video"),ref:function(e){Ze?lo.current||(lo.current=e,en(lo)):lo.current=null}},(null==yn?void 0:yn.debugInfo)&&s.createElement(f.W,{req:null==yn||null===(se=yn.debugInfo)||void 0===se?void 0:se.web_debug_req,video:null==yn||null===(ve=yn.debugInfo)||void 0===ve?void 0:ve.client_rec_debug_info,size:{height:null==Yn?void 0:Yn._videoHeight,width:null==Yn?void 0:Yn._videoWidth},gear:null==yn||null===(me=yn.video)||void 0===me||null===(fe=me.bitRateList)||void 0===fe||null===(he=fe[0])||void 0===he?void 0:he.gearName,showPanelRightside:!0}),s.createElement(Fe,(0,t.Z)({},e,{actionFollow:fo,actionUnFollow:ho,userInfo:ln,dispatch:rn,awemeInfo:yn,nextAwemeInfo:Zn,prevAwemeInfo:Sn,playNextFunc:wn,playPrevFunc:In,deleteCurrentSwiper:ke,ref:hn,toggleComment:Mo,onAvatarClick:wo,logParams:(0,i.Z)((0,i.Z)({},so),{},{relation:String(go),is_click_cover:Number(ye!==yn)}),videoToast:nn,abtestData:null==xe?void 0:xe.abtestData,isFullScreen:$e,isAuthorCardShow:!1,slideListInsideFunc:Ne,relatedVideoConfig:Co,isShowRelatedCard:Un,onMusicClick:Io,moreConfig:yo,showMusicEntry:xe.showTopicAndMusicCard,videoHashtagClassName:xe.showTopicAndMusicCard?x.Z.linkHashTag:null,isTopicLinkSearchResult:!0,isShowGuide:He,moreBoxShowList:(0,i.Z)((0,i.Z)({},Xe),{},{notInterestingIcon:(null===(ge=_n.current)||void 0===ge||null===(pe=ge.getCurTab)||void 0===pe?void 0:pe.call(ge))===N.Le.AwemeRelated,unfollow:!0,report:!0}),showSideBar:sn,shortCutFiltered:(null===(_e=_n.current)||void 0===_e||null===(Ce=_e.getCurTab)||void 0===Ce?void 0:Ce.call(_e))!==N.Le.AwemeRelated?[S.getShortcut().dislike.key]:[]}),s.createElement(V.x,{onPlayer:jn}))),s.createElement("button",{className:E()(x.Z.btn,(0,l.Z)({},x.Z.hide,sn)),onClick:function(){var e,n;vn(!0),_.i.sendLog("expandVideoCard",{type:null===(e=_n.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e),enter_from_merge:C.yW()})}},s.createElement(P.Z,{src:F.Z,width:10,height:18,viewBox:"0 0 10 18"}))),s.createElement("div",{id:"videoSideBar",className:E()(x.Z.sideBar,x.Z.sideBarDefaultWidth,x.Z.noTransition,(we={},(0,l.Z)(we,x.Z.sideBarHidden,!sn&&fn),(0,l.Z)(we,x.Z.isFullScreen,fn),we)),onWheel:function(e){return e.stopPropagation()},ref:$n},s.createElement("div",{className:E()(x.Z.sideBarInnerWrapper,x.Z.authorCard,x.Z.relatedVertical,(Ie={},(0,l.Z)(Ie,x.Z.authorCardCollapse,Hn),(0,l.Z)(Ie,x.Z.noTransition,!0),(0,l.Z)(Ie,x.Z.inFullScreen,on||$e),Ie))},s.createElement(Y,{ref:_n,collapse:Hn,isShow:sn,awemeInfo:yn,originFeedAwemeInfo:ye,handleClose:function(){Gn(!1)},modalEnterFrom:ze,isActive:Ze,abtestData:un,scene:"modal",handleCollapse:No,userContext:xe.userContext,handleRelatedVideoChange:So,defaultList:bo,relatedReqCount:Lo,tab:Oe,showTabList:De,defaultTopicData:Qn,relatedAuthorConfig:Fo,relatedCommentConfig:Bo,defaultHotData:io,relatedCardNameMap:Ge,logParams:so,originAwemeInfo:qe})),s.createElement("button",{className:E()(x.Z.btn,x.Z.putBtn,(0,l.Z)({},x.Z.hide,!sn)),onClick:function(){var e,n;vn(!1),_.i.sendLog("closeVideoCard",{type:null===(e=_n.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e),enter_from_merge:C.yW(),tab_name:null==so?void 0:so.tab_name})}},s.createElement(P.Z,{src:F.Z,width:10,height:18,viewBox:"0 0 10 18"})),s.createElement("div",{className:x.Z.sideBarBackground}))))}var z=(0,s.forwardRef)(j)},81536:function(e,n,o){o.d(n,{_:function(){return E}});var t=o(29588),l=o(11789),i=o(10441),r=o.n(i),a=o(21528),u=o(47999),d=o(73404),c=o(41316),s=o(66870),v=o(70335),m=o.n(v),f=o(85649),h="GQF0Dist",g="aOpWh8VC",p="iaxxFq9B",_="dLMH2a77",C="YPGRJVX0",w="OaNxZqFU",I="vGUlZ5X0",y="OvBj617m",b="WNh_uenW",L="sMGo5gOK",k="WORdaoGo",S="j4eA81hQ",Z="pTNkN0cC",E=function(e){var n,o,i,v,E,T,x,A=e.isActive,R=e.awemeInfo,P=e.className,M=e.imgPlaceHolderClassName,V=e.showImg,N=void 0===V||V,F=e.controlHeight,B=(0,a.useState)(!0),H=(0,l.Z)(B,2),W=H[0],D=H[1],O=(0,a.useState)(!1),U=(0,l.Z)(O,2),G=U[0],q=U[1],X=(0,a.useState)(!1),Y=(0,l.Z)(X,2),j=Y[0],z=Y[1],K=(0,a.useState)(null),Q=(0,l.Z)(K,2),J=Q[0],$=Q[1],ee=(0,a.useRef)(0),ne=u.G6(),oe=u.vU(),te=u.GP();ee.current=(null==R||null===(n=R.video)||void 0===n?void 0:n.width)/(null==R||null===(o=R.video)||void 0===o?void 0:o.height);var le=(0,a.useCallback)((function(){J&&ee.current&&(J.offsetWidth/ee.current>J.offsetHeight-(F||c.NV.default)?D(!0):D(!1))}),[J]),ie=(0,a.useCallback)((function(){!G&&q(!0)}),[G]);return(0,a.useEffect)((function(){var e;if(J&&le)return r()(e=d.Z).call(e,J,le),function(){d.Z.remove(J,le)}}),[J,le]),(0,a.useEffect)((function(){A||z(!1)}),[A]),(0,a.useEffect)((function(){q(!1),z(!1)}),[R]),(null==R?void 0:R.awemeType)===s.ed.Note&&N?null:a.createElement("div",{className:m()(P,h,C,(i={},(0,t.Z)(i,L,oe),(0,t.Z)(i,S,A&&j&&!ne),i),"imgBackground"),ref:$},!G&&N&&a.createElement("img",{src:null==R||null===(v=R.video)||void 0===v?void 0:v.originCover,className:m()((E={},(0,t.Z)(E,g,!W),(0,t.Z)(E,p,W),(0,t.Z)(E,_,ne),E),k,M),onLoad:le,onError:ie}),a.createElement("div",{className:m()((T={},(0,t.Z)(T,w,!ne),(0,t.Z)(T,y,oe),(0,t.Z)(T,b,ne),(0,t.Z)(T,Z,te),T))},a.createElement("img",{src:ne?f:(null==R||null===(x=R.video)||void 0===x?void 0:x.originCover)||f}),!ne&&a.createElement("div",{className:I})))}},79876:function(e,n,o){o.d(n,{x:function(){return i}});var t=o(21528),l=o(59662),i=function(e){var n=(0,l.n)(),o=e.onPlayer;return(0,t.useEffect)((function(){n&&(null==o||o(n))}),[n]),null}},72850:function(e,n,o){o.d(n,{_:function(){return I}});var t,l,i=o(21528),r=o(70335),a=o.n(r),u=o(94),d=o(76501);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},c.apply(this,arguments)}var s=function(e){return i.createElement("svg",c({width:16,height:92,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=i.createElement("g",{filter:"url(#tab-bg_svg__filter0_b_33991_204394)"},i.createElement("path",{d:"M16 0v92l-2.626-2.025a12.262 12.262 0 00-7.488-2.552A5.886 5.886 0 010 81.537V10.463a5.886 5.886 0 015.886-5.886c2.709 0 5.342-.897 7.488-2.552L16 0z",fill:"#000",fillOpacity:.3}))),l||(l=i.createElement("defs",null,i.createElement("filter",{id:"tab-bg_svg__filter0_b_33991_204394",x:-20,y:-20,width:56,height:132,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feGaussianBlur",{in:"BackgroundImage",stdDeviation:10}),i.createElement("feComposite",{in2:"SourceAlpha",operator:"in",result:"effect1_backgroundBlur_33991_204394"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_backgroundBlur_33991_204394",result:"shape"})))))},v="UXyEyqbq",m="UdkDK3ea",f="rZlSNoco",h="otZjcQr3",g="o_x_607E",p="n96zKsb5",_="_GD0CJv4",C=function(e){var n=e.onClick,o=e.className;return i.createElement("div",{className:a()(v,m,o)},i.createElement("button",{className:a()(h),onClick:n},i.createElement(u.Z,{src:d.Z,width:10,height:18,viewBox:"0 0 10 18"})))},w=function(e){var n=e.onClick,o=e.className;return i.createElement("div",{className:a()(v,f,o)},i.createElement("button",{className:a()(g),onClick:n},i.createElement(u.Z,{className:a()(p),src:s,width:16,height:92,viewBox:"0 0 16 92"}),i.createElement(u.Z,{className:a()(_),src:d.Z,width:10,height:18,viewBox:"0 0 10 18"})))},I=function(e){switch(e.type){case"circle":return i.createElement(C,e);case"rectangle":return i.createElement(w,e)}return i.createElement(i.Fragment,null)}},18881:function(e,n,o){o.d(n,{x:function(){return r}});var t=o(21528),l=o(1384),i=o(66870),r=function(e){var n=e.awemeInfo,o=(0,t.useCallback)((function(e,o,t,r,a){return l.iq({awemeId:null==n?void 0:n.awemeId,cursor:e,count:o,itemType:(null==n?void 0:n.awemeType)===i.ed.XgVideo?1:0,fetchType:t,cancleFunc:r,cid:a})}),[null==n?void 0:n.awemeId]),r=(0,t.useCallback)((function(e,o,t){return l.rs({awemeId:null==n?void 0:n.awemeId,commentId:e,cursor:o,count:t,itemType:(null==n?void 0:n.awemeType)===i.ed.XgVideo?1:0})}),[null==n?void 0:n.awemeId]),a=(0,t.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o=e.cursor,t=void 0===o?0:o,i=e.count,r=e.needPage,a=void 0===r||r,u=e.ctx,d=void 0===u?null:u;return l.Yp({cursor:t,count:i,needPage:a,ctx:d,groupId:null==n?void 0:n.awemeId})}),[null==n?void 0:n.awemeId]),u=(0,t.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o=e.cid,t=e.diggType,r=e.level;return l.y6({awemeId:null==n?void 0:n.awemeId,cid:o,diggType:t,itemType:(null==n?void 0:n.awemeType)===i.ed.XgVideo?1:0,level:r})}),[null==n?void 0:n.awemeId]),d=(0,t.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.cid;return l.YF({cid:n})}),[]),c=(0,t.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},o=e.text,t=e.textExtra,i=e.replyId,r=e.replyToReplyId,a=e.commentSendCelltime,u=e.commentVideoCelltime;return l.uo({awemeId:null==n?void 0:n.awemeId,text:o,textExtra:t,replyId:i,replyToReplyId:r,commentVideoCelltime:u,commentSendCelltime:a})}),[null==n?void 0:n.awemeId]);return{fetchComment:o,fetchReply:r,fetchCommentMention:a,publishCommentItem:c,deleteCommentItem:d,diggCommentItem:u}}},8395:function(e,n,o){o.d(n,{E:function(){return d}});var t=o(10396),l=o.n(t),i=o(21528),r=o(30234),a=o(66870),u=o(70333),d=function(e){var n=e.awemeInfo,o=e.abtestData.newLookRelated,t=e.showRelatedTabList,d=void 0===t?[]:t,c=e.clickedCard,s=e.ctr,v=e.useCTR,m=void 0===v||v;return(0,i.useMemo)((function(){var e,t,i={defaultCard:c||"author_card",videoTag:""};if(c||!n)return i;var v=null==s?void 0:s.threshold,f=(null==n||null===(e=n.webRawData)||void 0===e||null===(t=e.CTR)||void 0===t?void 0:t.recommendScore)||{},h=f.collectionScore,g=f.hotScore,p=f.relatedScore,_=f.relatedSearchScore,C=null!=d&&l()(d).call(d,u.Le.Mix)?Number(h):0,w=null!=d&&l()(d).call(d,u.Le.Hot)?Number(g):0,I=null!=d&&l()(d).call(d,u.Le.Related)?Number(p):0;if(m)switch(o){case r.LookRelatedABValV2.OldFrame:case r.LookRelatedABValV2.ModalFrame:case r.LookRelatedABValV2.ModalFrameFast:case r.LookRelatedABValV2.BtnFrameFast:n.awemeType===a.ed.XgVideo?i.defaultCard="related_card":n.awemeType===a.ed.Normal&&(l()(d).call(d,u.Le.Mix)&&l()(d).call(d,u.Le.Hot)?Math.max(C,w)>v&&(w>C&&w>=I&&w>v?(i.defaultCard="hot_card",i.videoTag="hot"):C>v&&(i.defaultCard="compilation_card",i.videoTag="mix")):l()(d).call(d,u.Le.Hot)?w>v&&(i.defaultCard="hot_card",i.videoTag="hot"):l()(d).call(d,u.Le.Mix)&&C>v&&(i.defaultCard="compilation_card",i.videoTag="mix"),!i.videoTag&&_>v&&(i.videoTag="related-search"))}else n.awemeType===a.ed.Normal&&(l()(d).call(d,u.Le.Mix)&&l()(d).call(d,u.Le.Hot)?(i.defaultCard="compilation_card",i.videoTag="mix"):l()(d).call(d,u.Le.Hot)?(i.defaultCard="hot_card",i.videoTag="hot"):l()(d).call(d,u.Le.Mix)&&(i.defaultCard="compilation_card",i.videoTag="mix"),i.videoTag||(i.videoTag="related-search"));return i}),[n,o,d])}},87500:function(e,n,o){o.d(n,{$:function(){return r}});var t=o(11789),l=o(21528),i=o(47437),r=function(e){var n=e.awemeInfo,o=(0,l.useState)((0,i.g)(n)),r=(0,t.Z)(o,2),a=r[0],u=r[1];return(0,l.useEffect)((function(){u((0,i.g)(n))}),[n]),{hotData:a}}},93506:function(e,n,o){o.d(n,{o:function(){return a}});var t=o(21528),l=o(88263),i=o(97227),r=o(24713),a=function(e){var n=e.refScrollEl,o=e.swiper,a=e.isActive,u=e.changeNextVideo,d=e.changePrevVideo,c=e.handlePageFullScreen,s=e.handleFullScreen,v=e.player;(0,t.useEffect)((function(){var e,o,t,i,u,d=function(e){null==e||e.stopPropagation()},m=function(e){null==e||e.stopPropagation()};n.current&&(null===(o=n.current)||void 0===o||o.addEventListener("wheel",d),null===(t=n.current)||void 0===t||t.addEventListener("mousedown",m),null===(i=n.current)||void 0===i||i.addEventListener("pointerdown",m),null===(u=n.current)||void 0===u||u.addEventListener("touchstart",m));var f=l.listen(l.EVENT.pageFullScreen,(function(e){if(a){var n=e.fullScreen;null==c||c(n)}})),h=function(e){return a&&(null==s?void 0:s(e))};return null==v||null===(e=v.on)||void 0===e||e.call(v,r.FULLSCREEN_CHANGE,h),function(){var e,o,t,l,i;null===(e=n.current)||void 0===e||e.removeEventListener("wheel",d),null===(o=n.current)||void 0===o||o.removeEventListener("mousedown",m),null===(t=n.current)||void 0===t||t.removeEventListener("pointerdown",m),null===(l=n.current)||void 0===l||l.removeEventListener("touchstart",m),null==f||f(),null==v||null===(i=v.off)||void 0===i||i.call(v,r.FULLSCREEN_CHANGE,h)}}),[n,v,s,c,a]),(0,t.useEffect)((function(){if(a&&o){var e=function(){i.i0(i.CK.User),u.apply(void 0,arguments)},n=function(){i.i0(i.CK.User),d.apply(void 0,arguments)};try{null==o||o.on("changeNext",e),null==o||o.on("changePrev",n)}catch(t){}return function(){try{null==o||o.off("changeNext",e),null==o||o.off("changePrev",n)}catch(t){}}}}),[a,o,u,d])}},86230:function(e,n,o){o.d(n,{M:function(){return I}});var t=o(53778),l=o(41257),i=o(11789),r=o(38373),a=o.n(r),u=o(11235),d=o.n(u),c=o(24514),s=o.n(c),v=o(23947),m=o.n(v),f=o(21528),h=o(18653),g=o(88263),p=o(98301),_=o(73824),C=o(30234),w=o(54748),I=function(e){var n=e.originAwemeInfo,o=e.player,r=e.toast,u=e.reportParams,c=e.isActive,v=e.abTest,I=e.isLogin,y=e.curCard,b=e.isShowAuthorCardLoginGuide,L=e.isLast,k=e.handleNextOnLast,S=e.handleOuterPlayNext,Z=e.handleOuterPlayPrev,E=e.handlePrev,T=e.handleNext,x=e.isInnerFeedCondition,A=(0,f.useState)(n),R=(0,i.Z)(A,2),P=R[0],M=R[1],V=(0,f.useState)(null),N=(0,i.Z)(V,2),F=N[0],B=N[1],H=(0,f.useState)(null),W=(0,i.Z)(H,2),D=W[0],O=W[1],U=(0,f.useMemo)((function(){return null!=x?x:n.awemeId!==P.awemeId}),[x,n,P]),G=(0,f.useCallback)((function(e){var o=e.inComingAwemeInfo,t=e.card,i=void 0===t?"author_card":t;"comment"!==i&&h.Le.setConfig(h.gI.PlayerCardInfo,{cardType:i,isActive:(null==o?void 0:o.awemeId)===(null==n?void 0:n.awemeId)||c}),(null==o?void 0:o.awemeId)!==(null==P?void 0:P.awemeId)&&(M((0,l.Z)((0,l.Z)({},o),{},{logPb:(null==o?void 0:o.scrollLogPb)||(null==o?void 0:o.logPb)})),d()((function(){g.emit(g.EVENT.feedVideoCardLocateCurrentVideo)})))}),[P,null==n?void 0:n.awemeId,o]),q=(0,f.useCallback)(a()((function(){var e;if(c){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];i[0];var d=s()(i).call(i,1);p.Y3(null===(e=d[0])||void 0===e?void 0:e.from);var v=function(){var e,n,o;w.Z.sendLog("clickNextVideo",(0,l.Z)((0,l.Z)({urlParamList:["previous_page"],author_id:null==D||null===(e=D.authorInfo)||void 0===e?void 0:e.uid,log_pb:null==D?void 0:D.logPb,group_id:null==D?void 0:D.awemeId,enter_from:_.mo(),click_from:null===(n=d[0])||void 0===n?void 0:n.from},u),{},{compilation_id:null==D||null===(o=D.mixInfo)||void 0===o?void 0:o.mixId}))};if(!U||"author_card"===y&&b){var f;L&&(null==k||k()),S.apply(void 0,(0,t.Z)(d)),L&&"auto"===(null==i||null===(f=i[1])||void 0===f?void 0:f.from)&&o&&(o.isReplay=!0,o.replay())}else{var h,g,C,I,Z=new(m())([["related_card","\u8be5\u89c6\u9891\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],["music_card","\u8be5\u97f3\u4e50\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],["tag_card","\u8be5\u8bdd\u9898\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],["compilation_card","\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],["author_card","\u8be5\u4f5c\u8005\u5df2\u65e0\u66f4\u591a\u4f5c\u54c1"],["comment","\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],["collection_folder_card","\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"]]),E=new(m())([["related_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u76f8\u5173\u89c6\u9891"],["music_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u97f3\u4e50\u89c6\u9891"],["tag_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u8bdd\u9898\u89c6\u9891"],["compilation_card","\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],["author_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u4f5c\u8005\u7684\u5176\u4ed6\u89c6\u9891"],["comment","\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],["collection_folder_card","\u6682\u65e0\u65e0\u6cd5\u5207\u6362"]]);if(D)G({inComingAwemeInfo:D,card:y}),"scroll"!==(null===(g=d[0])||void 0===g?void 0:g.from)&&"keyboard"!==(null===(C=d[0])||void 0===C?void 0:C.from)&&"click_button"!==(null===(I=d[0])||void 0===I?void 0:I.from)||v();else if("auto"===(null===(h=d[0])||void 0===h?void 0:h.from))o&&(o.isReplay=!0,o.replay());else if(null===D){var x=E.get(y);x&&r(x)}else{var A=Z.get(y);A&&r(A)}}null==T||T()}}),400,{leading:!0,trailing:!1}),[u,D,o,c,y,k,U,b,L]),X=(0,f.useCallback)(a()((function(){var e;if(c){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];o[0];var a=s()(o).call(o,1),f=function(){var e,n,o;w.Z.sendLog("clickPreviousVideo",(0,l.Z)((0,l.Z)({urlParamList:["previous_page"],author_id:null==F||null===(e=F.authorInfo)||void 0===e?void 0:e.uid,log_pb:null==F?void 0:F.logPb,group_id:null==F?void 0:F.awemeId,enter_from:_.mo(),click_from:null===(n=a[0])||void 0===n?void 0:n.from},u),{},{compilation_id:null==F||null===(o=F.mixInfo)||void 0===o?void 0:o.mixId}))};if(p.Y3(null===(e=a[0])||void 0===e?void 0:e.from),!U||"author_card"===y&&b)d()((function(){return null==Z?void 0:Z.apply(void 0,(0,t.Z)(a))}),0);else{var h,g,L,k=new(m())([["related_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u76f8\u5173\u89c6\u9891"],["music_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u97f3\u4e50\u89c6\u9891"],["tag_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u8bdd\u9898\u89c6\u9891"],["compilation_card","\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],["author_card","\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u4f5c\u8005\u7684\u5176\u4ed6\u89c6\u9891"]]);if(F)G({inComingAwemeInfo:F,card:y}),"scroll"!==(null===(h=a[0])||void 0===h?void 0:h.from)&&"keyboard"!==(null===(g=a[0])||void 0===g?void 0:g.from)&&"click_button"!==(null===(L=a[0])||void 0===L?void 0:L.from)||f();else if(null===F)if(I||(null==v?void 0:v.authorCardLoginGuide)!==C.AuthorCardLoginGuideABVal.ForceGuide||"author_card"!==y||b){var S=k.get(y);S&&r(S)}else r("\u8bf7\u767b\u5f55\u540e\u67e5\u770b\u66f4\u591a")}null==E||E()}}),400,{leading:!0,trailing:!1}),[F,c,u,v,y,U,b]);return{awemeInfo:P,setAwemeInfo:M,updateInnerVideoInfo:G,changePrevVideo:X,changeNextVideo:q,setPrevAwemeInfo:B,setNextAwemeInfo:O,nextAwemeInfo:D,prevAwemeInfo:F,isInnerFeed:U}}},52974:function(e,n,o){o.d(n,{D:function(){return p}});var t=o(53778),l=o(41257),i=o(11789),r=o(54882),a=o.n(r),u=o(39094),d=o(21528),c=o(66870),s=o(73824),v=o(53549),m=o(18653),f=o(59013),h=o(88263),g=o(54748),p=function(e){var n=e.originAwemeInfo,o=e.awemeInfo,r=e.toast,p=e.reportParams,_=void 0===p?{}:p,C=e.canShowMixCardEntry,w=void 0!==C&&C,I=e.canShowMixCard,y=void 0!==I&&I,b=e.canShowRelatedCard,L=void 0!==b&&b,k=e.canShowRelatedSearchFeedBar,S=void 0!==k&&k,Z=e.curCard,E=e.handleAvatarClick,T=e.handleMixClick,x=e.handleMusicClick,A=e.handleRelatedClick,R=e.handleHotClick,P=e.isShowSideBar,M=e.relatedVideoEntryIsShow,V=e.isCanHoverRelatedVideoEntry,N=e.isMiniWin,F=(0,d.useState)([]),B=(0,i.Z)(F,2),H=B[0],W=(B[1],(0,d.useState)(1)),D=(0,i.Z)(W,2),O=D[0],U=(D[1],(0,d.useCallback)((function(e,n){var t,i,r,a,u;return(null==o?void 0:o.awemeType)===c.ed.XgVideo?(g.Z.sendLog("clickAuthorHead",(0,l.Z)((0,l.Z)({click_from:(null==n?void 0:n.clickMethod)||"head",action:"",urlParamList:["previous_page"],author_id:null==o||null===(a=o.authorInfo)||void 0===a?void 0:a.uid,group_id:null==o?void 0:o.awemeId,log_pb:null==o?void 0:o.logPb,enter_from:s.mo(),is_full_screen:v.r()?"1":"0",from_follow_list:null!==(u=m.Le.getConfig(m.gI.FromFollowList))&&void 0!==u&&u.tag?"1":"0"},f.t()),_)),void((null==o?void 0:o.awemeType)===c.ed.XgVideo&&h.emit(h.EVENT.videoPause))):(null==e||null===(t=e.preventDefault)||void 0===t||t.call(e),g.Z.sendLog("clickAuthorHead",(0,l.Z)((0,l.Z)({click_from:(null==n?void 0:n.clickMethod)||"head",urlParamList:["previous_page"],author_id:null==o||null===(i=o.authorInfo)||void 0===i?void 0:i.uid,group_id:null==o?void 0:o.awemeId,log_pb:null==o?void 0:o.logPb,enter_from:s.mo(),is_full_screen:v.r()?"1":"0",from_follow_list:null!==(r=m.Le.getConfig(m.gI.FromFollowList))&&void 0!==r&&r.tag?"1":"0"},_),{},{action:P&&"author_card"===Z?"close":"open"},f.t())),null==E||E(e,n),!0)}),[o,_,Z,E,P])),G=(0,d.useMemo)((function(){var e;return{isShow:w&&-1!==(null==o||null===(e=o.mixInfo)||void 0===e?void 0:e.status),onClick:function(){return null==T?void 0:T()}}}),[T,o,w]),q=(0,d.useMemo)((function(){return{isShow:M&&(null==o?void 0:o.awemeType)!==c.ed.XgVideo&&!N,canHoverShowTitle:V}}),[M,V,o]),X=(0,d.useCallback)((function(){null==R||R()}),[R]);return{moreConfig:G,relatedVideoConfig:q,videoInfoTags:(0,d.useMemo)((function(){var e,l,i,r,d,c,s,v,m,f,h,g,p,_,C,w,I,b,k,Z=[];y&&-1!==(null==o||null===(e=o.mixInfo)||void 0===e?void 0:e.status)&&Z.push({type:"mix",foldTitle:"\u5408\u96c6",title:"\u5408\u96c6 \xb7 ".concat(null==o||null===(d=o.mixInfo)||void 0===d?void 0:d.mixName),onClick:function(){return null==T?void 0:T()}});null!=o&&null!==(l=o.hotList)&&void 0!==l&&l.title&&51!==(null==o||null===(i=o.hotList)||void 0===i?void 0:i.rank)&&2!==(null==o||null===(r=o.hotList)||void 0===r?void 0:r.type)&&Z.push({type:"hot",foldTitle:null!=o&&null!==(c=o.hotList)&&void 0!==c&&c.rank?a()(s="".concat(null==o||null===(v=o.hotList)||void 0===v?void 0:v.header,"TOP")).call(s,null==o||null===(m=o.hotList)||void 0===m?void 0:m.rank):"\u70ed\u699c",title:null!=o&&null!==(f=o.hotList)&&void 0!==f&&f.rank?a()(h=a()(g="".concat(null==o||null===(p=o.hotList)||void 0===p?void 0:p.header,"TOP")).call(g,null==o||null===(_=o.hotList)||void 0===_?void 0:_.rank,": ")).call(h,null==o||null===(C=o.hotList)||void 0===C?void 0:C.title):"\u7f6e\u9876\u70ed\u699c: ".concat(null==o||null===(w=o.hotList)||void 0===w?void 0:w.title),customProps:{trending_topic:null==o||null===(I=o.hotList)||void 0===I?void 0:I.title,first_tag_name:null==o||null===(b=o.hotList)||void 0===b?void 0:b.header,top:null==o||null===(k=o.hotList)||void 0===k?void 0:k.rank},onClick:X});if(L&&(null==n?void 0:n.awemeId)===(null==o?void 0:o.awemeId)&&Z.push({type:"related",foldTitle:"\u76f8\u5173\u63a8\u8350",title:null!=o&&o.videoFeedTag?"\u76f8\u5173\u63a8\u8350\xb7\u89c2\u770b\u66f4\u591a".concat(null==o?void 0:o.videoFeedTag,"\u89c6\u9891"):"\u76f8\u5173\u63a8\u8350\xb7\u89c2\u770b\u66f4\u591a\u7cbe\u5f69\u89c6\u9891",onClick:function(){return null==A?void 0:A()}}),S){var E=(0,u.i)(o);Z.push.apply(Z,(0,t.Z)(E))}return Z}),[T,y,o,X,L,n,A,S]),relatedDefaultList:H,relatedReqCount:O,onMusicClick:function(){var e;null!=o&&null!==(e=o.music)&&void 0!==e&&e.mid?null==x||x():r("\u8be5\u58f0\u97f3\u4e0d\u53ef\u7528")},onAvatarClick:U}}},25955:function(e,n,o){o.d(n,{l:function(){return v}});var t=o(41257),l=o(10396),i=o.n(l),r=o(21528),a=o(18653),u=o(66870),d=o(73824),c=o(89086),s=o(59013),v=function(e){var n=e.awemeInfo,o=e.logParams,l=void 0===o?{}:o,v=e.originAwemeInfo,m=e.tagId,f=e.expandCard,h=e.curCard,g=void 0===h?"":h,p=e.isInnerFeedCondition,_=(0,r.useRef)(l),C=(0,r.useMemo)((function(){var e,o,t;return null!==(e=null===(o=a.Le.getConfig(a.gI.UnLookVideos))||void 0===o||null===(t=o[null==n?void 0:n.awemeId])||void 0===t?void 0:t.status)&&void 0!==e?e:""}),[n]);return(0,r.useEffect)((function(){var e,o,r,h,w=null==l?void 0:l.enter_from,I="";""!==g&&(I=g===f&&"comment"!==g?"1":"0");var y=(0,t.Z)((0,t.Z)({},l),{},{is_card_expand:I,from_group_id:null==v?void 0:v.awemeId,music_id:null==n||null===(e=n.music)||void 0===e?void 0:e.mid,compilation_id:null==n||null===(o=n.mixInfo)||void 0===o?void 0:o.mixId,tag_id:m,from_xigua:(null==n?void 0:n.awemeType)===u.ed.XgVideo?1:0,insert_task_id:(null==n?void 0:n.libfinsertTaskId)||"0",enter_from_merge:d.yW(),search_params:null==n?void 0:n.searchLogParams,is_seen:C,is_update:null!==(r=a.Le.getConfig(a.gI.UnLookVideos))&&void 0!==r&&r[null==n?void 0:n.awemeId]?1:0,post_time:c.MH(1e3*n.createTime),is_from_skylight:null!==(h=null==l?void 0:l.is_from_skylight)&&void 0!==h?h:0},s.t()),b=["author_card","hot_card","compilation_card","music_card","related_card","tag_card","aweme_related_card","search_card","history_card","like_card","collection_card","handpick_card"];if(null!=p?p:(null==v?void 0:v.awemeId)!==(null==n?void 0:n.awemeId))if(i()(b).call(b,g))w=g;else{if("comment"===g){var L=a.Le.getConfig(a.gI.PlayerCardInfo),k=a.Le.getConfig(a.gI.CurLookCard);w=null!=k&&k.curCard?null==k?void 0:k.curCard:null!=L&&L.isActive&&null!=L&&L.cardType?null==L?void 0:L.cardType:null==l?void 0:l.enter_from}_.current=(0,t.Z)({},y)}_.current=w?(0,t.Z)((0,t.Z)({},y),{},{enter_from:w}):(0,t.Z)({},y)}),[l,g,f,n,v,m,C]),{reportParams:_.current}}},70737:function(e,n,o){var t=o(68671),l=o(29588),i=o(85891),r=o(53778),a=o(41257),u=o(11789),d=o(38373),c=o.n(d),s=o(33485),v=o.n(s),m=o(11235),f=o.n(m),h=o(24514),g=o.n(h),p=o(23947),_=o.n(p),C=o(54882),w=o.n(C),I=o(9551),y=o.n(I),b=o(9625),L=o.n(b),k=o(10396),S=o.n(k),Z=o(21528),E=o(24713),T=o(1384),x=o(41122),A=o(88263),R=o(18653),P=o(66870),M=o(73824),V=o(89086),N=o(59013),F=o(53549),B=o(86358),H=o(21144),W=o(98301),D=o(63896),O=o(97227),U=o(47999),G=o(30234),q=o(4158),X=o(3616),Y=o(70335),j=o.n(Y),z=o(54748),K=o(73567),Q=o(26195),J=o(86164),$=o(98821),ee=o(79876),ne=o(47437),oe=o(39094),te=o(79100),le=o(37525),ie=o(37707),re=o(52214),ae=o(97921),ue=o(70333),de=o(94344),ce=o(9187),se=(0,$.default)({resolved:{},chunkName:function(){return"Comment"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(640),o.e(1456)]).then(o.bind(o,88023))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 88023}},{ssr:!1,resolveComponent:function(e){return e.Comment}}),ve=(0,$.default)({resolved:{},chunkName:function(){return"AuthorCard"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return o.e(1976).then(o.bind(o,49442))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 49442}},{ssr:!1}),me=(0,$.default)({resolved:{},chunkName:function(){return"RelatedVideoCard"},isReady:function(e){var n=this.resolve(e);return!0===this.resolved[n]&&!!o.m[n]},importAsync:function(){return Promise.all([o.e(7891),o.e(7345),o.e(640),o.e(2519)]).then(o.bind(o,56910))},requireAsync:function(e){var n=this,o=this.resolve(e);return this.resolved[o]=!1,this.importAsync(e).then((function(e){return n.resolved[o]=!0,e}))},requireSync:function e(n){var t=this.resolve(n);return o(t)},resolve:function e(){return 56910}},{ssr:!1}),fe=(0,Z.forwardRef)((function(e,n){var o,d,s,m,h,p,C,I,b,k,G,Y,$,te,le,ie,re,fe,he,ge,pe,_e,Ce,we,Ie,ye,be,Le,ke,Se,Ze=e.item,Ee=e.playPrevFunc,Te=e.playNextFunc,xe=e.deleteCurrentSwiper,Ae=e.fullScreenTarget,Re=e.isActive,Pe=e.isNext,Me=e.swiper,Ve=e.children,Ne=e.customProps,Fe=e.isLast,Be=e.handleNextOnLast,He=e.InnerPlayer,We=e.className,De=e.defaultCommentShow,Oe=void 0!==De&&De,Ue=e.isShowGuide,Ge=e.defaultComment,qe=void 0===Ge?null:Ge,Xe=e.logParams,Ye=e.shortCutFilteredList,je=e.modalEnterFrom,ze=(0,Z.useContext)(ae.Cv),Ke=ze.globalIsCommentShow,Qe=ze.setIsCommentShowFunc,Je=ze.setTargetVideoRef,$e=ze.isClientMiniWin,en=ze.videoToast,nn="modal"===(null==Ne?void 0:Ne.tab)?function(e){return de.F.info(e)}:en,on=Ne.userContext||{},tn=on.userInfo,ln=on.dispatch,rn=(tn||{}).isLogin,an=(null==Ne?void 0:Ne.abtestData)||{},un=(0,Z.useState)(Ze),dn=(0,u.Z)(un,2),cn=dn[0],sn=dn[1],vn=(0,Z.useState)(null),mn=(0,u.Z)(vn,2),fn=mn[0],hn=mn[1],gn=(0,Z.useState)(null),pn=(0,u.Z)(gn,2),_n=pn[0],Cn=pn[1],wn=(0,Z.useState)(Ke||Oe),In=(0,u.Z)(wn,2),yn=In[0],bn=In[1],Ln=(0,Z.useState)(!(Ke||Oe)),kn=(0,u.Z)(Ln,2),Sn=kn[0],Zn=kn[1],En=(0,Z.useState)(!1),Tn=(0,u.Z)(En,2),xn=Tn[0],An=Tn[1],Rn=(0,Z.useState)((null==cn||null===(o=cn.stats)||void 0===o?void 0:o.commentCount)||0),Pn=(0,u.Z)(Rn,2),Mn=Pn[0],Vn=Pn[1],Nn=(0,Z.useState)(!1),Fn=(0,u.Z)(Nn,2),Bn=Fn[0],Hn=Fn[1],Wn=(0,Z.useState)(!1),Dn=(0,u.Z)(Wn,2),On=Dn[0],Un=Dn[1],Gn=(0,Z.useState)(!1),qn=(0,u.Z)(Gn,2),Xn=qn[0],Yn=qn[1],jn=(0,Z.useState)(!1),zn=(0,u.Z)(jn,2),Kn=zn[0],Qn=zn[1],Jn=(0,Z.useState)(!1),$n=(0,u.Z)(Jn,2),eo=$n[0],no=$n[1],oo=(0,Z.useState)([]),to=(0,u.Z)(oo,2),lo=to[0],io=to[1],ro=(0,Z.useState)(1),ao=(0,u.Z)(ro,2),uo=ao[0],co=ao[1],so=(0,Z.useState)(null),vo=(0,u.Z)(so,2),mo=vo[0],fo=vo[1],ho=(0,Z.useState)(ue.Le.Related),go=(0,u.Z)(ho,2),po=go[0],_o=go[1],Co=(0,Z.useState)(x.O(cn)),wo=(0,u.Z)(Co,2),Io=wo[0],yo=wo[1],bo=(0,Z.useState)((0,ne.g)(cn)),Lo=(0,u.Z)(bo,2),ko=Lo[0],So=Lo[1],Zo=(0,Z.useRef)(null),Eo=(0,Z.useRef)(null),To=(0,Z.useRef)(null),xo=(0,Z.useRef)(cn),Ao=(0,Z.useRef)(null==cn||null===(d=cn.authorInfo)||void 0===d?void 0:d.uid),Ro=(0,Z.useRef)(xn),Po=(0,Z.useRef)(eo),Mo=(0,Z.useRef)(fn),Vo=(0,Z.useRef)(_n),No=(0,Z.useRef)(Te),Fo=(0,Z.useRef)(Ee),Bo=(0,Z.useRef)(Re),Ho=(0,Z.useRef)(Xn),Wo=(0,Z.useRef)(Kn),Do=(0,Z.useRef)(!1),Oo=(0,Z.useRef)(!1),Uo=(0,Z.useRef)(null),Go=(0,Z.useRef)(null),qo=(0,Z.useRef)(null==Ne?void 0:Ne.logParams),Xo=(0,Z.useRef)("login_guide"),Yo=(0,Z.useState)(""),jo=(0,u.Z)(Yo,2),zo=jo[0],Ko=jo[1],Qo=(0,Z.useState)(!1),Jo=(0,u.Z)(Qo,2),$o=Jo[0],et=Jo[1],nt=(0,Z.useState)(!1),ot=(0,u.Z)(nt,2),tt=ot[0],lt=ot[1],it=(Ne||{}).shouldPreload;No.current=Te,Fo.current=Ee,Vo.current=_n,Mo.current=fn,Bo.current=Re;var rt=(0,Z.useMemo)((function(){var e=yn||xn||eo;return A.emit(A.EVENT.changeVideoSideBar,{isActive:Re,isShowComment:yn,isAuthorCardShow:xn,isShowRelatedCard:eo}),e}),[yn,xn,eo,Xn,Re]),at=(0,Z.useMemo)((function(){var e,n;return null===(e=Uo.current)||void 0===e||null===(n=e.getCurTopic)||void 0===n?void 0:n.call(e)}),[Uo.current]),ut={dependOnPlayer:!0,awemeInfo:Ze,isShow:(null==Ze||null===(s=Ze.relatedRecommend)||void 0===s?void 0:s.relatedBar)&&Ne.showRelatedCardEntry,canShowGuide:(null==Ze||null===(m=Ze.relatedRecommend)||void 0===m?void 0:m.relatedBar)&&Ne.showRelatedCardGuide,onClick:function(){no(!0),Wo.current&&Qn(!1)},onGuideCoverClick:function(e){wt(e,ue.Le.Related),no(!0)},setRelatedDefaultList:function(e){return io(e)},setRelatedReqCount:function(e){return co(e)}},dt=(0,ce.O)({player:mo,isActive:Re}).inImmersive,ct=(0,Z.useMemo)((function(){return xn||eo?xn?Xn?"0":"1":eo?Kn?"0":"1":void 0:""}),[xn,eo,Xn,Kn]),st=(0,Z.useMemo)((function(){var e,n,o;return null!==(e=null===(n=R.Le.getConfig(R.gI.UnLookVideos))||void 0===n||null===(o=n[null==cn?void 0:cn.awemeId])||void 0===o?void 0:o.status)&&void 0!==e?e:""}),[cn]);qo.current=(0,Z.useMemo)((function(){var e,n,o,t,l,i=null==Ne||null===(e=Ne.logParams)||void 0===e?void 0:e.enter_from,r=(0,a.Z)((0,a.Z)({},null==Ne?void 0:Ne.logParams),{},{is_card_expand:ct,from_group_id:null==Ze?void 0:Ze.awemeId,music_id:null==cn||null===(n=cn.music)||void 0===n?void 0:n.mid,compilation_id:null==cn||null===(o=cn.mixInfo)||void 0===o?void 0:o.mixId,tag_id:at||"",from_xigua:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,insert_task_id:(null==cn?void 0:cn.libfinsertTaskId)||"0",enter_from_merge:M.yW(),is_pure:dt?"1":"0",search_params:null==cn?void 0:cn.searchLogParams,is_seen:st,is_update:null!==(t=R.Le.getConfig(R.gI.UnLookVideos))&&void 0!==t&&t[null==cn?void 0:cn.awemeId]?1:0,post_time:V.MH(1e3*cn.createTime),is_from_skylight:null!==(l=null==Xe?void 0:Xe.is_from_skylight)&&void 0!==l?l:0},N.t());if((null==Ze?void 0:Ze.awemeId)!==(null==cn?void 0:cn.awemeId))if(xn)i="author_card";else{if(!eo)return(0,a.Z)({},r);var u,d,c,s,v,m,f,h;i="related_card",(null===(u=Uo.current)||void 0===u||null===(d=u.getCurTab)||void 0===d?void 0:d.call(u))===ue.Le.Music?i="music_card":(null===(c=Uo.current)||void 0===c||null===(s=c.getCurTab)||void 0===s?void 0:s.call(c))===ue.Le.Topic?i="tag_card":(null===(v=Uo.current)||void 0===v||null===(m=v.getCurTab)||void 0===m?void 0:m.call(v))===ue.Le.Mix?i="compilation_card":(null===(f=Uo.current)||void 0===f||null===(h=f.getCurTab)||void 0===h?void 0:h.call(f))===ue.Le.Hot&&(i="hot_card")}return i?(0,a.Z)((0,a.Z)({},r),{},{enter_from:i}):r}),[dt,null==Ne?void 0:Ne.logParams,xn,eo,null===(h=Uo.current)||void 0===h||null===(p=h.getCurTab)||void 0===p?void 0:p.call(h),cn,Ze,ct,at,st]);(0,Z.useEffect)((function(){if(mo){var e,n=function(e){"volume"===(null==e?void 0:e.pluginName)&&R.Le.setConfig(R.gI.ForceMuted,null)};return null==mo||null===(e=mo.on)||void 0===e||e.call(mo,E.USER_ACTION,n),function(){var e;null==mo||null===(e=mo.off)||void 0===e||e.call(mo,E.USER_ACTION,n)}}}),[mo]);var vt=function(){var e,n;no(!0),Wo.current&&Qn(!1),_o(ue.Le.Mix),null===(e=Uo.current)||void 0===e||null===(n=e.setTab)||void 0===n||n.call(e,ue.Le.Mix)},mt=function(){var e,n;no(!0),Wo.current&&Qn(!1),_o(ue.Le.Hot),null===(e=Uo.current)||void 0===e||null===(n=e.setTab)||void 0===n||n.call(e,ue.Le.Hot)},ft=(0,Q.OM)({selfUid:null==tn||null===(C=tn.info)||void 0===C?void 0:C.uid,actionUid:null==cn||null===(I=cn.authorInfo)||void 0===I?void 0:I.uid,defaultFollowerStatus:null==cn||null===(b=cn.authorInfo)||void 0===b?void 0:b.followerStatus,defaultFollowStatus:null==cn||null===(k=cn.authorInfo)||void 0===k?void 0:k.followStatus,isLogin:rn,accountParentEl:F.r()&&Ae,onLoginSuccess:function(){return null==ln?void 0:ln({type:"updateUserInfo"})},logExtraParams:qo.current,success:function(e){var n,o,t,l,i,r,u,d,c,s,v,m,f=e.logPb,h=e.action,g=e.clickFrom,p=void 0===g?"icon":g,_=e.beforeFollowStatus;"follow"===h?z.Z.sendLog("follow",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:null==cn||null===(n=cn.authorInfo)||void 0===n?void 0:n.uid,group_id:null==cn?void 0:cn.awemeId,log_pb:f,enter_from:M.mo(),is_full_screen:F.r()?"1":"0",tab_name:B.getTabName()||H.Rs("tab_name")||"",click_method:p,from_group_id:null==Ze?void 0:Ze.awemeId,music_id:null==cn||null===(o=cn.music)||void 0===o?void 0:o.mid,compilation_id:null==cn||null===(t=cn.mixInfo)||void 0===t?void 0:t.mixId,tag_id:null===(l=Uo.current)||void 0===l||null===(i=l.getCurTopic)||void 0===i?void 0:i.call(l),aweme_type:null==cn?void 0:cn.awemeType,is_pure:dt?"1":"0",to_user_id:null==cn||null===(r=cn.authorInfo)||void 0===r?void 0:r.uid},qo.current),{},{relation:String(_)})):z.Z.sendLog("followCancel",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:null==cn||null===(u=cn.authorInfo)||void 0===u?void 0:u.uid,group_id:null==cn?void 0:cn.awemeId,log_pb:f,enter_from:M.mo(),is_full_screen:F.r()?"1":"0",tab_name:B.getTabName()||H.Rs("tab_name")||"",click_method:p,from_group_id:null==Ze?void 0:Ze.awemeId,music_id:null==cn||null===(d=cn.music)||void 0===d?void 0:d.mid,compilation_id:null==cn||null===(c=cn.mixInfo)||void 0===c?void 0:c.mixId,tag_id:null===(s=Uo.current)||void 0===s||null===(v=s.getCurTopic)||void 0===v?void 0:v.call(s),to_user_id:null==cn||null===(m=cn.authorInfo)||void 0===m?void 0:m.uid,is_pure:dt?"1":"0"},qo.current),{},{relation:String(_)}))}}),ht=ft.follow,gt=ft.unFollow,pt=(0,J.r)({selfUid:null==tn||null===(G=tn.info)||void 0===G?void 0:G.uid,actionUid:null==cn||null===(Y=cn.authorInfo)||void 0===Y?void 0:Y.uid,defaultFollowerStatus:null==cn||null===($=cn.authorInfo)||void 0===$?void 0:$.followerStatus,defaultFollowStatus:null==cn||null===(te=cn.authorInfo)||void 0===te?void 0:te.followStatus}).followStatus;(0,Z.useEffect)((function(){(null==cn?void 0:cn.awemeId)!==(null==Ze?void 0:Ze.awemeId)&&(sn(Ze),Un(!1),Hn(!1),yo(x.O(Ze)))}),[Ze]),(0,Z.useEffect)((function(){So((0,ne.g)(cn))}),[cn]);var _t=function(e){var n,o,t,l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"author_card",i=(null==Ze||null===(n=Ze.relatedRecommend)||void 0===n?void 0:n.relatedBar)&&Ne.showRelatedCardEntry;"author_card"===l&&i&&A.emit(A.EVENT.isShowRecommendRelatedEntry,{isShow:(null==e?void 0:e.awemeId)===(null==Ze?void 0:Ze.awemeId)}),R.Le.setConfig(R.gI.PlayerCardInfo,{cardType:l,isActive:(null==e?void 0:e.awemeId)===(null==Ze?void 0:Ze.originGid)||Re}),(null==e?void 0:e.awemeId)!==(null===(o=xo.current)||void 0===o?void 0:o.awemeId)&&(f()((function(){sn((0,a.Z)((0,a.Z)({},e),{},{logPb:(null==e?void 0:e.scrollLogPb)||(null==e?void 0:e.logPb)})),A.emit(A.EVENT.feedVideoCardLocateCurrentVideo)})),null==mo||null===(t=mo.pause)||void 0===t||t.call(mo))},Ct=(0,Z.useCallback)((function(e){return _t(e)}),[]),wt=(0,Z.useCallback)((function(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:ue.Le.Related,o="related_card";n===ue.Le.Music&&(o="music_card"),n===ue.Le.Topic&&(o="tag_card"),n===ue.Le.Mix&&(o="compilation_card"),n===ue.Le.Hot&&(o="hot_card"),_t(e,o)}),[]),It=Z.useCallback((function(e,n,o,t,l){return(0,T.iq)({awemeId:null==cn?void 0:cn.awemeId,cursor:e,count:n,itemType:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,fetchType:o,cancleFunc:t,cid:l})}),[null==cn?void 0:cn.awemeId]),yt=Z.useCallback((function(e,n,o){return(0,T.rs)({awemeId:null==cn?void 0:cn.awemeId,commentId:e,cursor:n,count:o,itemType:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0})}),[null==cn?void 0:cn.awemeId]),bt=Z.useCallback((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.cursor,o=void 0===n?0:n,t=e.count,l=e.needPage,i=void 0===l||l,r=e.ctx,a=void 0===r?null:r;return(0,T.Yp)({cursor:o,count:t,needPage:i,ctx:a,groupId:null==cn?void 0:cn.awemeId})}),[null==cn?void 0:cn.awemeId]),Lt=Z.useCallback((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.cid,o=e.diggType,t=e.level;return(0,T.y6)({awemeId:null==cn?void 0:cn.awemeId,cid:n,diggType:o,itemType:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,level:t})}),[null==cn?void 0:cn.awemeId]),kt=Z.useCallback((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.cid;return(0,T.YF)({cid:n})}),[]),St=Z.useCallback((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=e.text,o=e.textExtra,t=e.replyId,l=e.replyToReplyId,i=e.commentSendCelltime,r=e.commentVideoCelltime;return(0,T.uo)({awemeId:null==cn?void 0:cn.awemeId,text:n,textExtra:o,replyId:t,replyToReplyId:l,commentVideoCelltime:r,commentSendCelltime:i})}),[null==cn?void 0:cn.awemeId]),Zt=(0,Z.useCallback)((function(e){var n=(e||{}).isShow,o=n;return bn((function(e){return"boolean"!=typeof n?(null==Qe||Qe(!e),e||(Zn(!1),lt(!1)),e&&(xn||eo)&&lt(!0),o=!e,!e):(null==Qe||Qe(n),n&&Zn(!1),e&&!n&&(xn||eo)&&lt(!0),n)})),o}),[Sn,xn,eo]),Et=(0,Z.useCallback)((function(e,n){var o,t,l,i,r,u,d,c,s,v,m,f,h,g,p;return(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?(z.Z.sendLog("clickAuthorHead",(0,a.Z)((0,a.Z)({click_from:(null==n?void 0:n.clickMethod)||"head",action:"",urlParamList:["previous_page"],author_id:null==cn||null===(s=cn.authorInfo)||void 0===s?void 0:s.uid,group_id:null==cn?void 0:cn.awemeId,log_pb:null==cn?void 0:cn.logPb,enter_from:M.mo(),is_full_screen:F.r()?"1":"0",is_full_webscreen:null!==(v=R.Le.getConfig(R.gI.IsPageFullScreen))&&void 0!==v&&v.type?"1":"0",from_follow_list:null!==(m=R.Le.getConfig(R.gI.FromFollowList))&&void 0!==m&&m.tag?"1":"0",from_xigua:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,is_card_expand:ct,music_id:null==cn||null===(f=cn.music)||void 0===f?void 0:f.mid,compilation_id:null==cn||null===(h=cn.mixInfo)||void 0===h?void 0:h.mixId,tag_id:null===(g=Uo.current)||void 0===g||null===(p=g.getCurTopic)||void 0===p?void 0:p.call(g),aweme_type:null==cn?void 0:cn.awemeType},qo.current),N.t())),void((null==cn?void 0:cn.awemeType)===P.ed.XgVideo&&A.emit(A.EVENT.videoPause))):(null==e||null===(o=e.preventDefault)||void 0===o||o.call(e),z.Z.sendLog("clickAuthorHead",(0,a.Z)((0,a.Z)({click_from:(null==n?void 0:n.clickMethod)||"head",action:Ro.current?"close":"open",urlParamList:["previous_page"],author_id:null==cn||null===(t=cn.authorInfo)||void 0===t?void 0:t.uid,group_id:null==cn?void 0:cn.awemeId,log_pb:null==cn?void 0:cn.logPb,enter_from:M.mo(),is_full_screen:F.r()?"1":"0",is_full_webscreen:null!==(l=R.Le.getConfig(R.gI.IsPageFullScreen))&&void 0!==l&&l.type?"1":"0",from_follow_list:null!==(i=R.Le.getConfig(R.gI.FromFollowList))&&void 0!==i&&i.tag?"1":"0",from_xigua:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,is_card_expand:ct,music_id:null==cn||null===(r=cn.music)||void 0===r?void 0:r.mid,compilation_id:null==cn||null===(u=cn.mixInfo)||void 0===u?void 0:u.mixId,tag_id:null===(d=Uo.current)||void 0===d||null===(c=d.getCurTopic)||void 0===c?void 0:c.call(d),aweme_type:null==cn?void 0:cn.awemeType},N.t()),qo.current)),Ro.current?Ho.current?Yn(!1):An(!1):(Yn(!1),An(!0)),!0)}),[cn,eo,yn,ct]);(0,Z.useImperativeHandle)(n,(function(){return{getPlayer:function(){var e;return null===(e=To.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:An,setIsShowRelatedCard:no}}),[Re]);var Tt=(0,Z.useCallback)(c()((function(){var e;if(Bo.current){for(var n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];o[0];var l,i,u,d,c,s,v,m,f,h,p=g()(o).call(o,1);if(W.Y3(null===(e=p[0])||void 0===e?void 0:e.from),Ro.current&&!Oo.current)if(Mo.current){if(_t(Mo.current),"scroll"===(null===(i=p[0])||void 0===i?void 0:i.from)||"keyboard"===(null===(u=p[0])||void 0===u?void 0:u.from))z.Z.sendLog("clickNextVideo",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:null===(d=Mo.current)||void 0===d||null===(c=d.authorInfo)||void 0===c?void 0:c.uid,log_pb:null===(s=Mo.current)||void 0===s?void 0:s.logPb,group_id:null===(v=Mo.current)||void 0===v?void 0:v.awemeId,enter_from:M.mo(),click_from:null===(m=p[0])||void 0===m?void 0:m.from},qo.current),{},{compilation_id:null===(f=Mo.current)||void 0===f||null===(h=f.mixInfo)||void 0===h?void 0:h.mixId}))}else if("auto"===(null===(l=p[0])||void 0===l?void 0:l.from)){var C,I=null===(C=To.current)||void 0===C?void 0:C.player;I&&(I.isReplay=!0,I.replay())}else null===Mo.current?Xo.current===D.MO.FORCE?nn("\u8bf7\u767b\u5f55\u540e\u67e5\u770b\u66f4\u591a"):nn("\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u4f5c\u8005\u7684\u5176\u4ed6\u89c6\u9891"):rn||Xo.current!==D.MO.FORCE?nn("\u8be5\u4f5c\u8005\u5df2\u65e0\u66f4\u591a\u4f5c\u54c1"):nn("\u8bf7\u767b\u5f55\u540e\u67e5\u770b\u66f4\u591a");else if(Po.current){var y,b,L,k,S,Z,E,T,x,A,R,P,V,N=new(_())([[ue.Le.Related,"\u8be5\u89c6\u9891\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],[ue.Le.Music,"\u8be5\u97f3\u4e50\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],[ue.Le.Topic,"\u8be5\u8bdd\u9898\u6682\u65e0\u66f4\u591a\u76f8\u5173\u4f5c\u54c1"],[ue.Le.Mix,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[ue.Le.Hot,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"],[ue.Le.CollectFolder,"\u6682\u65e0\u66f4\u591a\u4f5c\u54c1"]]),F=new(_())([[ue.Le.Related,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u76f8\u5173\u89c6\u9891"],[ue.Le.Music,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u97f3\u4e50\u89c6\u9891"],[ue.Le.Topic,"\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u8bdd\u9898\u89c6\u9891"],[ue.Le.Mix,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[ue.Le.Hot,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"],[ue.Le.CollectFolder,"\u6682\u65e0\u65e0\u6cd5\u5207\u6362"]]),B=null!==(y=null===(b=Uo.current)||void 0===b||null===(L=b.getCurTab)||void 0===L?void 0:L.call(b))&&void 0!==y?y:ue.Le.Related;if(Mo.current){if(wt(Mo.current,B),"scroll"===(null===(S=p[0])||void 0===S?void 0:S.from)||"keyboard"===(null===(Z=p[0])||void 0===Z?void 0:Z.from))z.Z.sendLog("clickNextVideo",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:null===(E=Mo.current)||void 0===E||null===(T=E.authorInfo)||void 0===T?void 0:T.uid,log_pb:null===(x=Mo.current)||void 0===x?void 0:x.logPb,group_id:null===(A=Mo.current)||void 0===A?void 0:A.awemeId,enter_from:M.mo(),click_from:null===(R=p[0])||void 0===R?void 0:R.from},qo.current),{},{compilation_id:null===(P=Mo.current)||void 0===P||null===(V=P.mixInfo)||void 0===V?void 0:V.mixId}))}else if("auto"===(null===(k=p[0])||void 0===k?void 0:k.from)){var H,O=null===(H=To.current)||void 0===H?void 0:H.player;O&&(O.isReplay=!0,O.replay())}else null===Mo.current?nn(F.get(B)):nn(N.get(B))}else{var U,G,q;if(Fe&&(null==Be||Be()),null===(U=No.current)||void 0===U||U.call.apply(U,w()(G=[No]).call(G,(0,r.Z)(p))),Fe&&"auto"===(null==o||null===(q=o[1])||void 0===q?void 0:q.from)){var X,Y=null===(X=To.current)||void 0===X?void 0:X.player;Y&&(Y.isReplay=!0,Y.replay())}}}}),400,{leading:!0,trailing:!1}),[Fe]),xt=(0,Z.useCallback)(c()((function(){for(var e,n=arguments.length,o=new Array(n),t=0;t<n;t++)o[t]=arguments[t];if(Bo.current){o[0];var l,i,r,u,d,c,s,v,m,h=g()(o).call(o,1);if(W.Y3(null===(e=h[0])||void 0===e?void 0:e.from),Ro.current&&!Oo.current)if(Vo.current){if(_t(Vo.current),"scroll"===(null===(l=h[0])||void 0===l?void 0:l.from)||"keyboard"===(null===(i=h[0])||void 0===i?void 0:i.from))z.Z.sendLog("clickPreviousVideo",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:null===(r=Vo.current)||void 0===r||null===(u=r.authorInfo)||void 0===u?void 0:u.uid,log_pb:null===(d=Vo.current)||void 0===d?void 0:d.logPb,group_id:null===(c=Vo.current)||void 0===c?void 0:c.awemeId,enter_from:M.mo(),click_from:null===(s=h[0])||void 0===s?void 0:s.from},qo.current),{},{compilation_id:null===(v=Vo.current)||void 0===v||null===(m=v.mixInfo)||void 0===m?void 0:m.mixId}))}else null===Vo.current&&(Xo.current===D.MO.FORCE?nn("\u8bf7\u767b\u5f55\u540e\u67e5\u770b\u66f4\u591a"):nn("\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u4f5c\u8005\u7684\u5176\u4ed6\u89c6\u9891"));else if(Po.current)if(Vo.current){var p,_,C,I,y,b,L,k,S,Z,E,T,x=null!==(p=null===(_=Uo.current)||void 0===_||null===(C=_.getCurTab)||void 0===C?void 0:C.call(_))&&void 0!==p?p:ue.Le.Related;if(wt(Vo.current,x),"scroll"===(null===(I=h[0])||void 0===I?void 0:I.from)||"keyboard"===(null===(y=h[0])||void 0===y?void 0:y.from))z.Z.sendLog("clickPreviousVideo",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:null===(b=Vo.current)||void 0===b||null===(L=b.authorInfo)||void 0===L?void 0:L.uid,log_pb:null===(k=Vo.current)||void 0===k?void 0:k.logPb,group_id:null===(S=Vo.current)||void 0===S?void 0:S.awemeId,enter_from:M.mo(),click_from:null===(Z=h[0])||void 0===Z?void 0:Z.from},qo.current),{},{compilation_id:null===(E=Vo.current)||void 0===E||null===(T=E.mixInfo)||void 0===T?void 0:T.mixId}))}else null===Vo.current&&nn("\u6682\u65f6\u65e0\u6cd5\u5207\u6362\uff0c\u53ef\u67e5\u770b\u5176\u4ed6\u76f8\u5173\u89c6\u9891");else f()((function(){var e,n;null===(e=Fo.current)||void 0===e||e.call.apply(e,w()(n=[Fo]).call(n,o))}),0)}}),400,{leading:!0,trailing:!1}),[]);(0,Z.useEffect)((function(){if(Re&&Me){var e=function(){O.i0(O.CK.User),Tt.apply(void 0,arguments)},n=function(){O.i0(O.CK.User),xt.apply(void 0,arguments)};try{null==Me||Me.on("changeNext",e),null==Me||Me.on("changePrev",n),Do.current=!0}catch(o){}return function(){try{null==Me||Me.off("changeNext",e),null==Me||Me.off("changePrev",n)}catch(o){}}}}),[Re,Me]),(0,Z.useEffect)((function(){xn&&(Xn||Zt({isShow:!1}),Hn(!0),Po.current&&no(!1)),eo&&(Kn||Zt({isShow:!1}),Un(!0),Ro.current&&An(!1)),Ro.current=xn,Ho.current=Xn,Po.current=eo,Wo.current=Kn,Ko("")}),[xn,Bn,Xn,eo,Kn]),(0,Z.useEffect)((function(){A.emit(A.EVENT.feedVideoCardLocateCurrentVideo)}),[Xn,Kn]),(0,Z.useEffect)((function(){var e=function(){var e=(0,i.Z)(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.HH();case 2:n=e.sent,Xo.current=(null==n?void 0:n.intensity)||D.MO.GUIDE;case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,Z.useEffect)((function(){var e,n,o;(null===(e=xo.current)||void 0===e?void 0:e.awemeId)!==(null==cn?void 0:cn.awemeId)&&Re&&(null!=cn&&cn.awemeId&&null!==(n=xo.current)&&void 0!==n&&n.awemeId&&A.emit(A.EVENT.videoChange),xo.current=cn,Ao.current=null==cn||null===(o=cn.authorInfo)||void 0===o?void 0:o.uid,Vn((function(e){var n,o=(null==cn||null===(n=cn.stats)||void 0===n?void 0:n.commentCount)||0;return o===e?""+o:o})))}),[cn,Re]),(0,Z.useEffect)((function(){Bo.current&&(yn?(Ro.current&&Yn(!0),Po.current&&Qn(!0)):(Ro.current&&Yn(!1),Po.current&&Qn(!1),et(!1)))}),[yn]),(0,Z.useEffect)((function(){bn(Ke||Oe)}),[Ke]),(0,Z.useEffect)((function(){if(Re){var e="";return Ro.current?e="author_card":Po.current&&(e="related_card"),e&&R.Le.setConfig(R.gI.PlayerCardInfo,{cardType:e,isActive:!0}),yn&&Zn(!1),function(){sn(Ze),Cn(null),hn(null),An(!1),Hn(!1),no(!1)}}}),[Re]),(0,Z.useEffect)((function(){if(Re){var e,n=R.Le.getConfig(R.gI.FeedLookedAwemeIds);R.Le.setConfig(R.gI.FeedLookedAwemeIds,y()(new(L())(w()(e=[]).call(e,(0,r.Z)(n),[cn.awemeId]))))}}),[cn,Re]),(0,Z.useEffect)((function(){var e,n,o,t,l,i=function(e){null==e||e.stopPropagation()},r=function(e){null==e||e.stopPropagation()},a=function(e){e.preventDefault()};Zo.current&&(null===(e=Zo.current)||void 0===e||e.addEventListener("wheel",i),null===(n=Zo.current)||void 0===n||n.addEventListener("mousedown",r),null===(o=Zo.current)||void 0===o||o.addEventListener("pointerdown",r),null===(t=Zo.current)||void 0===t||t.addEventListener("touchstart",r));Eo.current&&(null===(l=Eo.current)||void 0===l||l.addEventListener("keydown",a));return function(){var e,n,o,t,l;R.Le.setConfig(R.gI.PlayerCardInfo,{cardType:"author_card",isActive:!1}),null===(e=Zo.current)||void 0===e||e.removeEventListener("wheel",i),null===(n=Zo.current)||void 0===n||n.removeEventListener("mousedown",r),null===(o=Zo.current)||void 0===o||o.removeEventListener("pointerdown",r),null===(t=Zo.current)||void 0===t||t.removeEventListener("touchstart",r),null===(l=Eo.current)||void 0===l||l.removeEventListener("keydown",a)}}),[]);var At=(0,Z.useCallback)((function(){return Yn((function(e){return!e}))}),[]),Rt=(0,Z.useCallback)((function(){return Qn((function(e){return!e}))}),[]);(0,Z.useEffect)((function(){var e=A.listen(A.EVENT.videoTitleClick,(function(e){var n,o,t,l,i,r,u,d;(null===(n=xo.current)||void 0===n?void 0:n.awemeId)===e&&(z.Z.sendLog("clickAuthorHead",(0,a.Z)((0,a.Z)({click_from:"title",action:Ro.current?"close":"open",urlParamList:["previous_page"],author_id:null==cn||null===(o=cn.authorInfo)||void 0===o?void 0:o.uid,group_id:null==cn?void 0:cn.awemeId,log_pb:null==cn?void 0:cn.logPb,enter_from:M.mo(),is_full_screen:F.r()?"1":"0",is_full_webscreen:null!==(t=R.Le.getConfig(R.gI.IsPageFullScreen))&&void 0!==t&&t.type?"1":"0",from_follow_list:null!==(l=R.Le.getConfig(R.gI.FromFollowList))&&void 0!==l&&l.tag?"1":"0",is_card_expand:ct,music_id:null==cn||null===(i=cn.music)||void 0===i?void 0:i.mid,compilation_id:null==cn||null===(r=cn.mixInfo)||void 0===r?void 0:r.mixId,tag_id:null===(u=Uo.current)||void 0===u||null===(d=u.getCurTopic)||void 0===d?void 0:d.call(u),aweme_type:null==cn?void 0:cn.awemeType},qo.current),{},{from_xigua:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0},N.t())),Ro.current?Ho.current?Yn(!1):An(!1):(An(!0),Yn(!1)))}));return function(){null==e||e()}}),[ct]),(0,Z.useEffect)((function(){var e=A.listen(A.EVENT.videoTopicClick,(function(e){if(Ne.showTopicAndMusicCard){var n,o,t=e.awemeId,l=e.hashtagId,i=e.hashtagName,r=e.isCommerce,a=i;if(S()(i).call(i,"#")){var d=a.split("#");a=(0,u.Z)(d,2)[1]}if(cn.awemeId===t)no(!0),Wo.current&&Qn(!1),_o(ue.Le.Topic),null===(n=Uo.current)||void 0===n||null===(o=n.setTab)||void 0===o||o.call(n,ue.Le.Topic),yo({hashtagId:l,hashtagName:a,isCommerce:r})}}));return function(){e()}}),[cn,Ne.showTopicAndMusicCard]),(0,Z.useEffect)((function(){cn&&(Re?A.emit(A.EVENT.postCurVideoInfo,{awemeId:null==cn?void 0:cn.awemeId,groupId:null==cn?void 0:cn.groupId,scene:null==Ne?void 0:Ne.tab,existedSuggestWords:null==cn?void 0:cn.suggestWords}):Pe&&A.emit(A.EVENT.postCurVideoInfo,{awemeId:null==cn?void 0:cn.awemeId,groupId:null==cn?void 0:cn.groupId,scene:null==Ne?void 0:Ne.tab,existedSuggestWords:null==cn?void 0:cn.suggestWords,preload:!0}))}),[cn,null==Ne?void 0:Ne.tab,Re,Pe]);var Pt=(0,Z.useMemo)((function(){var e,n,o,t,l=[];return null!=Ne&&Ne.showMixCard&&-1!==(null==Ze||null===(e=Ze.mixInfo)||void 0===e?void 0:e.status)&&l.push(ue.Le.Mix),Ne.showRelatedCardEntry&&null!=Ze&&null!==(n=Ze.relatedRecommend)&&void 0!==n&&n.relatedBar&&l.push(ue.Le.Related),null!=Ne&&Ne.showTopicAndMusicCard&&l.push.apply(l,[ue.Le.Music,ue.Le.Topic]),(null!=Ne&&Ne.showHotCard||null!=cn&&cn.hotList&&51!==(null==cn||null===(o=cn.hotList)||void 0===o?void 0:o.rank)&&2!==(null==cn||null===(t=cn.hotList)||void 0===t?void 0:t.type))&&l.push(ue.Le.Hot),l}),[null==Ne?void 0:Ne.showTopicAndMusicCard,null==Ne?void 0:Ne.showRelatedCardEntry,Ze,null==Ne?void 0:Ne.showMixCard,null==Ne?void 0:Ne.showHotCard,cn,an]),Mt=(0,Z.useMemo)((function(){var e,n,o,t,l,i,a,u,d,c,s,v,m,f,h,g=[];null!=Ne&&Ne.showMixCard&&-1!==(null==cn||null===(e=cn.mixInfo)||void 0===e?void 0:e.status)?g.push({type:"mix",title:"\u5408\u96c6 \xb7 ".concat(null==cn||null===(n=cn.mixInfo)||void 0===n?void 0:n.mixName),onClick:vt}):null!=cn&&null!==(o=cn.hotList)&&void 0!==o&&o.title&&51!==(null==cn||null===(t=cn.hotList)||void 0===t?void 0:t.rank)&&2!==(null==cn||null===(l=cn.hotList)||void 0===l?void 0:l.type)&&g.push({type:"hot",title:null!=cn&&null!==(i=cn.hotList)&&void 0!==i&&i.rank?w()(a=w()(u="".concat(null==cn||null===(d=cn.hotList)||void 0===d?void 0:d.header,"TOP")).call(u,null==cn||null===(c=cn.hotList)||void 0===c?void 0:c.rank,": ")).call(a,null==cn||null===(s=cn.hotList)||void 0===s?void 0:s.title):"\u7f6e\u9876\u70ed\u699c: ".concat(null==cn||null===(v=cn.hotList)||void 0===v?void 0:v.title),customProps:{trending_topic:null==cn||null===(m=cn.hotList)||void 0===m?void 0:m.title,first_tag_name:null==cn||null===(f=cn.hotList)||void 0===f?void 0:f.header,top:null==cn||null===(h=cn.hotList)||void 0===h?void 0:h.rank},onClick:mt});if(0===g.length){var p=(0,oe.i)(cn);g.push.apply(g,(0,r.Z)(p))}return g}),[vt,null==Ne?void 0:Ne.showMixCard,cn,an,mt]),Vt=(0,Z.useMemo)((function(){var e;return{isShow:(null==Ne?void 0:Ne.showMixCardEntry)&&-1!==(null==cn||null===(e=cn.mixInfo)||void 0===e?void 0:e.status)&&!eo,onClick:vt}}),[vt,cn,null==Ne?void 0:Ne.showMixCardEntry,eo]);return Z.createElement(q.v.Provider,{value:{playerScene:null==Ne?void 0:Ne.tab,globalCommentCount:Mn,setGlobalCommentCount:Vn,authorVideoCardClick:Ct,setNextAemeInfo:hn,setPrevAwemeInfo:Cn,modalEnterFrom:je}},Z.createElement("div",{"data-e2e":Re?"feed-active-video":"feed-video",className:j()(K.Z.playerCommentWrapper,We,{isMiniWindow:$e})},Z.createElement("div",{className:j()(K.Z.playerContainer,"playerContainer",(le={},(0,l.Z)(le,K.Z.isHavePlayer,cn),(0,l.Z)(le,K.Z.isSafari,U.G6()),le))},Ve,Z.createElement("div",{className:j()(K.Z.playerWrap,"slider-video"),ref:function(e){Re?Go.current||(Go.current=e,Je(Go)):Go.current=null}},(null==cn?void 0:cn.debugInfo)&&Z.createElement(X.W,{req:null==cn||null===(ie=cn.debugInfo)||void 0===ie?void 0:ie.web_debug_req,video:null==cn||null===(re=cn.debugInfo)||void 0===re?void 0:re.client_rec_debug_info,size:{height:null==mo?void 0:mo._videoHeight,width:null==mo?void 0:mo._videoWidth},gear:null==cn||null===(fe=cn.video)||void 0===fe||null===(he=fe.bitRateList)||void 0===he||null===(ge=he[0])||void 0===ge?void 0:ge.gearName,showPanelRightside:!0}),Z.createElement(He,(0,t.Z)({},e,{actionFollow:ht,actionUnFollow:gt,userInfo:tn,dispatch:ln,awemeInfo:cn,nextAwemeInfo:fn,prevAwemeInfo:_n,playNextFunc:Tt,playPrevFunc:xt,deleteCurrentSwiper:xe,ref:To,toggleComment:Zt,onAvatarClick:Et,logParams:(0,a.Z)((0,a.Z)({},qo.current),{},{from_group_id:null==Ze?void 0:Ze.awemeId,music_id:null==cn||null===(pe=cn.music)||void 0===pe?void 0:pe.mid,compilation_id:null==cn||null===(_e=cn.mixInfo)||void 0===_e?void 0:_e.mixId,tag_id:at||"",is_card_expand:ct,from_xigua:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,relation:String(pt),is_click_cover:Number(Ze!==cn)}),videoToast:nn,abtestData:null==Ne?void 0:Ne.abtestData,isAuthorCardShow:xn,relatedVideoConfig:ut,isShowRelatedCard:eo,onMusicClick:function(){var e,n,o;null!=cn&&null!==(e=cn.music)&&void 0!==e&&e.mid?(no(!0),Wo.current&&Qn(!1),_o(ue.Le.Music),null===(n=Uo.current)||void 0===n||null===(o=n.setTab)||void 0===o||o.call(n,ue.Le.Music)):nn("\u8be5\u58f0\u97f3\u4e0d\u53ef\u7528")},videoTags:Mt,moreConfig:Vt,showMusicEntry:Ne.showTopicAndMusicCard,videoHashtagClassName:Ne.showTopicAndMusicCard?K.Z.linkHashTag:null,isTopicLinkSearchResult:!0,isShowGuide:Ue,isClientMiniWin:$e,shortCutFiltered:Ye||[]}),Z.createElement(ee.x,{onPlayer:fo})))),Z.createElement("div",{id:"videoSideBar",className:j()(K.Z.sideBar,K.Z.sideBarDefaultWidth,(Ce={},(0,l.Z)(Ce,K.Z.sideBarHidden,!rt),(0,l.Z)(Ce,K.Z.acCollapseSideBarWidth,!yn&&(xn&&Xn||eo&&Kn)),(0,l.Z)(Ce,K.Z.acAndCommentSideBarWidth,yn&&(xn&&Xn||eo&&Kn)),(0,l.Z)(Ce,K.Z.noTransition,!0),Ce)),onWheel:function(e){return e.stopPropagation()},ref:Zo},Z.createElement("div",{className:j()(K.Z.sideBarCommentWrapper,(we={},(0,l.Z)(we,K.Z.sideBarInnerHidden,!yn&&!tt),(0,l.Z)(we,K.Z.commentWithCollapse,xn&&Xn||eo&&Kn),(0,l.Z)(we,K.Z.smallCardHideWithComment,$o),(0,l.Z)(we,K.Z.hiddenWithBigCard,!yn&&tt),(0,l.Z)(we,K.Z.noTransition,!0),we))},(null===(Ie=xo.current)||void 0===Ie?void 0:Ie.awemeId)!==(null==cn?void 0:cn.awemeId)?null:!Sn&&Re&&Z.createElement(se,{suggestWords:cn.suggestWords,abtestData:null==Ne?void 0:Ne.abtestData,fullScreenTarget:Ae,isDetail:!1,isShowComment:yn,total:0,onCloseCommentClick:Zt,awemeInfo:cn,awemelogPb:null==cn?void 0:cn.logPb,userInfo:tn,scrollContainerEl:null==Zo?void 0:Zo.current,player:mo,shortcutMode:null==Ne||null===(ye=Ne.abtestData)||void 0===ye?void 0:ye.shortcutMode,fetchComment:It,fetchReply:yt,fetchEmoticonGif:T.D2,fetchCommentMetionList:bt,diggCommentItem:Lt,deleteCommentItem:kt,puhlishCommentItem:St,count:20,defaultCommentList:it&&(null==qe?void 0:qe.comments)||[],defaultCursor:it&&(null==qe?void 0:qe.cursor)||0,defaultHotsoonHasMoreRef:it&&(null==qe?void 0:qe.hotsoonHasMore)||0,defaultHasMore:!it||(null==qe?void 0:qe.hasMore),defaultStatusCode:it&&(null==qe?void 0:qe.statusCode)||0,defaultCommentId:null==Ne?void 0:Ne.insertCommentId,isNeedCommentInput:!0,changeLoginStatus:function(){return ln({type:"updateUserInfo"})},reportExtraParams:(0,a.Z)((0,a.Z)({},qo.current),{},{from_group_id:null==Ze?void 0:Ze.awemeId,music_id:null==cn||null===(be=cn.music)||void 0===be?void 0:be.mid,compilation_id:null==cn||null===(Le=cn.mixInfo)||void 0===Le?void 0:Le.mixId,tag_id:at||"",is_card_expand:ct,from_xigua:(null==cn?void 0:cn.awemeType)===P.ed.XgVideo?1:0,relation:String(pt)},Xe)})),Z.createElement("div",{className:j()(K.Z.sideBarInnerWrapper,K.Z.authorCard,(ke={},(0,l.Z)(ke,K.Z.sideBarInnerHidden,!xn&&"hideSmallCard"!==zo),(0,l.Z)(ke,K.Z.authorCardCollapse,Xn),(0,l.Z)(ke,K.Z.smallCardHideWithComment,"hideSmallCard"===zo),(0,l.Z)(ke,K.Z.noTransition,!0),ke)),ref:Eo},Bn&&Z.createElement(ve,{collapse:Xn,isShow:xn,awemeInfo:cn,onLoginGuideShowChange:function(e){Oo.current=e},sense:"slider_video",onCloseClick:function(){An(!1),yn&&(Ko("hideSmallCard"),et(!0))},userContext:Ne.userContext,abtestData:null==Ne?void 0:Ne.abtestData,onCollapseClick:At,changeLoginStatus:function(){ln({type:"updateUserInfo"})},logParams:qo.current,customProps:Ne})),Pt.length>0&&Z.createElement("div",{className:j()(K.Z.sideBarInnerWrapper,K.Z.authorCard,(Se={},(0,l.Z)(Se,K.Z.sideBarInnerHidden,!eo&&"hideSmallCard"!==zo),(0,l.Z)(Se,K.Z.authorCardCollapse,Kn),(0,l.Z)(Se,K.Z.smallCardHideWithComment,"hideSmallCard"===zo),(0,l.Z)(Se,K.Z.noTransition,!0),Se))},On&&Z.createElement(me,{ref:Uo,collapse:Kn,isShow:eo,awemeInfo:cn,originFeedAwemeInfo:Ze,handleClose:function(){no(!1),yn&&(Ko("hideSmallCard"),et(!0))},abtestData:an,handleCollapse:Rt,userContext:Ne.userContext,handleRelatedVideoChange:wt,defaultList:lo,relatedReqCount:uo,tab:po,showTabList:Pt,defaultTopicData:Io,defaultHotData:ko})),Z.createElement("div",{className:K.Z.sideBarBackground}))))})),he=function(e,n){var o=e.customProps,l=e.modalEnterFrom,i=(null==o?void 0:o.abtestData)||{},r=(0,Z.useRef)(null);(0,Z.useImperativeHandle)(n,(function(){var e,n;return{getPlayer:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.player},setIsAuthorCardShow:null===(e=r.current)||void 0===e?void 0:e.setIsAuthorCardShow,setIsShowRelatedCard:null===(n=r.current)||void 0===n?void 0:n.setIsShowRelatedCard,setTab:function(e){var n,o;null===(n=r.current)||void 0===n||null===(o=n.setTab)||void 0===o||o.call(n,e)},getCurTab:function(){var e,n;return null===(e=r.current)||void 0===e||null===(n=e.getCurTab)||void 0===n?void 0:n.call(e)}}}));return Z.createElement(Z.Fragment,null,function(){var n,a;switch(null==o?void 0:o.tab){case"recommend":return Z.createElement(Z.Fragment,null,i.newLookRelated===G.LookRelatedABValV2.OldFrame&&Z.createElement(te.l,(0,t.Z)({ref:r},e)),S()(n=[G.LookRelatedABValV2.ModalFrameFast,G.LookRelatedABValV2.ModalFrame]).call(n,null==i?void 0:i.newLookRelated)&&Z.createElement(le.i,(0,t.Z)({ref:r},e)),S()(a=[G.LookRelatedABValV2.BtnFrameFast]).call(a,null==i?void 0:i.newLookRelated)&&Z.createElement(ie.m,(0,t.Z)({ref:r},e)));case"modal":return Z.createElement(Z.Fragment,null,"search"===l&&Z.createElement(re.m,(0,t.Z)({},e,{ref:r})),"search"!==l&&Z.createElement(te.l,(0,t.Z)({ref:r},e)));case"friend":case"follow":return Z.createElement(te.l,(0,t.Z)({ref:r},e));default:return Z.createElement(fe,(0,t.Z)({ref:r},e))}}())};n.Z=(0,Z.forwardRef)(he)},54748:function(e,n,o){var t=o(74269),l={clickAuthorHead:{eventName:"click_author_head",params:{click_from:"",action:"open",author_id:"",group_id:"",enter_from:"",previous_page:"",is_full_screen:"0",is_full_webscreen:"",log_pb:"",from_follow_list:"0",from_xigua:0,music_id:"",aweme_type:"",clarity:"",is_auto:1}},clickCommentButton:{eventName:"click_comment_button",params:{action:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",from_follow_list:"0",relation:"",clarity:"",aweme_type:"",click_from:""}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_xigua:0,relation:"",from_group_id:"",music_id:"",compilation_id:"",aweme_type:"",is_pure:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",relation:"",from_group_id:"",music_id:"",compilation_id:""}},volumeNormReady:{eventName:"volume_norm_ready",params:{state:"",isReady:undefined,muted:undefined,volume:undefined,enter_from:"",peak:undefined,loudness:undefined,vid:""}},volumeNormError:{eventName:"volume_norm_error",params:{state:"",error:"",muted:undefined,volume:undefined,currentTime:undefined,enter_from:"",peak:undefined,loudness:undefined,vid:""}},videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"scroll",compilation_id:"",is_card_expand:""}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"scroll",compilation_id:"",is_card_expand:""}},closePlayer:{eventName:"close_player",params:{click_method:"",enter_from:""}}};n.Z=new t.hD(l)},47437:function(e,n,o){o.d(n,{g:function(){return t}});var t=function(e){var n,o,t,l,i,r,a,u,d,c;return{boardType:Number(null===(n=/board_type=([\w|_]*)&/.exec(null==e||null===(o=e.hotList)||void 0===o?void 0:o.schema))||void 0===n?void 0:n[1]),boardSubType:(null===(t=/board_sub_type=([\w|_]*)&/.exec(null==e||null===(l=e.hotList)||void 0===l?void 0:l.schema))||void 0===t?void 0:t[1])||"",sentence:(null==e||null===(i=e.hotList)||void 0===i?void 0:i.sentence)||"",sentenceId:(null==e||null===(r=e.hotList)||void 0===r?void 0:r.sentenceId)||"",footer:null==e||null===(a=e.hotList)||void 0===a?void 0:a.footer,rank:null==e||null===(u=e.hotList)||void 0===u?void 0:u.rank,type:null==e||null===(d=e.hotList)||void 0===d?void 0:d.type,hotName:null==e||null===(c=e.hotList)||void 0===c?void 0:c.header}}},39094:function(e,n,o){o.d(n,{i:function(){return c}});var t=o(57276),l=o.n(t),i=o(18556),r=o.n(i),a=o(54882),u=o.n(a),d=o(66870),c=function(e){var n,o=null==e||null===(n=e.suggestWords)||void 0===n?void 0:l()(n).call(n,(function(e){return e.scene===d.gQ.FeedBottomRec}));if(o){var t=o.words,i=void 0===t?[]:t,a=o.hintText;return r()(i).call(i,(function(e,n){var o,t=e.word;return t?{index:n,type:"related-search",title:u()(o="".concat(a,": ")).call(o,t),searchWord:e}:null}))}return[]}},26856:function(e,n,o){o.d(n,{K:function(){return r}});var t,l=o(23947),i=o.n(l);!function(e){e[e.Default=0]="Default",e[e.AdapterDefault=1]="AdapterDefault",e[e.AdapterThird=2]="AdapterThird",e[e.AdapterSeventh=3]="AdapterSeventh"}(t||(t={}));var r=function(e){var n=e.isShowCard,o=e.abVal,l=new(i())([[t.Default,{min:580,max:878}],[t.AdapterDefault,{min:580,max:878}],[t.AdapterThird,{min:582,max:975}],[t.AdapterSeventh,{min:582,max:918}]]).get(o),r=l.min,a=l.max;document.body.style.minWidth="".concat(n?a:r,"px")}},46407:function(e,n,o){o.d(n,{_:function(){return l}});var t=o(76375),l=function(e){var n;return e===t.L.Music?n="music_card":e===t.L.Topic?n="tag_card":e===t.L.Mix?n="compilation_card":e===t.L.Author?n="author_card":e===t.L.Related?n="related_card":e===t.L.Hot?n="hot_card":e===t.L.Comment?n="comment":e===t.L.CollectFolder&&(n="collection_folder_card"),n}},58215:function(e,n,o){o.d(n,{Z:function(){return i}});var t=o(21528),l=o(72559),i=function(e){var n=e.player,o=e.scene,i=e.onRegisterSuccess;(0,t.useEffect)((function(){if(n){var e=l.s.register({player:n,scene:o});e!==undefined&&(null==i||i({scene:o,playerId:e}))}return function(){n&&l.s.unRegister({id:n.playerId})}}),[n])}},38925:function(e,n,o){o.d(n,{u:function(){return V}});var t,l=o(29588),i=o(11789),r=o(21528),a=o(70335),u=o.n(a),d=o(73824);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},c.apply(this,arguments)}var s,v,m,f,h,g,p=function(e){return r.createElement("svg",c({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.22 16.79a.69.69 0 010-1.01L13.19 12 9.22 8.22a.69.69 0 010-1.01.777.777 0 011.06 0l4.5 4.285a.69.69 0 010 1.01l-4.5 4.286a.777.777 0 01-1.06 0z",fill:"#fff"})))};function _(){return _=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},_.apply(this,arguments)}var C=function(e){return r.createElement("svg",_({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),s||(s=r.createElement("rect",{x:14,y:11,width:14,height:2,rx:1,fill:"#fff"})),v||(v=r.createElement("rect",{x:9,y:11,width:3,height:2,rx:1,fill:"#fff"})),m||(m=r.createElement("rect",{x:9,y:17,width:3,height:2,rx:1,fill:"#fff"})),f||(f=r.createElement("rect",{x:9,y:23,width:3,height:2,rx:1,fill:"#fff"})),h||(h=r.createElement("rect",{x:14,y:17,width:14,height:2,rx:1,fill:"#fff"})),g||(g=r.createElement("rect",{x:14,y:23,width:14,height:2,rx:1,fill:"#fff"})))},w=o(94),I="M0K7KyNq",y="DcxnzgLV",b="fnyxFnAH",L="E7ujp5g2",k="MtTMV_r3",S="K39fe356",Z="PWNXPI9K",E="cRoSZRZc",T="LY3hocnl",x="BR_U6Ehv",A="y0eumWNS",R="IfzNCmG_",P="hRdthmiQ",M=new(o(74269).hD)({moreVideoEntranceShow:{eventName:"more_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:""}},moreVideoEntranceClick:{eventName:"more_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:""}}}),V=function(e){var n,o=e||{},t=o.onClick,a=o.isShow,c=o.awemeInfo||{},s=c.groupId,v=c.awemeId,m=(0,r.useState)(!1),f=(0,i.Z)(m,2),h=f[0],g=f[1],_=(0,r.useState)(!1),V=(0,i.Z)(_,2),N=V[0],F=V[1];(0,r.useEffect)((function(){a&&M.sendLog("moreVideoEntranceShow",{enter_from:d.yW(),group_id:s,author_id:v})}),[]);var B=(0,r.useMemo)((function(){return h}),[h]);return r.createElement("div",{className:u()(I,(n={},(0,l.Z)(n,x,B),(0,l.Z)(n,Z,!B),(0,l.Z)(n,T,!B&&N),(0,l.Z)(n,k,!a),(0,l.Z)(n,S,a),n))},r.createElement("div",{className:P,onClick:function(){t(),g(!1),M.sendLog("moreVideoEntranceClick",{enter_from:d.yW(),group_id:s,author_id:v})}},r.createElement("div",{onMouseEnter:function(){F(!0)},onMouseLeave:function(){F(!1)}},r.createElement(w.Z,{className:u()(E,b),src:C,width:36,height:36,viewBox:"0 0 36 36"}),r.createElement("span",{className:u()(A,L,(0,l.Z)({},b,N&&!B))},"\u66f4\u591a\u63a8\u8350"),r.createElement(w.Z,{className:u()(y,(0,l.Z)({},b,N&&!B)),src:p,width:24,height:24,viewBox:"0 0 24 24"}),B&&r.createElement(w.Z,{className:R,src:p,width:24,height:24,viewBox:"0 0 24 24"}))))}},79674:function(e,n,o){o.d(n,{S:function(){return H}});var t=o(41257),l=o(2193),i=o(33734),r=o(1885),a=o(47044),u=o(96879),d=o(96288),c=o(29588),s=o(54882),v=o.n(s),m=o(57276),f=o.n(m),h=o(30562),g=o.n(h),p=o(10396),_=o.n(p),C=o(19785),w=o(16612),I=o(47999),y=o(41882),b=o(73824),L=o(48427),k=o(18653),S=o(53549),Z=o(71488),E=o(86358),T=o(35486),x=o(66870),A=o(59218),R=o(59662),P=o(21528),M=o(74269),V={clickVideoDetail:{eventName:"click_video_detail",params:{author_id:"",group_id:"",enter_from:"recommend",from_xigua:0,search_params:undefined}}},N=new M.hD(V),F=["enter_from","previous_page","tab_name"],B=function(e){(0,u.Z)(o,e);var n=(0,d.Z)(o);function o(){var e,t;(0,i.Z)(this,o);for(var l=arguments.length,r=new Array(l),u=0;u<l;u++)r[u]=arguments[u];return t=n.call.apply(n,v()(e=[this]).call(e,r)),(0,c.Z)((0,a.Z)(t),"handleIsFireFox",(function(){var e,n,o=null===(e=f()(n=t))||void 0===e?void 0:e.call(n,".content-wrapper");I.vU()&&C.Util.addClass(o,"isFireFox")})),(0,c.Z)((0,a.Z)(t),"handleFullscreen",(function(e){var n,o,l,i;e?null===(n=(0,a.Z)(t))||void 0===n||null===(o=n.hide)||void 0===o||o.call(n):null===(l=(0,a.Z)(t))||void 0===l||null===(i=l.show)||void 0===i||i.call(l)})),(0,c.Z)((0,a.Z)(t),"handleClick",(function(e){var n,o,l,i,r,u,d,c,s,v,m,f=(null===(n=t.config)||void 0===n?void 0:n.awemeType)===x.ed.XgVideo;if(N.sendLog("clickVideoDetail",{author_id:null===(o=t.config)||void 0===o?void 0:o.authorId,group_id:null===(l=t.config)||void 0===l?void 0:l.currentAwemeId,from_xigua:f?1:0,enter_from:(null===(i=t.config)||void 0===i||null===(r=i.logParams)||void 0===r?void 0:r.enter_from)||"recommend",search_params:null===(u=t.config)||void 0===u||null===(d=u.logParams)||void 0===d?void 0:d.search_params}),f){var h,g,p;e.preventDefault();var _=Math.floor((null===(h=(0,a.Z)(t))||void 0===h||null===(g=h.player)||void 0===g?void 0:g.currentTime)||0).toString();window.open(y.Tl({videoid:null===(p=t.config)||void 0===p?void 0:p.currentAwemeId,param:"start",value:_}))}t.player.pause(),null!==(c=t.player)&&void 0!==c&&null!==(s=c.config)&&void 0!==s&&s.autoplay&&(t.player.config.autoplay=!1),null===(v=t.config)||void 0===v||null===(m=v.onclick)||void 0===m||m.call(v,e)})),(0,c.Z)((0,a.Z)(t),"hide",(function(){var e;null!==(e=t.root)&&void 0!==e&&e.style&&(t.root.style.display="none")})),(0,c.Z)((0,a.Z)(t),"show",(function(){var e;return null!==(e=t.root)&&void 0!==e&&e.style&&(t.root.style.display="block"),""})),t}return(0,r.Z)(o,[{key:"beforePlayerInit",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"afterCreate",value:function(){this.player.on(C.Events.FULLSCREEN_CHANGE,this.handleFullscreen),this.root.addEventListener("click",this.handleClick),this.handleIsFireFox()}},{key:"destroy",value:function(){this.player.off(C.Events.FULLSCREEN_CHANGE,this.handleFullscreen)}},{key:"render",value:function(){var e,n,o,i,r,a={},u=E.getTabName();if(null!==(e=this.config)&&void 0!==e&&e.logParams){var d=this.config.logParams,c=(d.enter_from,d.previous_page,d.tab_name),s=(0,l.Z)(d,F);c&&(u=c),a[T.LOG_PASS_THROW_PARAMS]=g()(s)}var m="";if(this.config.awemeType===x.ed.Note)m=y.Wr(this.config.currentAwemeId,(0,A.stringify)((0,t.Z)((0,t.Z)({tab_name:u,previous_page:b.yW()},L.U()),a)));else if(m=y.JF(this.config.currentAwemeId,(0,A.stringify)((0,t.Z)((0,t.Z)({tab_name:u,previous_page:b.yW()},L.U()),a))),_()(n=["post","like","favorite_collection"]).call(n,null===(o=this.config.logParams)||void 0===o?void 0:o.tab_name)){var f,h=k.Le.getConfig(k.gI.EnterDetailUrl);m=null!==(f=null==h?void 0:h[this.config.currentAwemeId])&&void 0!==f?f:m}return v()(i=v()(r='\n    <xg-icon class="xgplayer-detail-entry player-line" data-state="normal" data-e2e=\'video-detail-entry\' style="display: '.concat(S.r()?"none":"block",';">\n      <a class="xgplayer-icon content-wrapper" href="')).call(r,m,'" target="')).call(i,Z.f()?"_self":"_blank",'" rel="opener">\n        <div class="desc">\u8be6\u60c5</div>\n        <div class="svg-icon">\n          <svg width="6" height="9" viewBox="0 0 6 9" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path opacity="0.7" fill-rule="evenodd" clip-rule="evenodd" d="M0.689396 8.12382C0.396503 7.83093 0.396503 7.35605 0.689396 7.06316L3.51782 4.23473L0.689396 1.40631C0.396503 1.11341 0.396503 0.63854 0.689396 0.345646C0.98229 0.0527533 1.45716 0.0527533 1.75006 0.345646L5.10881 3.7044C5.40171 3.9973 5.40171 4.47217 5.10881 4.76506L1.75006 8.12382C1.45716 8.41671 0.98229 8.41671 0.689396 8.12382Z" fill="white"/>\n          </svg>\n        </div>\n      </a>\n    </xg-icon>')}}],[{key:"pluginName",get:function(){return"EnterDetail"}},{key:"defaultConfig",get:function(){return{position:C.POSITIONS.CONTROLS_RIGHT,index:-1,className:"xgplayer-enter-detail-wrapper"}}}]),o}(w.ZP),H=function(e){var n=e.awemeInfo,o=e.logParams,t=e.onclick,l=(0,R.n)();return(0,P.useEffect)((function(){if(n&&l)return null==l||l.registerPlugin(B,{currentAwemeId:null==n?void 0:n.awemeId,awemeType:null==n?void 0:n.awemeType,authorId:null==n?void 0:n.authorUserId,awemeInfo:n,logParams:o,onclick:t}),function(){l.getPlugin("VideoInfo")&&(null==l||l.unRegisterPlugin("EnterDetail"))}}),[l,n]),null}},50879:function(e,n,o){o.d(n,{i:function(){return r}});var t=o(10396),l=o.n(t),i=o(30234),r=function(e){var n;return l()(n=[i.ShowPublishTimeABVal.All,i.ShowPublishTimeABVal.NoRecommend,i.ShowPublishTimeABVal.V3,i.ShowPublishTimeABVal.V4]).call(n,e)}},76501:function(e,n,o){var t,l=o(21528);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var o=arguments[n];for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e},i.apply(this,arguments)}n.Z=function(e){return l.createElement("svg",i({width:10,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),t||(t=l.createElement("path",{d:"M9.72 9.67a.945.945 0 000-1.34L1.629.277a.957.957 0 00-1.349 0 .945.945 0 000 1.342L7.698 9 .279 16.38a.945.945 0 000 1.342c.373.37.977.37 1.35 0L9.72 9.671z",fill:"#fff"})))}},39960:function(e,n){n.Z={playerCommentWrapper:"BasEuG5Q",isFullScreen:"Hyz2IPtM",sideBar:"_QjzkgP3",sideBarDefaultWidth:"Vw_S4MTA",sideBarInnerWrapper:"aDQw7OWI",sideBarInnerHidden:"JFWzESlW",relatedVertical:"_628BWQES",inFullScreen:"UOaw2vqQ",sideBarHidden:"z_zS3jcn",noTransition:"dLCldFlr",playerContainer:"JrMwkvQy",showSideBar:"WQ9IVUcw",interactionPos:"d6KxRih3",isSafari:"iCowLMOb",videoImage:"tmnnAC_V",isHavePlayer:"YFEqUSvt",playerWrap:"zK9etl_2",backgroundImg:"xj1RiyWp",backgroundMask:"wJpPeiLL",backgroundImgSarari:"P3E7hgC1",videoInfoContainer:"SJ5sF5nc",title:"khzeaon8",infoContainer:"JaYdjxRC",time:"AhJ8hWxq",reportTool:"H6NT0VBm",report:"yavyq0oB",publishTime:"PFGVlK2h",statsContainer:"mBO0vG_k",count:"h7_r8hcK",statsItem:"nncDksWG",share:"m9a8_3Vn",active:"Ru9aifIP",iconSvg:"n3xjp4su",shareContainer:"wwDXEwyp",shareBox:"vBD_jYVn",shareBoxHidden:"p4vYfRo6",miniScreenBtn:"iTHRSMu9",hidden:"lwX1O7tx",imgPlaceHolder:"vrCAuyeG",programCardHidden:"KCb1cWZJ",linkHashTag:"SDyNVZCs",bigBackgroundImg:"JVaqR_1Y",btn:"DZKZZklc",putBtn:"PYTxzIym",openBtn:"EubOZ5gx",hide:"ccj5MUrc",inOutFeed:"Y383Ug7n",miniWidth:"xFpO50wq",adapterThird:"YLVVkbsP",adapterSeventh:"nQWxAwdY",acCollapseSideBarWidth:"nmj8nLhu"}},61433:function(e,n){n.Z={playerCommentWrapper:"vZb35CLy",isFullScreen:"XbeuZT0y",playerContainer:"vRlffofL",showSideBar:"p4Wadix5",acCollapseSideBarWidth:"iwTscAZn",interactionPos:"gToCmi3i",isSafari:"amBkQ9UZ",noTransition:"MFphljpM",videoImage:"bHPtplsH",isHavePlayer:"r0GvHUtP",playerWrap:"n8RW86Ha",sideBar:"VifRmiul",sideBarDefaultWidth:"dUOvVJVM",sideBarInnerWrapper:"NmISXSyu",sideBarInnerHidden:"dk9whTsc",relatedVertical:"WS773MI_",inFullScreen:"dBP6iRHO",collapeseFullScreen:"u5eSHTUR",collapseTitle:"yIPp0hRu",sideBarHidden:"H3Ol2L_5",inOutFeed:"SGYaRJP_",backgroundImg:"WzjqJC8o",backgroundMask:"H7ExybxW",backgroundImgSarari:"BxuAwel_",videoInfoContainer:"vLUrHnkN",title:"ep5t8YdT",infoContainer:"dQm6iVqa",time:"QwN1E0OH",reportTool:"q8zff5Pz",report:"CKkYUyzG",publishTime:"EPcAN7X3",statsContainer:"Omt3eKCJ",count:"I9ny_L01",statsItem:"P9rCaYhN",share:"WNPc7zNM",active:"dU2bOKUY",iconSvg:"ikxVIynD",shareContainer:"nNQe_z5N",shareBox:"dXowHon7",shareBoxHidden:"v_ujuXDb",miniScreenBtn:"WCIidgpJ",hidden:"IAoztfc7",imgPlaceHolder:"jBPdHI0n",programCardHidden:"mnuJ1twY",linkHashTag:"RwUOjuDh",bigBackgroundImg:"_55zPrVX",btn:"vweztYit",putBtn:"tB13IHGy",openBtn:"iQouaX1l",hide:"bNksgWb7",miniWidth:"vTCpQoEW",adapterThird:"JlLjqZDI",adapterSeventh:"QLG_Ggdz"}},61883:function(e,n){n.Z={playerCommentWrapper:"g1SonC9d",sideBar:"YldoKnOi",sideBarDefaultWidth:"vzBcpRdH",sideBarHidden:"PWuqF7hV",sideBarInnerWrapper:"dKwoaAIu",isFullScreen:"h8eg7Gsh",sideBarCommentWrapper:"tBxaaBcw",sideBarInnerHidden:"v8UDb5g0","ani-single-card-hide":"ciXDPIIP",aniSingleCardHide:"ciXDPIIP",hiddenWithBigCard:"KyFXfNTQ","ani-comment-hide-with-single-card":"e357_hgB",aniCommentHideWithSingleCard:"e357_hgB",smallCardHideWithComment:"wgOEeP4U",authorCard:"WFtatciA",authorCardCollapse:"KaVJ4aOE",relatedCard:"ojoucjNa",relatedVertical:"ISj8uIrX",inFullScreen:"ECTutosu",commentWithCollapse:"OLHwcQF8",noTransition:"c8n1I8Zq",sideBarBackground:"sVnnNfmL",playerContainer:"qy6iAuly",interactionPos:"QmSFKPu_",isSafari:"Rz2UiTU3",videoImage:"wRth8Ogl",isHavePlayer:"ywwgf5WD",playerWrap:"OQxFeb0b",modalPlayerWrap:"ziHRiK7F",backgroundImg:"e7LE8lQa",backgroundMask:"NkMUXvnG",backgroundImgSarari:"Pxm1inWS",videoInfoContainer:"AxkEtArx",title:"tB0SDk_f",infoContainer:"GZRCTiJm",time:"jNBuRjLI",reportTool:"j1_ef9DE",report:"Zs1Skguo",publishTime:"G4Q_lVI5",statsContainer:"OAT5ZGgO",count:"_7ETCiB7",statsItem:"YCXpwvoY",share:"VB4Xo0hK",active:"pf5ig6F3",iconSvg:"q8dnlO1A",shareContainer:"GF_kVxou",shareBox:"bbtDe_F7",shareBoxHidden:"BwpKtFMP",miniScreenBtn:"tJ68N40n",hidden:"dpT64Jl7",imgPlaceHolder:"Gb2cR03V",programCardHidden:"fhNq2gKW",linkHashTag:"uahjvYO1",btn:"hO4HnkCu",putBtn:"jwTMFuFU",openBtn:"NmoWt6hl",hide:"zsszb5Zx"}},73567:function(e,n){n.Z={playerCommentWrapper:"vLt8mbfQ",sideBar:"y8iJbHin",sideBarDefaultWidth:"iBlduIHW",acAndCommentSideBarWidth:"y09Wdy_e",acCollapseSideBarWidth:"Q55w9yNc",acAndComment2singleCard:"ZA2ZGLYM",acAndComment2SingleCard:"ZA2ZGLYM",lookRelatedRound:"yolFusHE",smallSidebarCard:"iBxnZyVx",sideBarCommentWrapper:"mMOxHVzv",sideBarInnerHidden:"NAlGoOVc","ani-single-card-hide":"fKi52pRG",aniSingleCardHide:"fKi52pRG",hiddenWithBigCard:"hdFt0zgn","ani-comment-hide-with-single-card":"kY1A3NUr",aniCommentHideWithSingleCard:"kY1A3NUr",smallCardHideWithComment:"Jkhl_6e8",sideBarInnerWrapper:"rrKCA47Q",authorCard:"CBoMP6JS",authorCardCollapse:"fFajM5xa",relatedCard:"PI7IYWYv","ani-small-card-hide-with-comment":"sgGERhqv",aniSmallCardHideWithComment:"sgGERhqv",commentWithCollapse:"Ci_Q1xaN",sideBarHidden:"AyiCwfWk",noTransition:"yFpBLUam",sideBarBackground:"KiceaZw7",playerContainer:"KXURcZ2l",isSafari:"Qk5u3tZg",videoImage:"luSvbiWn",isHavePlayer:"P8fJYYpG",playerWrap:"S6T7oCND",backgroundImg:"QTd3WwkC",backgroundMask:"Q7dTBiDp",backgroundImgSarari:"BTHquD5m",videoInfoContainer:"awm3uCQe",title:"ycbbmjyY",infoContainer:"vyWD6rZw",time:"amIZ5DhK",reportTool:"adhZCag1",report:"xEM9apHG",publishTime:"AoK6Rode",statsContainer:"A7pYE6Gs",count:"Y2fUosgF",statsItem:"XYRPG4aP",share:"Us2JFScA",active:"MwY4rP39",iconSvg:"bSEo8tbz",shareContainer:"bzBEyZ7e",shareBox:"Ys8IA4vm",shareBoxHidden:"ERfFKdbf",miniScreenBtn:"y6M7i_yC",hidden:"qu8OmbTc",imgPlaceHolder:"V4RN5U6j",programCardHidden:"yZK53X1T",linkHashTag:"Xzpv8e2J","ani-comment-change-pos-with-small-card-hide":"fOqtl5EH",aniCommentChangePosWithSmallCardHide:"fOqtl5EH"}},85649:function(e,n,o){e.exports=o.p+"image/generalBG.0640de7c.png"}}]);