(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[5876],{85876:function(e,t,_){"use strict";_.d(t,{Z:function(){return ht}});var r,n=_(44931),i=_(97448),a=_.n(i),s=_(44540),o=_.n(s),c=_(63862),l=_.n(c),u=_(66581),d=_.n(u),h=_(90400),f=_.n(h),p=_(33743),g=_.n(p),m=_(12067),b=_.n(m),v=_(84713),y=_.n(v),E=_(54882),O=_.n(E),P=_(18556),M=_.n(P),D=_(36210),T=_.n(D),j=_(11235),w=_.n(j),C=_(38574),I=_.n(C),L=_(67466),k=_.n(L),A=_(78650),S=_.n(A),R=_(25239),B=_.n(R),U=(_(80070),_(82226),_(44988),_(50139),_(10749),_(38762),_(2749)),W=_(3515),K=_(9889),x=(_(79022),_(74577),_(99394),_(40236),_(96963),_(20274),_(70676),_(89862),_(77794),_(15638),_(9008),_(94655),_(75984),_(53928),_(21078),_(28722),_(53769),_(16755)),$=_.n(x),V=_(12544),z=_.n(V),N=_(29493),q=_.n(N),H=_(30562),Z=_.n(H),F=_(8910),Q=(_(39293),_(13942),_(59060),_(29657),_(85585),_(86301),_(91847),_(33554),"undefined"!=typeof window&&I()(r=window.location.href).call(r,"loggerdebug")>-1);function Y(){for(var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],t=0,_=0;_<e.length;_++)isNaN(Number(e[_].end))||isNaN(Number(e[_].begin))||e[_].begin<0||e[_].end<0||e[_].end<e[_].begin||(t+=e[_].end-e[_].begin);return t=T()(1e3*t,10)}function X(e){if(null===e||e===undefined||""===e||"string"!=typeof e)return"";var t=e.split("/"),_="";return t.length>3&&t[2]&&(_=t[2]),_}function G(e){var t={};if(e instanceof window.XMLHttpRequest)try{var _=e.getAllResponseHeaders(),r=$()(_).call(_).split(/[\r\n]+/);f()(r).call(r,(function(e){var _=e.split(": "),r=_.shift(),n=_.join(": ");t[r]=n}))}catch(n){}return t}function J(e){for(var t,_,r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];Q&&(_=console).log.apply(_,O()(t=["[logger]",e]).call(t,n))}function ee(){try{return Math.round(window.performance.now())}catch(e){return(new Date).getTime()}}function te(){return(new Date).getTime()}function _e(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return new(z())((function(_,r){try{e||r(new Error("url is undefined"));var n=0,i=0,a={},s=new window.XMLHttpRequest;s.open("get",e),s.onreadystatechange=function(){2===s.readyState&&(a.headers=G(s),a.connectTime=ee()-i,a.status=s.status,a.statusText=s.statusText,n=ee()),1===s.readyState&&(i=ee())},s.onload=function(){_(a)},s.onprogress=function(e){var t,_=ee()-n;_<5&&(_=ee()-i),t=T()(e.loaded/1e3/(_/1e3),10),a.speed=t,a.costTime=_},s.onerror=function(e){r(e)},s.ontimeout=function(){a.status||(a.status=-2),_(a)},s.onabort=function(){_(a)},s.responseType="arraybuffer",s.timeout=t.timeout||1e4,s.setRequestHeader("Range","bytes=".concat(t.range||"0-1048576")),s.send()}catch(o){r(o)}}))}function re(e){var t;return!e||I()(t=window.location.href).call(t,e)>-1}var ne={x_response_sinfo:"x-response-sinfo",x_response_cache:"x-response-cache",x_response_cinfo:"x-response-cinfo"};function ie(e){var t;if(!e)return{};var _={};return M()(t=a()(ne)).call(t,(function(t){if(e[t]||"string"!=typeof ne[t]){if(!e[t]&&ne[t]instanceof Array){var r,n=l()(r=ne[t]).call(r,(function(t){return e[t]!==undefined}));n.length>0?_[t]=e[n[0]]:_[t]=""}}else _[t]=e[ne[t]]||""})),_}function ae(e,t){return e&&("string"==typeof t||"number"==typeof t)?e+""+t:t}function se(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]}function oe(e,t){if(!e||!t)return!1;try{return q()(Array.prototype).call(e.classList,(function(e){return e===t}))}catch(r){var _=e.className&&"object"===(0,F.Z)(e.className)?e.getAttribute("class"):e.className;return _&&!!_.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}}function ce(e){return"String"===se(e)?e.replace("P","p"):e?"Number"===se(e)?"".concat(e):void 0:""}function le(e){try{return Z()(e)}catch(t){return""}}var ue=[];function de(e){var t={};try{var _=function(){e=e.replace(/^http:|^https:/,"");for(var _=ue||[],r=function(r){var n;if(_[r].name.replace(/^http:|^https:/,"")===e)return M()(n=["domainLookupEnd","domainLookupStart","startTime","requestStart","responseEnd","responseStart","connectStart","connectEnd","fetchStart"]).call(n,(function(e){t[e]=Math.round(_[r][e])})),t.url=_[r].name,t.duration=Math.round(_[r].duration),t.domainDuration=t.domainLookupEnd-t.domainLookupStart,t.connectDuration=t.connectEnd-t.connectStart,"break"},n=_.length-1;n>=0;n--){if("break"===r(n))break}return{v:t}}();if("object"===(0,F.Z)(_))return _.v}catch(r){return t}}"undefined"!=typeof window&&function(){try{new window.PerformanceObserver((function(e,t){var _=e.getEntriesByType("resource");ue.length>30&&S()(ue).call(ue,0,ue.length-30);for(var r=0;r<_.length;r++)ue.push(_[r])})).observe({entryTypes:["resource"]})}catch(e){}}();var he=function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e){return!1}}()&&!function(){var e="_localstorage_support_test";try{return window.localStorage.setItem(e,!0),window.localStorage.removeItem(e),!1}catch(t){return!0}}()?window.localStorage:{},fe="__xgplayerlogkey",pe={set:function(e){try{var t=this.get();t.push(e),he.setItem(fe,Z()(t))}catch(_){}},get:function(){try{var e=he.getItem(fe);return e=e?JSON.parse(e):[]}catch(t){return[]}},remove:function(){try{he.removeItem(fe)}catch(e){}},clear:function(){try{he.clear()}catch(e){}}},ge=(_(2718),[{key:"QQBrowser",reg:/(qqbrowser)\/([\d.]+)/},{key:"QIHU360EE",reg:/qihu 360ee/},{key:"QIHU360SE",reg:/qihu 360se/},{key:"2345Explorer",reg:/(2345explorer)\/([\d.]+)/},{key:"Sogou",reg:/(metasr)/},{key:"Wexin",reg:/(micromessenger)\/([\d.]+)/},{key:"Openlanguage",reg:/(openlanguage)\/([\d.]+)/},{key:"NewsArticle",reg:/(newsarticle)\/([\d.]+)/},{key:"VideoArticle",reg:/(videoarticle)\/([\d.]+)/},{key:"Hotsoon",reg:/(live_stream)_([\d.]+)/},{key:"Aweme",reg:/(aweme)_([\d.]+)/},{key:"Lark",reg:/(lark)\/([\d.]+)/},{key:"PlayStation",reg:/(playstation)/},{key:"BingPreview",reg:/(bingpreview)\/([\d.]+)/},{key:"Baiduspider",reg:/(baiduspider-render)\/([\d.]+)/},{key:"YandexBot",reg:/(yandexbot)\/([\d.]+)/},{key:"Chrome",reg:/(chrome)\/([\d.]+)/},{key:"Safari",reg:/(version)\/([\d.]+)\s*(safari)/}]),me=[{key:"Trident",reg:/(rv:)([\d.]+)/},{key:"Trident",reg:/(msie)\s*([\d.]+)/}];function be(){var e=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],t=document.createElement("video"),_={isSupport:!1,mime:""};return"function"==typeof t.canPlayType?(M()(e).call(e,(function(e){"probably"===t.canPlayType('video/mp4; codecs="'.concat(e,'"'))&&(_.isSupport=!0,_.mime+="||".concat(e))})),_):(t=null,_)}var ve=["Baiduspider","YandexBot"];function ye(e,t){var _=!1;return M()(ve).call(ve,(function(t){t===e&&(_=!0)})),/(\+http|; http|\(http):\/\/([\w.]+\/?)\S*/.test(t)&&(_=!0),_}function Ee(){var e=navigator.mimeTypes;if(e){for(var t=0;t<e.length;t++){var _,r,n;if(e[t].type&&I()(_=e[t].type).call(_,"360")>-1)return!0;if(e[t].type&&I()(r=e[t].type).call(r,"application/vnd.chromium.remoting-viewer")>-1)return!0;if(e[t].description&&I()(n=e[t].description).call(n,"360")>-1)return!0}return!1}}var Oe="undefined"!=typeof navigator&&function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";e=e.toLocaleLowerCase();var t=/(iphone)/.test(e)||/(ipad)/.test(e),_=/(android)/.test(e),r=/(windows phone)/.test(e),n=t||_||r,i={isIOS:t,isAndroid:_,isMobile:n,isPC:!n,isPad:/(ipad)/.test(e)},a=be();i.isSupportMP4=a.isSupport,i.mime=a.mime;var s="",o=0,c=[],l=ge;/trident/.test(e)&&(l=me);for(var u=0;u<l.length;u++)if(c=l[u].reg.exec(e)){s=l[u].key,o=c.length>2?c[2]:"";break}if(s)i["is".concat(s)]=!0,i.name=s,i.appVersion=o;else{var d=Ee();d&&(i.name="360EE")}if(i.name&&"Trident"!==i.name){var h=/(trident)/.exec(e);h&&(i.name=i.name?"".concat(i.name,"_Trident"):"Trident")}return i.isSpider=ye(i.name),i}(navigator.userAgent),Pe={range:"0-1048576",timer:6e4,timeout:15e3},Me=function(){function e(){var t,_=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,U.Z)(this,e),M()(t=a()(Pe)).call(t,(function(e){_[e]!==undefined&&null!==_[e]||(_[e]=Pe[e])})),this.options=_,this._headers={},this.intervalId=null,this.ishangUp=!1,this._data={contentLength:0,statusText:"",status:-1,speed:0,costTime:0,connectTime:0,contentType:""},this.url=[]}return(0,W.Z)(e,[{key:"setData",value:function(e,t){var _,r=this;if(M()(_=a()(e)).call(_,(function(t){"headers"!==t&&(r._data[t]=e[t])})),e.headers&&a()(e.headers).length>0){this._headers=ie(e.headers),e.headers["content-type"]&&(this._data.contentType=e.headers["content-type"]);var n=(e.headers["content-range"]||"").split("/");n&&n.length>1&&(this._data.contentLength=T()(n[1]))}}},{key:"contentLength",get:function(){return this._data.length||0}},{key:"trigger",value:function(e){var t=this,_=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"start",r=this.options;this.url=e,!this.url||"start"!==_&&(this.ishangUp||this.intervalId)?J("task>>cant`t trigger url",this.ishangUp,this.intervalId):(J("task>>trigger url ",e),this.ishangUp=!0,this.intervalId&&this.clear(),this.intervalId=w()((function(){t.clear()}),"start"===_?500:r.timer),_e(this.url,{range:"start"===_?"0-1024":r.range,timeout:r.timeout}).then((function(e){J("getXhr>>check result ",e),t.setData(e||{}),t.ishangUp=!1})).catch((function(e){J("getXhr>>error ",e),t.ishangUp=!1,t._data.status=-1})))}},{key:"url",get:function(){return this.options.url},set:function(e){e&&(this.options.url=e)}},{key:"serverIp",get:function(){return this._headers.x_response_sinfo||""}},{key:"headers",get:function(){return this._headers||{}}},{key:"status",get:function(){return this._data.status||-1}},{key:"speed",get:function(){return this._data.speed}},{key:"clear",value:function(){clearTimeout(this.intervalId),this.intervalId=null}}]),e}(),De="0.11.11";function Te(e,t){var _=a()(e);if(o()){var r=o()(e);t&&(r=l()(r).call(r,(function(t){return d()(e,t).enumerable}))),_.push.apply(_,r)}return _}function je(e){for(var t=1;t<arguments.length;t++){var _,r,n=null!=arguments[t]?arguments[t]:{};t%2?f()(_=Te(Object(n),!0)).call(_,(function(t){(0,K.Z)(e,t,n[t])})):g()?b()(e,g()(n)):f()(r=Te(Object(n))).call(r,(function(t){y()(e,t,d()(n,t))}))}return e}J("logger version is ".concat(De));var we,Ce=(we="Object",function(e){return Object.prototype.toString.call(e)==="[object ".concat(we,"]")}),Ie="videoplayer_oneplay",Le="videoplayer_oneopera",ke="videoplayer_oneerror",Ae="videoplayer_oneevent",Se="videoplayer_onetemp",Re={data:1e3,runtime:1002,parse:1004,network:1003,no_error_handler:9997,custom_error:9998,other:9999,notSupport:1005},Be={1:-499991,2:-499992,3:-499993,4:-499994,5:-499995},Ue=0,We=1,Ke=2,xe=3,$e=4,Ve=0,ze=1,Ne=2,qe=3,He=1,Ze=2,Fe=3,Qe=4,Ye=5,Xe=6,Ge="error_retry",Je="oneerror",et="oneevent",tt="onetemp",_t=0,rt=1,nt=1300,it="__tea_cache_tokens_".concat(nt),at=-1,st=432e5,ot=36e5,ct=["vtype","tag","subtag","codec_type","device_type"],lt="",ut=null,dt=function(){function e(t,_){var r=this;if((0,U.Z)(this,e),(0,K.Z)(this,"initializeUrlLog",(function(e){var t=e||"";"String"!==se(t)&&(t=""),r.urlLog={initial_url:t,initial_host:X(t),initial_ip:""}})),(0,K.Z)(this,"onMediaFormatError",(function(e){r.onOneEvent({end_type:(e.error_type||"")+"Error"})})),(0,K.Z)(this,"onDrmTypeChange",(function(e){r.addIfExist("drm_type",{drm_type:e},r._options)})),(0,K.Z)(this,"onReplayBtnClick",(function(){r.resetLoggerParams()})),(0,K.Z)(this,"onBeforeDefinitionChange",(function(){r.resLogs.ldst=ee(),r._endType="switch"})),(0,K.Z)(this,"onDefinitionChange",(function(e){var t,_=e.from,n=e.to;r.changeResolution(_,n,r.resLogs.ldst,"switch"),J(O()(t="onDefinitionChange from:".concat(_,", to:")).call(t,n))})),(0,K.Z)(this,"onDefiChangeSuccess",(function(){J("onDefinitionChangeSuccess"),r.updateVideoSize(),r.triggerTask("start")})),(0,K.Z)(this,"onAbrChange",(function(e){var t=e.prev,_=e.cur,n=e.abrInfo;if(r.player.abrInstance){var i=r.player.abrInstance.eventInfo;J("abrChange",i),i.last_definition=t,i.now_definition=_,r.abrInfo.abr_event_info.video_switch.push(i),r.changeResolution(t,_,ee(),"abr_switch",n)}})),(0,K.Z)(this,"onAbrPrestallEnd",(function(e){r.abrInfo.abr_user_info.cancel_abr=e?1:0})),(0,K.Z)(this,"onTimeUpdate",(function(){var e,t,_,n=r.playlogs,i=r.resLogs,a=r.player;(r.errorLog.try_err_c=0,n.vt||1!==r.startStep)||(n.vt=te(),J("onTimeUpdate: first frame inited",O()(e=O()(t=O()(_="currentTime11:".concat(a.currentTime," vt-pt:")).call(_,n.vt-n.pt," vt-nt:")).call(t,n.vt-n.nt," vt-rt:")).call(e,n.vt-n.rt)),r.startStep=2);if(!i.initial_resolution){var s=a.currentDefitionFromPlayer&&a.currentDefitionFromPlayer.definition?a.currentDefitionFromPlayer.definition:a.config.defaultDefinition||a.video.videoHeight+"p"||0;s=ce(s),i.initial_resolution=s}i.final_resolution||(i.final_resolution=i.initial_resolution);var o=n.played.length;o<1?n.played.push({begin:a.currentTime,end:-1}):n.played[o-1].end=a.currentTime;var c=i.played.length;c<1?i.played.push({begin:a.currentTime,end:-1}):i.played[c-1].end=a.currentTime,r.lastVideoTime=a.currentTime||0,r.updateCurBuffer()})),(0,K.Z)(this,"onCanplay",(function(){var e;J("onCanplay",O()(e="this.startStep:".concat(r.startStep," ")).call(e,te())),r.setVt()})),(0,K.Z)(this,"onLoadeddata",(function(){var e;J("onLoadeddata",O()(e="this.startStep:".concat(r.startStep," ")).call(e,te())),r.setVt(),r.updateVideoSize()})),(0,K.Z)(this,"onLoadStart",(function(){var e,t,_,n=re(r.player.currentSrc);r.triggerTask("start"),J("onLoadStart",O()(e=O()(t=O()(_="this.startStep:".concat(r.startStep," ")).call(_,te()," isSrcEmpty:")).call(t,n," player.src:")).call(e,r.player.src)),0!==r.startStep||n||"visible"!==document.visibilityState||r.setPt()})),(0,K.Z)(this,"onDashStateChange",(function(e){var t,_;J("onDashStateChange",O()(t=O()(_="this.startStep:".concat(r.startStep," ")).call(_,ee()," state:")).call(t,e));var n=r.playlogs;if(r.startStep<2)switch(e){case"player_start":n.dash_pst=ee();break;case"wasm_start":n.dash_wst=ee();break;case"wasm_ready":n.dash_wrt=ee();break;case"init_finished":n.dash_ift=ee();break;case"core_start":n.dash_cst=ee();break;case"start_play":n.dash_spt=ee()}})),(0,K.Z)(this,"onMp4StateChange",(function(e){var t=e.state;(r.exInfo.states.length>10||"player_start"===t)&&(r.exInfo.states=[]),r.exInfo.states.push(e)})),(0,K.Z)(this,"onBufferedChange",(function(){var e=r.player.video&&r.player.video.buffered;if(e){var t=e.length;t>0&&e.end(t-1)+1>r.player.duration&&(r.bft=te())}})),(0,K.Z)(this,"onPlayerInited",(function(){J("player init"),r._playerCreatedTime=te(),r.playlogs.rt=te()})),(0,K.Z)(this,"onNotAutoPlay",(function(){J("onNotAutoPlay","autoplay:".concat(r.isAutoplay)),0===r.isAutoplay?r.isAutoplay=2:1===r.isAutoplay&&(r.isAutoplay=3)})),(0,K.Z)(this,"onDashError",(function(e){e=e||{};var t=r.errorLog;t.last_errors.push(e.errorCode),t.accu_errc++,r.onOneError({errorType:e.errorTypeCode,code:e.errorCode,url:e.url||"",headers:e.headers||{}},0)})),(0,K.Z)(this,"onPlayerError",(function(e){var t,_,n;e=e||{};var i=r.errorLog,a=r.player,s=r.line_app_id;if(J("onPlayerError",O()(t=O()(_=O()(n="this.player.type:".concat(r.player.type," this.player.replayRunning:")).call(n,r.player.replayRunning," isSupportMP4:")).call(_,Oe.isSupportMP4," isPC:")).call(t,Oe.isPC)),J("onPlayerError",e),r.load_state=qe,r._endType="error",r.suspendWaitingStatus("onPlayerError"),"dash"!==a.type||!a.replayRunning){if(e.url||(e.url=r.player.currentSrc),(1768===s||9999===s)&&Oe.isPC&&!Oe.isSupportMP4||Oe.isSpider)return i.errc=Be[5],i.errt=Re.notSupport,r.onOneError({errorType:i.errt,code:i.errc,url:e.url,headers:e.headers||{}},0),void(r._isOnePlayReport=!0);i.errt=e.errorTypeCode||(e.errorType&&Re[e.errorType]?Re[e.errorType]:9999),e.errorCode?i.errc=e.errorCode>0&&Be[e.errorCode]?Be[e.errorCode]:e.errorCode:e.code&&(i.errc=e.code>0&&Be[e.code]?Be[e.code]:e.code),i.last_errors.push(i.errc),0===i.fir_errc&&(i.fir_errc=i.errc),r.onOnePlay(He),r.onOneTemp(He),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r.onOneError({errorType:i.errt,code:i.errc,url:e.url,headers:e.headers||{}}),r.sendEventsQueue()}})),(0,K.Z)(this,"onPlayInterfaceInfo",(function(e){J("onPlayInterfaceInfo",e);var t,_=r.errorLog,n=r.apiLog,i=r.playlogs;e&&M()(t=a()(e)).call(t,(function(t){"code"===t?n.vsc=e[t]:"message"===t?n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e":n[t]=e[t]}));if(i.at=e.timestamep||(new Date).getTime(),(!e.error||-9988!==e.error.errc)&&(n.vsc=e.code||10,n.vsc_message=e.message||"success\uff0c\u89c6\u9891\u53ef\u6b63\u5e38\u64ad\u653e",e.error)){var s=e.error;_.errt=1e3,_.errc=s.errc||-9998,_.last_errors.push(s.errc||-9998),0===_.fir_errc&&(_.fir_errc=s.errc||-9998),_.accu_errc++,1===_.accu_errc&&(_.fir_errt=ee()),r.onOneError({errorType:1e3,code:s.errc||-9998,url:"",headers:{}})}})),(0,K.Z)(this,"onProgressEvent",(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=r.netLog;if(e.speed){var _=e.speed>1e6?Math.floor(e.speed/1e3):e.speed;t.downloadSpeed=_,t.totalSpeed+=_,t.rqCount++}"oversize"!==e.type&&t.requestCount++,e.connectTime&&(t.connectCost=e.connectTime);var n=t.rqCount<7?100:e.costTime>=5e3?20:10;if(!("success"===e.type&&T()(100*Math.random(),10)<=n)){var i=de(e.cdnUrl),a=e.xhr||{},s=e.type?"progress_".concat(e.type):"progress",o=e.headers;o||(o=G(a));var c=je(je({},o=ie(o)),{},{download_speed:t.downloadSpeed,connect_cost:t.connectCost,c_dur:i.connectDuration||0,d_dur:i.domainDuration||0,r_dur:i.duration||0,rqtt:(new Date).getTime(),x_cache:o.x_response_cache||"",server_ip:o.x_response_sinfo});e.status?t.status=e.status:a&&a instanceof window.XMLHttpRequest&&(t.status=a.status||0),c.status=t.status;var l=e.cdnUrl||e.url;"error"===e.type&&r.merror.cdn.push(je(je({costTime:e.costTime,cur_play_pos:e.pos,cdn_url:l,cdn_host:X(l)},c),o)),r.onOneEvent({costTime:e.costTime,vid:e.vid,end_type:s,cur_play_pos:e.pos,cdn_url:l,cdn_host:X(l)},c,"error"===e.type?0:2)}})),(0,K.Z)(this,"onNext",(function(e){if(J("onNext:startStep:",r.startStep),r.startStep>0){if(r._reportInvalidVV(Ze))return;r.onOnePlay(Ze),r.onOneTemp(Ze),r.sendEventsQueue()}r.vtype=null,r.playlogs.lc=0,r.resetLoggerParams()})),(0,K.Z)(this,"onNextEnded",(function(){var e=r.player,t=r.resLogs,_=ce(e.config.defaultDefinition||"");t.initial_resolution=_,t.final_resolution=_})),(0,K.Z)(this,"onXgLogWaiting",(function(e){var t=r.playlogs,_=r.resLogs,n=r.stall;if(r._options.checkByInnerLog&&0===e.type){J("onXgLogWaiting",e);var i=e.endType,a=e.costTime,s=e.start,o={download_speed:r.mp4Speed,avg_speed:r.mp4RealSpeed,mse_op:r.mp4MseOpLength,mp4_load_range:r.mp4LoadSegmentTimeRange,bitrate:r.curBitrate};if("waitingStart"===e.eventType)return r.onOneEvent({costTime:a,end_type:"waitstart"},o,2),void r.appendStallInfo("start",s);if("waitingEnd"===e.eventType){var c,l,u=ee();J(O()(c=O()(l="onXgLogWaiting>>".concat(i,"|costTime:")).call(l,a,"  vt:")).call(c,t.vt)),r.appendStallInfo("end",u,i),t.bc++,r.checkInBuffer(r.player.currentTime)?(t.de_bu_acu_t+=a,t.dbc++):(t.nbc++,t.n_bu_acu_t+=a),_.bc++,t.bu_acu_t+=a,_.bu_acu_t+=a,n.stall_end=u,n.stall_last_interval=n.stall_end-n.stall_start,n.stall_acc_time+=n.stall_last_interval,1===n.sc&&(n.first_buf_endt=u),r.onOneEvent({costTime:a,end_type:"waitend"},o,2)}}})),(0,K.Z)(this,"onSeeking",(function(){if(!re(r.player.src)){var e=r.resLogs,t=r.playlogs,_=r.player,n=r.seekLog;J("onSeeking","currentTime:".concat(_.currentTime)),0===r.startStep&&r.setPt(),r.suspendWaitingStatus("seek"),r.isSeeking&&r.suspendSeekStatus("seek",!1),r.isSeeking=!0,t.played.push({begin:r.player.currentTime,end:-1}),e.played.push({begin:r.player.currentTime,end:-1}),n.lastSeekStartTime=ee(),n.seekBefore=r.lastVideoTime.toString(),n.intervalId=w()((function(){r.isSeeking&&r.suspendSeekStatus("seekTimeout",!0)}),6e4)}})),(0,K.Z)(this,"onSeeked",(function(){re(r.player.src)||r.isSeeking&&r.suspendSeekStatus("seeked",!0)})),(0,K.Z)(this,"onPlaying",(function(){r.suspendWaitingStatus("play"),r.load_state=ze;var e=ee();r.pauseLog.isPausing&&(r.pauseLog.isPausing=!1,r.pauseLog.pause_acu_t+=e-r.pauseLog.pause_start)})),(0,K.Z)(this,"onPlayCatch",(function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0};if(J("onPlayCatch",e,t),e){var _=r.errorLog,n=r.playlogs,i=r.merror;i.playCatch.push(je({errc:t.errorCode,errt:t.errorType},t.headers)),r.setBr("playcatch"),_.accu_errc++,_.try_err_c++,_.fir_errc=t.errorCode,t.errorCode&&_.last_errors.push(t.errorCode),r.suspendWaitingStatus("playcatch"),r.sendDegradeLog("playCatch",n.degrade,{cdn_url:t.url}),"mp42dash"===e?r.vtype="DASH_2":"dash2mp4"===e?r.vtype="MP4_2":"dash1mp4"===e&&(r.vtype="MP4_1"),n.degrade=e,r.onOneError({errorType:t.errorTypeCode,code:t.errorCode,url:t.url||"",status:t.httpCode||t.status,headers:t.headers||{},vid:t.vid||r.vid,preload_hit:t.preloadHit||0,preload_cached:t.preloadCached||0,endState:Xe,costTime:t.costTime,message:t.errorMessage},0)}})),(0,K.Z)(this,"onMediaExpied",(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{errorType:"",errorTypeCode:0,errorCode:0,url:"",headers:{},status:0},t=r.errorLog,_=r.playlogs;J("onMediaExpied",e),r.suspendWaitingStatus("expied"),r.setBr("expied"),t.accu_errc++,t.try_err_c++,t.last_errors.push(e.errorCode),_.at=(new Date).getTime(),r.merror.expied.push(je({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status},ie(e.headers||{}))),r.onOneError({errorType:e.errorTypeCode||e.errorType,code:e.errorCode,url:e.url||"",status:e.status,headers:e.headers||{}},0)})),(0,K.Z)(this,"onLog",(function(e){J("onLog",e);var t=e.type;if(delete e.type,t)switch(t){case Ge:break;case tt:r._templog||(r._templog={}),r._templog=function(){var e,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";return M()(e=a()(_)).call(e,(function(e){t[e]="append"===r?ae(t[e],_[e]):_[e]})),t}(r._templog,e.data,e.action),r._templog.preload_hit&&(r._cacheFile=rt);break;case Je:var _=r.errorLog;_.accu_errc++,_.try_err_c++,r.setBr("mp4error"),_.last_errors.push(e.code),r.onOneError(e,0);break;case et:var n,i=function(e,t){var _,r={ext:e.ext||{},data:{}};return M()(_=a()(e)).call(_,(function(_){t[_]?r.data[t[_]]=e[_]:"ext"!==_&&(r.ext[_]=e[_])})),r}(e,{costTime:"costTime",vid:"vid",end_type:"end_type",pos:"cur_play_pos",cdnUrl:"cdn_url"});if(i.ext)M()(n=["start","end"]).call(n,(function(e){i.ext[e]&&(i.ext["ext_".concat(e)]=i.ext[e],delete i.ext[e])}));r.onOneEvent(i.data,i.ext,2)}})),(0,K.Z)(this,"onPlay",(function(){var e;J("onPlay",O()(e="this.startStep :".concat(r.startStep," this.isEnded:")).call(e,r.isEnded)),r.isEnded&&(r.resetLoggerParams(),r.setPt())})),(0,K.Z)(this,"onPause",(function(){J("onPause");var e=r.pauseLog;e.isPausing=!0,e.pause_start=ee()})),(0,K.Z)(this,"onWaiting",(function(){var e,t,_=r.stall;r._options.checkByInnerLog||(J("onWaiting>",O()(e=O()(t="isSeeking:".concat(r.isSeeking," startStep:")).call(t,r.startStep," intervalId:")).call(e,_.intervalId)),r.isSeeking||0===r.playlogs.vt||r.inWaitingStart>0||(_.intervalId&&(window.clearTimeout(_.intervalId),_.intervalId=null),r.inWaitingStart=ee(),_.intervalId=w()((function(){var e,t,_=r.stall;J(O()(e="stall.intervalId>>".concat(_.intervalId," cost: ")).call(e,ee()-r.inWaitingStart)),r._endType="wait",r.load_state=Ne,I()(t=r.vtype).call(t,"MP4")>-1&&r.player.currentTime>10&&r.task&&(r.triggerTask("waiting",r.initial_url),r.requestCount++),_.stall_start=r.inWaitingStart,1===_.sc&&(_.first_buf_startt=r.inWaitingStart),window.clearTimeout(_.intervalId),_.intervalId=null,r.startWaitingStatus(r.inWaitingStart,ee()-r.inWaitingStart),_.intervalId=w()((function(){r.inWaitingStart>0&&r.suspendWaitingStatus("waitTimeout")}),6e4)}),200)))})),(0,K.Z)(this,"onEnded",(function(){var e,t;if(r.initial_url){J("onEnded",O()(e=O()(t="watchDur:".concat(r.watchDur," vt:")).call(t,r.vt," pt:")).call(e,r.pt)),r.isEnded=!0;var _=r.resLogs.df;r.changeResolution(_,_,ee(),"leave_switch"),r.onOnePlay(Fe),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r.onOneTemp(Fe),r.sendEventsQueue(),r.playlogs.lc++}})),(0,K.Z)(this,"onUnload",(function(){0!==r.startStep&&r.initial_url&&(r.onOneTemp(Qe),r.sendDegradeLog("playCatch_end",r.playlogs.degrade),r._reportInvalidVV(Qe)||(r._options.disableLocalCache?r.onOnePlay(Qe,!1):r.onOnePlay(Qe,!0)))})),(0,K.Z)(this,"onVisibilitychange",(function(){var e=r.playlogs.vt;"visible"===document.visibilityState&&(e||r.setPt())})),(0,K.Z)(this,"onDestroy",(function(){var e,t,_;J(O()(e=O()(t="onDestroy:this.startStep:".concat(r.startStep," initial_url:")).call(t,r.initial_url," ")).call(e,!!r.initial_url)),r.onOnePlay(Ye),r.startStep>0&&r.initial_url&&(r.onOneTemp(Ye),r.sendDegradeLog("playCatch_end",r.playlogs.degrade));var n=r.resLogs.df;r.changeResolution(n,n,ee(),"leave_switch"),r.sendEventsQueue(),Oe.isPC?window.removeEventListener("beforeunload",r.onUnload):(Oe.isMobile||Oe.isPad)&&window.removeEventListener("pagehide",r.onUnload),document.removeEventListener("visibilitychange",r.onVisibilitychange),f()(_=r.listeners).call(_,(function(e){r.player.off(e.evt,e.handler)})),r.clearTimers(),r.player.off("destroy",r.onDestroy),r.task&&r.task.clear()})),(0,K.Z)(this,"onOnePlay",(function(){var e,t,_,n,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:3,s=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(J(O()(e=O()(t="onOnePlay _isOnePlayReport:".concat(r._isOnePlayReport," isLeave: ")).call(t,s," endState:")).call(e,i)),!r._isOnePlayReport){var o=r.errorLog,c=r.playlogs,l=r.abrInfo,u=r.resLogs,d=r.player,h=r.apiLog,p=r.pauseLog,g=r.stall,m=r.netLog,b=r.watchDur;r._isOnePlayReport=!0;var v=te(),y=0,E=0,P=d.video&&d.video.buffered;if(P){for(var D=P.length,j=0,w=0;w<D;w++)j+=P.end(w)-P.start(w);y=E=1e3*j}var C=r.mp4FFInfo;M()(_=a()(C)).call(_,(function(e){r.exInfo[e]=C[e]})),r.setPerformance(),r.setStat();var I=je(je(je({local_time:(new Date).getTime(),log_type:"video_playq",plugin_exception:0,player_create_exception:"",v:r.vid,initial_url:r.initial_url,initial_host:r.initial_host,initial_ip:r.curHeaders.x_response_sinfo||0,initial_type:r.initial_type},r.curHeaders),{},{initial_resolution:u.initial_resolution,final_resolution:u.final_resolution,pt:r.pt,prepare_start_time:c.nt,prepare_end_time:c.rt||te(),vt:r.vt,lt:r.lt,lpt:r.lpt,fvt:r.fvt,nvt:r.nvt,bft:r.bft,sc:r.seekLog.sc,sat:r.seekLog.sat,bc:r.bc,dbc:c.dbc||0,nbc:c.nbc||0,video_net_s:r.videoNetworkState,status:r.curStatus,first_buf_startt:g.first_buf_startt,first_buf_endt:g.first_buf_endt,lc:c.lc,bu_acu_t:r.bu_acu_t>st?0:r.bu_acu_t,de_bu_acu_t:c.de_bu_acu_t||0,n_bu_acu_t:c.n_bu_acu_t||0,pause_acu_t:p.pause_acu_t,cur_play_pos:r.cur_play_pos,load_state:r.load_state,play_speed:r.playbackRate,playback_state:r.playback_state,end_state:i,watch_dur:b>st?0:b,switch_resolution_c:r.switchResolutionCount,is_start_play_automatically:r.isAutoplay,start_time:r.start_time,finish:r.finish,errt:o.errt,errc:o.errc,vsc:h.vsc,vsc_message:h.vsc_message,api_str:h.api_str,auth:h.auth||h.logid,width:r.videoWidth,height:r.videoHeight,vd:r.vd,video_length:T()(y,10),audio_length:T()(E,10),df:r.resolution,lf:u.lf,play_c:0,player_created_t:r.player_created_t,fir_errt:o.fir_errt,fir_errc:o.fir_errc,lv_method:0,ldst:u.ldst,ldet:u.ldet,is_disable_short_seek:0,mute:r.mute,volume:r.volume,download_speed:r.mp4RealSpeed?r.mp4RealSpeed:r.task&&r.task.speed?r.task.speed:m.downloadSpeed,avg_speed:r.mp4Speed?r.mp4Speed:m.rqCount>0?T()(m.totalSpeed/m.rqCount,10):0,bitrate:r.curBitrate,preload_state:r.preloadState,preload_hit:r.preLoadData.hit,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength,mdl_req_num:m.requestCount,watingcost:r.watingCost,br:c.br,fbrt:c.fbrt,try_err_c:o.try_err_c,accu_errc:o.accu_errc,dash_pst:r.dash_pst,dash_wst:r.dash_wst,dash_wrt:r.dash_wrt,dash_ift:r.dash_ift,dash_cst:r.dash_cst,dash_spt:r.dash_spt,dash_break:2===d.dashBufferBreak?1:0,merror:le(r.merror),ex:le(r.exInfo),bufs:le(r.buffers.allBuffer),vs:u.vs,vds:u.vds,vps:u.vps},r.buffers.curBuffer),{},{degrade:c.degrade,cache_file:r._cacheFile});if(0!==r.vt&&(I.et=v),d&&d.config&&d.config.codecType&&(I.codec_type=d.config.codecType),d&&d.dashState&&(I.dash_state=d.dashState),f()(n=["drm_type","dynamic_type","enable_bash"]).call(n,(function(e){r.addIfExist(e,r._options,I)})),d.abrInstance){var L=d.abrInstance;if(l.abr_general_info=L.generalInfo,l.abr_event_info.video_exit={local_time_ms:(new Date).getTime(),buffer_length:L.bufferLength,internet_speed:L.downloadSpeed,now_bitrate:L.nowBitrate,play_speed:r.player.playbackRate},L.getAbrPlayInfo&&(l.abr_play_info=L.getAbrPlayInfo()),L.getAbrVVStats){var k,A=L.getAbrVVStats();f()(k=a()(A)).call(k,(function(e){I[e]=A[e]}))}}l.abr_init_opts=r.player.config.autoBitrateOpts||{},I.abr_info=le(r.abrInfo),s?r.reportLog(Ie,I,s):r.reportLog(Ie,I)}})),(0,K.Z)(this,"onOneEvent",(function(e){var t,_=e.costTime,n=e.vid,i=e.end_type,s=e.cur_play_pos,o=e.cdn_url,c=e.cdn_host,l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},u=arguments.length>2?arguments[2]:undefined,d=r.buffers.curBuffer,h=je({local_time:(new Date).getTime(),v:n||r.vid,cost_time:_,end_type:i||r.end_type,cdn_url:o||r.url,cdn_host:c||"",initial_type:r.initial_type,resolution:r.resolution,play_speed:r.playbackRate,first_frame_interval:ee()-r.pt,last_switch_interval:r.getLastInterval("lastSwitchStartTime",r.resLogs,!1),last_seek_interval:r.updateSeekPt(!1),last_event_interval:r.getLastInterval("lastEventTime"),cur_play_pos:s||r.cur_play_pos,video_ready_s:r.videoReadyState,video_seeking:r.videoSeeking,video_paused:r.videoPaused,bufs:le(r.buffers.allBuffer),retry_count:r.retry_count,at:k()(r.playlogs),stay_seconds:T()(((new Date).getTime()-k()(r.playlogs))/1e3,10),preload_state:r.preloadState,preload_hit:r.preLoadData.hit,preload_cached:r.preLoadData.duration||r.preLoadData.byteLength},d);if("waitstart"===i&&"function"==typeof r._options.getPageFPS){var p=r._options.getPageFPS();h.cur_fps=p.curFPS||0,h.avg_fps=p.avgFPS||0}var g=r.player;g&&g.dashState&&(h.dash_state=r.player.dashState),g&&g.config&&g.config.codecType&&(h.codec_type=g.config.codecType),f()(t=a()(l)).call(t,(function(e){h[e]=l[e]})),r.addIfExist("drm_type",r._options,h),r.reportLog(Ae,h,u)})),(0,K.Z)(this,"onOneTemp",(function(){var e;if(J("onOneTemp>>",!r._templog),r._templog){var t=r.player,_=r.playlogs,n=r.pauseLog,i=r.errorLog,a=r.resLogs,s=r.watchDur,o=je(je(je({local_time:(new Date).getTime()},r._templog),{},{v:r.vid,initial_type:r.initial_type,pt:r.pt,vt:r.vt,lt:r.lt,fvt:r.fvt,bc:r.bc,bu_acu_t:r.bu_acu_t>st?0:r.bu_acu_t,pause_acu_t:n.pause_acu_t,cur_play_pos:r.cur_play_pos,watch_dur:s>st?0:s,finish:r.finish,errt:i.errt,errc:i.errc,vd:r.vd,df:r.resolution,lf:a.lf,br:_.br,fbrt:_.fbrt,try_err_c:i.try_err_c,accu_errc:i.accu_errc,dash_break:2===t.dashBufferBreak?1:0,bufs:le(r.buffers.allBuffer),vs:a.vs,vds:a.vds,vps:a.vps},r.buffers.curBuffer),{},{degrade:_.degrade});0!==r.vt&&(o.et=te()),f()(e=["drm_type","dynamic_type","enable_bash"]).call(e,(function(e){r.addIfExist(e,r._options,o)})),t&&t.config&&t.config.codecType&&(o.codec_type=t.config.codecType),r.reportLog(Se,o,0),r._templog=null}})),this.player=t,this.player===undefined||null===this.player)throw new Error("player is ".concat(this.player));if(_&&_.line_app_id){(_.isTask||_.isTask===undefined)&&(this.task=new Me),this.eventQueue=[],this._instanceCreateTime=(new Date).getTime(),_.codec_type=_.codec_type||"h264",this._options=_,!this._options.maxQueueCount&&(this._options.maxQueueCount=5),this.line_app_id=T()(_.line_app_id,10)||0,this.line_user_id=(_.line_user_id||"").toString(),this.version=De,this.sdk_version=De,this.playerCoreVersion=_.playerCoreVersion||"",this.playerVersion=_.playerVersion||_.sdk_version,this.closeSeekLog=_.closeSeekLog||!1,this.start_time=1e3*(_.start_time||0),this.isFullAB=_.isFullAB||!1,this._initial_resolution="",this.__vtype=null,this.__dt="",this.isLowMp4=!1,this.resetLoggerParams();try{this.initializeTracker(),this.sendLocalLog(),this.bindEvt(),J("logger constructor:"+this.player.video)}catch(n){}}}return(0,W.Z)(e,[{key:"resetLoggerParams",value:function(){J("resetLoggerParams");var e=this.playlogs?this.playlogs.lc:0;this.playlogs={nt:te(),vt:0,rt:this.isEnded?te():0,at:0,pt:0,bu_acu_t:0,bc:0,br:0,fbrt:"",dbc:0,de_bu_acu_t:0,nbc:0,n_bu_acu_t:0,played:[{begin:0,end:-1}],dash_pst:0,dash_wst:0,dash_wrt:0,dash_ift:0,dash_cst:0,dash_spt:0,interruptCount:0,degrade:"none",lc:e},this.degradeLog={bu_acu_t:0,bc:0,watch_dur:0,hasSendEnd:!1},this.buffers={allBuffer:[],curBuffer:{buf_diff:0,buf_s_pos:0,buf_e_pos:0,buf_include:0}},this.netLog={downloadSpeed:0,requestCount:0,connectCost:0,totalSpeed:0,rqCount:0,status:0},this.merror={cdn:[],player:[],playCatch:[],expied:[]},this.exInfo={buffer:{},stall:[],states:[]},this._templog=null,this._isOnePlayReport=!1,this.startStep=0,this.bft=0,this.initializeLogDatas(),this.initializeUrlLog()}},{key:"initializeLogDatas",value:function(){this.startStep=0,this.inWaitingStart=0,this.lastVideoTime=0,this._endType="",this._retryCount=0,this.lastOperaTime=at,this.lastEventTime=at,this.seekLog={intervalId:0,lastSeekStartTime:ee(),seekBefore:0,sat:0,sc:0},this.resLogs={lastSwitchStartTime:at,switch_count:0,abr_switch_count:0,initial_resolution:"",final_resolution:"",ldst:0,ldet:0,df:"",lf:"",played:[],bc:0,bu_acu_t:0,sc:0,sat:0,buf:0,lbuf:0,lplayed:0,vs:0,vds:0,vps:0,vis:0,bitrate:0},this.apiLog={code:0,message:"",logid:"",api:"",auth:"",error:{}},this.errorLog={accu_errc:0,try_err_c:0,errt:0,errc:0,fir_errt:0,fir_errc:Oe.isSupportMP4?0:1005,last_errors:[]},this.pauseLog={pause_acu_t:0,isPausing:!1,pause_start:0},this.stall={intervalId:0,stall_count:0,first_buf_startt:0,first_buf_endt:0,stall_start:0,stall_end:0,stall_last_interval:0,stall_acc_time:0},this._playerCreatedTime=0,this.load_state=Ve,this.lv_method=6,this.isSeeking=!1,this.isEnded=!1,this.startStep=0,this.isAutoplay=this.player.config&&this.player.config.autoplay?1:0,this.abrInfo={abr_general_info:{},abr_event_info:{video_switch:[],video_stall:[],video_exit:{}},abr_play_info:{start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[]}},abr_user_info:{cancel_abr:0},abr_init_opts:this.player.config.autoBitrateOpts||{}},this._cacheFile=_t}},{key:"initSessionId",value:function(){var e="0";try{e=window.localStorage.getItem(it).web_id||"0"}catch(t){e="0"}this._sessionId=function(e){var t=(new Date).getTime();try{e=T()(e)}catch(_){e=0}return t+=e,window.performance&&"function"==typeof window.performance.now&&(t+=window.performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var _=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?_:3&_|8).toString(16)}))}(e),J("sessionId ".concat(this._sessionId))}},{key:"initializeTracker",value:function(){var e=this._options;if(window.__xgplayer_vod_log__)this.tracker=window.__xgplayer_vod_log__;else{this.tracker=window.__xgplayer_vod_log__=new ut("tracker");var t=e.channel||"cn",_={app_id:"cn"===(t="va"===t||"sg"===t?t:"cn")?nt:1300===nt?323254:nt,channel:t,log:!1,disable_sdk_monitor:!0};e.channelDomain&&(_.channel_domain=e.channelDomain),_.enable_ab_test=!!e.enableAbTest,this.tracker.init(_)}this.initSessionId();var r=navigator?navigator.hardwareConcurrency:0,n=navigator?navigator.deviceMemory:0;this.commonParams={play_type:0,source_type:"vid",sdk_version:this.sdk_version,pc:this.playerCoreVersion,pv:this.playerVersion,line_app_id:this.line_app_id,line_user_id:this.line_user_id,app_version:e.appVersion||"",platform:Oe.isPad?"pad":Oe.isMobile?"mobile":"pc",cpu_core:Number(r)||0,memory_size:Number(n)||0},J("commonParams ",this.commonParams);var i={evtParams:this.commonParams,disable_auto_pv:!0};J("Browser.name ",Oe.name),!Oe.name||Oe.isChrome||Oe.isSafari||(i.browser=Oe.name,Oe.appVersion&&(i.browser_version=Oe.appVersion)),this.line_user_id&&(i.user_unique_id=this.line_user_id,i.web_id=this.line_user_id),e.referrer&&(i.referrer=e.referrer,i.referrer_host=X(e.referrer)),this.tracker.config(i),this.tracker.start()}},{key:"resetDefiInfo",value:function(){var e=this.resLogs;e.played=[],e.bc=0,e.bu_acu_t=0,e.sc=0,e.sat=0}},{key:"sendLocalLog",value:function(){var e=this,t=pe.get();pe.remove(),M()(t).call(t,(function(t){var _;M()(_=a()(t)).call(_,(function(_){if(J("sendLocalLog",_,t[_]),e.player){e.player.emit("abLog",_,t[_]);var r=e._options.sendLocalCallback;r&&"function"==typeof r&&r(_,t[_])}e._track(_,t[_])}))}))}},{key:"_track",value:function(e,t){"function"==typeof this.tracker?this.tracker(e,t):this.tracker.event(e,t)}},{key:"bindEvt",value:function(){var e,t=this;this.listeners=[{evt:"play",handler:this.onPlay},{evt:"playing",handler:this.onPlaying},{evt:"pause",handler:this.onPause},{evt:"waiting",handler:this.onWaiting},{evt:"playInterfaceInfo",handler:this.onPlayInterfaceInfo},{evt:"DRM_ERROR",handler:this.onDashError},{evt:"ended",handler:this.onEnded},{evt:"loadeddata",handler:this.onLoadeddata},{evt:"loadstart",handler:this.onLoadStart},{evt:"canplay",handler:this.onCanplay},{evt:"dashStateChange",handler:this.onDashStateChange},{evt:"mp4StateChange",handler:this.onMp4StateChange},{evt:"autoplay was prevented",handler:this.onNotAutoPlay},{evt:"autoplay_was_prevented",handler:this.onNotAutoPlay},{evt:"seeking",handler:this.onSeeking},{evt:"seeked",handler:this.onSeeked},{evt:"complete",handler:this.onPlayerInited},{evt:"timeupdate",handler:this.onTimeUpdate},{evt:"bufferedChange",handler:this.onBufferedChange},{evt:"beforeDefinitionChange",handler:this.onBeforeDefinitionChange},{evt:"definitionChange",handler:this.onDefinitionChange},{evt:"definitionChangeSuccess",handler:this.onDefiChangeSuccess},{evt:"drmTypeChange",handler:this.onDrmTypeChange},{evt:"replayBtnClick",handler:this.onReplayBtnClick},{evt:"initialUrl",handler:this.initializeUrlLog},{evt:"ABR_CHANGE",handler:this.onAbrChange},{evt:"playCatch",handler:this.onPlayCatch},{evt:"MEDIA_EXPIRED",handler:this.onMediaExpied},{evt:"log",handler:this.onLog},{evt:"ABR_PRESTALL_END",handler:this.onAbrPrestallEnd},{evt:"progress_event",handler:this.onProgressEvent},{evt:"logger_next",handler:this.onNext},{evt:"playnext",handler:this.onNext},{evt:"nextEnded",handler:this.onNextEnded},{evt:"media_format_error",handler:this.onMediaFormatError},{evt:"xglog",handler:this.onXgLogWaiting}];var _=this.player.config.errorKey;J(">>>errorKey",_);var r={evt:"error",handler:this.onPlayerError};_&&(r.evt=_),this.listeners.push(r),f()(e=this.listeners).call(e,(function(e){t.player.on(e.evt,e.handler)})),this.bindUnload()}},{key:"addIfExist",value:function(e,t,_){if(Ce(t)){var r=t[e];!(r===undefined||null===r)&&(_[e]=r)}}},{key:"changeResolution",value:function(e,t,_,r,n){var i=this.resLogs;e=ce(e),t=ce(t),i.ldet=ee(),i.df=t,i.lf=e,i.final_resolution=t,i.switch_count++;var a=i.ldet-_,s={bc:i.bc,bu_acu_t:i.bu_acu_t,sc:i.sc,sat:i.sat,watch_dur:Y(i.played)};n&&(s.abrInfo=n),this.updateVds(),this.resetDefiInfo(),this._options.closeResolutionLog||this.onOneOperator({costTime:a,operaType:r,stateBefore:e,stateAfter:t},s,0)}},{key:"getLastInterval",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:this,_=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],r=t[e],n=ee(),i=r===at?at:n-r;return _&&(t[e]=n),i}},{key:"updateSeekPt",value:function(e){return this.getLastInterval("lastSeekStartTime",this.seekLog,e)}},{key:"_reportInvalidVV",value:function(e){return!!this._isInvaidVV()&&(this.onOneError({endState:e,errorType:9998,code:-1,url:this.player.currentSrc,headers:{}},0),this._isOnePlayReport=!0,!0)}},{key:"_isInvaidVV",value:function(){return 0===this.vt&&-1===this.curStatus}},{key:"bindUnload",value:function(){Oe.isPC?window.addEventListener("beforeunload",this.onUnload):(Oe.isMobile||Oe.isPad)&&window.addEventListener("pagehide",this.onUnload),document.addEventListener("visibilitychange",this.onVisibilitychange),this.player.once("destroy",this.onDestroy)}},{key:"clearTimers",value:function(){var e=this.seekLog,t=this.stall;e.intervalId&&window.clearTimeout(e.intervalId),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"sendDegradeLog",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"playCatch",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"none",_=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};J("sendDegradeLog",e,t,_);var r=this.degradeLog;if(!(r.hasSendEnd||"playCatch_end"===e&&"none"===t)){"playCatch_end"===e&&(r.hasSendEnd=!0);var n=this.bu_acu_t-r.bu_acu_t;this.onOneEvent({costTime:this.vd,vid:this.vid,end_type:e,cur_play_pos:this.player.currentTime,cdn_url:_.url},je({degrade:t,vt:this.vt,pt:this.pt,fvt:this.fvt,bc:this.bc-r.bc,bu_acu_t:n>st?0:n,watch_dur:this.watchDur-r.watch_dur},_),0)}}},{key:"setPerformance",value:function(){var e,t=this,_=this.player.performance||{};M()(e=a()(_)).call(e,(function(e){t.exInfo[e]=_[e]}))}},{key:"setStat",value:function(){var e,t=this,_=this.player.stat||{};_.performance&&delete _.performance,M()(e=a()(_)).call(e,(function(e){t.exInfo[e]=_[e]}))}},{key:"onOneOperator",value:function(e){var t,_=e.costTime,r=e.operaType,n=e.stateBefore,i=e.stateAfter,s=e.endType,o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},c=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2,l=this.getLastInterval("lastOperaTime"),u={local_time:(new Date).getTime(),v:this.vid,opera_type:r,state_before:n,state_after:i,cost_time:_,end_type:s||this.end_type,cdn_url:this.url,resolution:this.resolution,last_interval:l,bufs:le(this.buffers.allBuffer),cur_play_pos:this.cur_play_pos,retry_count:this.retry_count},d=this.player;d&&d.dashState&&(u.dash_state=this.player.dashState),f()(t=a()(o)).call(t,(function(e){u[e]=o[e]})),d&&d.config&&d.config.codecType&&(u.codec_type=d.config.codecType),this.addIfExist("drm_type",this._options,u),this.reportLog(Le,u,c)}},{key:"onOneError",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{errorType:0,code:0,url:"",headers:{},costTime:0,vid:"",message:"",preload_hit:0,preload_cached:0},t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;J("onOneError",e);var _=this.errorLog,r=this.apiLog,n=this.resLogs,i=this.player,a=this.playlogs,s=ie(e.headers||{});this.setPerformance(),this.setStat();var o=je(je(je({v:e.vid||this.vid,video_pos:this.cur_play_pos,local_time:(new Date).getTime(),cost_time:e&&e.costTime?e.costTime:0,errt:e.errorType,errc:e.code,es:this.es,cdn_url:e.url||this.url,bufs:le(this.buffers.allBuffer),resolution:n.final_resolution,last_errors:_.last_errors.join(";"),vsc:r.vsc,vsc_message:e.message||r.vsc_message,server_ip:s.x_response_sinfo||0,initial_url:this.initial_url,initial_host:this.initial_host},s),{},{cur_play_pos:this.cur_play_pos},this.buffers.curBuffer),{},{degrade:a.degrade,end_state:e.endState||He,preload_hit:e.preload_hit,preload_cached:e.preload_cached,ex:le(this.exInfo),video_ready_s:this.videoReadyState});i&&i.dashState&&(o.dash_state=i.dashState),i&&i.config&&i.config.codecType&&(o.codec_type=i.config.codecType),this.addIfExist("drm_type",this._options,o),this.reportLog(ke,o,t)}},{key:"reportLog",value:function(t,_,r){var n=this,i=this._options,a=this.player.ABTestTag;!_.player_sessionid&&(_.player_sessionid=this.sessionId),!_.web_url&&(_.web_url=window.location.href),_.user_agent=navigator.userAgent,_.dynamic_type=this.dynamicType;var s="Array"===se(i.absdkVersion)?i.absdkVersion.join(","):i.absdkVersion;_.absdkVersion=s||e.AB_SDK_VERSION,a!==undefined&&null!==a&&(_.abtest_tag=a);var o=this._options;if(_.codec_type&&(o.codec_type=_.codec_type),Ce(o)&&(f()(ct).call(ct,(function(e){n.addIfExist(e,o,_)})),_.vtype=this.vtype),1===r){var c={};return c[t]=_,void pe.set(c)}2!==r?(this.player&&this.player.emit("abLog",t,_),this._track(t,_)):this.addEventsQueue(t,_)}},{key:"addEventsQueue",value:function(e,t){this.eventQueue.push({event:e,params:t}),this.eventQueue.length>=this._options.maxQueueCount&&this.sendEventsQueue()}},{key:"sendEventsQueue",value:function(){for(;this.eventQueue.length>0;){var e=this.eventQueue.pop();this._track(e.event,e.params)}}},{key:"startWaitingStatus",value:function(e,t){this.onOneEvent({costTime:t,end_type:"waitstart"},{},2),this.appendStallInfo("start",e)}},{key:"triggerTask",value:function(){var e,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"start",_=arguments.length>1?arguments[1]:undefined;J("triggerTask>>",t);var r=re(_=_||this.player.src);!r&&I()(e=this.vtype).call(e,"MP4")>-1&&this.task&&this.task.trigger(_,t)}},{key:"appendStallInfo",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"start",t=arguments.length>1?arguments[1]:undefined,_=arguments.length>2?arguments[2]:undefined,r=this.exInfo.stall;if("start"===e){r.length>6&&S()(r).call(r,0,r.length-6);var n=this.buffers.curBuffer;r.push({start:t,end:-1,endType:"waitstart",cost:0,cur:this.cur_play_pos,buf_s:n.buf_s_pos,buf_e:n.buf_e_pos,buf_i:n.buf_include})}else if("end"===e){var i=r.length-1;if(i<0)return;r[i].end<0&&(r[i].end=t,r[i].endType=_,r[i].cost=t-r[i].start)}J("appendStallInfo",r)}},{key:"suspendWaitingStatus",value:function(e){var t,_,r,n=ee(),i=this.playlogs,a=this.resLogs,s=this.stall,o=this.inWaitingStart;if(!(o<=0||this.isSeeking||i.vt<=0)){if(J(O()(t=O()(_=O()(r="suspendWaitingStatus>>".concat(e,"|costTime:")).call(r,n-o," isSeeking:")).call(_,this.isSeeking," vt:")).call(t,i.vt)),this.appendStallInfo("end",n,e),n-o>200){var c=n-this.inWaitingStart;if(i.bc++,this.checkInBuffer(this.player.currentTime)?(i.de_bu_acu_t+=c,i.dbc++):(i.nbc++,i.n_bu_acu_t+=c),a.bc++,i.bu_acu_t+=c,a.bu_acu_t+=c,s.stall_end=n,s.stall_last_interval=s.stall_end-s.stall_start,s.stall_acc_time+=s.stall_last_interval,1===s.sc&&(s.first_buf_endt=n),this.player.abrInstance&&!this.isSeeking&&this.playlogs.vt){var l=this.player.abrInstance;this.abrInfo.abr_event_info.video_stall.push({local_time_ms:(new Date).getTime(),stall_duration:B()((c/1e3).toFixed(2)),buffer_length:l.bufferLength,internet_speed:l.downloadSpeed,now_bitrate:l.nowBitrate,play_speed:this.player.playbackRate,is_abr:l.isCurrentInAbr?1:0})}this.onOneEvent({costTime:c,end_type:e||"wait"},{},2)}this._endType="",this.load_state=ze,this.inWaitingStart=0,window.clearTimeout(s.intervalId),s.intervalId=null}}},{key:"suspendSeekStatus",value:function(e){var t,_,r,n,i=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];if(this.isSeeking){var a=this.seekLog,s=this.resLogs,o=this.player,c=ee()-a.lastSeekStartTime;J("suspendSeekStatus>>",O()(t=O()(_=O()(r=O()(n="".concat(e," currentTime:")).call(n,o.currentTime," costTime:")).call(r,c," sat:")).call(_,a.sat," resLogs.sat:")).call(t,s.sat)),a.intervalId&&window.clearTimeout(a.intervalId),a.intervalId=null,this.isSeeking=!1;var l=this._endType="seek",u=a.seekBefore,d=(o.currentTime||0).toString();a.sc++,a.sat+=c>ot?0:c,s.sc++,s.sat+=c>ot?0:c,this.updateSeekPt(!0),!this.closeSeekLog&&i&&this.onOneOperator({costTime:c,operaType:l,stateBefore:u,stateAfter:d,endType:e})}}},{key:"setPt",value:function(){var e,t=this.playlogs;(this.startStep=1,!t.pt&&this.player.currentTime&&(this.isSeeking=!0),t.pt)||(t.pt=te(),J("setPt",O()(e="init pt :".concat(t.pt,", document.visibilityState:")).call(e,document.visibilityState)))}},{key:"setVt",value:function(){var e=this.playlogs;if(1===this.startStep){var t;if(!e.vt)e.vt=te(),J("setVt: first frame inited",O()(t="vt-pt:".concat(e.vt-e.pt," vt-nt:")).call(t,e.vt-e.nt));this.startStep=2}}},{key:"setBr",value:function(e){var t=this.playlogs;t.vt>0&&(0===t.br&&(t.fbrt=e||""),t.br++)}},{key:"url",get:function(){var e=this.player;return e&&e.config?e.config.url:""}},{key:"vid",get:function(){var e=this.player;return e&&e.config?e.config.vid:""}},{key:"bc",get:function(){return this.playlogs.bc}},{key:"bu_acu_t",get:function(){return this.playlogs.bu_acu_t}},{key:"pt",get:function(){return this.playlogs.pt||te()}},{key:"vt",get:function(){var e=this.playlogs,t=e.vt;return e.pt>0?t:0}},{key:"fvt",get:function(){var e=this.playlogs,t=e.vt,_=e.pt;return t>0&&_>0?T()(t-_,10):0}},{key:"nvt",get:function(){var e=this.playlogs,t=e.vt,_=e.nt;return t>0&&_>0?T()(t-_,10):0}},{key:"dash_pst",get:function(){return this.playlogs.dash_pst}},{key:"dash_wst",get:function(){return this.playlogs.dash_wst}},{key:"dash_wrt",get:function(){return this.playlogs.dash_wrt}},{key:"dash_ift",get:function(){return this.playlogs.dash_ift}},{key:"dash_cst",get:function(){return this.playlogs.dash_cst}},{key:"dash_spt",get:function(){return this.playlogs.dash_spt}},{key:"vd",get:function(){var e=this.player;return e.duration&&"number"==typeof e.duration&&e.duration>0?T()(1e3*e.duration,10):e.config.duration&&"number"==typeof e.config.duration?T()(1e3*e.config.duration,10):0}},{key:"cur_play_pos",get:function(){return T()(1e3*this.player.currentTime,10)}},{key:"volume",get:function(){return this.player.volume}},{key:"buffer_time",get:function(){var e=0;try{var t=this.player.getBufferedRange();e=t[1]-t[0]}catch(_){e=0}return e}},{key:"player_created_t",get:function(){return this._playerCreatedTime}},{key:"playbackRate",get:function(){return this.player.playbackRate}},{key:"mute",get:function(){return this.player.muted?0:1}},{key:"videoWidth",get:function(){var e=this.player;return e&&e.video?e.video.videoWidth:0}},{key:"videoHeight",get:function(){var e=this.player;return e&&e.video?e.video.videoHeight:0}},{key:"preload",get:function(){var e=this.player;return!(!e||!e.video)&&e.video.preload}},{key:"initial_url",get:function(){var e=this.player.currentSrc;return I()(e).call(e,"blob:")>-1&&this.urlLog.initial_url?this.urlLog.initial_url:re(e)?"":e}},{key:"initial_host",get:function(){var e=this.player.currentSrc;return I()(e).call(e,"blob:")>-1&&this.urlLog.initial_host?this.urlLog.initial_host:X(re(e)?"":e)}},{key:"curHeaders",get:function(){var e=this.player,t=this.task;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?ie(e.__dash__.curReqVideoSegInfo.headers||{}):t?t.headers:{}}},{key:"curStatus",get:function(){var e=this.task,t=this.vtype,_=this.netLog;return I()(t).call(t,"MP4")>-1?e?e.status:0:_.status}},{key:"play_type",get:function(){return 0}},{key:"resolution",get:function(){var e=this.player.curDefinition;return e?e.definition+"":this.resLogs.df}},{key:"sessionId",get:function(){return this._sessionId}},{key:"finish",get:function(){return this.isEnded?1:0}},{key:"end_type",get:function(){return this._endType}},{key:"mp4Speed",get:function(){if(!this.player||!this.player.plugins)return 0;var e=this.player.plugins.mp4encryptplayer;return e?e.speed:0}},{key:"mp4RealSpeed",get:function(){if(!this.player||!this.player.plugins)return 0;var e=this.player.plugins.mp4encryptplayer;return e?e.realTimeSpeed:0}},{key:"mp4MseOpLength",get:function(){if(!this.player||!this.player.plugins)return-1;var e=this.player.plugins.mp4encryptplayer;return e?e.opQueueLen||0:-1}},{key:"mp4LoadSegmentTimeRange",get:function(){if(!this.player||!this.player.plugins)return"";var e=this.player.plugins.mp4encryptplayer;return e?e.loadSegmentTimeRange.join(","):""}},{key:"mp4FFInfo",get:function(){if(!this.player||!this.player.plugins)return{};var e=this.player.plugins.mp4encryptplayer;return e&&e.firstFrameTime||{}}},{key:"preLoadData",get:function(){if(!this.player||!this.player.plugins)return[];var e=this.player.plugins.mp4encryptplayer;if(e&&e.preLoadData)return{hit:1,duration:e.preLoadData.duration,length:e.preLoadData.byteLength};var t=this.player.stat||{};if(t.preLoadData){var _=t.preLoadData.length;return{hit:_>0,length:_}}return{hit:0,duration:0,length:0}}},{key:"preloadState",get:function(){if(!this.player||!this.player.plugins)return 0;if("undefined"!=typeof this.player.preloadState)return this.player.preloadState||0;var e=this.player.plugins.mp4encryptplayer;return e&&e.preloadState?e.preloadState:0}},{key:"curBitrate",get:function(){var e=this.player,t=e.config,_=e.curDefinition;return _&&_.bitrate?_.bitrate:t.defaultBitrate?t.defaultBitrate:0}},{key:"videoReadyState",get:function(){var e=this.player;return e&&e.video?e.video.readyState:-1}},{key:"videoSeeking",get:function(){var e=this.player;return e&&e.video&&e.video.seeking?1:0}},{key:"videoPaused",get:function(){var e=this.player;return e&&e.video&&e.video.paused?1:0}},{key:"retry_count",get:function(){return this._retryCount}},{key:"switchResolutionCount",get:function(){return this.resLogs.switch_count}},{key:"isError",get:function(){return oe(this.player.root,"xgpplayer-is-error")}},{key:"isPlaying",get:function(){return oe(this.player.root,"xgplayer-playing")}},{key:"isStop",get:function(){return oe(this.player.root,"xgplayer-ended")||oe(this.player.root,"xgplayer-nostart")}},{key:"isPause",get:function(){return oe(this.player.root,"xgplayer-pause")}},{key:"isLoading",get:function(){return oe(this.player.root,"xgplayer-isloading")}},{key:"es",get:function(){return this.isPlaying?"playing":"beforePlay"}},{key:"lt",get:function(){var e=0;return 0===this.vt&&(J("lt init",this.playlogs.lt),e=te()),e}},{key:"lpt",get:function(){return this.lt?this.lt-this.pt:0}},{key:"playback_state",get:function(){return this.isError?xe:this.isStop?Ue:this.isPause?Ke:this.isLoading?$e:We}},{key:"is_start_play_automatically",get:function(){return this.isAutoplay+""}},{key:"watchDur",get:function(){var e=this.player,t=this.playlogs;return e.cumulateTime?e.cumulateTime:Y(t.played)}},{key:"vtype",get:function(){return this.__vtype?this.__vtype:this.player.dash?"DASH":"DASH"===this._options.vtype?"MP4":this._options.vtype||"MP4"},set:function(e){this.__vtype=e}},{key:"watingCost",get:function(){if(this.inWaitingStart>0){var e=ee()-this.inWaitingStart;return e>ot?0:e}return 0}},{key:"videoNetworkState",get:function(){var e=this.player;return e&&e.video?e.video.networkState:-1}},{key:"eagleid",get:function(){var e=this.player;return e&&e.__dash__&&e.__dash__.curReqVideoSegInfo?(e.__dash__.curReqVideoSegInfo.headers||{}).eagleid:""}},{key:"initial_type",get:function(){var e=this.player.config||{};return e&&e.vodLogOpts&&e.vodLogOpts.currentDashType!==undefined?T()(e.vodLogOpts.currentDashType,10):-1}},{key:"dynamicType",get:function(){var e=this.player;return this.__dt?this.__dt:e&&e.__dash__&&e.__dash__.dash&&e.__dash__.dash.mpd?(this.__dt=e.__dash__.dash.mpd.dashType,this.__dt):""}},{key:"updateCurBuffer",value:function(){var e=this.player,t=e.buffered,_=e.currentTime,r={buf_s_pos:0,buf_e_pos:0,buf_include:0},n=[];if(!t||t.length<1)return r;for(var i=-1,a=-1,s=t.length-1;s>-1;s--){var o=T()(1e3*t.start(s),10),c=T()(1e3*t.end(s),10);n.push({start:o,end:c}),_>o&&_<c?(r.buf_include=1,r.buf_s_pos=o,r.buf_e_pos=c):_<o&&(i<0||o-_<i)?(i=o-_,a=s):_>c&&(i<0||_-c<i)&&(i=_-c,a=s)}1!==r.buf_include&&a>-1&&(r.buf_s_pos=T()(1e3*t.start(a),10),r.buf_e_pos=T()(1e3*t.end(a),10)),r.buf_diff=T()(1e3*t.end(t.length-1)-1e3*_),this.buffers.allBuffer=n,this.buffers.curBuffer=r}},{key:"checkInBuffer",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,_=this.player.buffered;if(!_)return!1;e=T()(1e3*e,10);for(var r=0;r<_.length;r++){var n=T()(1e3*_.start(r),10)+t,i=T()(1e3*_.end(r),10)+t;if(e>n&&e<i)return!0}return!1}},{key:"updateVideoSize",value:function(){var e,t=this._options,_=this.player,r=this.resLogs,n=0,i=0;if(_.__dash__&&_.__dash__.dash&&_.__dash__.dash.mpd.mediaList){var a=_.__dash__.dash.mpd.mediaList.video,s=a[a.selectedIdx];J("updateVideoSize\u300b\u300bvideoItem",s),i=s?s.bitrate||s.bandwidth:0,n=s?s.size:0}else{var o=this.player.curDefinition;o?(i=o.bitrate||_.config.bitrate||0,n=T()(o.bitrate*_.duration/8,10)):(n=t.videoSize||_.config.videoSize||0,i=t.bitrate||_.config.bitrate||0)}J("updateVideoSize",O()(e="bitrate:".concat(i,", vs:")).call(e,n)),n&&(r.vs=n,r.vis=T()(n/_.duration,10),r.bitrate=i||r.vis)}},{key:"updateVds",value:function(){var e,t,_,r,n,i,a=this.resLogs,s=this.playlogs,o=this.player;if(0!==a.vis){for(var c=T()(Y(s.played)/1e3,10),l=o.buffered,u=0,d=0;d<l.length;d++)u+=T()(l.end(d)-l.start(d),10);J("updateVds",O()(e=O()(t=O()(_=O()(r=O()(n=O()(i="pdur:".concat(c," bdur:")).call(i,u," \n         lbuf:")).call(n,a.lbuf," lplayed:")).call(r,a.lplayed," bitrate: ")).call(_,a.bitrate," vis:")).call(t,a.vis," vs:")).call(e,a.vs)),a.vps+=T()((c-a.lplayed)*a.vis,10),a.vds+=T()((u-a.lbuf)*a.vis,10),a.lplayed=c,a.lbuf=u}else J("updateVds","vis:".concat(a.vis))}}],[{key:"TEA_ID",get:function(){return nt},set:function(e){it="__tea_cache_tokens_".concat(nt=e)}},{key:"AB_SDK_VERSION",get:function(){return lt},set:function(e){lt="Array"===se(e)?e.join(","):e}},{key:"Collector",set:function(e){ut=e}}]),e}();dt.TEA_ID=1300,dt.Collector=n.P;var ht=function(e){if(e&&e.player){var t=e.player.config.vodLogOpts||{};e.player.vodLogger=new dt(e.player,t),e.player.plugins.xgVodLogger=e.player.vodLogger}else this.vodLogger=new dt(this,this.config.vodLogOpts||{})};ht.pluginName="__xgVodLogger",ht.playerConfig={},ht.Collector=n.P,ht.setABSdkVersion=function(e){dt.AB_SDK_VERSION=e}},44931:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{P:function(){return Collector$1}});var _babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(64343),_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(26217),_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1__),_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(38574),_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_corejs3_core_js_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(44540),_babel_runtime_corejs3_core_js_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3__),_babel_runtime_corejs3_core_js_symbol__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(17419),_babel_runtime_corejs3_core_js_symbol__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_symbol__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(90241),_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_5__),_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(54882),_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6__),_babel_runtime_corejs3_core_js_instance_splice__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(78650),_babel_runtime_corejs3_core_js_instance_splice__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_splice__WEBPACK_IMPORTED_MODULE_7__),_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(90400),_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8__),_babel_runtime_corejs3_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(92334),_babel_runtime_corejs3_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_9__),_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(52708),_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10__),_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(24514),_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11__),_babel_runtime_corejs3_core_js_parse_int__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(36210),_babel_runtime_corejs3_core_js_parse_int__WEBPACK_IMPORTED_MODULE_12___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_parse_int__WEBPACK_IMPORTED_MODULE_12__),_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(11235),_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13__),_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(18556),_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(97448),_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15__),_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(30562),_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_corejs3_core_js_parse_float__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(25239),_babel_runtime_corejs3_core_js_parse_float__WEBPACK_IMPORTED_MODULE_17___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_parse_float__WEBPACK_IMPORTED_MODULE_17__),_babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(16755),_babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(12544),_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19__),_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(63862),_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20__),_babel_runtime_corejs3_core_js_instance_reverse__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(55321),_babel_runtime_corejs3_core_js_instance_reverse__WEBPACK_IMPORTED_MODULE_21___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_reverse__WEBPACK_IMPORTED_MODULE_21__),_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(93326),_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22__),_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(23947),_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23__),_babel_runtime_corejs3_core_js_instance_reduce__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(4650),_babel_runtime_corejs3_core_js_instance_reduce__WEBPACK_IMPORTED_MODULE_24___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_reduce__WEBPACK_IMPORTED_MODULE_24__),_babel_runtime_corejs3_core_js_instance_some__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(29493),_babel_runtime_corejs3_core_js_instance_some__WEBPACK_IMPORTED_MODULE_25___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_some__WEBPACK_IMPORTED_MODULE_25__),_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(10396),_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26__),_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(10441),_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default=__webpack_require__.n(_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27__),_context6,_assign=function(){return(_assign=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()||function(e){for(var t,_=1,r=arguments.length;_<r;_++)for(var n in t=arguments[_])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __rest(e,t){var _={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t).call(t,r)<0&&(_[r]=e[r]);if(null!=e&&"function"==typeof _babel_runtime_corejs3_core_js_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default()){var n=0;for(r=_babel_runtime_corejs3_core_js_object_get_own_property_symbols__WEBPACK_IMPORTED_MODULE_3___default()(e);n<r.length;n++)_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t).call(t,r[n])<0&&(_[r[n]]=e[r[n]])}return _}function __values(e){var t="function"==typeof _babel_runtime_corejs3_core_js_symbol__WEBPACK_IMPORTED_MODULE_4___default()&&_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_5___default()(e),_=0;return t?t.call(e):{next:function(){return e&&_>=e.length&&(e=void 0),{value:e&&e[_++],done:!e}}}}function __read(e,t){var _="function"==typeof _babel_runtime_corejs3_core_js_symbol__WEBPACK_IMPORTED_MODULE_4___default()&&_babel_runtime_corejs3_core_js_get_iterator_method__WEBPACK_IMPORTED_MODULE_5___default()(e);if(!_)return e;var r,n,i=_.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){n={error:e}}finally{try{r&&!r.done&&(_=i.return)&&_.call(i)}finally{if(n)throw n.error}}return a}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(e).call(e,__read(arguments[t]));return e}var Hook=function(){function e(){this._hooks={},this._cache=[],this._hooksCache={}}return e.prototype.on=function(e,t){e&&t&&"function"==typeof t&&(this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t))},e.prototype.once=function(e,t){var _=this;e&&t&&"function"==typeof t&&this.on(e,(function r(n){t(n),_.off(e,r)}))},e.prototype.off=function(e,t){if(e&&this._hooks[e]&&this._hooks[e].length)if(t){var _,r,n=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_=this._hooks[e]).call(_,t);-1!==n&&_babel_runtime_corejs3_core_js_instance_splice__WEBPACK_IMPORTED_MODULE_7___default()(r=this._hooks[e]).call(r,n,1)}else this._hooks[e]=[]},e.prototype.emit=function(e,t,_){if(_){var r;if(!e)return;-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r=this._cache).call(r,_)?this._emit(e,t):(this._hooksCache.hasOwnProperty(_)||(this._hooksCache[_]={}),this._hooksCache[_].hasOwnProperty(e)||(this._hooksCache[_][e]=[]),this._hooksCache[_][e].push(t))}else this._emit(e,t)},e.prototype._emit=function(e,t){var _;e&&this._hooks[e]&&this._hooks[e].length&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=__spread(this._hooks[e])).call(_,(function(e){try{e(t)}catch(e){}}))},e.prototype.set=function(e){var t;e&&-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t=this._cache).call(t,e)&&this._cache.push(e)},e}(),isObject=function(e){return null!=e&&"[object Object]"==Object.prototype.toString.call(e)},isNumber=function(e){return"number"==typeof e&&!isNaN(e)},isString=function(e){return"string"==typeof e},isArray=function(e){return _babel_runtime_corejs3_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_9___default()(e)},getIndex=(lastEventId=+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()+Number(_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(_context6=""+Math.random()).call(_context6,2,8)),function(){return lastEventId+=1}),lastEventId,decrypto=function(e,t,_){if("string"==typeof e&&"number"==typeof t&&"number"==typeof _){var r,n=[];_=_<=25?_:_%25;var i=String.fromCharCode(_+97);r=e.split(i);for(var a=0;a<r.length;a++){var s=_babel_runtime_corejs3_core_js_parse_int__WEBPACK_IMPORTED_MODULE_12___default()(r[a],_);s=1*s^t;var o=String.fromCharCode(s);n.push(o)}return n.join("")}},decodeUrl=function(e){return decrypto(e,64,25)},beforePageUnload=function(e){navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?window.addEventListener("pagehide",e,!1):window.addEventListener("beforeunload",e,!1)},getIframeUrl=function(){try{return JSON.parse(atob(window.name))||void 0}catch(e){return}},loadScript=function(e,t,_){var r=document.createElement("script");r.src=e,r.onerror=function(){_(e)},r.onload=function(){t()},document.getElementsByTagName("head")[0].appendChild(r)},isSupVisChange=function(){var e,t=0;return _babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e=["hidden","msHidden","webkitHidden"]).call(e,(function(e){void 0!==document[e]&&(t=1)})),t},selfAdjust=function(e,t){void 0===e&&(e=function(){}),void 0===t&&(t=1e3);var _,r=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()+t;return _=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function n(){var i=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-r;e(),r+=t,_=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()(n,Math.max(0,t-i))}),t),function(){window.clearTimeout(_)}},stringify=function(e,t,_){var r;void 0===t&&(t=""),void 0===_&&(_={});var n=e;"/"===(n=n.split("#")[0].split("?")[0])[e.length-1]&&(n=n.substr(0,e.length-1)),n="/"===t[0]?n.replace(/(https?:\/\/[\w-]+(\.[\w-]+){1,}(:[0-9]{1,5})?)(\/[.\w-]+)*\/?$/,"$1"+t):n.replace(/(https?:\/\/[\w-]+(\.[\w-]+){1,}(:[0-9]{1,5})?(\/[.\w-]+)*?)(\/[.\w-]+)?\/?$/,"$1/"+t);var i=_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default()(r=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(_)).call(r,(function(e){return e+"="+_[e]})).join("&");return i.length>0?n+"?"+i:n},parseURL=function(e){var t=document.createElement("a");return t.href=e,t},parseUrlQuery=function(e){var t={};try{var _,r=parseURL(e).search;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=(r=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(r).call(r,1)).split("&")).call(_,(function(e){var _,r,n=e.split("=");n.length&&(_=n[0],r=n[1]);try{t[_]=decodeURIComponent(void 0===r?"":r)}catch(e){t[_]=r}}))}catch(e){}return t},hashCode=function(e){for(var t=0,_=0,r=(e+="").length,n=0;n<r;n++)((t=31*t+e.charCodeAt(_++))>0x7fffffffffff||t<-0x800000000000)&&(t&=0xffffffffffff);return t<0&&(t+=0x7ffffffffffff),t},commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof __webpack_require__.g?__webpack_require__.g:"undefined"!=typeof self?self:{};function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var js_cookie=createCommonjsModule((function(e,t){var _;_=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var _=arguments[e];for(var r in _)t[r]=_[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function _(r){function n(){}function i(t,_,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},n.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(_);/^[\{\[]/.test(a)&&(_=a)}catch(e){}_=r.write?r.write(_,t):encodeURIComponent(String(_)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var o in i)i[o]&&(s+="; "+o,!0!==i[o]&&(s+="="+i[o].split(";")[0]));return document.cookie=t+"="+_+s}}function a(e,_){if("undefined"!=typeof document){for(var n={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),o=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(s).call(s,1).join("=");_||'"'!==o.charAt(0)||(o=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(o).call(o,1,-1));try{var c=t(s[0]);if(o=(r.read||r)(o,c)||t(o),_)try{o=JSON.parse(o)}catch(e){}if(n[c]=o,e===c)break}catch(e){}}return e?n[e]:n}}return n.set=i,n.get=function(e){return a(e,!1)},n.getJSON=function(e){return a(e,!0)},n.remove=function(t,_){i(t,"",e(_,{expires:-1}))},n.defaults={},n.withConverter=_,n}((function(){}))},e.exports=_()})),Memory=function(){function e(){this.cache={}}return e.prototype.setItem=function(e,t){this.cache[e]=t},e.prototype.getItem=function(e){return this.cache[e]},e.prototype.removeItem=function(e){this.cache[e]=void 0},e.prototype.getCookie=function(e){this.getItem(e)},e.prototype.setCookie=function(e,t){this.setItem(e,t)},e}();function isSupportLS(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}function isSupportSession(){try{return sessionStorage.setItem("_ranger-test-key","hi"),sessionStorage.getItem("_ranger-test-key"),sessionStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}var local={getItem:function(e){try{var t=localStorage.getItem(e),_=t;try{t&&"string"==typeof t&&(_=JSON.parse(t))}catch(e){}return _||{}}catch(e){}return{}},setItem:function(e,t){try{var _="string"==typeof t?t:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(t);localStorage.setItem(e,_)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){try{return js_cookie.get(e,{domain:t||document.domain})}catch(e){return""}},setCookie:function(e,t,_,r){try{var n=r||document.domain,i=+new Date+_;js_cookie.set(e,t,{expires:new Date(i),path:"/",domain:n})}catch(e){}},isSupportLS:isSupportLS()},session={getItem:function(e){try{var t=sessionStorage.getItem(e),_=t;try{t&&"string"==typeof t&&(_=JSON.parse(t))}catch(e){}return _||{}}catch(e){}return{}},setItem:function(e,t){try{var _="string"==typeof t?t:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(t);sessionStorage.setItem(e,_)}catch(e){}},removeItem:function(e){try{sessionStorage.removeItem(e)}catch(e){}},getCookie:function(e){this.getItem(e)},setCookie:function(e,t){this.setItem(e,t)},isSupportSession:isSupportSession()},Storage=function(){function e(e,t){this._storage=t&&"session"===t?session:!e&&local.isSupportLS?local:new Memory}return e.prototype.getItem=function(e){return this._storage.getItem(e)},e.prototype.setItem=function(e,t){this._storage.setItem(e,t)},e.prototype.getCookie=function(e,t){return this._storage.getCookie(e,t)},e.prototype.setCookie=function(e,t,_,r){this._storage.setCookie(e,t,_,r)},e.prototype.removeItem=function(e){this._storage.removeItem(e)},e}(),UTM=function(e,t,_,r){var n=new Storage(!1),i=new Storage(!1,"session"),a=e?"_tea_utm_cache_"+e:"_tea_utm_cache",s=e?"_$utm_from_url_"+e:"_$utm_from_url",o={},c=["tr_shareuser","tr_admaster","tr_param1","tr_param2","tr_param3","tr_param4","$utm_from_url"],l={ad_id:Number(t.ad_id)||void 0,campaign_id:Number(t.campaign_id)||void 0,creative_id:Number(t.creative_id)||void 0,utm_source:t.utm_source,utm_medium:t.utm_medium,utm_campaign:t.utm_campaign,utm_term:t.utm_term,utm_content:t.utm_content,tr_shareuser:t.tr_shareuser,tr_admaster:t.tr_admaster,tr_param1:t.tr_param1,tr_param2:t.tr_param2,tr_param3:t.tr_param3,tr_param4:t.tr_param4};try{var u=!1;for(var d in l)l[d]&&(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(c).call(c,d)?(o.hasOwnProperty("tracer_data")||(o.tracer_data={}),o.tracer_data[d]=l[d]):o[d]=l[d],u=!0);if(u)i.setItem(s,"1"),n.setCookie(a,_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(o),r,_);else{var h=n.getCookie(a,_);h&&(o=JSON.parse(h))}i.getItem(s)&&(o.hasOwnProperty("tracer_data")||(o.tracer_data={}),o.tracer_data.$utm_from_url=1)}catch(e){return l}return o},Client=function(){function e(e,t,_){this.appid=e,this.domain=t,this.userAgent=window.navigator.userAgent,this.appVersion=window.navigator.appVersion,this.cookie_expire=_}return e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,_=document.referrer,r=_?parseURL(_).hostname:"",n=parseUrlQuery(window.location.href),i=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=UTM(this.appid,n,this.domain,this.cookie_expire);var a=this.browser(),s=this.os();return{browser:a.browser,browser_version:a.browser_version,platform:i,os_name:s.os_name,os_version:s.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(s.os_name),language:t,referrer:_,referrer_host:r,utm:this.utm,latest_data:this.last(_,r)}},e.prototype.last=function(e,t){var _="",r="",n="",i=location.hostname,a=!1;if(e&&t&&i!==t){_=e,r=t,a=!0;var s=parseUrlQuery(e);s.keyword&&(n=s.keyword)}return{$latest_referrer:_,$latest_referrer_host:r,$latest_search_keyword:n,isLast:a}},e.prototype.browser=function(){var e,t,_="",r=""+_babel_runtime_corejs3_core_js_parse_float__WEBPACK_IMPORTED_MODULE_17___default()(this.appVersion),n=this.userAgent;return-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Edge")||-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Edg")?(_="Microsoft Edge",-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Edge")?(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Edge"),r=n.substring(e+5)):(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Edg"),r=n.substring(e+4))):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MSIE"))?(_="Microsoft Internet Explorer",r=n.substring(e+5)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Lark"))?(_="Lark",r=n.substring(e+5,e+11)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MetaSr"))?(_="sougoubrowser",r=n.substring(e+7,e+10)):-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MQQBrowser")||-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"QQBrowser")?(_="qqbrowser",-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MQQBrowser")?(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MQQBrowser"),r=n.substring(e+11,e+15)):-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"QQBrowser")&&(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"QQBrowser"),r=n.substring(e+10,e+17))):-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Chrome")?-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MicroMessenger"))?(_="weixin",r=n.substring(e+15,e+20)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"360"))?(_="360browser",r=n.substring(_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Chrome")+7)):-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"baidubrowser")||-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"BIDUBrowser")?(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"baidubrowser")?(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"baidubrowser"),r=n.substring(e+13,e+16)):-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"BIDUBrowser")&&(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"BIDUBrowser"),r=n.substring(e+12,e+15)),_="baidubrowser"):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"xiaomi"))?-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"openlanguagexiaomi")?(_="openlanguage xiaomi",r=n.substring(e+7,e+13)):(_="xiaomi",r=n.substring(e-7,e-1)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"TTWebView"))?(_="TTWebView",r=n.substring(e+10,e+23)):(-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Chrome"))||-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Chrome")))&&(_="Chrome",r=n.substring(e+7)):-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Safari")?-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"QQ"))?(_="qqbrowser",r=n.substring(e+10,e+16)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Safari"))&&(_="Safari",r=n.substring(e+7),-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Version"))&&(r=n.substring(e+8))):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"Firefox"))?(_="Firefox",r=n.substring(e+8)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"MicroMessenger"))?(_="weixin",r=n.substring(e+15,e+20)):-1!==(e=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n).call(n,"QQ"))&&(_="qqbrowser",r=n.substring(e+3,e+8)),-1!==(t=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r).call(r,";"))&&(r=r.substring(0,t)),-1!==(t=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r).call(r," "))&&(r=r.substring(0,t)),-1!==(t=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r).call(r,")"))&&(r=r.substring(0,t)),{browser:_,browser_version:r}},e.prototype.os=function(){for(var e="",t="",_=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],r=0;r<_.length;r++){var n=_[r];if(n.r.test(this.userAgent)){"Mac OS X"===(e=n.s)&&this.isNewIpad()&&(e="iOS");break}}var i,a,s=function(e,t){var _=e.exec(t);return _&&_[1]?_[1]:""},o=function(e,t){var _=RegExp("(?:^|[^A-Z0-9-_]|[^A-Z0-9-]_|sprd-)(?:"+e+")","i").exec(t);return _?_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(_).call(_,1)[0]:""};switch(/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows"),e){case"Mac OS X":t=o("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":(a=s(/Android ([\.\_\d]+)/,i=this.userAgent))||(a=s(/Android\/([\.\_\d]+)/,i)),t=a,e="android";break;case"iOS":t=this.isNewIpad()?o("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=function(e){var t="";try{var _;if("android"===e)_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=navigator.userAgent.split(";")).call(_,(function(e){_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,"Build/")>-1&&(t=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(e).call(e,0,_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,"Build/")))}));else if("ios"===e||"mac"===e||"windows"===e)if(this.isNewIpad())t="iPad";else{var r=navigator.userAgent.replace("Mozilla/5.0 (",""),n=_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r).call(r,";");t=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(r).call(r,0,n)}}catch(e){return _babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18___default()(t).call(t)}return _babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18___default()(t).call(t)},e.prototype.isNewIpad=function(){return void 0!==this.userAgent&&"MacIntel"===navigator.platform&&"number"==typeof navigator.maxTouchPoints&&navigator.maxTouchPoints>1},e}(),LOG;LOG={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"};var LOG_URL=LOG,SDK_VERSION="5.0.23_3",VISUAL_EDITOR_RANGERS="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-editor-rangers.js",VISUAL_AB_CORE="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-core.js",VISUAL_AB_LOADER="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-loader.js",HOT_PIC_URL="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/heatmap-core",VISUAL_URL_INSPECTOR="https://lf3-data.volccdn.com/obj/data-static/log-sdk/collect/tester-event-inspector",undef=void 0,date=new Date,timeZoneMin=date.getTimezoneOffset(),timezone=_babel_runtime_corejs3_core_js_parse_int__WEBPACK_IMPORTED_MODULE_12___default()(""+-timeZoneMin/60,10),tz_offset=60*timeZoneMin,WEBID_URL="/webid",TOB_URL="/tobid",REPORT_URL="/list",COOKIE_EXPIRE=6048e5,ConfigManager=function(){function e(e){this.is_first_time=!0,this.configPersist=!1,this.initConfig=e;var t=new Client(e.app_id,e.cookie_domain||"",e.cookie_expire||COOKIE_EXPIRE).init(),_="__tea_cache_first_"+e.app_id;this.configKey="__tea_cache_config_"+e.app_id,this.sessionStorage=new Storage(!1,"session"),this.localStorage=new Storage(!1,"local"),e.configPersist&&(this.configPersist=!0,this.storage=1===e.configPersist?this.sessionStorage:this.localStorage),this.localStorage.getItem(_)?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(_,"1")),this.envInfo={user:{user_unique_id:undef,user_type:undef,user_id:undef,user_is_auth:undef,user_is_login:undef,device_id:undef,web_id:undef,ip_addr_id:undef},header:{app_id:undef,app_name:undef,app_install_id:undef,install_id:undef,app_package:undef,app_channel:undef,app_version:undef,os_name:t.os_name,os_version:t.os_version,device_model:t.device_model,ab_client:undef,traffic_type:undef,client_ip:undef,device_brand:undef,os_api:undef,access:undef,language:t.language,region:undef,app_language:undef,app_region:undef,ab_version:undef,creative_id:t.utm.creative_id,ad_id:t.utm.ad_id,campaign_id:t.utm.campaign_id,log_type:undef,rnd:undef,platform:t.platform,sdk_version:SDK_VERSION,sdk_lib:"js",province:undef,city:undef,timezone:timezone,tz_offset:tz_offset,tz_name:undef,sim_region:undef,carrier:undef,resolution:t.screen_width+"x"+t.screen_height,browser:t.browser,browser_version:t.browser_version,referrer:t.referrer,referrer_host:t.referrer_host,width:t.screen_width,height:t.screen_height,screen_width:t.screen_width,screen_height:t.screen_height,utm_term:t.utm.utm_term,utm_content:t.utm.utm_content,utm_source:t.utm.utm_source,utm_medium:t.utm.utm_medium,utm_campaign:t.utm.utm_campaign,tracer_data:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(t.utm.tracer_data),custom:{},wechat_unionid:undef,wechat_openid:undef}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.initDomain()}return e.prototype.initDomain=function(){var e=this.initConfig.channel_domain;if(e)this.domain=e;else{var t=this.initConfig.channel;this.domain=decodeUrl(LOG_URL[t])}},e.prototype.setDomain=function(e){this.domain=e},e.prototype.getDomain=function(){return this.domain},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||REPORT_URL;break;case"webid":t=WEBID_URL;break;case"tobid":t=TOB_URL}var _="";return this.initConfig.caller&&(_="?sdk_version="+SDK_VERSION+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+this.getDomain()+t+_},e.prototype.set=function(e){var t,_=this;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e)).call(t,(function(t){if(void 0!==e[t]&&null!==e[t]||_.delete(t),"evtParams"===t)_.evtParams=_assign({},_.evtParams||{},e.evtParams||{});else if("_staging_flag"===t)_.evtParams=_assign({},_.evtParams||{},{_staging_flag:e._staging_flag});else if("reportErrorCallback"===t&&"function"==typeof e[t])_.reportErrorCallback=e[t];else{var r,n,i,a="",s="";if(_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t).call(t,".")>-1){var o=t.split(".");a=o[0],s=o[1]}a?"user"===a||"header"===a?_.envInfo[a][s]=e[t]:_.envInfo.header.custom[s]=e[t]:_.envInfo.user.hasOwnProperty(t)?_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r=["user_type","ip_addr_id"]).call(r,t)>-1?_.envInfo.user[t]=e[t]?Number(e[t]):e[t]:_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(n=["user_id","web_id","user_unique_id"]).call(n,t)>-1?_.envInfo.user[t]=e[t]?String(e[t]):e[t]:_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(i=["user_is_auth","user_is_login"]).call(i,t)>-1?_.envInfo.user[t]=Boolean(e[t]):"device_id"===t&&(_.envInfo.user[t]=e[t]):_.envInfo.header.hasOwnProperty(t)?_.envInfo.header[t]=e[t]:_.envInfo.header.custom[t]=e[t]}}))},e.prototype.get=function(e){try{return e?"evtParams"===e?this.evtParams:"reportErrorCallback"===e?this[e]:this.envInfo.user.hasOwnProperty(e)?this.envInfo.user[e]:this.envInfo.header.hasOwnProperty(e)?this.envInfo.header[e]:JSON.parse(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(this.envInfo[e])):JSON.parse(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(this.envInfo))}catch(e){}},e.prototype.setStore=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey)||{};if(t&&_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e).length){var _=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()(e,t);this.storage.setItem(this.configKey,_)}}catch(e){}},e.prototype.getStore=function(){try{if(!this.configPersist)return null;var e=this.storage.getItem(this.configKey);return e&&_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e).length?e:null}catch(e){return null}},e.prototype.delete=function(e){try{if(!this.configPersist)return;var t=this.storage.getItem(this.configKey);t&&t.hasOwnProperty(e)&&(delete t[e],this.storage.setItem(this.configKey,t))}catch(e){}},e}(),Logger=function(){function e(e,t){this.isLog=t||!1,this.name=e||""}return e.prototype.info=function(e){this.isLog},e.prototype.warn=function(e){this.isLog},e.prototype.error=function(e){this.isLog},e.prototype.throw=function(e){throw this.error(this.name),new Error(e)},e}(),Types,e;e=Types||(Types={}),e.Init="init",e.Config="config",e.Start="start",e.Ready="ready",e.TokenComplete="token-complete",e.TokenStorage="token-storage",e.TokenFetch="token-fetch",e.TokenError="token-error",e.ConfigUuid="config-uuid",e.ConfigWebId="config-webid",e.ConfigDomain="config-domain",e.CustomWebId="custom-webid",e.TokenChange="token-change",e.TokenReset="token-reset",e.ConfigTransform="config-transform",e.EnvTransform="env-transform",e.SessionReset="session-reset",e.SessionResetTime="session-reset-time",e.Event="event",e.Events="events",e.EventNow="event-now",e.CleanEvents="clean-events",e.BeconEvent="becon-event",e.SubmitBefore="submit-before",e.SubmitScuess="submit-scuess",e.SubmitAfter="submit-after",e.SubmitError="submit-error",e.SubmitVerify="submit-verify",e.Stay="stay",e.ResetStay="reset-stay",e.StayReady="stay-ready",e.SetStay="set-stay",e.RouteChange="route-change",e.RouteReady="route-ready",e.Ab="ab",e.AbVar="ab-var",e.AbAllVars="ab-all-vars",e.AbConfig="ab-config",e.AbExternalVersion="ab-external-version",e.AbVersionChangeOn="ab-version-change-on",e.AbVersionChangeOff="ab-version-change-off",e.AbOpenLayer="ab-open-layer",e.AbCloseLayer="ab-close-layer",e.AbReady="ab-ready",e.AbComplete="ab-complete",e.Profile="profile",e.ProfileSet="profile-set",e.ProfileSetOnce="profile-set-once",e.ProfileUnset="profile-unset",e.ProfileIncrement="profile-increment",e.ProfileAppend="profile-append",e.ProfileClear="profile-clear",e.Autotrack="autotrack",e.AutotrackReady="autotrack-ready",e.CepReady="cep-ready",e.TracerReady="tracer-ready";var Types$1=Types,AppBridge=function(){function e(e){this.native=e}var t=e.prototype;return t.bridgeInject=function(){try{return!!this.native&&!!AppLogBridge}catch(e){return!1}},t.bridgeReady=function(){var e=this;return new(_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19___default())((function(t,_){try{e.bridgeInject()?AppLogBridge.hasStarted((function(e){e?t(!0):_(!1)})):_(!1)}catch(e){_(!1)}}))},t.setConfig=function(e){var t=this;try{var _;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e)).call(_,(function(_){"user_unique_id"===_?t.setUserUniqueId(e[_]):config[_]?t.addHeaderInfo(_,e[_]):t.removeHeaderInfo(_)}))}catch(e){}},t.setUserUniqueId=function(e){try{AppLogBridge.setUserUniqueId(e)}catch(e){}},t.addHeaderInfo=function(e,t){try{AppLogBridge.addHeaderInfo(e,t)}catch(e){}},t.setHeaderInfo=function(e){try{AppLogBridge.setHeaderInfo(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e))}catch(e){}},t.removeHeaderInfo=function(e){try{AppLogBridge.removeHeaderInfo(e)}catch(e){}},t.reportPv=function(e){this.onEventV3("predefine_pageview",e)},t.onEventV3=function(e,t){try{AppLogBridge.onEventV3(e,t)}catch(e){}},t.profileSet=function(e){try{AppLogBridge.profileSet(e)}catch(e){}},t.profileSetOnce=function(e){try{AppLogBridge.profileSetOnce(e)}catch(e){}},t.profileIncrement=function(e){try{AppLogBridge.profileIncrement(e)}catch(e){}},t.profileUnset=function(e){try{AppLogBridge.profileUnset(e)}catch(e){}},t.profileAppend=function(e){try{AppLogBridge.profileAppend(e)}catch(e){}},e}(),ERROR={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function fetch$1(e,t,_,r,n,i,a,s){try{var o=new XMLHttpRequest,c=s||"POST";o.open(c,""+e,!0),o.setRequestHeader("Content-Type","application/json; charset=utf-8"),a&&o.setRequestHeader("X-MCS-AppKey",""+a),r&&(o.withCredentials=!0),o.onload=function(){if(n){var e=null;if(o.responseText){try{e=JSON.parse(o.responseText)}catch(t){e={}}n(e,t)}}},_&&(o.timeout=_,o.ontimeout=function(){i&&i(t,ERROR.TIMEOUT)}),o.onerror=function(){o.abort(),i&&i(t,ERROR.XHR_ON)},o.send(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(t))}catch(e){}}var GIF_URL="/gif",ERROR$1={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005},isSupportBeacon=function(){return!(!window.navigator||!window.navigator.sendBeacon)},encodePayload=function(e){var t="";for(var _ in e)e.hasOwnProperty(_)&&void 0!==e[_]&&(t+="&"+_+"="+encodeURIComponent(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e[_])));return"&"===t[0]?_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(t).call(t,1):t},sendByImg=function(e,t,_,r){try{var n,i=e.match(/\/v\d\//);n=i?i[0]:-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,"/v1/")?"/v1/":"/v2/";var a=e.split(n)[0];if(!a)return void r(e,t,ERROR$1.NO_URL);_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t).call(t,(function(n){var i=encodePayload(n),s=new Image(1,1);s.onload=function(){s=null,_&&_()},s.onerror=function(){s=null,r&&r(e,t,ERROR$1.IMG_ON)},s.src=""+a+GIF_URL+"?"+i}))}catch(_){r&&r(e,t,ERROR$1.IMG_CATCH,_.message)}},request=function(e,t,_,r,n,i,a){var s,o=window.navigator.userAgent;if(-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(s=window.navigator.appName).call(s,"Microsoft Internet Explorer")||-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o,"MSIE 8.0")&&-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(o).call(o,"MSIE 9.0")){if(a)return isSupportBeacon()?void(window.navigator.sendBeacon(e,_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(t))?n():i(e,t,ERROR$1.BEACON_FALSE)):void sendByImg(e,t,n,i)}else sendByImg(e,t,n,i);fetch$1(e,t,_,r,n,i)},Event=function(){function e(){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var _=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.cacheStorgae=new Storage(!0),this.localStorage=new Storage(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.collect.on(Types$1.Ready,(function(){_.reportAll(!1)})),this.collect.on(Types$1.ConfigDomain,(function(){_.reportUrl=_.configManager.getUrl("event")})),this.collect.on(Types$1.Event,(function(e){_.event(e)})),this.collect.on(Types$1.BeconEvent,(function(e){_.beconEvent(e)})),this.collect.on(Types$1.CleanEvents,(function(){_.reportAll(!1)})),this.linster()},e.prototype.linster=function(){var e=this;window.addEventListener("unload",(function(){e.reportAll(!0)}),!1),beforePageUnload((function(){e.reportAll(!0)})),document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.reportAll(!0)}),!1)},e.prototype.reportAll=function(e){this.report(e),this.reportBecon()},e.prototype.event=function(e){var t=this;try{var _=__spread(e,this.cacheStorgae.getItem(this.eventKey)||[]);if(this.cacheStorgae.setItem(this.eventKey,_),this.reportTimeout&&clearTimeout(this.reportTimeout),_.length>=this.maxReport)this.report(!1);else{var r=this.reportTime;this.reportTimeout=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){t.report(!1),t.reportTimeout=null}),r)}}catch(e){}},e.prototype.beconEvent=function(e){var t=__spread(e,this.cacheStorgae.getItem(this.beconKey)||[]);this.cacheStorgae.setItem(this.beconKey,t),this.collect.destroyInstance||this.collect.tokenManager.getReady()&&this.collect.sdkReady&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(t)),!0))},e.prototype.reportBecon=function(){var e=this.cacheStorgae.getItem(this.beconKey)||[];e&&e.length&&(this.cacheStorgae.removeItem(this.beconKey),this.send(this.split(this.merge(e)),!0))},e.prototype.report=function(e){if(!this.collect.destroyInstance&&this.collect.tokenManager.getReady()&&this.collect.sdkReady){var t=this.cacheStorgae.getItem(this.eventKey)||[];t.length&&(this.cacheStorgae.removeItem(this.eventKey),this.sliceEvent(t,e))}},e.prototype.sliceEvent=function(e,t){if(e.length>this.eventLimit)for(var _=0;_<e.length;_+=this.eventLimit){var r;r=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(e).call(e,_,_+this.eventLimit);var n=this.split(this.merge(r));this.send(n,t)}else n=this.split(this.merge(e)),this.send(n,t)},e.prototype.merge=function(e){var t=this,_=this.configManager.get(),r=_.header,n=_.user;r.custom=_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(r.custom);var i=this.configManager.get("evtParams"),a=_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default()(e).call(e,(function(e){_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(i).length&&(e.params=_assign({},i,e.params));var _=t.localStorage.getItem(t.abKey);return _&&_.uuid&&_.uuid===n.user_unique_id&&t.configManager.getAbVersion()&&(e.ab_sdk_version=t.configManager.getAbVersion()),e.session_id=t.collect.sessionManager.getSessionId(),e.params=_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e.params),e})),s=JSON.parse(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({events:a,user:n,header:r}));s.local_time=Math.floor(_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()/1e3),s.user_unique_type=this.config.enable_ttwebid?this.config.user_unique_type:void 0;var o=[];return o.push(s),o},e.prototype.split=function(e){return _babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default()(e).call(e,(function(e){var t=[];return t.push(e),t}))},e.prototype.send=function(e,t){var _=this;e.length&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){try{var r,n=JSON.parse(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e));_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20___default()(_.config)&&(n=_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20___default()(r=_.config).call(r,n)),_.collect.eventFilter&&n&&(n=_.collect.eventFilter(n));var i=n||e;_.collect.emit(Types$1.SubmitBefore,i),_.collect.emit(Types$1.SubmitVerify,i),request(_.reportUrl,i,_.timeout,_.enable_ttwebid,(function(e,t){e&&0!==e.e?_.collect.emit(Types$1.SubmitError,{type:"f_data",eventData:t,errorCode:e.e,response:e}):_.collect.emit(Types$1.SubmitScuess,{eventData:t,res:e})}),(function(e,t){_.configManager.get("reportErrorCallback")(e,t),_.collect.emit(Types$1.SubmitError,{type:"f_net",eventData:e,errorCode:t})}),t),_.collect.emit(Types$1.SubmitAfter,i)}catch(e){}}))},e}(),b=function e(t){return t?(t^16*Math.random()>>t/4).toString(10):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},localWebId=function(){var e;return _babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(e=b().replace(/-/g,"")).call(e,0,19)},Token=function(){function e(){this.cacheToken={},this.enableCookie=!1,this.enable_ttwebid=!1,this.enableCustomWebid=!1}return e.prototype.apply=function(e,t){var _=this;this.collect=e,this.config=t,this.configManager=this.collect.configManager,this.storage=new Storage(!1),this.tokenKey="__tea_cache_tokens_"+t.app_id,this.enable_ttwebid=t.enable_ttwebid,this.enableCustomWebid=t.enable_custom_webid,this.collect.on(Types$1.ConfigUuid,(function(e){_.setUuid(e)})),this.collect.on(Types$1.ConfigWebId,(function(e){_.setWebId(e)})),this.enableCookie=t.cross_subdomain,this.expiresTime=t.cookie_expire||6048e5,this.cookieDomain=t.cookie_domain||"",this.checkStorage()},e.prototype.checkStorage=function(){var e=this;if(this.enableCookie){var t=this.storage.getCookie(this.tokenKey,this.cookieDomain);this.cacheToken=t&&"string"==typeof t?JSON.parse(t):{}}else this.cacheToken=this.storage.getItem(this.tokenKey)||{};this.tokenType=this.cacheToken&&this.cacheToken._type_?this.cacheToken._type_:"default","custom"!==this.tokenType||this.enableCustomWebid?this.enableCustomWebid?this.collect.on(Types$1.CustomWebId,(function(){e.tokenReady=!0,e.collect.emit(Types$1.TokenComplete)})):this.checkEnv()||(this.enable_ttwebid?this.completeTtWid(this.cacheToken):this.check()):this.remoteWebid()},e.prototype.check=function(){this.cacheToken&&this.cacheToken.web_id?this.complete(this.cacheToken):this.config.disable_webid?this.complete({web_id:localWebId(),user_unique_id:this.configManager.get("user_unique_id")||localWebId()}):this.remoteWebid()},e.prototype.checkEnv=function(){var e;if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e=window.navigator.userAgent).call(e,"miniProgram")){var t=parseUrlQuery(window.location.href);if(t&&t.Web_ID){var _=this.configManager.get("user_unique_id");return this.complete({web_id:""+t.Web_ID,env_uuid:_}),!0}return!1}return!1},e.prototype.remoteWebid=function(){var e=this;fetch$1(this.configManager.getUrl("webid"),{app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""},3e3,!1,(function(t){t&&0===t.e?e.complete({web_id:e.configManager.get("web_id")||t.web_id,user_unique_id:e.configManager.get("user_unique_id")||t.web_id}):e.collect.emit(Types$1.TokenError)}),(function(){e.collect.emit(Types$1.TokenError)}))},e.prototype.complete=function(e){var t=e.web_id,_=e.user_unique_id;e.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.collect.configManager.set({web_id:t,user_unique_id:_}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.completeTtWid=function(e){var t=e.user_unique_id||"",_=this.configManager.get("user_unique_id");(_||t)&&this.configManager.set({user_unique_id:_||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.setUuid=function(e){if(e){var t=String(e),_=this.configManager.get("user_unique_id"),r=this.cacheToken&&this.cacheToken.user_unique_id;if(t===_&&t===r)return;this.configManager.set({user_unique_id:t}),this.cacheToken||(this.cacheToken={}),this.cacheToken.user_unique_id=t,this.cacheToken.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.setStorage(this.cacheToken),this.collect.emit(Types$1.TokenChange,"uuid"),this.collect.emit(Types$1.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.web_id&&(this.cacheToken.user_unique_id=this.cacheToken.web_id,this.cacheToken.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.setStorage(this.cacheToken)),this.collect.emit(Types$1.TokenReset))},e.prototype.setWebId=function(e){if(e&&!this.config.enable_ttwebid){this.cacheToken&&this.cacheToken.web_id?this.cacheToken.web_id!==e&&(this.cacheToken.user_unique_id=this.cacheToken.web_id===this.cacheToken.user_unique_id?e:this.cacheToken.user_unique_id,this.cacheToken.web_id=e):(this.cacheToken={},this.cacheToken.web_id=e,this.cacheToken.user_unique_id=e),this.cacheToken.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()();var t=this.configManager.get("web_id"),_=this.configManager.get("user_unique_id");_&&_!==t||(this.configManager.set({user_unique_id:e}),this.collect.emit(Types$1.TokenChange,"uuid")),t!==e&&(this.configManager.set({web_id:e}),this.collect.emit(Types$1.TokenChange,"webid")),this.setStorage(this.cacheToken)}},e.prototype.setStorage=function(e){var t;e._type_=this.enableCustomWebid?"custom":"default",delete e[_babel_runtime_corejs3_core_js_instance_reverse__WEBPACK_IMPORTED_MODULE_21___default()(t="diss".split("")).call(t).join("")],this.enableCookie||this.enable_ttwebid?this.storage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain):this.storage.setItem(this.tokenKey,e),this.cacheToken=e},e.prototype.getReady=function(){return this.tokenReady},e.prototype.getTobId=function(){var e=this,t=this.configManager.getUrl("tobid");return new(_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19___default())((function(_){fetch$1(t,{app_id:e.config.app_id,user_unique_id:e.configManager.get("user_unique_id"),web_id:e.configManager.get("web_id")},3e4,e.enable_ttwebid,(function(e){e&&0===e.e?_(e.tobid):_("")}),(function(){_("")}))}))},e}(),sessionId=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},Session=function(){function e(){}return e.prototype.apply=function(e,t){var _=this;this.collect=e,this.storage=new Storage(!1,"session"),this.sessionKey="__tea_session_id_"+t.app_id,this.expireTime=t.expireTime||18e5,this.disableSession=t.disable_session,this.disableSession||(this.setSessionId(),this.collect.on(Types$1.SessionReset,(function(){_.resetSessionId()})),this.collect.on(Types$1.SessionResetTime,(function(){_.updateSessionIdTime()})))},e.prototype.updateSessionIdTime=function(){var e=this.storage.getItem(this.sessionKey);if(e&&e.sessionId){var t=e.timestamp;_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-t>this.expireTime?e={sessionId:sessionId(),timestamp:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()}:e.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.storage.setItem(this.sessionKey,e),this.resetExpTime()}},e.prototype.setSessionId=function(){var e=this,t=this.storage.getItem(this.sessionKey);t&&t.sessionId?t.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()():t={sessionId:sessionId(),timestamp:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()},this.storage.setItem(this.sessionKey,t),this.sessionExp=_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22___default()((function(){e.checkEXp()}),this.expireTime)},e.prototype.getSessionId=function(){var e=this.storage.getItem(this.sessionKey);return this.disableSession?"":e&&e.sessionId?e.sessionId:""},e.prototype.resetExpTime=function(){var e=this;this.sessionExp&&(clearInterval(this.sessionExp),this.sessionExp=_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22___default()((function(){e.checkEXp()}),this.expireTime))},e.prototype.resetSessionId=function(){var e={sessionId:sessionId(),timestamp:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()};this.storage.setItem(this.sessionKey,e)},e.prototype.checkEXp=function(){var e=this.storage.getItem(this.sessionKey);e&&e.sessionId&&_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-e.timestamp+30>=this.expireTime&&(e={sessionId:sessionId(),timestamp:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()},this.storage.setItem(this.sessionKey,e))},e}(),AutoBase=function(e){var t=e.app_id,_=e.channel,r=e.onTokenReady,n=LOG_URL[_]+"/webid",i=new Storage(!1),a="__tea_cache_tokens_"+t,s=i.getItem(a);s&&s.web_id?r(s.web_id):request(n,{app_key:"",app_id:t,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer},3e3,!1,(function(e){if(e&&0===e.e){r(e.web_id);var t={web_id:e.web_id,user_unique_id:e.web_id,timestamp:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()};i.setItem(a,t)}else r("")}),(function(){r("")}),!0)},pluginExtendList={autotrack:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/cep.js"},object:"LogCep"},tracer:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/tracer.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/tracer.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/tracer.js"},object:"LogTracer"}},sdk_type="base";sdk_type="full";var Collector=function(){function e(e){this.disableAutoPageView=!1,this.bridgeReport=!1,this.staging=!1,this.pluginInstances=[],this.sended=!1,this.started=!1,this.destroyInstance=!1,this.sdkReady=!1,this.adapters={},this.name=e,this.hook=new Hook,this.logger=new Logger(e),this.remotePlugin=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()),this.Types=Types$1,this.adapters.fetch=fetch$1,this.adapters.storage=Storage}return e.usePlugin=function(t,_,r){if(_){for(var n=!1,i=0,a=e.plugins.length;i<a;i++)if(e.plugins[i].name===_){e.plugins[i].plugin=t,e.plugins[i].options=r||{},n=!0;break}n||e.plugins.push({name:_,plugin:t,options:r})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,_){e&&("full"===sdk_type&&pluginExtendList.hasOwnProperty(e)||(t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:_}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk")))},e.prototype.init=function(t){var _,r=this;this.inited||t&&isObject(t)&&t.app_id&&isNumber(t.app_id)&&(!t.app_key||isString(t.app_key))&&(t.channel_domain||-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_=["cn","sg","va"]).call(_,t.channel)||(t.channel="cn"),this.appBridge=new AppBridge(t.Native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ConfigManager(t),this.initConfig=t,this.bridgeReport||(this.configManager.set({app_id:t.app_id}),this.eventManager=new Event,this.tokenManager=new Token,this.sessionManager=new Session,_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19___default().all([new(_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19___default())((function(e){r.once(Types$1.TokenComplete,(function(){e(!0)}))})),new(_babel_runtime_corejs3_core_js_promise__WEBPACK_IMPORTED_MODULE_19___default())((function(e){r.once(Types$1.Start,(function(){e(!0)}))}))]).then((function(){try{var _;_babel_runtime_corejs3_core_js_instance_reduce__WEBPACK_IMPORTED_MODULE_24___default()(_=e.plugins).call(_,(function(e,t){var _=t.plugin,n=t.options,i=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()(r.initConfig,n),a=new _;return a.apply(r,i),e.push(a),e}),r.pluginInstances)}catch(e){}r.sdkReady=!0,r.emit(Types$1.Ready);try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){}t.disable_auto_pv||r.pageView(),r.on(Types$1.TokenChange,(function(e){"webid"===e&&r.pageView()})),r.on(Types$1.TokenReset,(function(){})),r.on(Types$1.RouteChange,(function(e){e.init||t.disable_route_report||r.pageView()}))})),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t),this.emit(Types$1.Init)),this.inited=!0)},e.prototype.config=function(e){if(this.inited)if(e&&isObject(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=_assign({},e);if(this.initConfig&&this.initConfig.configPersist){var _=this.configManager.getStore();_&&(t=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()(_,e)),this.configManager.setStore(e)}t.web_id,t.user_unique_id;var r=__rest(t,["web_id","user_unique_id"]);t.hasOwnProperty("web_id")&&this.emit(Types$1.ConfigWebId,t.web_id),t.hasOwnProperty("user_unique_id")&&this.emit(Types$1.ConfigUuid,t.user_unique_id),this.configManager.set(r)}else this.logger.warn("config params is error, please check");else this.logger.warn("config must be use after function init")},e.prototype.setDomain=function(e){this.configManager&&this.configManager.setDomain(e),this.emit(Types$1.ConfigDomain)},e.prototype.getConfig=function(e){return this.configManager.get(e)},e.prototype.send=function(){this.start()},e.prototype.start=function(){this.inited&&!this.sended&&(this.sended=!0,this.emit(Types$1.Start))},e.prototype.event=function(e,t){var _=this;try{if(this.initConfig&&this.initConfig.disable_track_event)return;var r=[];_babel_runtime_corejs3_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_9___default()(e)?_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){r.push(_.processEvent(e[0],e[1]||{}))})):r.push(this.processEvent(e,t)),this.bridgeReport?_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(r).call(r,(function(e){var t=e.event,r=e.params;_.appBridge.onEventV3(t,_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(r))})):r.length&&(this.emit(Types$1.Event,r),this.emit(Types$1.SessionResetTime))}catch(e){}},e.prototype.beconEvent=function(e,t){if(!this.initConfig||!this.initConfig.disable_track_event)if(_babel_runtime_corejs3_core_js_array_is_array__WEBPACK_IMPORTED_MODULE_9___default()(e));else{var _=[];_.push(this.processEvent(e,t||{})),_.length&&(this.emit(Types$1.BeconEvent,_),this.emit(Types$1.SessionResetTime))}},e.prototype.processEvent=function(e,t){void 0===t&&(t={});try{var _=e;/^event\./.test(e)&&(_=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(e).call(e,6));var r=t;"object"!=(0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(r)&&(r={}),r.profile?delete r.profile:r.event_index=getIndex();var n=void 0;return r.local_ms?(n=r.local_ms,delete r.local_ms):n=+new Date,{event:_,params:r,local_time_ms:n,is_bav:this.initConfig&&this.initConfig.autotrack?1:0}}catch(_){return{event:e,params:t}}},e.prototype.filterEvent=function(e){this.eventFilter=e},e.prototype.on=function(e,t){this.hook.on(e,t)},e.prototype.once=function(e,t){this.hook.once(e,t)},e.prototype.off=function(e,t){this.hook.off(e,t)},e.prototype.emit=function(e,t,_){this.hook.emit(e,t,_)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.predefinePageView=function(e){void 0===e&&(e={});var t={title:document.title||location.pathname,url:location.href,url_path:location.pathname,time:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),referrer:window.document.referrer,$is_first_time:""+this.configManager.is_first_time},_=_assign({},t,e);this.event("predefine_pageview",_)},e.prototype.clearEventCache=function(){this.emit(Types$1.CleanEvents)},e.prototype.setWebIDviaUnionID=function(e){if(e){var t=hashCode(e);this.config({web_id:""+t,wechat_unionid:e}),this.emit(Types$1.CustomWebId)}},e.prototype.setWebIDviaOpenID=function(e){if(e){var t=hashCode(e);this.config({web_id:""+t,wechat_openid:e}),this.emit(Types$1.CustomWebId)}},e.prototype.resetStayDuration=function(e,t,_){void 0===e&&(e=""),void 0===t&&(t=""),void 0===_&&(_=""),this.emit(Types$1.ResetStay,{url_path:e,title:t,url:_},Types$1.Stay)},e.prototype.resetStayParams=function(e,t,_){void 0===e&&(e=""),void 0===t&&(t=""),void 0===_&&(_=""),this.emit(Types$1.SetStay,{url_path:e,title:t,url:_},Types$1.Stay)},e.prototype.getToken=function(e,t){var _=this,r=!1,n=function(t){if(!r){var n;r=!0;var i=_.configManager.get().user;return t&&(i.tobid=t,i[_babel_runtime_corejs3_core_js_instance_reverse__WEBPACK_IMPORTED_MODULE_21___default()(n="diss".split("")).call(n).join("")]=t),e(_assign({},i))}},i=function(){_.tokenManager.getTobId().then((function(e){n(e)}))};this.sdkReady?i():(t&&_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){n()}),t),this.on(Types$1.Ready,(function(){i()})))},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e)):this.emit(Types$1.ProfileSet,e,Types$1.Profile)},e.prototype.profileSetOnce=function(e){this.bridgeReport?this.appBridge.profileSetOnce(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e)):this.emit(Types$1.ProfileSetOnce,e,Types$1.Profile)},e.prototype.profileIncrement=function(e){this.bridgeReport?this.appBridge.profileIncrement(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e)):this.emit(Types$1.ProfileIncrement,e,Types$1.Profile)},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emit(Types$1.ProfileUnset,e,Types$1.Profile)},e.prototype.profileAppend=function(e){this.bridgeReport?this.appBridge.profileAppend(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e)):this.emit(Types$1.ProfileAppend,e,Types$1.Profile)},e.prototype.setExternalAbVersion=function(e){var t;this.emit(Types$1.AbExternalVersion,"string"==typeof e&&e?_babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18___default()(t=""+e).call(t):null,Types$1.Ab)},e.prototype.getVar=function(e,t,_){this.emit(Types$1.AbVar,{name:e,defaultValue:t,callback:_},Types$1.Ab)},e.prototype.getABconfig=function(e,t){this.emit(Types$1.AbConfig,{param:e,callback:t},Types$1.Ab)},e.prototype.getAbSdkVersion=function(){return this.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;return this.emit(Types$1.AbVersionChangeOn,e,Types$1.Ab),function(){t.emit(Types$1.AbVersionChangeOff,e,Types$1.Ab)}},e.prototype.offAbSdkVersionChange=function(e){this.emit(Types$1.AbVersionChangeOff,e,Types$1.Ab)},e.prototype.openOverlayer=function(){this.emit(Types$1.AbOpenLayer,"",Types$1.Ab)},e.prototype.closeOverlayer=function(){this.emit(Types$1.AbCloseLayer,"",Types$1.Ab)},e.prototype.getAllVars=function(e){this.emit(Types$1.AbAllVars,e,Types$1.Ab)},e.prototype.autoInitializationRangers=function(e){AutoBase(e)},e.prototype.destoryInstace=function(){this.destroyInstance||(this.destroyInstance=!0,this.off(Types$1.TokenComplete))},e.plugins=[],e}(),STYLE_ID="__rangers_ab_style__";function openOverlayer(){if(!document.getElementById(STYLE_ID)){var e="body { opacity: 0 !important; }",t=document.head||document.getElementsByTagName("head")[0],_=document.createElement("style");_.id=STYLE_ID,_.type="text/css",_.styleSheet?_.styleSheet.cssText=e:_.appendChild(document.createTextNode(e)),t.appendChild(_)}}function closeOverlayer(){var e=document.getElementById(STYLE_ID);e&&e.parentElement.removeChild(e)}var msgQueueMap={},allowdOrigins=[],addAllowdOrigin=function(e){e.length&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){allowdOrigins.push(e)}))};function dispatchMsg(e,t,_,r){var n=e&&e.source||window.opener||window.parent,i=e&&e.origin||r||"*",a={type:t,payload:_};n.postMessage(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(a),i)}function receiveMsg(e,t){msgQueueMap[e]=msgQueueMap[e]||[],msgQueueMap[e].push(t)}function processMsg(e){if(_babel_runtime_corejs3_core_js_instance_some__WEBPACK_IMPORTED_MODULE_25___default()(allowdOrigins).call(allowdOrigins,(function(e){return"*"===e}))||_babel_runtime_corejs3_core_js_instance_some__WEBPACK_IMPORTED_MODULE_25___default()(allowdOrigins).call(allowdOrigins,(function(t){var _;return _babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_=e.origin).call(_,t)>-1}))){var t,_=e.data;if("string"==typeof e.data)try{_=JSON.parse(e.data)}catch(e){_=void 0}if(!_)return;var r=_.type,n=_.payload;msgQueueMap[r]&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=msgQueueMap[r]).call(t,(function(t){"function"==typeof t&&t(e,n)}))}}function init(e,t){var _=_assign({},e);delete _.filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",copyConfig:_,version:t},"*"),window.addEventListener("message",processMsg,!1)}var VISUAL_URL="",isLoaded=!1;function loadEditorScript(e){var t=e.event,_=e.editorUrl;e.collectInstance,e.fromSession,isLoaded||(isLoaded=!0,loadScript(_,(function(){dispatchMsg(t,"abEditorScriptloadSuccess")}),(function(){t&&dispatchMsg(t,"abEditorScriptloadError"),isLoaded=!1})))}function readyToLoadEditor(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},addAllowdOrigin(["*"]);var _,r="";init(t,SDK_VERSION);var n="";try{var i=window.performance.getEntriesByType("resource");if(i&&i.length&&(_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(i).call(i,(function(e){var t;"script"===e.initiatorType&&e.name&&-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t=e.name).call(t,"collect")&&(n=e.name)})),n||document.currentScript&&(n=document.currentScript.src),n&&(_=n.split("/"))&&_.length)){r="https:/";for(var a=2;a<_.length&&a!==_.length-1;a++)r=r+"/"+_[a];r+="/visual-ab-core"}}catch(e){}receiveMsg("tea:openVisualABEditor",(function(_){var n=_.data;if("string"==typeof _.data)try{n=JSON.parse(_.data)}catch(e){n=void 0}if(n){var i=n.lang;if(n.appId!==t.app_id)return void dispatchMsg(_,"appIdError");var a=n.version;VISUAL_URL=a&&r?r+(a?"."+a:".1.0.1")+".js?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()():VISUAL_AB_CORE+"?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),window.TEAVisualEditor.lang=i,window.TEAVisualEditor.__ab_domin=t.channel_domain||"",loadEditorScript({event:_,editorUrl:VISUAL_URL,collectInstance:e})}}))}var loadMuiltlink=function(e,t){window.TEAVisualEditor.appId=t.app_id,receiveMsg("tea:openTesterEventInspector",(function(t){var _=t.data;if("string"==typeof t.data)try{_=JSON.parse(t.data)}catch(e){_=void 0}if(_){var r=_.referrer,n=_.lang,i=_.appId;window.TEAVisualEditor.__editor_ajax_domain=r||"",window.TEAVisualEditor.__ab_appId=i||"",window.TEAVisualEditor.lang=n||"",loadEditorScript({event:t,editorUrl:VISUAL_URL_INSPECTOR+".js?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),collectInstance:e})}}))},loadVisual=function(e){window.TEAVisualEditor.__ab_config=e,loadScript(VISUAL_AB_LOADER+"?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),(function(){}),(function(){}))},CallbackType;!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(CallbackType||(CallbackType={}));var STORAGE_EXPRIRE=2592e6,API="/service/2/abtest_config/",DOMAINS={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},Ab=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()),this.readyStatus=!1}return e.prototype.apply=function(e,t){var _=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var r=t.enable_multilink,n=t.ab_channel_domain,i=t.enable_ab_visual,a=n||decodeUrl(DOMAINS[t.channel||"cn"]),s=e.adapters,o=s.storage,c=s.fetch;this.cacheStorgae=new o(!1),this.fetch=c,this.enable_multilink=r,this.enable_ab_visual=i,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.fetchUrl=""+a+API,this.reportUrl=""+e.configManager.getUrl("event");var l=this.collect.Types;this.types=l,this.collect.on(l.TokenChange,(function(e){"uuid"===e&&_.readyStatus&&(_.clearCache(),_.fetchAB())})),this.collect.on(l.AbVar,(function(e){var t=e.name,r=e.defaultValue,n=e.callback;_.getVar(t,r,n)})),this.collect.on(l.AbAllVars,(function(e){_.getAllVars(e)})),this.collect.on(l.AbConfig,(function(e){var t=e.params,r=e.callback;_.getABconfig(t,r)})),this.collect.on(l.AbExternalVersion,(function(e){_.setExternalAbVersion(e)})),this.collect.on(l.AbVersionChangeOn,(function(e){_.changeListener.set(e,e)})),this.collect.on(l.AbVersionChangeOff,(function(e){_.changeListener.get(e)&&_.changeListener.delete(e)})),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(l.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var _=this.collect.hook._hooksCache[e];if(!_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(_).length)return;var r=function(e){var r;_[e].length&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(r=_[e]).call(r,(function(_){t.collect.hook.emit(e,_)}))};for(var n in _)r(n)}},e.prototype.loadMode=function(){var e=getIframeUrl(),t="";if(e){var _=e.scenario,r=e.href;_?(this.editMode=!0,t=_):!r||-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r).call(r,"datatester")&&-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(r).call(r,"visual-editor")||(this.editMode=!0,t="visual-editor")}this.enable_ab_visual&&(readyToLoadEditor(this.collect,this.config),"visual-editor"===t)?this.collect.destoryInstace():this.enable_multilink&&loadMuiltlink(this.collect,this.config)},e.prototype.checkLocal=function(){var e,t=this.getABCache(),_=t.ab_version,r=t.ab_ext_version,n=t.ab_version_multilink,i=t.data,a=this.checkFromUrl();a?this.mulilinkVersions.push(a):this.mulilinkVersions=n||[],this.extVersions=r||[],this.versions=_||[],this.data=i;var s=_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(e=this.versions).call(e,this.extVersions);this.enable_multilink&&(s=_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(s).call(s,this.mulilinkVersions)),this.configVersions(s.join(","))},e.prototype.checkFromUrl=function(){var e=parseUrlQuery(window.location.href);return e&&e.vid?e.vid:""},e.prototype.updateVersions=function(){var e,t,_=this.extVersions.length?_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(e=this.versions).call(e,this.extVersions):this.versions,r=_babel_runtime_corejs3_core_js_instance_concat__WEBPACK_IMPORTED_MODULE_6___default()(_).call(_,this.mulilinkVersions);this.configVersions(r.join(",")),this.updateABCache(),this.changeListener.size>0&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=this.changeListener).call(t,(function(e){"function"==typeof e&&e(_)}))},e.prototype.configVersions=function(e){this.collect.configManager.setAbVersion(e)},e.prototype.getVar=function(e,t,_){if(!e)throw new Error("variable must not be empty");if(void 0===t)throw new Error("variable no default value");if("function"!=typeof _)throw new Error("callback must be a function");var r={name:e,defaultValue:t,callback:_,type:CallbackType.Var};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealVar(r,e):this.callbacks.push(r)},e.prototype.getRealVar=function(e,t){var _=e.name,r=e.defaultValue,n=e.callback,i=this.data;if(i){if(isObject(i[_])){var a,s,o=i[_].vid;return"$ab_url"===t?_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(a=this.mulilinkVersions).call(a,o)||this.mulilinkVersions.push(o):_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(s=this.versions).call(s,o)||this.versions.push(o),this.updateVersions(),this.fechEvent(o,t,r),void n(i[_].val)}n(r)}else n(r)},e.prototype.getAllVars=function(e){if("function"!=typeof e)throw new Error("callback must be a function");var t={callback:e,type:CallbackType.All};"complete"===this.fetchStatus&&"complete"===this.refreshFetchStatus?this.getRealAllVars(t):this.callbacks.push(t)},e.prototype.getRealAllVars=function(e){(0,e.callback)(this.data?JSON.parse(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(this.data)):{})},e.prototype.fechEvent=function(e,t,_){var r=this;try{if(this.config.disable_track_event)return;if(!e)return;var n=this.collect.configManager.get(),i=n.header,a=n.user,s=this.getABCache();if(s&&s.uuid&&s.uuid!==a.user_unique_id)return;var o={event:"abtest_exposure",ab_sdk_version:""+e,params:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({app_id:this.config.appId,ab_url:"$ab_url"===t?_:window.location.href}),local_time_ms:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()};i.custom=_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(i.custom);var c={events:[o],user:a,header:i};"$ab_url"===t?window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()([c])):this.fetch(this.reportUrl,[c],2e4):_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){r.fetch(r.reportUrl,[c],2e4)}),16)}catch(e){}},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var _=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e);_&&_.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.getABCache=function(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.cacheStorgae.getItem(this.abKey)||t,_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-t.timestamp>=STORAGE_EXPRIRE?(this.cacheStorgae.removeItem(this.abKey),null):e?t[e]:t},e.prototype.updateABCache=function(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.cacheStorgae.setItem(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getABCache();t.data=this.data,t.uuid=e,t.timestamp=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.cacheStorgae.setItem(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[]},e.prototype.openOverlayer=function(e){var t=this;if(openOverlayer(),e)var _=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){t.closeOverlayer(),clearTimeout(_)}),e)},e.prototype.closeOverlayer=function(){closeOverlayer()},e.prototype.fetchComplete=function(e,t){var _,r=this;if(e&&"[object Object]"==Object.prototype.toString.call(e)){var n,i;this.data=e,this.setAbCache(t);var a=[];_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(n=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e)).call(n,(function(t){var _=e[t].vid;_&&a.push(_)})),this.versions=_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20___default()(i=this.versions).call(i,(function(e){return _babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(a).call(a,e)}));var s=e.$ab_url,o=e.$ab_modification;if(o&&o.val&&this.enable_ab_visual){if(this.collect.destroyInstance)return;this.getVar("$ab_modification",window.location.href,(function(){loadVisual(o.val)}))}else if(s&&this.enable_multilink){var c;this.mulilinkVersions=_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20___default()(c=this.mulilinkVersions).call(c,(function(e){return _babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(a).call(a,e)}));var l=s.val,u=s.vid;l&&u&&this.getVar("$ab_url",l,(function(){r.editMode||l!==window.location.href&&_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){if(!r.collect.destroyInstance){var e=""+l;e=-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,"http")?"https://"+e:e,parseURL(e).host!==location.host&&(e=e+"&vid="+u),window.location.href=e}}),100)}))}this.closeOverlayer(),this.updateVersions()}_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=this.callbacks).call(_,(function(e){return r[e.type===CallbackType.Var?"getRealVar":"getRealAllVars"](e,"")})),this.callbacks=[]},e.prototype.fetchAB=function(e){var t=this,_=window.location.href,r=this.collect.configManager.get();this.fetch(this.fetchUrl,{header:_assign({aid:this.config.app_id},r.user||{},r.header||{},{ab_sdk_version:this.collect.configManager.getAbVersion(),ab_url:_})},this.config.ab_timeout||3e3,!1,(function(_){t.fetchStatus="complete",t.refreshFetchStatus;var n=_.data;"success"===_.message?(t.fetchComplete(n,r.user.user_unique_id),e&&e(n)):(t.fetchComplete(null,r.user.user_unique_id),e&&e(null)),t.collect.emit(t.types.AbComplete,n)}),(function(){t.fetchStatus="complete",t.refreshFetchStatus,t.fetchComplete(null,r.user.user_unique_id),e&&e(null),t.collect.emit(t.types.AbComplete,null)}))},e.prototype.filterUrl=function(e){try{var t="";-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,"&multilink=true")?t="&multilink=true[\0-\xff]*":-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,"?multilink=true")&&(t="\\?multilink=true[\0-\xff]*");var _=new RegExp(t,"g");e=e.replace(_,"")}catch(e){}return e},e}(),Et=function(){function e(){}return e.prototype.apply=function(e,t){var _=this,r=e.adapters.fetch;if(t.event_verify_url&&"string"==typeof t.event_verify_url&&(this.url=t.event_verify_url+"/v1/list_test",this.url)){var n=e.Types;e.on(n.SubmitBefore,(function(e){r(_.url,e,3e4)}))}},e}(),Alive=function(){function e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.collect=e,this.config=t,this.pageStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,isObject(t.enable_stay_duration)&&(this.options=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()(this.options,t.enable_stay_duration))}return e.prototype.setParams=function(e,t,_){this.set_path=e,this.set_url=_,this.set_title=t},e.prototype.enable=function(e,t,_){this.url_path=e,this.url=_,this.title=t,this.disableCallback=this.enablePageAlive()},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()},e.prototype.sendEvent=function(e){void 0===e&&(e=!1);var t=e?this.aliveDTime:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-this.sessionStartTime;t<0||_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-this.pageStartTime>this.maxDuration||(this.collect.beconEvent(this.options.aliveName,_assign({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),duration:t,is_support_visibility_change:isSupVisChange(),startTime:this.sessionStartTime},this.options.params)),this.sessionStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22___default()((function(){_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!0)}),1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent()):"visible"===document.visibilityState&&(this.sessionStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.timerHandler=this.setUpTimer())},e.prototype.beforeunload=function(){document.hidden||this.sendEvent()},e.prototype.enablePageAlive=function(){var e,t,_=this;return this.timerHandler=this.setUpTimer(),document.addEventListener("visibilitychange",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(e=this.visibilitychange).call(e,this)),beforePageUnload(_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(t=this.beforeunload).call(t,this)),function(){var e,t,r;_.beforeunload(),document.removeEventListener("visibilitychange",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(e=_.visibilitychange).call(e,_)),window.removeEventListener("beforeunload",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(t=_.beforeunload).call(t,_)),window.removeEventListener("pagehide",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(r=_.beforeunload).call(r,_))}},e}(),Close=function(){function e(e,t){var _=this;this.maxDuration=432e5,this.aliveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.visibilitychange=function(){"hidden"===document.visibilityState?_.activeEndTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()():"visible"===document.visibilityState&&(_.activeEndTime&&(_.totalTime+=_.activeEndTime-_.activeStartTime,_.activeTimes+=1),_.activeEndTime=void 0,_.activeStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()())},this.beforeunload=function(){if(_.totalTime+=(_.activeEndTime||_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()())-_.activeStartTime,_.config.autotrack)try{window.sessionStorage.setItem("_tea_cache_duration",_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({duration:_.totalTime,page_title:document.title||location.pathname}))}catch(e){}_.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),isObject(t.enable_stay_duration)&&(this.options=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()(this.options,t.enable_stay_duration)),this.resetData()}return e.prototype.setParams=function(e,t,_){this.set_path=e,this.set_url=_,this.set_title=t},e.prototype.enable=function(e,t,_){this.url_path=e,this.url=_,this.title=t,this.disableCallback=this.enablePageClose()},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.activeEndTime=void 0,this.activeTimes=1,this.totalTime=0},e.prototype.sendEventPageClose=function(){var e=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-this.pageStartTime;this.totalTime<0||e<0||this.totalTime>=this.maxDuration||(this.collect.beconEvent(this.options.closeName,_assign({url_path:this.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:isSupVisChange()},this.options.params)),this.pageStartTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.resetData())},e.prototype.getParams=function(e){switch(e){case"url_path":return this.set_path||this.url_path||location.pathname;case"title":return this.set_title||this.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.enablePageClose=function(){var e,t,_=this;return document.addEventListener("visibilitychange",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(e=this.visibilitychange).call(e,this)),beforePageUnload(_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(t=this.beforeunload).call(t,this)),function(){var e,t,r;_.beforeunload(),document.removeEventListener("visibilitychange",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(e=_.visibilitychange).call(e,_)),window.removeEventListener("beforeunload",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(t=_.beforeunload).call(t,_)),window.removeEventListener("pagehide",_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(r=_.beforeunload).call(r,_))}},e}(),Stay=function(){function e(){}return e.prototype.apply=function(e,t){var _=this;if(this.collect=e,this.config=t,this.config.enable_stay_duration){this.title=document.title||location.pathname,this.url=location.href,this.url_path=location.pathname,this.pageAlive=new Alive(e,t),this.pageClose=new Close(e,t);var r=this.collect.Types;this.collect.on(r.ResetStay,(function(e){var t=e.url_path,r=e.title,n=e.url;_.resetStayDuration(t,r,n)})),this.collect.on(r.RouteChange,(function(e){e.init||t.disable_route_report||_.resetStayDuration()})),this.collect.on(r.SetStay,(function(e){var t=e.url_path,r=e.title,n=e.url;_.setStayParmas(t,r,n)})),this.enable(this.url_path,this.title,this.url),this.ready(r.Stay),this.collect.emit(r.StayReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var _=this.collect.hook._hooksCache[e];if(!_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(_).length)return;var r=function(e){var r;_[e].length&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(r=_[e]).call(r,(function(_){t.collect.hook.emit(e,_)}))};for(var n in _)r(n)}},e.prototype.enable=function(e,t,_){this.pageAlive.enable(e,t,_),this.pageClose.enable(e,t,_)},e.prototype.disable=function(){this.pageAlive.disable(),this.pageClose.disable()},e.prototype.setStayParmas=function(e,t,_){void 0===e&&(e=""),void 0===t&&(t=""),void 0===_&&(_=""),this.pageAlive.setParams(e,t,_),this.pageClose.setParams(e,t,_)},e.prototype.reset=function(e,t,_){this.disable(),this.enable(e,t,_)},e.prototype.resetStayDuration=function(e,t,_){this.reset(e,t,_)},e}(),Profile=function(){function e(){}return e.prototype.apply=function(e,t){var _=this;this.collect=e,this.config=t,this.duration=6e4,this.reportUrl=e.configManager.getDomain()+"/profile/list";var r=e.Types,n=e.adapters.fetch;this.fetch=n,this.cache={},this.collect.on(r.ProfileSet,(function(e){_.setProfile(e)})),this.collect.on(r.ProfileSetOnce,(function(e){_.setOnceProfile(e)})),this.collect.on(r.ProfileUnset,(function(e){_.unsetProfile(e)})),this.collect.on(r.ProfileIncrement,(function(e){_.incrementProfile(e)})),this.collect.on(r.ProfileAppend,(function(e){_.appendProfile(e)})),this.collect.on(r.ProfileClear,(function(){_.cache={}})),this.ready(r.Profile)},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var _=this.collect.hook._hooksCache[e];if(!_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(_).length)return;var r=function(e){var r;_[e].length&&_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(r=_[e]).call(r,(function(_){t.collect.hook.emit(e,_)}))};for(var n in _)r(n)}},e.prototype.report=function(e,t){void 0===t&&(t={});try{if(this.config.disable_track_event)return;var _=[];_.push(this.collect.processEvent(e,t));var r=this.collect.eventManager.merge(_);this.fetch(this.reportUrl,r)}catch(e){}},e.prototype.setProfile=function(e){var t=this.formatParams(e);t&&_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(t).length&&(this.pushCache(t),this.report("__profile_set",_assign({},t,{profile:!0})))},e.prototype.setOnceProfile=function(e){var t=this.formatParams(e,!0);t&&_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(t).length&&(this.pushCache(t),this.report("__profile_set_once",_assign({},t,{profile:!0})))},e.prototype.incrementProfile=function(e){e&&this.report("__profile_increment",_assign({},e,{profile:!0}))},e.prototype.unsetProfile=function(e){if(e){var t={};t[e]="1",this.report("__profile_unset",_assign({},t,{profile:!0}))}},e.prototype.appendProfile=function(e){if(e){var t={};for(var _ in e){var r;("string"==typeof e[_]||"Array"===_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(r=Object.prototype.toString.call(e[_])).call(r,8,-1))&&(t[_]=e[_])}_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(t).length&&this.report("__profile_append",_assign({},t,{profile:!0}))}},e.prototype.pushCache=function(e){var t,_=this;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e)).call(t,(function(t){_.cache[t]={val:_.clone(e[t]),timestamp:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()}}))},e.prototype.formatParams=function(e,t){var _=this;void 0===t&&(t=!1);try{var r;if(!e||"[object Object]"!==Object.prototype.toString.call(e))return;var n={};for(var i in e){var a;("string"==typeof e[i]||"number"==typeof e[i]||"Array"===_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(a=Object.prototype.toString.call(e[i])).call(a,8,-1))&&(n[i]=e[i])}var s=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(n);if(!s.length)return;var o=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()();return _babel_runtime_corejs3_core_js_instance_reduce__WEBPACK_IMPORTED_MODULE_24___default()(r=_babel_runtime_corejs3_core_js_instance_filter__WEBPACK_IMPORTED_MODULE_20___default()(s).call(s,(function(r){var n=_.cache[r];return t?!n:!(n&&_.compare(n.val,e[r])&&o-n.timestamp<_.duration)}))).call(r,(function(e,t){return e[t]=n[t],e}),{})}catch(e){}},e.prototype.compare=function(e,t){try{return _babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e)===_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(t)}catch(e){return!1}},e.prototype.clone=function(e){try{return JSON.parse(_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(e))}catch(t){return e}},e.prototype.unReady=function(){},e}(),HeartBeat=function(){function e(){var e=this;this.setInterval=function(){e.clearIntervalFunc=selfAdjust((function(){e.isSessionhasEvent&&e.endCurrentSession()}),e.sessionInterval)},this.clearInterval=function(){e.clearIntervalFunc&&e.clearIntervalFunc()}}return e.prototype.apply=function(e,t){var _=this;if(this.collect=e,!t.disable_heartbeat){this.sessionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var r=this.collect.Types;this.collect.on(r.SessionReset,(function(){_.process()}))}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),this.isSessionhasEvent=!1,this.startTime=0},e.prototype.process=function(){this.isSessionhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),SDK_USE_TYPE="npm",Monitor=function(){function e(){}return e.prototype.apply=function(e,t){var _=this;if(this.collect=e,this.config=t,!this.config.channel_domain){var r=e.adapters.fetch;if(this.fetch=r,!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event");var n=this.collect.Types;this.collect.on(n.Ready,(function(){_.sdkOnload()})),this.collect.on(n.SubmitError,(function(e){var t=e.eventData,r=e.errorCode;_.sdkError(t,r)}))}}},e.prototype.sdkOnload=function(){var e=this;try{var t=this.collect.configManager.get(),_=t.header,r=t.user,n=_.app_id,i=_.app_name,a=_.sdk_version,s=r.web_id,o={events:[{event:"onload",params:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({app_id:n,app_name:i||"",sdk_version:a,sdk_type:SDK_USE_TYPE,sdk_config:this.config,sdk_desc:"TOC"}),local_time_ms:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()}],user:{user_unique_id:s},header:{}};_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){e.fetch(e.url,[o],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(e){}},e.prototype.sdkError=function(e,t){var _=this;try{var r=e[0],n=r.user,i=r.header,a=[];_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){var t;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=e.events).call(t,(function(e){a.push(e)}))}));var s={events:_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default()(a).call(a,(function(e){return{event:"on_error",params:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({error_code:t,app_id:i.app_id,app_name:i.app_name||"",error_event:e.event,sdk_version:i.sdk_version,local_time_ms:e.local_time_ms,tea_event_index:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),params:e.params,header:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(i),user:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(n)}),local_time_ms:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()}})),user:{user_unique_id:n.user_unique_id},header:{}};_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){_.fetch(_.url,[s],3e4,!1,(function(){}),(function(){}),"566f58151b0ed37e")}),16)}catch(e){}},e}();function isNeedElement(e,t){if(void 0===t&&(t="list"),!e)return!1;if(t&&"list"===t){var _;if(_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(_=["LI","TR","DL"]).call(_,e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaIdx"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-idx"))return!0}else{var r;if(_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(r=["A","BUTTON"]).call(r,e.nodeName))return!0;if(e.dataset&&e.dataset.hasOwnProperty("teaContainer"))return!0;if(e.hasAttribute&&e.hasAttribute("data-tea-container"))return!0}return!1}function getContainer(e){for(var t=e;t&&!isNeedElement(t,"container");){if("HTML"===t.nodeName||"BODY"===t.nodeName)return e;t=t.parentElement}return t||e}function getNodeText(e){var t,_,r="";return 3===e.nodeType?r=_babel_runtime_corejs3_core_js_instance_trim__WEBPACK_IMPORTED_MODULE_18___default()(t=e.textContent).call(t):e.dataset&&e.dataset.hasOwnProperty("teaTitle")||e.hasAttribute("ata-tea-title")?r=e.getAttribute("data-tea-title"):e.hasAttribute("title")?r=e.getAttribute("title"):"INPUT"===e.nodeName&&_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(_=["button","submit"]).call(_,e.getAttribute("type"))?r=e.getAttribute("value"):"IMG"===e.nodeName&&e.getAttribute("alt")&&(r=e.getAttribute("alt")),_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(r).call(r,0,200)}function getText(e){var t=getContainer(e),_=[];return function e(t){var r=getNodeText(t);if(r&&-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_).call(_,r)&&_.push(r),t.childNodes.length>0)for(var n=t.childNodes,i=0;i<n.length;i++)8!==n[i].nodeType&&e(n[i])}(t),_}function getTextSingle(e){var t=getContainer(e),_="";return function e(t){var r=getNodeText(t);if(r&&(_+=r),t.childNodes.length>0)for(var n=t.childNodes,i=0;i<n.length;i++)3===n[i].nodeType&&e(n[i])}(t),_}function ignore(e){for(var t=e;t&&t.parentNode;){if(t.hasAttribute("data-tea-ignore"))return!0;if("HTML"===t.nodeName||"body"===t.nodeName)return!1;t=t.parentNode}return!1}var elementLevel=function(e){if(e.children.length){var t,_=e.children;return!_babel_runtime_corejs3_core_js_instance_some__WEBPACK_IMPORTED_MODULE_25___default()(t=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()([]).call(_)).call(t,(function(e){return e.children.length>0}))}return!0},isSVG=function(e){if("svg"===e.tagName.toLowerCase())return!0;for(var t=e.parentElement,_=!1;t;)"svg"===t.tagName.toLowerCase()?(t=null,_=!0):t=t.parentElement;return _};function isTrack(e,t){var _;if(window.innerHeight,window.innerWidth,1!==e.nodeType)return!1;if(!t.svg&&isSVG(e))return!1;if(_babel_runtime_corejs3_core_js_instance_includes__WEBPACK_IMPORTED_MODULE_26___default()(_=["HTML","BODY"]).call(_,e.tagName.toUpperCase()))return!1;var r=e;return!("none"===r.style.display||!isNeedElement(r,"container")&&!elementLevel(r))}var Listener=function(){function e(e,t,_){var r=this;this.clickEvent=function(e){isTrack(e.target,r.options)&&r.eventHandel({eventType:"dom",eventName:"click"},e)},this.changeEvent=function(e){r.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){r.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&r.eventHandel({eventType:"dom",eventName:"beat"},_assign({beat_type:0},e)),r.eventHandel({eventType:"dom",eventName:"page_view"},e)},this.getPageLoadEvent=function(e){r.eventHandel({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=_.getConfig().eventConfig,this.collect=t,this.options=e,this.beatTime=e.beat,this.statistics=!1}return e.prototype.init=function(e){this.eventHandel=e;var t=this.config.mode;this.addListener(t)},e.prototype.addListener=function(e){var t=this;if("proxy-capturing"===e&&(this.config.click&&window.document.addEventListener("click",this.clickEvent,!0),this.config.change&&window.document.addEventListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),this.config.pv&&this.collect.on("route-change",(function(e){var _=e.config,r=e.name;t.getPageViewEvent(_,r)})),this.config.beat)){try{"complete"===document.readyState?this.beatEvent(this.beatTime):window.addEventListener("load",(function(){t.beatEvent(t.beatTime)}));var _=0,r=null;window.addEventListener("scroll",(function(){clearTimeout(r),r=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()(n,500),_=document.documentElement.scrollTop||document.body.scrollTop}));var n=function(){(document.documentElement.scrollTop||document.body.scrollTop)==_&&t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:1})}}catch(e){}try{var i=window.performance&&window.performance.getEntriesByType("paint");i&&i.length?(new PerformanceObserver((function(e){var _=e.getEntries(),r=_[_.length-1],n=r.renderTime||r.loadTime;t.statistics||(t.getPageLoadEvent(n),t.statistics=!0)})).observe({entryTypes:["largest-contentful-paint"]}),_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){t.statistics||(t.getPageLoadEvent(i[0].startTime||0),t.statistics=!0)}),2e3)):this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",this.clickEvent,!0),window.document.removeEventListener("change",this.changeEvent,!0),window.document.removeEventListener("submit",this.submitEvent,!0)},e.prototype.beatEvent=function(e){var t=this;try{var _;this.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(_=_babel_runtime_corejs3_core_js_set_interval__WEBPACK_IMPORTED_MODULE_22___default()((function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})}),e)),beforePageUnload((function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(_)}))}catch(e){}},e}(),defaultConfig={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},Config=function(){function e(e){this.config=e}return e.prototype.getConfig=function(){return this.config},e.prototype.setConfig=function(e){return this.config=e},e}();function getPositionData(e){if(e){var t=e.getBoundingClientRect(),_=t.width,r=t.height;return{left:t.left,top:t.top,element_width:_,element_height:r}}}function getEventData(e,t){void 0===e&&(e={}),void 0===t&&(t={});var _=e.clientX,r=e.clientY,n=t.left,i=t.top,a=_-n>=0?_-n:0,s=r-i>=0?r-i:0;return{touch_x:Math.floor(a),touch_y:Math.floor(s)}}function getXpath(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElement;var _=[],r=[];return _babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t).call(t,(function(e){var t=getXpathIndex(e),n=t.str,i=t.index;_.unshift(n),r.unshift(i)})),{element_path:"/"+_.join("/"),positions:r}}function getXpathIndex(e){if(null===e)return{str:"",index:0};var t=0,_=e.parentElement;if(_)for(var r=_.children,n=0;n<r.length&&r[n]!==e;n++)r[n].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),isNeedElement(e,"list")?"[]":""].join(""),index:t}}function getElementData(e,t,_){var r={element_path:"",positions:[],texts:[]},n=getPositionData(t),i=getEventData(e,n),a=n.element_width,s=n.element_height,o=i.touch_x,c=i.touch_y,l=getXpath(t),u=l.element_path,d=l.positions,h=getText(t),f=window.performance.timing.navigationStart,p=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-f,g=_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default()(d).call(d,(function(e){return""+e})),m=null;window.TEAVisualEditor.getOriginXpath&&(m=window.TEAVisualEditor.getOriginXpath({xpath:u,positions:g})),r.element_path=m&&m.xpath||u,r.positions=m&&m.positions||g,_&&!_.text&&(r.texts=h,r.element_title=getTextSingle(t)),r.element_id=t.getAttribute("id")||"",r.element_class_name=t.getAttribute("class")||"",r.element_type=t.nodeType,r.element_width=Math.floor(a),r.element_height=Math.floor(s),r.touch_x=o,r.touch_y=c,r.page_manual_key="",r.elememt_manual_key="",r.since_page_start_ms=p,r.page_start_ms=f,r.page_path=location.pathname,r.page_host=location.host;var b=getContainer(t);return"A"===b.tagName&&(r.href=b.getAttribute("href")),"IMG"===t.tagName&&(r.src=t.getAttribute("src")),r}function getEventData$1(e,t,_,r){return _assign({event:e},getElementData(t,_,r),{is_html:1,page_key:window.location.href,page_title:document.title})}function getExtraEventData(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}}var EventHandle=function(){function e(e,t){this.ignore={text:!1},this.initConfig=e,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics"},t&&!1===t.text&&(this.ignore.text=!0)}return e.prototype.handleEvent=function(e,t){try{if(ignore(e.target))return null;var _="bav2b_click";switch(t){case"click":return getEventData$1(_=this.eventName.click,e,e.target,this.ignore);case"change":return _assign({},getEventData$1(_="bav2b_change",e,e.target),getExtraEventData(_,e.target));case"submit":return getEventData$1(_="bav2b_submit",e,e.target)}}catch(e){return null}},e.prototype.handleViewEvent=function(e){e.event=this.eventName.page,e.page_title=document.title,e.page_total_width=window.innerWidth,e.page_total_height=window.innerHeight;try{var t=window.sessionStorage.getItem("_tea_cache_duration");if(t){var _=JSON.parse(t);e.refer_page_duration_ms=_?_.duration:"",e.refer_page_title=_?_.page_title:""}else e.refer_page_duration_ms="",e.refer_page_title="";e.scroll_width=document.documentElement.scrollLeft?document.documentElement.scrollLeft+window.innerWidth:window.innerWidth,e.scroll_height=document.documentElement.scrollTop?document.documentElement.scrollTop+window.innerHeight:window.innerHeight,e.page_start_ms=window.performance.timing.navigationStart}catch(e){}return e},e.prototype.handleStatisticsEvent=function(e){var t={};t.event=this.eventName.static,t.is_html=1,t.page_key=location.href,t.refer_page_key=document.referrer||"",t.page_title=document.title,t.page_manual_key=this.initConfig.autotrack.page_manual_key||"",t.refer_page_manual_key="";try{var _=e.lcp,r=window.performance.timing,n=r.loadEventEnd-r.navigationStart;t.page_init_cost_ms=_babel_runtime_corejs3_core_js_parse_int__WEBPACK_IMPORTED_MODULE_12___default()(_||(n>0?n:0)),t.page_start_ms=r.navigationStart}catch(e){}return t},e.prototype.handleBeadtEvent=function(e){e.event=this.eventName.beat,e.page_key=window.location.href,e.is_html=1,e.page_title=document.title,e.page_manual_key=this.initConfig.autotrack.page_manual_key||"";try{e.page_viewport_width=window.innerWidth,e.page_viewport_height=window.innerHeight,e.page_total_width=document.documentElement.scrollWidth,e.page_total_height=document.documentElement.scrollHeight,e.scroll_width=document.documentElement.scrollLeft+window.innerWidth,e.scroll_height=document.documentElement.scrollTop+window.innerHeight,e.since_page_start_ms=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-window.performance.timing.navigationStart,e.page_start_ms=window.performance.timing.navigationStart}catch(e){}return e},e}(),Request=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_change_event","report_submit_event","report_exposure_event","report_page_view_event","report_page_statistics_event","report_beat_event"]}return e.prototype.send=function(e,t){var _=e.eventSend,r=t.event;delete t.event,_&&"becon"===_?this.collect.beconEvent(r,t):this.collect.event(r,t)},e.prototype.get=function(e,t){var _=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()({headers:{"content-type":"application/json"},method:"GET"},t);fetch(e,_)},e.prototype.post=function(e,t){var _=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()({headers:{"content-type":"application/json"},method:"POST"},t);fetch(e,_)},e}(),COOKIE_KEY="_TEA_VE_OPEN",COOKIE_KEY_HOST="_TEA_VE_APIHOST",COOKIE_LANG="lang",COOKIE_EDIT_VERISON="_VISUAL_EDITOR_V",COOKIE_EDIT_URL="_VISUAL_EDITOR_U";function checkSession(){return"1"===js_cookie.get(COOKIE_KEY)}function checkSessionHost(){var e=js_cookie.get(COOKIE_KEY_HOST);try{e=JSON.parse(e)}catch(e){}return e}function checkEditUrl(){return js_cookie.get(COOKIE_EDIT_URL)}function setSession(){try{var e=window.TEAVisualEditor.lang=window.TEAVisualEditor.lang||js_cookie.get(COOKIE_LANG),t=window.TEAVisualEditor.__editor_ajax_domain=window.TEAVisualEditor.__editor_ajax_domain||js_cookie.get(COOKIE_KEY_HOST),_=window.TEAVisualEditor.__editor_verison=window.TEAVisualEditor.__editor_verison||js_cookie.get(COOKIE_EDIT_VERISON),r=window.TEAVisualEditor.__editor_url=window.TEAVisualEditor.__editor_url||js_cookie.get(COOKIE_EDIT_URL),n=+new Date,i=new Date(n+18e5);js_cookie.set(COOKIE_KEY,"1",{expires:i}),js_cookie.set(COOKIE_KEY_HOST,t,{expires:i}),js_cookie.set(COOKIE_EDIT_URL,r,{expires:i}),js_cookie.set(COOKIE_LANG,e,{expires:i}),js_cookie.set(COOKIE_EDIT_VERISON,_||"",{expires:i})}catch(e){}}var isLoaded$1=!1;function loadEditorScript$1(e){var t=e.event,_=e.editorUrl,r=e.autoTrackInstance;isLoaded$1||(isLoaded$1=!0,loadScript(_,(function(){dispatchMsg(t,"editorScriptloadSuccess"),r.destroy()}),(function(){t&&dispatchMsg(t,"editorScriptloadError"),isLoaded$1=!1})))}function readyToLoadEditor$1(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{};var _="",r=VISUAL_EDITOR_RANGERS+"?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()();window.TEAVisualEditor.appId=t.app_id;var n=t.channel_domain,i="";if(addAllowdOrigin(["*"]),n){var a,s="";try{var o=window.performance.getEntriesByType("resource");if(o&&o.length&&(_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(o).call(o,(function(e){var t;"script"===e.initiatorType&&e.name&&-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t=e.name).call(t,"collect")&&(s=e.name)})),s||document.currentScript&&(s=document.currentScript.src),s&&(a=s.split("/"))&&a.length)){i="https:/";for(var c=2;c<a.length&&c!==a.length-1;c++)i=i+"/"+a[c];if(i&&_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(i).call(i,"/5.0")){var l=i.split("/5.0");i=l[0]||i}}}catch(e){}}if(init(t,SDK_VERSION),checkSession()){var u=checkSessionHost(),d="";u&&(window.TEAVisualEditor.__editor_ajax_domain=u,d=checkEditUrl()),loadEditorScript$1({event:null,editorUrl:d||r,autoTrackInstance:e}),setSession()}else try{receiveMsg("tea:openVisualEditor",(function(t){var a=t.data;if("string"==typeof t.data)try{a=JSON.parse(t.data)}catch(e){a=void 0}if(a){var s=a.referrer,o=a.lang;if(s&&(window.TEAVisualEditor.__editor_ajax_domain=s),_=r,n){var c=a.version;_=i?i+(c?"/visual-editor-rangers-v"+c:"/visual-editor-rangers-v1.0.0")+".js":r,window.TEAVisualEditor.__editor_verison=c}window.TEAVisualEditor.__editor_url=_,window.TEAVisualEditor.lang=o,loadEditorScript$1({event:t,editorUrl:_,autoTrackInstance:e}),setSession()}})),window.TEAVisualEditor.openAutotrackEditor=function(){loadEditorScript$1({event:null,editorUrl:window.TEAVisualEditor.__editor_url,autoTrackInstance:e})}}catch(e){}try{receiveMsg("tea:openHeatMapCore",(function(t){loadEditorScript$1({event:t,editorUrl:HOT_PIC_URL+".js?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),autoTrackInstance:e})}))}catch(e){}}var defaultOpt={hashTag:!1,impr:!1},AutoTrack=function(){function e(){}return e.prototype.apply=function(e,t){if(this.autoTrackStart=!1,this.collect=e,this.config=t,t.autotrack){var _=e.Types;this.ready(_.Autotrack),this.collect.emit(_.AutotrackReady)}},e.prototype.ready=function(e){this.collect.set(e);var t=this.config.autotrack;t="object"==(0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(t)?t:{},t=_babel_runtime_corejs3_core_js_object_assign__WEBPACK_IMPORTED_MODULE_1___default()(defaultOpt,t),this.destroyed=!1,this.options=t,this.Config=new Config(defaultConfig),this.Listener=new Listener(t,this.collect,this.Config),this.EventHandle=new EventHandle(this.config,t),this.Request=new Request(this.collect),this.autoTrackStart=!0,this.init(),readyToLoadEditor$1(this,this.config)},e.prototype.init=function(){var e;this.Listener.init(_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(e=this.handle).call(e,this))},e.prototype.handle=function(e,t){"dom"===e.eventType&&this.handleDom(e,t)},e.prototype.handleDom=function(e,t){try{var _=e.eventName;if("click"===_||"change"===_||"submit"===_){var r=this.EventHandle.handleEvent(t,_);null!==r&&this.Request.send({eventType:"custom",eventName:"report_"+_+"_event",extra:{methods:"GET"}},r)}else if("page_view"===_||"page_statistics"===_){var n;n="page_view"===_?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"}},n)}else if("beat"===_){var i=this.EventHandle.handleBeadtEvent(t),a=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:a},i)}}catch(e){}},e.prototype.destroy=function(){this.autoTrackStart&&(this.autoTrackStart=!1,this.Listener.removeListener())},e}(),State;!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(State||(State={}));var EventList={pv:["predefine_pageview"],sdk:["_be_active","predefine_page_alive","predefine_page_close","__profile_set","__profile_set_once","__profile_increment","__profile_unset","__profile_append"],autotrack:["bav2b_click","bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_page","__bav_beat","__bav_page_statistics"]},Tracer=function(){function e(){}return e.prototype.apply=function(e,t){var _=this;if(this.ready=t.app_id&&t.enable_tracer&&!t.disable_track_event,this.ready){this.limit={pv:1,sdk:3,autotrack:3,log:3},this.errorCode={f_net:0,f_data:0},this.tracerCache=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()),this.collect=e,this.appid=t.app_id,this.reportUrl=e.configManager.getUrl("event");var r=this.collect.Types,n=e.adapters.fetch;this.fetch=n,this.collect.on(r.Event,(function(){_.addCount("log")})),this.collect.on(r.SubmitError,(function(e){var t=e.type,r=e.eventDate,n=e.errorCode,i=e.response;_.addErrorCount(r,t,n,i)})),this.listener(),this.collect.emit(r.TracerReady)}},e.prototype.addCount=function(e,t,_){void 0===t&&(t="net"),void 0===_&&(_=1);try{this.tracerCache||(this.tracerCache=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()));var r=void 0;if(this.tracerCache.has(e))(n=this.tracerCache.get(e)).has(t)?(r=n.get(t).params.count,r++,n.set(t,this.processTracer(r,e,t))):(r=_,n.set(t,this.processTracer(_,e,t)));else{var n=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default());r=_,n.set(t,this.processTracer(_,e,t)),this.tracerCache.set(e,n)}"net"===t&&r>=this.limit[e]&&this.report(!1)}catch(e){}},e.prototype.addErrorCount=function(e,t,_,r){var n=this;try{if(e&&e.length){var i=e[0].events;i&&i.length&&("f_data"===t?(r&&r.hasOwnProperty("sc")?this.addCount("log",t,i.length-r.sc):this.addCount("log",t,i.length),this.errorCode[t]=_):_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(i).call(i,(function(e){var r="log";for(var i in EventList){var a;if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(a=EventList[i]).call(a,e.event)){r=i;break}}n.addCount(r,t,1),n.errorCode[t]=_})))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t,_=[];_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=this.tracerCache).call(t,(function(e){_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){_.push(e)}))})),_&&_.length&&this.sendTracer(_,e)}},e.prototype.sendTracer=function(e,t){try{var _=this.collect.eventManager.merge(e);t&&window.navigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(_)):this.fetch(this.reportUrl,_),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,_){var r={count:e,state:_,key:t,params_for_special:"applog_trace",aid:this.appid,platform:"web",_staging_flag:1,sdk_version:SDK_VERSION};"f_net"!==_&&"f_data"!==_||(r.errorCode=this.errorCode[_]);var n=this.collect.processEvent("applog_trace",r);if(n&&n.event)return delete n.is_bav,n},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e.leavePage()})),beforePageUnload((function(){e.leavePage()}))},e.prototype.leavePage=function(){this.report(!0)},e}(),dayjs_min=createCommonjsModule((function(e,t){e.exports=function(){var e,t="millisecond",_="second",r="minute",n="hour",i="day",a="week",s="month",o="quarter",c="year",l="date",u="Invalid Date",d=/^(\d{4})[-\/]?(\d{1,2})?[-\/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},p=function(e,t,_){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(_)+e},g={s:p,z:function(e){var t=-e.utcOffset(),_=Math.abs(t),r=Math.floor(_/60),n=_%60;return(t<=0?"+":"-")+p(r,2,"0")+":"+p(n,2,"0")},m:function e(t,_){if(t.date()<_.date())return-e(_,t);var r=12*(_.year()-t.year())+(_.month()-t.month()),n=t.clone().add(r,s),i=_-n<0,a=t.clone().add(r+(i?-1:1),s);return+(-(r+(_-n)/(i?n-a:a-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:s,y:c,w:a,d:i,D:l,h:n,m:r,s:_,ms:t,Q:o}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},m="en",b={};b[m]=f;var v=function(e){return e instanceof P},y=function(e,t,_){var r;if(!e)return m;if("string"==typeof e)b[e]&&(r=e),t&&(b[e]=t,r=e);else{var n=e.name;b[n]=e,r=n}return!_&&r&&(m=r),r||!_&&m},E=function(e,t){if(v(e))return e.clone();var _="object"==(0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(t)?t:{};return _.date=e,_.args=arguments,new P(_)},O=g;O.l=y,O.i=v,O.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var P=function(){function e(e){this.$L=y(e.locale,null,!0),this.parse(e)}var f=e.prototype;return f.parse=function(e){this.$d=function(e){var t=e.date,_=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(d);if(r){var n=r[2]-1||0,i=(r[7]||"0").substring(0,3);return _?new Date(Date.UTC(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],n,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},f.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},f.$utils=function(){return O},f.isValid=function(){return!(this.$d.toString()===u)},f.isSame=function(e,t){var _=E(e);return this.startOf(t)<=_&&_<=this.endOf(t)},f.isAfter=function(e,t){return E(e)<this.startOf(t)},f.isBefore=function(e,t){return this.endOf(t)<E(e)},f.$g=function(e,t,_){return O.u(e)?this[t]:this.set(_,e)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(e,t){var o=this,u=!!O.u(t)||t,d=O.p(e),h=function(e,t){var _=O.w(o.$u?Date.UTC(o.$y,t,e):new Date(o.$y,t,e),o);return u?_:_.endOf(i)},f=function(e,t){var _;return O.w(o.toDate()[e].apply(o.toDate("s"),_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(_=u?[0,0,0,0]:[23,59,59,999]).call(_,t)),o)},p=this.$W,g=this.$M,m=this.$D,b="set"+(this.$u?"UTC":"");switch(d){case c:return u?h(1,0):h(31,11);case s:return u?h(1,g):h(0,g+1);case a:var v=this.$locale().weekStart||0,y=(p<v?p+7:p)-v;return h(u?m-y:m+(6-y),g);case i:case l:return f(b+"Hours",0);case n:return f(b+"Minutes",1);case r:return f(b+"Seconds",2);case _:return f(b+"Milliseconds",3);default:return this.clone()}},f.endOf=function(e){return this.startOf(e,!1)},f.$set=function(e,a){var o,u=O.p(e),d="set"+(this.$u?"UTC":""),h=(o={},o[i]=d+"Date",o[l]=d+"Date",o[s]=d+"Month",o[c]=d+"FullYear",o[n]=d+"Hours",o[r]=d+"Minutes",o[_]=d+"Seconds",o[t]=d+"Milliseconds",o)[u],f=u===i?this.$D+(a-this.$W):a;if(u===s||u===c){var p=this.clone().set(l,1);p.$d[h](f),p.init(),this.$d=p.set(l,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](f);return this.init(),this},f.set=function(e,t){return this.clone().$set(e,t)},f.get=function(e){return this[O.p(e)]()},f.add=function(e,t){var o,l=this;e=Number(e);var u=O.p(t),d=function(t){var _=E(l);return O.w(_.date(_.date()+Math.round(t*e)),l)};if(u===s)return this.set(s,this.$M+e);if(u===c)return this.set(c,this.$y+e);if(u===i)return d(1);if(u===a)return d(7);var h=(o={},o[r]=6e4,o[n]=36e5,o[_]=1e3,o)[u]||1,f=this.$d.getTime()+e*h;return O.w(f,this)},f.subtract=function(e,t){return this.add(-1*e,t)},f.format=function(e){var t,_=this,r=this.$locale();if(!this.isValid())return r.invalidDate||u;var n=e||"YYYY-MM-DDTHH:mm:ssZ",i=O.z(this),a=this.$H,s=this.$m,o=this.$M,c=r.weekdays,l=r.months,d=function(e,t,r,i){return e&&(e[t]||e(_,n))||r[t].substr(0,i)},f=function(e){return O.s(a%12||12,e,"0")},p=r.meridiem||function(e,t,_){var r=e<12?"AM":"PM";return _?r.toLowerCase():r},g={YY:_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(t=String(this.$y)).call(t,-2),YYYY:this.$y,M:o+1,MM:O.s(o+1,2,"0"),MMM:d(r.monthsShort,o,l,3),MMMM:d(l,o),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:d(r.weekdaysMin,this.$W,c,2),ddd:d(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(a),HH:O.s(a,2,"0"),h:f(1),hh:f(2),a:p(a,s,!0),A:p(a,s,!1),m:String(s),mm:O.s(s,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(e,t){return t||g[e]||i.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(e,t,l){var u,d=O.p(t),h=E(e),f=6e4*(h.utcOffset()-this.utcOffset()),p=this-h,g=O.m(this,h);return g=(u={},u[c]=g/12,u[s]=g,u[o]=g/3,u[a]=(p-f)/6048e5,u[i]=(p-f)/864e5,u[n]=p/36e5,u[r]=p/6e4,u[_]=p/1e3,u)[d]||p,l?g:O.a(g)},f.daysInMonth=function(){return this.endOf(s).$D},f.$locale=function(){return b[this.$L]},f.locale=function(e,t){if(!e)return this.$L;var _=this.clone(),r=y(e,t,!0);return r&&(_.$L=r),_},f.clone=function(){return O.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},e}(),M=P.prototype;return E.prototype=M,_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e=[["$ms",t],["$s",_],["$m",r],["$H",n],["$W",i],["$M",s],["$y",c],["$D",l]]).call(e,(function(e){M[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,P,E),e.$i=!0),E},E.locale=y,E.isDayjs=v,E.unix=function(e){return E(1e3*e)},E.en=b[m],E.Ls=b,E.p={},E}()})),duration=createCommonjsModule((function(e,t){var _,r,n,i,a,s,o,c,l,u,d,h,f,p,g,m,b;e.exports=(a=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,c=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,l={years:s=31536e6,months:o=2592e6,days:i=864e5,hours:n=36e5,minutes:6e4,seconds:1e3,milliseconds:1,weeks:6048e5},u=function(e){return e instanceof b},d=function(e,t,_){return new b(e,_,t.$l)},h=function(e){return r.p(e)+"s"},f=function(e){return e<0},p=function(e){return f(e)?Math.ceil(e):Math.floor(e)},g=function(e){return Math.abs(e)},m=function(e,t){return e?f(e)?{negative:!0,format:""+g(e)+t}:{negative:!1,format:""+e+t}:{negative:!1,format:""}},b=function(){function e(e,t,_){var r,n=this;if(this.$d={},this.$l=_,void 0===e&&(this.$ms=0,this.parseFromMilliseconds()),t)return d(e*l[h(t)],this);if("number"==typeof e)return this.$ms=e,this.parseFromMilliseconds(),this;if("object"==(0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(e))return _babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(r=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(e)).call(r,(function(t){n.$d[h(t)]=e[t]})),this.calMilliseconds(),this;if("string"==typeof e){var i=e.match(c);if(i){var a,s=_babel_runtime_corejs3_core_js_instance_map__WEBPACK_IMPORTED_MODULE_14___default()(a=_babel_runtime_corejs3_core_js_instance_slice__WEBPACK_IMPORTED_MODULE_11___default()(i).call(i,2)).call(a,(function(e){return Number(e)}));return this.$d.years=s[0],this.$d.months=s[1],this.$d.weeks=s[2],this.$d.days=s[3],this.$d.hours=s[4],this.$d.minutes=s[5],this.$d.seconds=s[6],this.calMilliseconds(),this}}return this}var t=e.prototype;return t.calMilliseconds=function(){var e,t=this;this.$ms=_babel_runtime_corejs3_core_js_instance_reduce__WEBPACK_IMPORTED_MODULE_24___default()(e=_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(this.$d)).call(e,(function(e,_){return e+(t.$d[_]||0)*l[_]}),0)},t.parseFromMilliseconds=function(){var e=this.$ms;this.$d.years=p(e/s),e%=s,this.$d.months=p(e/o),e%=o,this.$d.days=p(e/i),e%=i,this.$d.hours=p(e/n),e%=n,this.$d.minutes=p(e/6e4),e%=6e4,this.$d.seconds=p(e/1e3),e%=1e3,this.$d.milliseconds=e},t.toISOString=function(){var e=m(this.$d.years,"Y"),t=m(this.$d.months,"M"),_=+this.$d.days||0;this.$d.weeks&&(_+=7*this.$d.weeks);var r=m(_,"D"),n=m(this.$d.hours,"H"),i=m(this.$d.minutes,"M"),a=this.$d.seconds||0;this.$d.milliseconds&&(a+=this.$d.milliseconds/1e3);var s=m(a,"S"),o=e.negative||t.negative||r.negative||n.negative||i.negative||s.negative,c=n.format||i.format||s.format?"T":"",l=(o?"-":"")+"P"+e.format+t.format+r.format+c+n.format+i.format+s.format;return"P"===l||"-P"===l?"P0D":l},t.toJSON=function(){return this.toISOString()},t.format=function(e){var t=e||"YYYY-MM-DDTHH:mm:ss",_={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return t.replace(a,(function(e,t){return t||String(_[e])}))},t.as=function(e){return this.$ms/l[h(e)]},t.get=function(e){var t=this.$ms,_=h(e);return"milliseconds"===_?t%=1e3:t="weeks"===_?p(t/l[_]):this.$d[_],0===t?0:t},t.add=function(e,t,_){var r;return r=t?e*l[h(t)]:u(e)?e.$ms:d(e,this).$ms,d(this.$ms+r*(_?-1:1),this)},t.subtract=function(e,t){return this.add(e,t,!0)},t.locale=function(e){var t=this.clone();return t.$l=e,t},t.clone=function(){return d(this.$ms,this)},t.humanize=function(e){return _().add(this.$ms,"ms").locale(this.$l).fromNow(!e)},t.milliseconds=function(){return this.get("milliseconds")},t.asMilliseconds=function(){return this.as("milliseconds")},t.seconds=function(){return this.get("seconds")},t.asSeconds=function(){return this.as("seconds")},t.minutes=function(){return this.get("minutes")},t.asMinutes=function(){return this.as("minutes")},t.hours=function(){return this.get("hours")},t.asHours=function(){return this.as("hours")},t.days=function(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){return this.as("weeks")},t.months=function(){return this.get("months")},t.asMonths=function(){return this.as("months")},t.years=function(){return this.get("years")},t.asYears=function(){return this.as("years")},e}(),function(e,t,n){_=n,r=n().$utils(),n.duration=function(e,t){var _=n.locale();return d(e,{$l:_},t)},n.isDuration=u;var i=t.prototype.add,a=t.prototype.subtract;t.prototype.add=function(e,t){return u(e)&&(e=e.asMilliseconds()),_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(i).call(i,this)(e,t)},t.prototype.subtract=function(e,t){return u(e)&&(e=e.asMilliseconds()),_babel_runtime_corejs3_core_js_instance_bind__WEBPACK_IMPORTED_MODULE_27___default()(a).call(a,this)(e,t)}})}));dayjs_min.extend(duration);var ignoreList=["__cep_sdk_onboard","__cep_trigger_sdk","_be_active"],moreOP=["and","or","not"],CepRule=function(){function CepRule(){this.support=!0,this.currentPlan=1,this.shouldSendEvent=!1,this.staing=!1,this.test=!1,this.cepReady=!1,this.eventCache=[]}return CepRule.prototype.apply=function(e,t){var _=this;if(this.collect=e,this.config=t,this.config.cep){var r=e.adapters,n=r.fetch,i=r.storage,a=e.Types;this.types=a,this.storage=new i(!1),this.fetch=n,this.configManager=e.configManager,this.url=t.cep_url?""+t.cep_url:e.configManager.getDomain()+"/service/2/cep_settings/",this.reportUrl=e.configManager.getUrl("event"),this.key="__tea_cep_plan_"+t.app_id,this.quotasKey="__tea_cep_plan_quotas_"+t.app_id,this.isWait=!1,this.eventCache=[],this.test=e.configManager.staging,this.collect.on(a.SubmitAfter,(function(e){_.matchEvent(e)})),this.init()}},CepRule.prototype.init=function(){var e=this,t=!0,_=0,r=0,n=0,i=!1,a=this.storage.getItem(this.key)||{};if(a&&_babel_runtime_corejs3_core_js_object_keys__WEBPACK_IMPORTED_MODULE_15___default()(a).length&&(i=!0,_=a.last_update_time,r=a.fetch_interval,n=a.config_version||0,t=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-_>1e3*r),t){var s=this.configManager.get(),o=s.header,c=s.user;this.fetch(this.url,{header:o,user:c,local_time:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),config_version:n},1e4,!1,(function(t){var _;t&&0===t.code?(a.fetch_interval=t.fetch_interval,a.data=t.data,a.last_update_time=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),a.config_version=t.config_version,e.clearQuotas(),e.initState(t.data),e.storage.setItem(e.key,a),_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=t.data).call(_,(function(t){e.event("__cep_sdk_onboard",t.plan_id)}))):304!==t.code&&400!==t.code||!i||(a.last_update_time=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),e.storage.setItem(e.key,a),e.initState(a.data))}),(function(){i?(e.planData=a.data,e.initState(a.data)):e.support=!1}))}else a.last_update_time=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.storage.setItem(this.key,a),this.initState(a.data)},CepRule.prototype.initState=function(e){var t=this;e&&e.length&&(this.stateArray=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()),this.waitArray=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()),this.planData=e,_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){var _=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default());if(e.pattern&&e.pattern.events){var r,n=1===e.pattern.events.length;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(r=e.pattern.events).call(r,(function(e){_.set(e.id,{id:e.id,isMatch:!1,event:null,after:e.after||null,connection:e.connection||null,window:e.window||null,matchTime:0,initTime:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),singleRule:n})})),t.stateArray.set(e.plan_id,{patternState:_,singleRule:n,pattern:{aid:e.aid,biz_id:e.biz_id,end_time:e.end_time,start_time:e.start_time,web_sdk_version:e.web_sdk_version,stage:e.stage},quotas:e.quotas})}})),this.cepReady=!0,this.dealCache(),this.collect.emit(this.types.CepReady))},CepRule.prototype.check=function(e){var t=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()();return!(_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()>1e3*e.end_time)&&(!(t<1e3*e.start_time||t>1e3*e.end_time)&&(this.staing="testing"===e.staing,!(SDK_VERSION<e.web_sdk_version&&(this.support=!1,1))))},CepRule.prototype.dealCache=function(){var e=this;if(this.eventCache.length){var t,_=1;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=this.eventCache).call(t,(function(t){e.matchEvent(t),_++})),_===this.eventCache.length&&(this.eventCache=[])}},CepRule.prototype.matchEvent=function(e){if(this.support&&(!this.staing||this.test)&&e&&e.length)try{if(!this.cepReady)return void this.eventCache.push(e);var t=e[0],_=t.header,r=t.user,n=t.events;n.length&&_babel_runtime_corejs3_core_js_instance_reverse__WEBPACK_IMPORTED_MODULE_21___default()(n).call(n);for(var i=0;i<n.length;i++){var a=n[i].event;if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(ignoreList).call(ignoreList,a))return!1;this.matchRule(_,r,n[i])}}catch(e){return}},CepRule.prototype.matchRule=function(e,t,_){try{for(var r=0;r<this.planData.length;r++){var n=this.planData[r],i=n.plan_id;if(this.check(n)&&this.checkQuotas(i)&&n.pattern&&n.pattern.events)for(var a=n.pattern.events,s=0;s<a.length;s++)if(this.rule(e,t,_,a[s].condition)){var o=this.stateArray.get(i).patternState,c=o.get(a[s].id);if(this.stateArray.get(i).singleRule){this.changeStatus(i,a[s].id,_),this.publish([_],i,a[s].id);break}if(!c.isMatch){c.after&&o.get(c.after).isMatch?this.changeStatus(i,a[s].id,_):c.after||this.changeStatus(i,a[s].id,_);break}}}this.statusCheck()}catch(e){return}},CepRule.prototype.changeStatus=function(e,t,_){var r=this.stateArray.get(e),n=r.patternState.get(t);n.isMatch=!0,n.event=_,n.matchTime=_.local_time_ms||_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),r.patternState.set(t,n),this.stateArray.set(e,r)},CepRule.prototype.statusCheck=function(){var e,t,_,r;try{for(var n=__values(this.stateArray),i=n.next();!i.done;i=n.next()){var a=__read(i.value,2),s=a[0],o=a[1],c=o.patternState;if(o.isSingle)break;try{for(var l=__values(c),u=l.next();!u.done;u=l.next()){var d=__read(u.value,2),h=d[0],f=d[1];if(f.after&&(!f.after||c.get(f.after).isMatch)){if("NOT_FOLLOWED_BY"===f.connection){f.isMatch?this.reset(s,h):_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-c.get(f.after).matchTime>f.window?this.publish([c.get(f.after).event,f.event],s,h):this.startWait(s,h,f);break}f.isMatch?f.matchTime-c.get(f.after).matchTime<=f.window?this.publish([c.get(f.after).event,f.event],s,h):this.reset(s,h):_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-c.get(f.after).matchTime>f.window?this.reset(s,h):this.startWait(s,h,f);break}}}catch(e){_={error:e}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(_)throw _.error}}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}},CepRule.prototype.startWait=function(e,t,_){var r=this;try{this.waitArray.get(e)||this.waitArray.set(e,new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()));var n=this.waitArray.get(e);if(!n.get(t)){var i=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){var n=r.stateArray.get(e).patternState,i=n.get(t);if("NOT_FOLLOWED_BY"===i.connection)!i.isMatch&&n.get(i.after).isMatch||i.matchTime-n.get(i.after).matchTime>_.window?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([n.get(i.after).event],e,t)):r.reset(e,t);else if("FOLLOWED_BY"===i.connection){var a;i.isMatch&&n.get(i.after).isMatch?((a=r.waitArray.get(e).get(t)).triggerWait=!0,r.waitArray.set(e,r.waitArray.get(e).set(t,a)),r.publish([n.get(i.after).event],e,t)):r.reset(e,t)}}),_.window);n.set(t,{waitFn:i,triggerWait:!1}),this.waitArray.set(e,n)}}catch(e){}},CepRule.prototype.rule=function(e,t,_,r){var n=this;try{var i=_.event,a=_.params;if(a=JSON.parse(a),-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(moreOP).call(moreOP,r.op)){if(r.conditions&&r.conditions.length){var s=r.conditions,o=0,c=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default());c.set(o,{op:r.op,result:void 0,resultList:[],resultKey:[],resultLength:s.length}),function _(r,s){for(var l=0;l<r.length;l++)if(o++,-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(moreOP).call(moreOP,r[l].op)&&r[l].hasOwnProperty("conditions"))c.set(o,{op:r[l].op,result:void 0,fatherKey:s,resultList:[],resultKey:[],resultLength:r[l].conditions.length}),_(r[l].conditions,o);else{var u=n.scope(r[l].key),d=u.scope,h=u.key,f=u.key2,p=d?"header"===d?f?JSON.parse(e[f])[h]:e[h]:"user"===d?t[h]:a[h]:i,g=n.calculate(r[l].op,p,r[l].value);c.set(o,{op:r[l].op,result:g,fatherKey:s})}}(s,o);for(var l=c.get(0);void 0===l.result||l.resultList.length<l.resultLength;)_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(c).call(c,(function(e,t){if(void 0!==e.result&&void 0!==e.fatherKey){var _,r=c.get(e.fatherKey);r.resultList.length<r.resultLength&&-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_=r.resultKey).call(_,t)&&(r.resultKey.push(t),r.resultList.push(e.result),c.set(e.fatherKey,r))}})),_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(c).call(c,(function(e){var t,_;e.resultList&&e.resultList.length===e.resultLength&&("and"===e.op&&(e.result=-1===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(t=e.resultList).call(t,!1)),"or"===e.op&&(e.result=-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_=e.resultList).call(_,!0)))}));return c.get(0).result}return!1}var u=this.scope(r.key),d=u.scope,h=u.key,f=u.key2,p=d?"header"===d?f?JSON.parse(e[f])[h]:e[h]:"user"===d?t[h]:a[h]:i;return this.calculate(r.op,p,r.value)}catch(e){return!1}},CepRule.prototype.publish=function(e,t,_){try{var r=this.configManager.get().user,n={biz_id:this.stateArray.get(t).pattern.biz_id,plan_id:t,uid:r.user_id||"",did:r.device_id||"",uuid:r.user_unique_id,events:e,extra:{url:window.location.href}};this.collect.emit("__cep_match",n),(window.opener||window.parent).postMessage({type:"__cep_match",data:n},"*"),this.event("__cep_trigger_sdk",t),this.addQuotas(t),this.reset(t,_)}catch(e){return}},CepRule.prototype.addQuotas=function(e){var t=this.stateArray.get(e).quotas;if(t&&t.length){var _=this.storage.getItem(this.quotasKey)||{};_[e]||(_[e]={value:0,lastTime:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()});var r=_[e].value;0===r&&(_[e].lastTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()),_[e].value=r+1,this.storage.setItem(this.quotasKey,_)}},CepRule.prototype.checkQuotas=function(e){var t=this.stateArray.get(e).quotas,_=this.storage.getItem(this.quotasKey)||{};if(_[e]||(_[e]={value:0,lastTime:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()}),t&&t.length){var r=t[0].granularity,n=t[0].value;if("per_keyid"!==t[0].type)return!0;var i=this.release(r);return"all"===i?!(_[e].value>=n):_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()-_[e].lastTime>=i?(_[e].value=0,_[e].lastTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),this.storage.setItem(this.quotasKey,_),!0):!(_[e].value>=n)}return!0},CepRule.prototype.clearQuotas=function(){this.storage.setItem(this.quotasKey,null)},CepRule.prototype.release=function(e){if("all"===e)return e;var t=dayjs_min.duration(e);return t?t.asMilliseconds():"all"},CepRule.prototype.reset=function(e,t){var _,r=this.stateArray.get(e);if(r.singleRule){var n=r.patternState.get(t);n.isMatch=!1,n.event=null,n.matchTime=0,n.initTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()(),r.patternState.set(t,n)}else _babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(_=r.patternState).call(_,(function(e){e.isMatch=!1,e.event=null,e.matchTime=0,e.initTime=_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()}));this.stateArray.set(e,r);var i=this.waitArray.get(e);i&&i.get(t)&&(clearTimeout(i.get(t).waitFn),i.delete(t))},CepRule.prototype.event=function(e,t){try{var _={event:e,params:_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({plan_id:t||"",biz_id:this.stateArray.get(t).pattern.biz_id}),local_time_ms:_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()()},r=this.configManager.get(),n=r.header,i=r.user;n.custom=_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()(n.custom);var a={events:[_],user:i,header:n};this.fetch(this.reportUrl,[a])}catch(e){return}},CepRule.prototype.scope=function(e){var t="",_="";if(_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(e).call(e,".")>-1){var r=e.split(".");t=r[0],e=r[1],"header"===t&&"custom"===e&&(e=r[2],_=r[1])}return{scope:t,key:e,key2:_}},CepRule.prototype.calculate=function(op,paramA,paramB){try{var _context78,_context79,_context80,_context81;if("="===op)return paramA===paramB;if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context78=["=","<",">",">=","<=","!="]).call(_context78,op))return eval(""+paramA+op+paramB);if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context79=["in","contains"]).call(_context79,op))return-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(paramB).call(paramB,paramA);if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context80=["is not null","is null"]).call(_context80,op))return"is null"===op?null==paramA:null!=paramA;if(-1!==_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(_context81=["startswith","endswith"]).call(_context81,op)){if("startswith"===op)return 0===_babel_runtime_corejs3_core_js_instance_index_of__WEBPACK_IMPORTED_MODULE_2___default()(paramA).call(paramA,paramB);var start=paramA.length-paramB.length,str=paramA.substr(start,paramB.length);return str===paramB}}catch(e){return!1}},CepRule}(),getLogPluginSpace=function(){return"undefined"!=typeof window?(window.LogPluginObject||(window.LogPluginObject={}),window.LogPluginObject):null},pluginObject=getLogPluginSpace(),PluginExtend=function(){function e(){}return e.prototype.apply=function(e,t){this._plugin={},this.config=t,this.collect=e,this.channel=t.channel||"cn",this.loadExtend()},e.prototype.loadExtend=function(){var e=this;try{var t;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=this.collect.remotePlugin).call(t,(function(t,_){if("sdk"===t){if(pluginExtendList.hasOwnProperty(_)){var r=pluginExtendList[_].object,n=pluginExtendList[_].src[e.channel]+"?query="+_babel_runtime_corejs3_core_js_date_now__WEBPACK_IMPORTED_MODULE_10___default()();e.exist(_,r,n)}}else"object"==(0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(t)&&(t.src?e.exist(_,t.call,t.src):e.process(_,t.instance,"INSTANCE"))}))}catch(e){}},e.prototype.exist=function(e,t,_){var r=this;pluginObject[t]?this.process(e,pluginObject[t]):this.loadPlugin(e,_,(function(){r.process(e,pluginObject[t])}),(function(){}))},e.prototype.process=function(e,t,_){try{if(_){var r=new t;r.apply&&r.apply(this.collect,this.config)}else t&&t(this.collect,this.config)}catch(t){}},e.prototype.loadPlugin=function(e,t,_,r){var n=this;try{var i=document.createElement("script");i.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(_),i.onerror=function(){r(t)},i.onload=function(){var t;_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(t=n._plugin[e]).call(t,(function(e){e()}))},document.getElementsByTagName("head")[0].appendChild(i)}catch(e){}},e}(),Verify=function(){function e(){this.verifyReady=!1,this.waitTime=5e3,this.cleanStatus=!1}return e.prototype.apply=function(e,t){var _=this;this.collector=e,this.config=t;var r=e.adapters.storage;this.cacheStorgae=new r(!1,"session"),this.eventStorage=[],this.collector.on("submit-verify",(function(e){e&&e.length&&_.eventStore(e[0])})),this.checkCache()},e.prototype.checkCache=function(){var e=this;this.verifyCookieKey="__applog_verify_set_"+this.config.app_id,this.cacheStorgae.getCookie(this.verifyCookieKey);var t=this.cacheStorgae.getItem(this.verifyCookieKey);this.sign=t&&t.sign||"",this.origin=t&&t.origin||"*";var _=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){e.cleanVerify(),clearTimeout(_),e.collector.off("submit-verify")}),this.waitTime);window.addEventListener("message",(function(t){t&&t.data&&"simulator:verify"===t.data.type&&(clearTimeout(_),e.receMessage(t))}),!0)},e.prototype.receMessage=function(e){if(!this.cleanStatus){var t=e.data;this.verifyReady=!0,this.sign=t.sign,this.origin=e.origin,this.cacheStorgae.setItem(this.verifyCookieKey,_babel_runtime_corejs3_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_16___default()({sign:t.sign,origin:e.origin})),this.eventStorage.length&&this.postVerify(this.eventStorage,t.sign,e.origin)}},e.prototype.eventStore=function(e){this.cleanStatus||(this.verifyReady?this.postVerify(e,this.sign,this.origin):this.eventStorage.push(e))},e.prototype.cleanVerify=function(){this.cleanStatus=!0,this.eventStorage=[]},e.prototype.postVerify=function(e,t,_){try{var r=[];isArray(e)?_babel_runtime_corejs3_core_js_instance_for_each__WEBPACK_IMPORTED_MODULE_8___default()(e).call(e,(function(e){r.push(e)})):r.push(e);var n={type:"simulator:verify:event",sign:t,pageUrl:window.location.href,events:r};(window.opener||window.parent).postMessage(n,_)}catch(e){}},e}(),RuotePage=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={}}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var _=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.fncArray=new(_babel_runtime_corejs3_core_js_map__WEBPACK_IMPORTED_MODULE_23___default()),this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(_.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:location.href,refer_title:document.title||location.pathname,refer_manual_key:""},this.config.autotrack&&"object"==(0,_babel_runtime_corejs3_helpers_typeof__WEBPACK_IMPORTED_MODULE_0__.Z)(this.config.autotrack)&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(this.cache_key,this.cache)},e.prototype.hack=function(){var e=this,t=window.history.pushState;history.pushState=function(_){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];"function"==typeof history.onpushstate&&history.onpushstate({state:_});var i=t.call.apply(t,__spread([history,_],r)),a=e.getPopStateChangeEventData();return e.lastLocation=stringify(location.href,r[1]),e.sendPv(a,"pushState"),i};var _=history.replaceState;history.replaceState=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];"function"==typeof history.onreplacestate&&history.onreplacestate({state:t});var i=_.call.apply(_,__spread([history,t],r)),a=e.getPopStateChangeEventData();return e.lastLocation=stringify(location.href,r[1]),e.sendPv(a),i}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",(function(_){e.lastLocation!==window.location.href&&clearTimeout(t)})),window.addEventListener("popstate",(function(_){e.lastLocation!==window.location.href&&(t=_babel_runtime_corejs3_core_js_set_timeout__WEBPACK_IMPORTED_MODULE_13___default()((function(){e.lastLocation=window.location.href;var t=e.getPopStateChangeEventData();e.sendPv(t)}),10))}))},e.prototype.getPopStateChangeEventData=function(){var e=this.pageConfig();return e.is_back=0,e},e.prototype.pageConfig=function(){try{var e,t="",_=this.storage.getItem(this.cache_key)||{};return t=document.referrer?document.referrer:_&&_.refer_key||"",e=!this.storage.getItem("__tea_cache_first_"+this.appid),{is_html:1,url:location.href,referrer:t,page_key:location.href,refer_page_key:t,page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:_&&_.refer_manual_key||"",refer_page_title:_&&_.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+e}}catch(t){return{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e}();Collector.usePlugin(PluginExtend,"extend"),Collector.usePlugin(Ab,"ab"),Collector.usePlugin(Stay,"stay"),Collector.usePlugin(AutoTrack,"autotrack"),Collector.usePlugin(Verify,"verify"),Collector.usePlugin(Et,"et"),Collector.usePlugin(Profile,"profile"),Collector.usePlugin(CepRule,"cep"),Collector.usePlugin(HeartBeat,"heartbeat"),Collector.usePlugin(Monitor,"monitor"),Collector.usePlugin(RuotePage,"route"),Collector.usePlugin(Tracer,"tracer");var Tea=new Collector("default"),Collector$1=Collector;__webpack_exports__.Z=Tea},8328:function(e,t,_){var r=_(13646),n=_(28198),i=_(27911),a=_(3102),s=_(61877).trim,o=_(56712),c=r.parseInt,l=r.Symbol,u=l&&l.iterator,d=/^[+-]?0x/i,h=i(d.exec),f=8!==c(o+"08")||22!==c(o+"0x16")||u&&!n((function(){c(Object(u))}));e.exports=f?function(e,t){var _=s(a(e));return c(_,t>>>0||(h(d,_)?16:10))}:c},66381:function(e,t,_){var r=_(19179).PROPER,n=_(28198),i=_(56712);e.exports=function(e){return n((function(){return!!i[e]()||"\u200b\x85\u180e"!=="\u200b\x85\u180e"[e]()||r&&i[e].name!==e}))}},15638:function(e,t,_){"use strict";var r=_(21013),n=_(74196);r({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},77794:function(e,t,_){"use strict";var r=_(21013),n=_(27911),i=_(15254).indexOf,a=_(96869),s=n([].indexOf),o=!!s&&1/s([1],1,-0)<0,c=a("indexOf");r({target:"Array",proto:!0,forced:o||!c},{indexOf:function(e){var t=arguments.length>1?arguments[1]:undefined;return o?s(this,e,t)||0:i(this,e,t)}})},91847:function(e,t,_){"use strict";var r=_(21013),n=_(71506).some;r({target:"Array",proto:!0,forced:!_(96869)("some")},{some:function(e){return n(this,e,arguments.length>1?arguments[1]:undefined)}})},40236:function(e,t,_){var r=_(27911),n=_(62392),i=Date.prototype,a="Invalid Date",s="toString",o=r(i.toString),c=r(i.getTime);String(new Date(NaN))!=a&&n(i,s,(function(){var e=c(this);return e==e?o(this):a}))},75984:function(e,t,_){var r=_(66529),n=_(19179).EXISTS,i=_(27911),a=_(33451).f,s=Function.prototype,o=i(s.toString),c=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,l=i(c.exec);r&&!n&&a(s,"name",{configurable:!0,get:function(){try{return l(c,o(this))[1]}catch(e){return""}}})},10749:function(e,t,_){var r=_(21013),n=_(66529),i=_(93216).f;r({target:"Object",stat:!0,forced:Object.defineProperties!==i,sham:!n},{defineProperties:i})},38762:function(e,t,_){var r=_(21013),n=_(66529),i=_(33451).f;r({target:"Object",stat:!0,forced:Object.defineProperty!==i,sham:!n},{defineProperty:i})},28722:function(e,t,_){var r=_(21013),n=_(99186);r({global:!0,forced:parseFloat!=n},{parseFloat:n})},96963:function(e,t,_){var r=_(21013),n=_(8328);r({global:!0,forced:parseInt!=n},{parseInt:n})},33554:function(e,t,_){var r=_(66529),n=_(13646),i=_(27911),a=_(68389),s=_(77904),o=_(95704),c=_(33451).f,l=_(66428).f,u=_(5311),d=_(32405),h=_(3102),f=_(76412),p=_(23880),g=_(62392),m=_(28198),b=_(23670),v=_(15879).enforce,y=_(17224),E=_(423),O=_(90545),P=_(2516),M=E("match"),D=n.RegExp,T=D.prototype,j=n.SyntaxError,w=i(f),C=i(T.exec),I=i("".charAt),L=i("".replace),k=i("".indexOf),A=i("".slice),S=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,R=/a/g,B=/a/g,U=new D(R)!==R,W=p.MISSED_STICKY,K=p.UNSUPPORTED_Y,x=r&&(!U||W||O||P||m((function(){return B[M]=!1,D(R)!=R||D(B)==B||"/a/i"!=D(R,"i")})));if(a("RegExp",x)){for(var $=function(e,t){var _,r,n,i,a,c,l=u(T,this),f=d(e),p=t===undefined,g=[],m=e;if(!l&&f&&p&&e.constructor===$)return e;if((f||u(T,e))&&(e=e.source,p&&(t="flags"in m?m.flags:w(m))),e=e===undefined?"":h(e),t=t===undefined?"":h(t),m=e,O&&"dotAll"in R&&(r=!!t&&k(t,"s")>-1)&&(t=L(t,/s/g,"")),_=t,W&&"sticky"in R&&(n=!!t&&k(t,"y")>-1)&&K&&(t=L(t,/y/g,"")),P&&(i=function(e){for(var t,_=e.length,r=0,n="",i=[],a={},s=!1,o=!1,c=0,l="";r<=_;r++){if("\\"===(t=I(e,r)))t+=I(e,++r);else if("]"===t)s=!1;else if(!s)switch(!0){case"["===t:s=!0;break;case"("===t:C(S,A(e,r+1))&&(r+=2,o=!0),n+=t,c++;continue;case">"===t&&o:if(""===l||b(a,l))throw new j("Invalid capture group name");a[l]=!0,i[i.length]=[l,c],o=!1,l="";continue}o?l+=t:n+=t}return[n,i]}(e),e=i[0],g=i[1]),a=s(D(e,t),l?this:T,$),(r||n||g.length)&&(c=v(a),r&&(c.dotAll=!0,c.raw=$(function(e){for(var t,_=e.length,r=0,n="",i=!1;r<=_;r++)"\\"!==(t=I(e,r))?i||"."!==t?("["===t?i=!0:"]"===t&&(i=!1),n+=t):n+="[\\s\\S]":n+=t+I(e,++r);return n}(e),_)),n&&(c.sticky=!0),g.length&&(c.groups=g)),e!==m)try{o(a,"source",""===m?"(?:)":m)}catch(y){}return a},V=function(e){e in $||c($,e,{configurable:!0,get:function(){return D[e]},set:function(t){D[e]=t}})},z=l(D),N=0;z.length>N;)V(z[N++]);T.constructor=$,$.prototype=T,g(n,"RegExp",$)}y("RegExp")},70676:function(e,t,_){"use strict";var r=_(27911),n=_(19179).PROPER,i=_(62392),a=_(76470),s=_(5311),o=_(3102),c=_(28198),l=_(76412),u="toString",d=RegExp.prototype,h=d.toString,f=r(l),p=c((function(){return"/a/b"!=h.call({source:"a",flags:"b"})})),g=n&&h.name!=u;(p||g)&&i(RegExp.prototype,u,(function(){var e=a(this),t=o(e.source),_=e.flags;return"/"+t+"/"+o(_===undefined&&s(d,e)&&!("flags"in d)?f(e):_)}),{unsafe:!0})},86301:function(e,t,_){"use strict";var r=_(32806),n=_(35135),i=_(76470),a=_(59177),s=_(3102),o=_(71531),c=_(16867),l=_(18288),u=_(40187);n("match",(function(e,t,_){return[function(t){var _=o(this),n=t==undefined?undefined:c(t,e);return n?r(n,t,_):new RegExp(t)[e](s(_))},function(e){var r=i(this),n=s(e),o=_(t,r,n);if(o.done)return o.value;if(!r.global)return u(r,n);var c=r.unicode;r.lastIndex=0;for(var d,h=[],f=0;null!==(d=u(r,n));){var p=s(d[0]);h[f]=p,""===p&&(r.lastIndex=l(n,a(r.lastIndex),c)),f++}return 0===f?null:h}]}))},29657:function(e,t,_){"use strict";var r=_(21013),n=_(61877).trim;r({target:"String",proto:!0,forced:_(66381)("trim")},{trim:function(){return n(this)}})},2718:function(e,t,_){"use strict";var r=_(21013),n=_(66529),i=_(13646),a=_(27911),s=_(23670),o=_(85540),c=_(5311),l=_(3102),u=_(33451).f,d=_(28479),h=i.Symbol,f=h&&h.prototype;if(n&&o(h)&&(!("description"in f)||h().description!==undefined)){var p={},g=function(){var e=arguments.length<1||arguments[0]===undefined?undefined:l(arguments[0]),t=c(f,this)?new h(e):e===undefined?h():h(e);return""===e&&(p[t]=!0),t};d(g,h),g.prototype=f,f.constructor=g;var m="Symbol(test)"==String(h("test")),b=a(f.toString),v=a(f.valueOf),y=/^Symbol\((.*)\)[^)]+$/,E=a("".replace),O=a("".slice);u(f,"description",{configurable:!0,get:function(){var e=v(this),t=b(e);if(s(p,e))return"";var _=m?O(t,7,-1):E(t,y,"$1");return""===_?undefined:_}}),r({global:!0,forced:!0},{Symbol:g})}},89862:function(e,t,_){var r=_(21013),n=_(13646),i=_(89349),a=_(85540),s=_(7073),o=_(94858),c=_(91619),l=/MSIE .\./.test(s),u=n.Function,d=function(e){return function(t,_){var r=c(arguments.length,1)>2,n=a(t)?t:u(t),s=r?o(arguments,2):undefined;return e(r?function(){i(n,this,s)}:n,_)}};r({global:!0,bind:!0,forced:l},{setTimeout:d(n.setTimeout),setInterval:d(n.setInterval)})},2749:function(e,t,_){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}_.d(t,{Z:function(){return r}})},3515:function(e,t,_){"use strict";_.d(t,{Z:function(){return i}});var r=_(84713);function n(e,t){for(var _=0;_<t.length;_++){var n=t[_];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),r(e,n.key,n)}}function i(e,t,_){return t&&n(e.prototype,t),_&&n(e,_),r(e,"prototype",{writable:!1}),e}},9889:function(e,t,_){"use strict";_.d(t,{Z:function(){return n}});var r=_(84713);function n(e,t,_){return t in e?r(e,t,{value:_,enumerable:!0,configurable:!0,writable:!0}):e[t]=_,e}},8910:function(e,t,_){"use strict";_.d(t,{Z:function(){return i}});var r=_(17419),n=_(94791);function i(e){return i="function"==typeof r&&"symbol"==typeof n?function(e){return typeof e}:function(e){return e&&"function"==typeof r&&e.constructor===r&&e!==r.prototype?"symbol":typeof e},i(e)}}}]);