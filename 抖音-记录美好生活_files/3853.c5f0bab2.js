"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[3853],{19275:function(e,t,n){n.d(t,{n:function(){return p}});var i=n(29588),o=n(21528),a={avatarContainer:"QecmPpxX",isFirstLive:"JgxT_z8s",avatarBorder:"X0v0tibw",avatarBorderAnimation:"huP9OS34","first-live-cover-border-scale-animation":"xyb6OqsT",firstLiveCoverBorderScaleAnimation:"xyb6OqsT","cover-border-scale-animation":"aKbSlHZH",coverBorderScaleAnimation:"aKbSlHZH",avatar:"RUVTDzAp","cover-animation":"sBNZrvc_",coverAnimation:"sBNZrvc_",liveTag:"LrQqtaiB",liveTagText:"w4SksZun",small:"TrKWAgc9",liveTagInner:"XQ9v_nAP",liveTagInnerImg:"LkrPIgdh",large:"nGtv725p"},l=n(70335),r=n.n(l),u=n(70675),c=n(75203),s=n(55610),d=n(42750),v=n(73377),f=n(57674),m=new(n(74269).hD)({livesdkLiveShow:{eventName:"livesdk_live_show",params:{enter_from_merge:"",enter_method:"web_video_head",action_type:"",request_id:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:"",anchor_id:"",room_id:""}},livesdkRecLivePlay:{eventName:"livesdk_rec_live_play",params:{anchor_id:"",room_id:"",enter_from_merge:"",enter_method:"web_video_head",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",action_type:"click",request_id:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:""}}});function p(e){var t,n=e.type,l=void 0===n?"normal":n,p=e.src,g=e.alt,h=void 0===g?"":g,_=e.uid,y=void 0===_?"":_,w=e.liveRoomUrl,k=e.isNeedSeoOpt,E=void 0!==k&&k,b=e.isNeedSendLog,x=void 0!==b&&b,S=e.liveRoomParam,C=void 0===S?{logId:""}:S,I=e.isShow,L=void 0===I||I,N=e.isFirstLive,P=void 0!==N&&N,T=e.onClick,Z=void 0===T?function(){}:T,R=(0,o.useMemo)((function(){return"String"!==d.tQ(w)?null:v.D(w.split("?",2)[1])}),[w]),D=(0,o.useRef)(!1),A=(0,o.useRef)(null),M=(0,o.useCallback)((function(){Z(),x&&function(){var e,t,n,i,o,a,l=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",r=arguments.length>1?arguments[1]:undefined,u=arguments.length>2?arguments[2]:undefined;if(r){var c=null==u?void 0:u.episodeExtra;m.sendLog("livesdkRecLivePlay",{enter_from_merge:r.enter_from_merge,enter_method:"web_video_head",anchor_id:l,room_id:r.room_id,live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname,request_id:null!==(e=null==u?void 0:u.logId)&&void 0!==e?e:"",is_vs:c?1:0,vs_episode_id:c?null==u||null===(t=u.episodeExtra)||void 0===t?void 0:t.episode_id_str:"",vs_ep_group_id:c?null==u||null===(n=u.episodeExtra)||void 0===n?void 0:n.item_id:"",vs_season_id:c?null==u||null===(i=u.episodeExtra)||void 0===i?void 0:i.season_id_str:"",vs_episode_stage:c?(null==u||null===(o=u.episodeExtra)||void 0===o||null===(a=o.mod)||void 0===a?void 0:a.episode_stage)===f.W.FirstLive?"premiere":"live":""})}}(y,R,C)}),[x,Z,y,R,C]);return(0,o.useEffect)((function(){if(R&&null!=C&&C.logId&&!D.current&&L){var e,t,n,i,o,a=null==C?void 0:C.episodeExtra;m.sendLog("livesdkLiveShow",{anchor_id:y,room_id:R.room_id,action_type:R.action_type,enter_from_merge:R.enter_from_merge,enter_method:R.enter_method,request_id:null==C?void 0:C.logId,is_vs:a?1:0,vs_episode_id:a?null==C||null===(e=C.episodeExtra)||void 0===e?void 0:e.episode_id_str:"",vs_ep_group_id:a?null==C||null===(t=C.episodeExtra)||void 0===t?void 0:t.item_id:"",vs_season_id:a?null==C||null===(n=C.episodeExtra)||void 0===n?void 0:n.season_id_str:"",vs_episode_stage:a?(null==C||null===(i=C.episodeExtra)||void 0===i||null===(o=i.mod)||void 0===o?void 0:o.episode_stage)===f.W.FirstLive?"premiere":"live":""}),D.current=!0}}),[C,L]),o.createElement(u.a,{href:w,isNeedSeoOpt:E,target:"_blank",refEl:A,rel:"noopener noreferrer",className:r()(a.Streamline),onClick:M},o.createElement("div",{className:r()(a.avatarContainer,(t={},(0,i.Z)(t,a.isFirstLive,P),(0,i.Z)(t,a.small,"small"===l),(0,i.Z)(t,a.large,"large"===l),t))},o.createElement("img",{className:a.avatar,src:p,alt:h}),o.createElement("div",{className:a.avatarBorder}),o.createElement("div",{className:r()(a.avatarBorder,a.avatarBorderAnimation)}),"small"!==l?o.createElement("div",{className:a.liveTag},o.createElement("span",{className:a.liveTagText},P?"\u9996\u64ad\u4e2d":"\u76f4\u64ad\u4e2d")):o.createElement("div",{className:a.liveTagInner},o.createElement("img",{className:a.liveTagInnerImg,src:P?s:c,alt:"LiveIcon"}))))}},3616:function(e,t,n){n.d(t,{W:function(){return N}});var i=n(29588),o=n(85891),a=n(54882),l=n.n(a),r=n(78650),u=n.n(r),c=n(33485),s=n.n(c),d=n(21528),v=n(70335),f=n.n(v),m=n(77060),p="XdA7gYwN",g="pV829ilP",h="F2sKzRCp",_="E4fCwo4q",y="tKinFfr9",w="qhR5rzA1",k=n(94344),E=n(43514),b=n(42750),x=null,S=!1;function C(e){var t=e.text,n=e.style;function i(){return(i=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.J(x.innerText),k.F.info({text:"\u5df2\u590d\u5236",duration:1e3});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return d.createElement("div",{className:g,style:{height:n.height,width:n.width},onDoubleClick:function(){return i.apply(this,arguments)}},t)}function I(e,t,n){if("String"!==b.tQ(e))return"";var i=e.split("\r\n");if(t){var o,a=l()(o="\u64ad\u653e\u5206\u8fa8\u7387: ".concat(t.height,",")).call(o,t.width);u()(i).call(i,2,0,a)}if(n){var r="\u64ad\u653e\u6863\u4f4d: ".concat(n);u()(i).call(i,2,0,r)}return i.join("\r\n")}function L(e){var t=e.name,n=e.text,i=e.showPanelRightside;return d.createElement("div",{className:_,onClick:function(e){S?(x.style="display: none;",S=!1):(!function(e,t){if(x){var n,i=l()(n="top:".concat(t.top,"px; left:")).call(n,t.left,"px;");0===t.right&&(i="top:".concat(t.top,"px; right:0px;")),x.style=i}else{var o,a=l()(o="top:".concat(t.top,"px; left:")).call(o,t.left,"px;");0===t.right&&(a="top:".concat(t.top,"px; right:0px;")),(x=document.createElement("div")).className=p,x.id="panelContainer",x.style=a,document.body.appendChild(x)}m.render(d.createElement(C,{text:e,style:t}),x)}(n,function(e,t){var n={width:300,height:600,top:0,left:0,right:""},i=t.target.getBoundingClientRect(),o=document.documentElement.scrollTop,a=document.documentElement.clientWidth;return n.right=i.right+4+300>a?0:"unset",n.top=i.bottom+4+o,n.left=e?i.right+4:i.left-n.width-4,n}(i,e)),S=!0),e.stopPropagation(),e.preventDefault()}},t)}function N(e){var t=e.req,n=void 0===t?null:t,o=e.video,a=e.isLeft,l=void 0===a||a,r=e.showPanelRightside,u=void 0!==r&&r,c=e.size,s=void 0===c?null:c,v=e.gear;return(0,d.useEffect)((function(){return function(){x&&(document.body.removeChild(x),x=null,S=!1)}}),[]),d.createElement("div",{className:f()(h,w,(0,i.Z)({},y,!l))},n&&d.createElement(L,{name:"\u8bf7\u6c42",text:n,showPanelRightside:u}),o&&d.createElement(L,{name:"\u89c6\u9891",text:I(o,s,v),showPanelRightside:u}))}},96466:function(e,t,n){n.d(t,{e:function(){return p},J:function(){return m}});var i,o,a=n(21528),l=n(70335),r=n.n(l),u="ysRqqDJY",c="nWRNiVz7",s="GflTOyWb",d=n(94);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)}var f=function(e){return a.createElement("svg",v({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=a.createElement("path",{d:"M1.455 0C.65 0 0 .651 0 1.455V8c0 .803.651 1.455 1.455 1.455H8c.803 0 1.455-.652 1.455-1.455V1.455C9.455.65 8.803 0 8 0H1.455z",fill:"#fff"})),o||(o=a.createElement("path",{d:"M4 12a1.455 1.455 0 01-1.455-1.454h5.819a2.182 2.182 0 002.181-2.182V2.545C11.35 2.545 12 3.197 12 4v5.09A2.909 2.909 0 019.09 12H4z",fill:"#fff"})))},m=function(e){var t=e.className,n=void 0===t?"":t,i=e.svgClassName,o=void 0===i?"":i;return a.createElement("div",{className:r()(u,n)},a.createElement(d.Z,{className:r()(c,o),src:f,width:12,height:12,viewBox:"0 0 12 12"}),"\u56fe\u6587")},p=function(e){var t=e.className,n=void 0===t?"":t;return a.createElement("div",{className:r()(s,n)},a.createElement(d.Z,{src:f,width:12,height:12,viewBox:"0 0 12 12"}))}},91479:function(e,t,n){n.d(t,{Q:function(){return E}});var i=n(41257),o=n(68671),a=n(29588),l=n(11789),r=n(2193),u=n(11235),c=n.n(u),s=n(21528),d="Z6bzLUc0",v="diDKTH8Q",f="C0BsJO3C",m="DJOgq4kE",p="hAnPHcWL",g="LdcTss5O",h=n(70335),_=n.n(h),y=n(12098),w=n(94),k=["src","className","iconWidth","iconHeight","iconColor","iconStyle","withBlurBg","onHandleImgLoad","imgClass","skeletonStyle","skeletonClass","isPreviewing","isSpider","showImageInSSR","renderDefault","useMonitor"];function E(e){var t=e.src,n=e.className,u=e.iconWidth,h=void 0===u?105:u,E=e.iconHeight,b=void 0===E?120:E,x=e.iconColor,S=void 0===x?"rgba(169, 170, 183, 1)":x,C=e.iconStyle,I=e.withBlurBg,L=void 0!==I&&I,N=e.onHandleImgLoad,P=e.imgClass,T=e.skeletonStyle,Z=e.skeletonClass,R=e.isPreviewing,D=e.isSpider,A=e.showImageInSSR,M=void 0!==A&&A,B=e.renderDefault,F=(e.useMonitor,(0,r.Z)(e,k)),O=(0,s.useState)(0),V=(0,l.Z)(O,2),U=V[0],H=V[1],W=(0,s.useRef)(!1),z=function(){W.current||(N&&N(),W.current=!0)},q=(0,s.useCallback)((function(){H(1),z()}),[]),K=(0,s.useCallback)((function(){z(),H(0)}),[]);(0,s.useEffect)((function(){var e,n,i=!1;return t?((e=new Image).onload=function(){i||(i=!0,q(),e=null)},e.onerror=function(){i||(K(),i=!0)},n=c()((function(){i||(i=!0,K())}),3e3),e.src=t):H(0),function(){e&&(e.onload=undefined,e.onerror=undefined,clearTimeout(n))}}),[t]);var G=D||M||1===U;return s.createElement("div",{className:_()(d,n,(0,a.Z)({},v,!G))},L&&G&&s.createElement(s.Fragment,null,s.createElement("div",{className:f,style:{backgroundImage:"url(".concat(t,")")}}),s.createElement("div",{className:f,style:{backgroundImage:"url(".concat(t,")")}}),s.createElement("div",{className:m})),s.createElement("img",(0,o.Z)({src:t},F,{className:_()(P,(0,a.Z)({},g,R)),onLoad:q,onError:K})),!G&&(B||s.createElement("div",{style:T,className:_()(p,Z,(0,a.Z)({},g,R))},s.createElement(w.Z,{style:(0,i.Z)({width:h,height:b},C),src:y.Z,viewBox:"0 0 105 120",color:S}))))}},89570:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var i=n(11789),o=n(74357),a=n.n(o),l=n(21528),r=l.forwardRef((function(e,t){var n=e.data,o=e.className,r=e.loop,u=e.autoplay,c=void 0===u||u,s=e.onLoopComplete,d=e.onComplete,v=e.onInit,f=e.hidden,m=e.rendererSettings,p=e.assetsPath,g=l.useRef(),h=l.useRef(),_=l.useState(!1),y=(0,i.Z)(_,2),w=y[0],k=y[1];return l.useEffect((function(){return h.current&&w&&d?(h.current.addEventListener("complete",d),function(){h.current.removeEventListener("complete",d)}):undefined}),[w,d]),l.useEffect((function(){return h.current&&w&&s?(h.current.addEventListener("loopComplete",s),function(){h.current.removeEventListener("loopComplete",s)}):undefined}),[w,s]),l.useEffect((function(){var e;return h.current&&w&&v?(null===(e=h.current)||void 0===e||e.addEventListener("DOMLoaded",v),function(){var e;null===(e=h.current)||void 0===e||e.removeEventListener("DOMLoaded",v)}):undefined}),[w,v]),l.useEffect((function(){var e;g.current&&a()&&(h.current=null===a()||void 0===a()||null===(e=a().loadAnimation)||void 0===e?void 0:e.call(a(),{container:g.current,renderer:"svg",animationData:n,loop:r,autoplay:c,rendererSettings:m,assetsPath:p}),k(!0));return function(){var e,t;null===(e=h.current)||void 0===e||null===(t=e.destroy)||void 0===t||t.call(e)}}),[]),l.useImperativeHandle(t,(function(){return{getLottieInstance:function(){return h.current}}})),l.createElement("div",{hidden:f,ref:g,className:o})})),u=l.memo(r)},70333:function(e,t,n){n.d(t,{Le:function(){return i},Yv:function(){return r},no:function(){return l}});var i,o=n(23947),a=n.n(o);!function(e){e.AwemeRelated="aweme_related_card",e.Related="related_card",e.Music="music_card",e.Topic="tag_card",e.Mix="compilation_card",e.Author="author_card",e.Comment="comment",e.Hot="hot_card",e.Handpick="handpick_card",e.Search="search_card",e.History="history_card",e.Like="like_card",e.Collection="collection_card",e.CollectFolder="collection_folder_card"}(i||(i={}));var l,r=new(a())([[i.Related,"\u76f8\u5173\u63a8\u8350"],[i.AwemeRelated,"\u76f8\u5173\u63a8\u8350"],[i.Music,"\u97f3\u4e50"],[i.Topic,"\u8bdd\u9898"],[i.Mix,"\u5408\u96c6"],[i.Comment,"\u8bc4\u8bba"],[i.Hot,"\u70ed\u70b9"],[i.Author,"TA\u7684\u4f5c\u54c1"],[i.Handpick,"\u7f16\u8f91\u7cbe\u9009"],[i.Search,"\u641c\u7d22\u7ed3\u679c"],[i.History,"\u5386\u53f2\u8bb0\u5f55"],[i.Like,"TA\u7684\u559c\u6b22"],[i.Collection,"TA\u7684\u6536\u85cf"],[i.CollectFolder,"\u6536\u85cf\u5939"]]);!function(e){e[e.Default=0]="Default",e[e.MergeAuthor=1]="MergeAuthor",e[e.Round=2]="Round",e[e.MergeAll=3]="MergeAll",e[e.NewMergeAll=4]="NewMergeAll"}(l||(l={}))},55042:function(e,t,n){n.d(t,{yw:function(){return k},vA:function(){return E}});var i=n(68671),o=n(41257),a=n(11789),l=n(21528),r=n(70335),u=n.n(r),c=n(88263),s=n(73824),d=n(53549),v=n(86358),f=n(21144),m=n(66870),p=n(65079),g=n(36626),h=n(98821),_=(0,h.default)({resolved:{},chunkName:function(){return"ImEntry"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return Promise.all([n.e(1937),n.e(8435),n.e(4553),n.e(7648),n.e(5806),n.e(8747),n.e(9785),n.e(9761),n.e(6780)]).then(n.bind(n,29061))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var i=this.resolve(t);return n(i)},resolve:function e(){return 29061}},{ssr:!1}),y=(0,h.default)({resolved:{},chunkName:function(){return"ShareContent"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e(5269).then(n.bind(n,6637))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var i=this.resolve(t);return n(i)},resolve:function e(){return 6637}},{ssr:!1}),w=(0,h.default)({resolved:{},chunkName:function(){return"ShareContent"},isReady:function(e){var t=this.resolve(e);return!0===this.resolved[t]&&!!n.m[t]},importAsync:function(){return n.e(5269).then(n.bind(n,77376))},requireAsync:function(e){var t=this,n=this.resolve(e);return this.resolved[n]=!1,this.importAsync(e).then((function(e){return t.resolved[n]=!0,e}))},requireSync:function e(t){var i=this.resolve(t);return n(i)},resolve:function e(){return 77376}},{ssr:!1}),k,E;!function(e){e.Video="share_video",e.Live="share_live",e.User="share_user",e.Vs="share_vs"}(k||(k={})),function(e){e.VideoPage="VideoPage",e.UserPage="UserPage"}(E||(E={}));var b=function(e){var t=e.className,n=e.awemeInfo,r=e.hidden,h=e.awemelogPb,b=e.isLogin,x=e.handleClose,S=e.toast,C=e.reportExtraParams,I=void 0===C?{}:C,L=e.shareShowMethod,N=e.onMouseEnter,P=e.onMouseLeave,T=(e.handleClickCopy,e.handleChooseFriend),Z=e.handleShareToFriend,R=e.handleShareSuccess,D=e.shareType,A=void 0===D?k.Video:D,M=e.uid,B=e.userInfo,F=e.inanyPage,O=void 0===F?E.VideoPage:F,V=e.loginDispatch,U=(0,l.useState)(!1),H=(0,a.Z)(U,2),W=H[0],z=H[1],q=(0,l.useState)(!1),K=(0,a.Z)(q,2),G=K[0],j=K[1],Y=(0,l.useState)(!1),Q=(0,a.Z)(Y,2),X=Q[0],J=Q[1],$=(0,l.useRef)(null),ee=c,te=ee.EVENT,ne=(0,l.useState)(!r),ie=(0,a.Z)(ne,2),oe=ie[0],ae=ie[1],le=(0,l.useRef)(!r),re=(0,l.useMemo)((function(){return!(G&&!X)&&r}),[r,G,X]);return(0,l.useEffect)((function(){r||J(!1)}),[r]),(0,l.useEffect)((function(){r||(ae(!0),ee.emit(te.videoStopPlayNext)),r&&oe&&ee.emit(te.videoRemoveStopPlayNext),le.current=!r}),[r]),(0,l.useEffect)((function(){return function(){le.current&&ee.emit(te.videoRemoveStopPlayNext)}}),[]),(0,l.useEffect)((function(){var e;!r&&n&&p.Z.sendLog("shareMenuShow",(0,o.Z)({urlParamList:["previous_page"],author_id:null==n||null===(e=n.authorInfo)||void 0===e?void 0:e.uid,group_id:null==n?void 0:n.awemeId,enter_from:s.mo(),log_pb:h,is_full_screen:d.r()?"1":"0",tab_name:v.getTabName()||f.Rs("tab_name")||"",click_method:L,share_type:"video"},I));!r&&B&&p.Z.sendLog("shareMenuShow",{enter_from:s.vM(),share_type:"user",click_method:L}),r||W||z(!0)}),[r,L]),(0,l.useEffect)((function(){var e,t=function(e){return e.stopPropagation()};return null===(e=$.current)||void 0===e||e.addEventListener("wheel",t),function(){var e;null===(e=$.current)||void 0===e||e.removeEventListener("wheel",t)}}),[]),(0,l.useEffect)((function(){n&&(n.logPb=h)}),[n]),(0,l.useEffect)((function(){var e=function(e){var t,n;null!==(t=$.current)&&void 0!==t&&null!==(n=t.contains)&&void 0!==n&&n.call(t,e.target)||G||null==x||x()};return document.addEventListener("click",e,!0),function(){document.removeEventListener("click",e,!0)}}),[G]),l.createElement("div",{ref:$,"data-e2e":n?"video-share-container":"user-share-container"},(null==n?void 0:n.awemeType)===m.ed.XgVideo&&l.createElement("div",{className:u()(t,g.Z.container,g.Z.shareCode,g.Z.defaultContainer),onMouseEnter:function(){return null==N?void 0:N()},onMouseLeave:function(){return null==P?void 0:P()},style:{display:re?"none":"flex"},"data-inuser":O===E.UserPage},(!r||W)&&l.createElement(l.Fragment,null,l.createElement("div",{style:{display:G||X?"none":"block",width:"100%"}},l.createElement(y,(0,i.Z)({},e,{shareType:A})))),b&&(!r||G)&&((null==n?void 0:n.awemeType)!==m.ed.XgVideo||M)&&A!==k.Vs&&l.createElement(_,{toast:S,close:function(){J(!0),j(!1),null==x||x(),c.emit(c.EVENT.videoRemoveStopPlayNext)},awemeInfo:n,shareType:A,shareUserInfo:B,handleExpand:function(){return j(!0)},handleCollapse:function(){j(!1)},handleHasFriends:function(e){},handleChooseFriend:T,handleShareToFriend:Z,handleShareSuccess:R,reportExtraParams:(0,o.Z)((0,o.Z)({},I),{},{from_xigua:(null==n?void 0:n.awemeType)===m.ed.XgVideo?1:0})})),(null==n?void 0:n.awemeType)!==m.ed.XgVideo&&l.createElement("div",{className:u()(t,g.Z.container,g.Z.shareCode,g.Z.columnContainer),onMouseEnter:function(){return null==N?void 0:N()},onMouseLeave:function(){return null==P?void 0:P()},style:{display:re?"none":"flex"},"data-inuser":O===E.UserPage},(!r||G)&&((null==n?void 0:n.awemeType)!==m.ed.XgVideo||M)&&A!==k.Vs&&(b?l.createElement(_,{toast:S,close:function(){J(!0),j(!1),null==x||x(),c.emit(c.EVENT.videoRemoveStopPlayNext)},awemeInfo:n,shareType:A,shareUserInfo:B,handleExpand:function(){return j(!0)},handleCollapse:function(){j(!1)},handleHasFriends:function(e){},handleChooseFriend:T,handleShareToFriend:Z,handleShareSuccess:R,reportExtraParams:(0,o.Z)((0,o.Z)({},I),{},{from_xigua:(null==n?void 0:n.awemeType)===m.ed.XgVideo?1:0})}):l.createElement(w,{change:function(){null==V||V({type:"updateUserInfo"})}})),(!r||W)&&l.createElement(l.Fragment,null,l.createElement("div",{style:{display:G||X?"none":"block",width:"100%"}},l.createElement(y,(0,i.Z)({},e,{shareType:A}))))))};t.ZP=b},65079:function(e,t,n){n.d(t,{h:function(){return o}});var i=n(74269),o="web_code_link";t.Z=new i.hD({shareMenuShow:{eventName:"share_menu_show",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",share_type:""}},shareVideo:{eventName:"share_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",type:"",is_full_screen:"0",click_method:"",tab_name:"",from_follow_list:"0",from_xigua:0,aweme_type:"",personal_relation:"",relation:""}},shareUser:{eventName:"share_user",params:{chat_type:"",type:"",author_id:"",personal_relation:"",relation:""}},clickFavoriteVideo:{eventName:"click_favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:""}},clickCancelFavoriteVideo:{eventName:"click_cancel_favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}},favoriteVideo:{eventName:"favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:"",clarity:"",aweme_type:""}},favoriteVideoFailed:{eventName:"favorite_video_failed",params:{click_from:"share_board",err_code:1,previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}},cancelFavoriteVideo:{eventName:"cancel_favorite_video",params:{click_from:"share_board",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:""}}})},61912:function(e,t,n){n.d(t,{n:function(){return I}});var i=n(68671),o=n(18556),a=n.n(o),l=n(21528),r=n(77060),u=n(73824),c=n(53549),s=n(39338),d=n(94),v=n(57398),f=n(85011),m=[{key:"Z/\u53cc\u51fb\u7a7a\u683c",action:"\u8d5e"},{key:"Z",action:"\u53d6\u6d88\u8d5e"},{key:"X",action:"\u8bc4\u8bba"},{key:"C",action:"\u6536\u85cf/\u53d6\u6d88\u6536\u85cf"},{key:"V",action:"\u590d\u5236\u5206\u4eab\u53e3\u4ee4"},{key:"J",action:"\u6e05\u5c4f"},{key:"K",action:"\u81ea\u52a8\u8fde\u64ad"},{key:"R",action:"\u4e0d\u611f\u5174\u8da3"},{key:"F",action:"\u8fdb\u5165\u4f5c\u8005\u4e3b\u9875"},{key:"G",action:"\u5173\u6ce8/\u53d6\u6d88\u5173\u6ce8"},{key:"Shift+F",action:"\u6296\u97f3\u641c\u7d22"},{key:"Shift+Q",action:"\u4e00\u952e\u5173\u95ed\u5f53\u524d\u9875"},{key:"\u2191\u2193",action:"\u4e0a\u4e0b\u7ffb\u9875"},{key:"\u2190 \u2192",action:"\u5feb\u8fdb\u5feb\u9000"},{key:"\u7a7a\u683c",action:"\u6682\u505c"},{key:"Y",action:"\u7f51\u9875\u5185\u5168\u5c4f"},{key:"H",action:"\u5168\u5c4f"},{key:"Shift + / Shift -",action:"\u97f3\u91cf\u8c03\u6574"},{key:"?",action:"\u547c\u51fa\u5feb\u6377\u952e\u5217\u8868"}],p="IOzHI_Q0",g="_OvPhoA0",h="CF1v8wMa",_="ez9FGvzz",y="exfV7WwB",w="MVFLzT2R",k="pWull77S",E="KlsyUvwu",b="UeCZSLDf",x=new(n(74269).hD)({hotKeyListShow:{eventName:"hot_key_list_show",params:{enter_from:"",click_method:""}},hotKeyListExit:{eventName:"hot_key_list_exit",params:{enter_from:""}}}),S=!1,C=function(e){var t=e.shortcutList,n=e.portalRef,i=e.logParams,o=l.useRef(null),c=l.useCallback((function(){r.unmountComponentAtNode(n),n.remove(),S=!1}),[n]);return l.useEffect((function(){var e=o.current,t=function(e){return e.stopPropagation()};return null==e||e.addEventListener("wheel",t),function(){null==e||e.removeEventListener("wheel",t)}}),[]),l.useEffect((function(){var e=u.yW();return x.sendLog("hotKeyListShow",{enter_from:e,click_method:null==i?void 0:i.clickMethod}),function(){x.sendLog("hotKeyListExit",{enter_from:e})}}),[]),l.createElement(s.T,{className:p,onClick:c},l.createElement("div",{className:g},l.createElement("div",{className:h},"\u5feb\u6377\u952e\u5217\u8868"),l.createElement(d.Z,{className:_,width:36,height:36,src:f.Z,color:"#A9AAB7",onClick:c}),l.createElement(v.i,{className:y}),l.createElement("div",{className:w,ref:o},a()(t).call(t,(function(e){return l.createElement("div",{className:k,key:e.action},l.createElement("span",{className:E},e.action),l.createElement("span",{className:b},e.key))})))))},I=function(e,t){var n,o=document.createElement("div"),a=(e||{}).shortcutList,u=document.body;(c.r()&&(u=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement),t)?(u=t,null==t||t.appendChild(o)):null===(n=u)||void 0===n||n.appendChild(o);if(!S){S=!0;var s=null!=a?a:m;r.render(l.createElement(C,(0,i.Z)({},e,{portalRef:o,shortcutList:s})),o)}}},97921:function(e,t,n){n.d(t,{t6:function(){return i},ZP:function(){return Q},Cv:function(){return Y}});var i,o=n(41257),a=n(29588),l=n(11789),r=n(10441),u=n.n(r),c=n(54882),s=n.n(c),d=n(11235),v=n.n(d),f=n(29493),m=n.n(f),p=n(18556),g=n.n(p),h=n(52708),_=n.n(h),y=n(10396),w=n.n(y),k=n(94344),E=n(30234),b=n(53549),x=n(18653),S=n(88263),C=n(73404),I=n(89086),L=n(70335),N=n.n(L),P=n(21528),T=n(29972),Z=(n(48249),"YwClj8rK"),R="qRePWKBJ",D="OdfU1utT",A="aeP91Vml",M="DKu2Hr2J",B="lBbdu7uk",F="wkw97ps1",O=n(53778),V=n(46227),U=n.n(V),H=n(24514),W=n.n(H),z=n(71574),q=n.n(z),K=n(47999),G=n(94166),j=n(70333),Y=(0,P.createContext)({globalIsCommentShow:!1,setIsCommentShowFunc:undefined,globalIsRelatedShow:!1,setIsRelatedShowFunc:undefined,globalIsSideBarShow:!1,setIsSideBarShowFunc:undefined,setTargetVideoRef:function(){return null},swiper:undefined,isFullScreen:!1,isCssFullScreen:!1,isClientMiniWin:!1,isTransition:!1,fullScreenTarget:null,videoToast:function(e){return k.F.info(e)},slideVideoTab:null===j.Le||void 0===j.Le?void 0:j.Le.Author,setSlideVideoTab:function(){return null}});!function(e){e.OUTSIDE="outside",e.OUTOFCONTAINER="out-of-container",e.INSIDE="inside",e.OCCUPATION="occupation",e.CONTAINERSTART="container-start",e.CONTAINEREND="container-end",e.WRAPPERSTART="wrapper-start",e.WRAPPEREND="wrapper-end"}(i||(i={}));var Q=function(e){var t,n,r,c,d,f,p,h,y=e.className,k=e.swiperClassName,L=e.abTestData,V=void 0===L?{}:L,H=e.cardBetween,z=void 0===H?24:H,Q=e.upperSpace,X=void 0===Q?24:Q,J=e.nextSwiperHeaderHeight,$=void 0===J?30:J,ee=e.children,te=e.onSwiper,ne=e.style,ie=void 0===ne?{}:ne,oe=e.swiperStyle,ae=void 0===oe?{}:oe,le=(e.customProps,e.isDefaultShowSideBar),re=e.customTop,ue=(0,P.useRef)(null),ce=(0,P.useRef)(!1),se=(0,P.useState)(null),de=(0,l.Z)(se,2),ve=de[0],fe=de[1],me=(0,P.useState)(null),pe=(0,l.Z)(me,2),ge=pe[0],he=pe[1],_e=(0,P.useState)(),ye=(0,l.Z)(_e,2),we=ye[0],ke=ye[1],Ee=(0,P.useState)(le),be=(0,l.Z)(Ee,2),xe=be[0],Se=be[1],Ce=(0,P.useState)(),Ie=(0,l.Z)(Ce,2),Le=Ie[0],Ne=Ie[1],Pe=(0,P.useState)(b.r()),Te=(0,l.Z)(Pe,2),Ze=Te[0],Re=Te[1],De=(0,P.useState)(!1),Ae=(0,l.Z)(De,2),Me=Ae[0],Be=Ae[1],Fe=(0,P.useState)(!1),Oe=(0,l.Z)(Fe,2),Ve=Oe[0],Ue=Oe[1],He=(0,P.useState)(!1),We=(0,l.Z)(He,2),ze=We[0],qe=We[1],Ke=(0,P.useState)(!1),Ge=(0,l.Z)(Ke,2),je=Ge[0],Ye=Ge[1],Qe=(0,P.useState)(null===j.Le||void 0===j.Le?void 0:j.Le.Author),Xe=(0,l.Z)(Qe,2),Je=Xe[0],$e=Xe[1],et=(0,P.useRef)("");ue.current=ge;var tt=function(){var e;null===(e=ue.current)||void 0===e||e.update()};(0,P.useEffect)((function(){Se(le)}),[le]),function(e){var t=e.EventListener,n=e.refContainerStatus,i=(e.isCssFullScreen,e.isClientMiniWin),o=(0,P.useRef)(!1),a=(0,P.useRef)(null),l=(0,P.useRef)([]),r=(0,P.useRef)(null),u=(0,P.useRef)(null),c=(0,P.useRef)(K.vU()?120:0),d=(0,P.useCallback)((function(e,t){for(var n=0,i=W()(e).call(e,Math.max(e.length-t,1)),o=0;o<i.length;o++)n+=i[o];return Math.ceil(n/t)}),[]),f=(0,P.useCallback)((function(){S.emit(S.EVENT.swiperVideo)}),[]),m=(0,P.useCallback)((function(e){var n,i;f(),null==e||null===(n=e.preventDefault)||void 0===n||n.call(e),a.current&&clearTimeout(a.current),a.current=v()((function(){l.current=[]}),400);var o=(new Date).getTime(),m=e.wheelDelta||-e.deltaY||-e.detail,p=Math.max(-1,Math.min(1,m)),g="undefined"!=typeof e.wheelDeltaX||"undefined"!=typeof e.deltaX,h=Math.abs(e.wheelDeltaX)<Math.abs(e.wheelDelta)||Math.abs(e.deltaX)<Math.abs(e.deltaY)||!g;l.current=s()(i=[]).call(i,(0,O.Z)(l.current),[c.current+Math.abs(m)]);var _,y=o-r.current;r.current=o,y>400&&1===l.current.length&&(l.current=q()(_=new Array(2)).call(_,l.current[0]),u.current=!1);var w=d(l.current,20)>d(l.current,40);w&&!u.current&&h&&(p<0?t.emit("changeNext",{from:"scroll"}):t.emit("changePrev",{from:"scroll"}),u.current=!0),!w&&u.current&&h&&(u.current=!1)}),[t]);(0,P.useEffect)((function(){if(t)return null==t||t.on("sliderMove",f),function(){null==t||t.off("sliderMove",f)}}),[t]),(0,P.useEffect)((function(){if(n)return null==n||n.addEventListener("wheel",m),function(){null==n||n.removeEventListener("wheel",m)}}),[n,m]),(0,P.useEffect)((function(){var e=[38,87],n=[40,83];i&&(e.pop(),n.pop());var a=U()((function(i){var a;i.nativeEvent||null!==(a=x.Le.getConfig(x.gI.IsInModalVideo))&&void 0!==a&&a.isInModal||o.current||(w()(e).call(e,i.keyCode)&&!i.shiftKey?t.emit("changePrev",{from:"keyboard"}):w()(n).call(n,i.keyCode)&&!i.shiftKey&&t.emit("changeNext",{from:"keyboard"}))}),500,{leading:!0,trailing:!1});document.addEventListener("keydown",a);var l=S.listen(S.EVENT.showLoginPane,(function(e){o.current=e}));return function(){document.removeEventListener("keydown",a),l()}}),[i,t])}({EventListener:ge,refContainerStatus:ve,isCssFullScreen:Me,isClientMiniWin:ze});var nt=(0,P.useRef)(null),it=(0,P.useRef)(null),ot=(0,P.useState)(null),at=(0,l.Z)(ot,2),lt=at[0],rt=at[1];null!=lt&&lt.current&&(it.current=null==lt?void 0:lt.current);var ut=(0,G.c)({className:A,containerRef:nt,targetRef:it}),ct=ut.containerStyle,st=ut.targetToast,dt=(0,P.useCallback)((function(){V.longTaskPerf===E.LongTaskPerf.Off&&Ue(!0)}),[V]),vt=(0,P.useCallback)((function(){V.longTaskPerf===E.LongTaskPerf.Off&&Ue(!1),tt()}),[V]);(0,P.useEffect)((function(){var e=function(){Re((function(e){return!e})),ue.current.update()};document.addEventListener("fullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("msfullscreenchange",e);var t=document.documentElement,n=function(){var e;Ye(null==t||null===(e=t.hasAttribute)||void 0===e?void 0:e.call(t,"header-with-bottom"))};n();var i=new MutationObserver(n);return i.observe(t,{attributes:!0,childList:!1,subtree:!1}),function(){document.removeEventListener("fullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("msfullscreenchange",e),i.disconnect(),x.Le.setConfig(x.gI.SlideStartTime,{slideStartTime:0})}}),[]),(0,P.useEffect)((function(){var e=S.listen(S.EVENT.changeMinWindows,(function(e){var t=e.isMiniWin;t&&(et.current=document.body.style.minWidth),document.body.style.minWidth=t?"auto":et.current,ce.current=!0,qe(t)}));return function(){return e()}}),[]),(0,P.useEffect)((function(){var e=S.listen(S.EVENT.pageFullScreen,(function(e){var t=e.fullScreen;Be((function(e){return null!=t?t:!e}))}));return function(){null==e||e()}}),[]);var ft=(0,P.useRef)(0);(0,P.useEffect)((function(){if(ge){var e=function(){S.emit(S.EVENT.tabContainerScroll,{tab:"recommend",scrollType:ge.activeIndex>ft.current?"down":"up"}),ft.current=ge.activeIndex};return ge.on("slideChange",e),function(){ge.off("slideChange",e)}}}),[ge]),(0,P.useEffect)((function(){var e;if(ve)return u()(e=C.Z).call(e,ve,tt),function(){C.Z.remove(ve,tt)}}),[ve]);var mt,pt=(0,P.useMemo)((function(){return ze||Ze||Me}),[ze,Ze,Me]),gt=(0,P.useMemo)((function(){var e=$;return je&&(e-=30),{nextSwiperHeaderHeightIn:e>=0?e:0,cardBetweenIn:z,upperSpaceIn:X}}),[je,$,z,X]),ht=P.useMemo((function(){var e,t,n=gt.nextSwiperHeaderHeightIn,i=gt.cardBetweenIn,o=gt.upperSpaceIn,a=I.U(n)?0:100*n,l=I.U(n)?n:0,r=ve?I.U(i)?0:100*i:0,u=I.U(i)?i:ve?0:24,c=I.U(o)?0:100*o,d=I.U(o)?o:0,f=s()(e="calc(".concat(100-a-r-c,"% - ")).call(e,d+u+l,"px)"),m=s()(t="calc(".concat(c,"% + ")).call(t,d,"px)"),p=u||r/100*(null==ve?void 0:ve.offsetHeight);return v()((function(){return null==ge?void 0:ge.update()})),{upperSpace:pt?0:m,swiperHeight:pt?"100%":f,spaceBetween:pt?0:p}}),[gt,ve,pt]);return m()(t=P.Children.toArray(ee)).call(t,(function(e){var t;return(null==e||null===(t=e.props)||void 0===t?void 0:t.slot)===i.OCCUPATION}))?P.createElement(P.Fragment,null,g()(mt=P.Children.toArray(ee)).call(mt,(function(e){var t;if((null==e||null===(t=e.props)||void 0===t?void 0:t.slot)===i.OCCUPATION)return e}))):P.createElement(Y.Provider,{value:{globalIsCommentShow:we,setIsCommentShowFunc:ke,globalIsRelatedShow:Le,setIsRelatedShowFunc:Ne,globalIsSideBarShow:xe,setIsSideBarShowFunc:Se,setTargetVideoRef:function(e){V.longTaskPerf===E.LongTaskPerf.On?it.current=e.current:rt(e)},swiper:ge,isFullScreen:Ze,isCssFullScreen:Me,isClientMiniWin:ze,isTransition:Ve,fullScreenTarget:ve,videoToast:st,slideVideoTab:Je,setSlideVideoTab:$e}},g()(n=P.Children.toArray(ee)).call(n,(function(e){var t;if((null==e||null===(t=e.props)||void 0===t?void 0:t.slot)===i.OUTOFCONTAINER)return e})),P.createElement("div",{id:"slidelist",className:N()(Z,y,"fullscreen_capture_feedback",(r={},(0,a.Z)(r,N()(D,"isCssFullScreen"),pt),(0,a.Z)(r,"isMiniWindow",ze),r)),ref:fe,style:ie},g()(c=P.Children.toArray(ee)).call(c,(function(e){var t;if((null==e||null===(t=e.props)||void 0===t?void 0:t.slot)===i.OUTSIDE)return e})),P.createElement(T.t,{onActiveIndexChange:function(){return x.Le.setConfig(x.gI.SlideStartTime,{slideStartTime:_()()})},onSlideChangeTransitionStart:dt,onSlideChangeTransitionEnd:vt,speed:null!==(d=null==V?void 0:V.slideSpeed)&&void 0!==d?d:250,autoHeight:!0,className:N()(R,"fullscreen_capture_feedback",k,(f={},(0,a.Z)(f,B,V.interactiveAdapter===E.InterActiveAdapter.DefaultPlus),(0,a.Z)(f,F,V.interactiveAdapter===E.InterActiveAdapter.NewAdapter),f)),initialSlide:0,onSwiper:function(e){he(e),null==te||te(e)},direction:"vertical",threshold:15,longSwipesRatio:.1,resistanceRatio:pt?0:.7,preloadImages:!1,touchRatio:2,style:(0,o.Z)({position:"absolute",left:0,top:re||ht.upperSpace,width:"100%",height:ht.swiperHeight,overflow:"visible",paddingLeft:pt?0:30,paddingRight:pt?0:w()(p=[E.LookRelatedABValV2.ModalFrame,E.LookRelatedABValV2.ModalFrameFast,E.LookRelatedABValV2.BtnFrameFast]).call(p,null==V?void 0:V.newLookRelated)?60:30},ae),spaceBetween:ht.spaceBetween,"data-e2e":"slideList"},g()(h=P.Children.toArray(ee)).call(h,(function(e){var t,n;if(w()(t=[i.INSIDE,i.CONTAINERSTART,i.CONTAINEREND,i.WRAPPERSTART,i.WRAPPEREND]).call(t,null==e||null===(n=e.props)||void 0===n?void 0:n.slot))return e})),P.createElement("div",{style:(0,o.Z)({},ct),className:N()(M,"fullscreen_capture"),ref:nt})),P.createElement("div",{id:"fullscreen_capture_feedback"},P.createElement("div",{id:"fullscreen_capture"}))))}},70134:function(e,t,n){n.d(t,{Z:function(){return I}});var i=n(29588),o=n(11789),a=n(11235),l=n.n(a),r=n(10441),u=n.n(r),c=n(21528),s=n(24713),d=n(97921),v="UCT89JiM",f="LhTYWIQP",m="npIvCX5K",p="KFKW01cT",g="QgTbWoC1",h="TwYBx2Ct",_="OLJS6lBV",y="qyvTcwBN",w="gsEVeooU",k=n(70335),E=n.n(k),b=n(47999),x=n(18653),S=n(73824),C=n(73404),I=function(e){var t,n,a=e.children,r=e.lineClamp,k=void 0===r?2:r,I=e.btnClassName,L=e.onlyKey,N=void 0===L?"":L,P=e.maxLine,T=void 0===P?999:P,Z=e.btnOnClick,R=e.Content,D=e.lineHeight,A=void 0===D?20:D,M=e.fontSize,B=e.renderButton,F=e.player,O=(0,c.useState)(!1),V=(0,o.Z)(O,2),U=V[0],H=V[1],W=(0,c.useState)(!1),z=(0,o.Z)(W,2),q=z[0],K=z[1],G=(0,c.useState)(k),j=(0,o.Z)(G,2),Y=j[0],Q=j[1],X=(0,c.useContext)(d.Cv),J=X.isFullScreen,$=X.isCssFullScreen,ee=(0,c.useRef)(null),te=b.i7()&&!b.GP(),ne=(0,c.useState)((function(){var e=x.Le.getConfig(x.gI.IsInModalVideo),t=(null==e?void 0:e.isInModal)||!1;return!("video_detail"!==S.vM()||J||$||t)})),ie=(0,o.Z)(ne,2),oe=ie[0],ae=ie[1];(0,c.useEffect)((function(){if(F){var e=function(e){var t=x.Le.getConfig(x.gI.IsInModalVideo),n=(null==t?void 0:t.isInModal)||!1;"video_detail"!==S.vM()||e||$||n?ae(!1):ae(!0)};return F.on(s.FULLSCREEN_CHANGE,e),function(){F.off(s.FULLSCREEN_CHANGE,e)}}}),[]);var le=(0,c.useCallback)((function(){l()((function(){if(null!=ee&&ee.current&&!q){var e=null==ee?void 0:ee.current,t=e.scrollHeight,n=e.clientHeight;H(t-n>15||t>=A*k+15)}}),0)}),[A,k,q]);return(0,c.useEffect)((function(){var e;ee.current&&u()(e=C.Z).call(e,ee.current,le);return function(){ee.current&&C.Z.remove(ee.current,le)}}),[le]),(0,c.useEffect)((function(){K(!1),Q(k),H(!1),le()}),[N]),c.createElement("div",{className:E()(v,(t={},(0,i.Z)(t,_,!te),(0,i.Z)(t,f,oe),t))},c.createElement("div",{ref:ee,className:E()(m,(0,i.Z)({},y,q)),style:{"--lineClamp":Y,"--lineHeight":"".concat(A,"px"),"--maxHeight":"".concat(A*T,"px"),"--marginTop":"".concat(M?(A-M)/2:0,"px")}},c.createElement("div",{className:E()(g,"notranslate",(n={},(0,i.Z)(n,h,U),(0,i.Z)(n,w,q),n)),style:{height:"".concat(A,"px")}},c.createElement("button",{type:"button",onClick:function(e){Q((function(e){return e===k?T:k})),K((function(e){return!e})),Z&&Z(q),null!=e&&e.target&&e.target.blur()},className:E()(I,p)},B?B(q):q?"\u6536\u8d77":"\u5c55\u5f00")),R&&c.createElement(R,{isUnfold:q}),a))}},6857:function(e,t,n){n.d(t,{C:function(){return d}});var i,o=n(21528),a={tooltipWrapper:"NRiH5zYV",tooltip:"BQT1A3Va",left:"Xtzbk1D8",right:"pBQCcTij",top:"mTNC2mtW",bottom:"yGdoJ_A9",icon:"RQ1fJbHb"};function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}var r=function(e){return o.createElement("svg",l({width:4,height:17,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=o.createElement("path",{d:"M0 0a8 8 0 002.168 5.476l1.174 1.25a2 2 0 010 2.738l-1.174 1.25A8 8 0 000 16.19V0z",fill:"#323442"})))},u=n(94),c=n(70335),s=n.n(c),d=function(e){var t=e.type,n=void 0===t?"left":t,i=e.hoverShow,l=void 0!==i&&i,c=e.showTip,d=e.setShowTip,v=e.content,f=e.className,m=e.tipClassName,p=e.iconClassName,g=e.children,h=(0,o.useRef)(null);return(0,o.useEffect)((function(){var e=function(e){d(!1)},t=function(){d(!1)},n=function(){d(!0)},i=l&&h.current;return i&&(h.current.addEventListener("mouseleave",t),h.current.addEventListener("mouseenter",n)),c&&d&&(document.addEventListener("scroll",e),document.addEventListener("click",e)),function(){var o,a;(document.removeEventListener("scroll",e),document.removeEventListener("click",e),i)&&(null===(o=h.current)||void 0===o||o.removeEventListener("mouseleave",t),null===(a=h.current)||void 0===a||a.removeEventListener("mouseenter",n))}}),[c,l]),o.createElement("div",{className:s()(a.tooltipWrapper,f),ref:h},Boolean(c)&&o.createElement("div",{className:s()(a.tooltip,a[n],m)},o.createElement(u.Z,{width:4,height:17,src:r,className:s()(a.icon,a[n],p),viewBox:"0 0 4 17"}),v),g)}},94166:function(e,t,n){n.d(t,{c:function(){return u}});var i=n(11789),o=n(46227),a=n.n(o),l=n(21528),r=n(94344);function u(e){var t=e.containerRef,n=e.targetRef,o=e.className,u=e.duration||undefined,c=(0,l.useRef)(null),s=(0,l.useState)({}),d=(0,i.Z)(s,2),v=d[0],f=d[1],m=(0,l.useCallback)((function(e){var n={text:e,className:o,duration:u};!u&&delete n.duration,r.F.info(n,null==t?void 0:t.current)}),[null==t?void 0:t.current]);return(0,l.useEffect)((function(){return null!=t&&t.current&&null!=n&&n.current&&"undefined"!=typeof ResizeObserver&&ResizeObserver?(c.current=new ResizeObserver(a()((function(e){var t,n,i=(null==e||null===(t=e[0])||void 0===t||null===(n=t.contentRect)||void 0===n?void 0:n.width)||"100%";f({width:i})}),100)),c.current.observe(n.current),function(){var e;null===(e=c.current)||void 0===e||e.disconnect(),c.current=null}):function(){return null}}),[null==t?void 0:t.current,null==n?void 0:n.current]),{targetToast:m,containerStyle:v}}},93289:function(e,t,n){n.d(t,{p:function(){return N}});var i=n(41257),o=n(85891),a=n(42480),l=n.n(a),r=n(33485),u=n.n(r),c=n(30562),s=n.n(c),d=n(11235),v=n.n(d),f=n(21528),m=n(94344),p=n(87461),g=n(73843),h=n(85924),_=n(18653),y=n(95198),w=n(42457),k=n(73824),E=n(53549),b=n(66870),x=n(86358),S=n(21144),C=n(88263),I=function(e){var t=e.errMsg;e.statusCode!==g.ERROR_CODE.ERROR_USER_UNLOGIN&&m.F.info(null!=t?t:h.Qr.FollowFail)},L=function(e){var t=e.awemeId,n=e.collectStatus,i=e.count,o=l()((_.Le.getConfig(_.gI.CollectStatusCache)||_.Le.setConfig(_.gI.CollectStatusCache,{}),_.Le.getConfig(_.gI.CollectStatusCache)));o[t]={collectStatus:n,count:i},_.Le.setConfig(_.gI.CollectStatusCache,o)},N=function(e){var t=e.selfUid,n=e.awemeInfo,a=e.fail,l=void 0===a?I:a,r=e.success,c=e.complete,d=e.isLogin,m=e.onLoginSuccess,N=e.accountParentEl,P=e.reportExtraParams,T=(0,f.useRef)(!1),Z=(0,f.useRef)(0),R=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(o){var a,d,v,f,m,p,g,I,N,T,Z,R,D,A,M,B,F;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.action,d=o.clickMethod,v=null==n?void 0:n.awemeId,f="",m=0,e.prev=4,e.next=7,y.KM({awemeId:v,collectAction:"collect"===a?1:0,awemeType:n.awemeType});case 7:p=e.sent,g=p.statusCode,I=p.logPb,N=p.statusMsg,f=s()(I),m=g,g?(w.i.sendLog("favoriteVideoFailed",(0,i.Z)({click_from:null!=d?d:"icon",err_code:g,urlParamList:["previous_page"],author_id:null==n||null===(T=n.authorInfo)||void 0===T?void 0:T.uid,group_id:null==n?void 0:n.awemeId,log_pb:f,enter_from:k.mo(),is_full_screen:E.r()?"1":"0",aweme_type:"".concat(null==n?void 0:n.awemeType)},P)),null==l||l({logPb:f,errMsg:N,statusCode:g,action:a})):("collect"===a?w.i.sendLog("favoriteVideo",(0,i.Z)({click_from:"icon",urlParamList:["previous_page","enter_method"],author_id:null==n||null===(R=n.authorInfo)||void 0===R?void 0:R.uid,group_id:null==n?void 0:n.awemeId,log_pb:f,enter_from:k.mo(),is_full_screen:E.r()?"1":"0",is_full_webscreen:null!==(D=_.Le.getConfig(_.gI.IsPageFullScreen))&&void 0!==D&&D.type?"1":"0",click_method:d,from_xigua:(null==n?void 0:n.awemeType)===b.ed.XgVideo?1:0,clarity:(null===(A=_.Le.getConfig(_.gI.Clarity))||void 0===A?void 0:A.logValue)||"",tab_name:x.getTabName()||S.Rs("tab_name")||""},P)):w.i.sendLog("cancelFavoriteVideo",(0,i.Z)({click_from:null!=d?d:"icon",urlParamList:["previous_page"],author_id:null==n||null===(M=n.authorInfo)||void 0===M?void 0:M.uid,group_id:null==n?void 0:n.awemeId,log_pb:f,enter_from:k.mo(),is_full_screen:E.r()?"1":"0",tab_name:x.getTabName()||S.Rs("tab_name")||""},P)),B="collect"===a?h.c.Collected:h.c.Uncollected,F=(null==n||null===(Z=n.stats)||void 0===Z?void 0:Z.collectCount)-Number(n.userCollected)+Number(B),L({awemeId:v,collectStatus:B,count:F}),C.emit(C.EVENT.syncInteractionStatus,{fromUserId:t,awemeId:n.awemeId,action:a}),null==r||r({logPb:f,action:a,collectStatus:B})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),null==l||l({logPb:f,action:a});case 19:return null==c||c({logPb:f,action:a}),e.abrupt("return",{statusCode:m});case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),[n,r,l,c,P,t]),D=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var n,i,a,l,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=(a=t||{}).clickMethod,r=a.noLoginCb,(0,p.ZP)({success:function(){var e=(0,o.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T.current=!0,e.next=3,null==m?void 0:m();case 3:return e.next=5,R({action:"collect",clickMethod:l});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:t=e.t0,n=t.statusCode,T.current=!1,Z.current=n,Z.current===g.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==r||r());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf",enterMethod:"favorite_video",next:"https://".concat(null===(n=window)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.host)},N);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,N,R]),A=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t||{}).clickMethod,!T.current){e.next=3;break}return e.abrupt("return");case 3:if(!d){e.next=10;break}return T.current=!0,e.next=7,R({action:"collect",clickMethod:n});case 7:T.current=!1,e.next=11;break;case 10:D({clickMethod:n,noLoginCb:function(){v()((function(){D({clickMethod:n})}),1e3)}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,d,N,m,t,R,P,D]),M=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t||{}).clickMethod,!T.current){e.next=3;break}return e.abrupt("return");case 3:if(!d){e.next=10;break}return T.current=!0,e.next=7,R({action:"unCollect",clickMethod:n});case 7:T.current=!1,e.next=11;break;case 10:(0,p.ZP)({success:function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==m?void 0:m();case 2:return e.next=4,R({action:"unCollect",clickMethod:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u6536\u85cf",enterMethod:"favorite_video",next:"https://".concat(null===(i=window)||void 0===i||null===(a=i.location)||void 0===a?void 0:a.host)},N);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,t,R]);return{collect:A,unCollect:M}}},6534:function(e,t,n){n.d(t,{i:function(){return N}});var i=n(41257),o=n(85891),a=n(42480),l=n.n(a),r=n(33485),u=n.n(r),c=n(30562),s=n.n(c),d=n(11235),v=n.n(d),f=n(21528),m=n(94344),p=n(87461),g=n(73843),h=n(85924),_=n(18653),y=n(31444),w=n(66870),k=n(42457),E=n(73824),b=n(86358),x=n(21144),S=n(53549),C=n(88263),I=function(e){var t=e.errMsg;e.statusCode!==g.ERROR_CODE.ERROR_USER_UNLOGIN&&m.F.info(null!=t?t:h.Qr.FollowFail)},L=function(e){var t=e.awemeId,n=e.diggStatus,i=e.count,o=l()((_.Le.getConfig(_.gI.DiggStatusCache)||_.Le.setConfig(_.gI.DiggStatusCache,{}),_.Le.getConfig(_.gI.DiggStatusCache)));o[t]={diggStatus:n,count:i,lastDiggTime:(new Date).getTime()},_.Le.setConfig(_.gI.DiggStatusCache,o)},N=function(e){var t=e.defaultDiggStatus,n=e.selfUid,a=e.awemeInfo,l=e.fail,r=void 0===l?I:l,c=e.success,d=e.complete,m=e.isLogin,N=e.onLoginSuccess,P=e.accountParentEl,T=e.reportExtraParams,Z=(0,f.useRef)(!1),R=(0,f.useRef)(0),D=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var o,l,v,f,m,p,g,I,N,P,Z,R,D,A,M,B,F,O,V,U;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.action,l=t.clickMethod,v=null==a?void 0:a.awemeId,f="",m=0,e.prev=4,e.next=7,y.s(v,"digg"===o?1:0,a.awemeType===w.ed.XgVideo?1:0);case 7:p=e.sent,g=p.statusCode,I=p.errMsg,N=p.logPb,f=s()(N),m=g,g?null==r||r({logPb:f,errMsg:I,statusCode:g,action:o}):("digg"===o?k.i.sendLog("like",(0,i.Z)((0,i.Z)({urlParamList:["previous_page"],author_id:null==a||null===(Z=a.authorInfo)||void 0===Z?void 0:Z.uid,group_id:null==a?void 0:a.awemeId,log_pb:f,enter_from:E.mo(),tab_name:b.getTabName()||x.Rs("tab_name")||"",is_full_screen:S.r()?"1":"0",is_full_webscreen:null!==(R=_.Le.getConfig(_.gI.IsPageFullScreen))&&void 0!==R&&R.type?"1":"0",click_method:l||"icon",from_follow_list:null!==(D=_.Le.getConfig(_.gI.FromFollowList))&&void 0!==D&&D.tag?"1":"0",trending_topic:null==a||null===(A=a.hotList)||void 0===A?void 0:A.sentence,first_tag_name:null==a||null===(M=a.hotList)||void 0===M?void 0:M.header,top:null==a||null===(B=a.hotList)||void 0===B?void 0:B.rank,aweme_type:"".concat(null==a?void 0:a.awemeType)},T),{},{clarity:(null===(F=_.Le.getConfig(_.gI.Clarity))||void 0===F?void 0:F.logValue)||""})):k.i.sendLog("cancelLike",(0,i.Z)({urlParamList:["previous_page"],author_id:null==a||null===(O=a.authorInfo)||void 0===O?void 0:O.uid,group_id:null==a?void 0:a.awemeId,log_pb:f,enter_from:E.mo(),tab_name:b.getTabName()||x.Rs("tab_name")||"",is_full_screen:S.r()?"1":"0",aweme_type:"".concat(null==a?void 0:a.awemeType)},T)),V="digg"===o?h.gZ.Digged:h.gZ.UnDigg,U=(null==a||null===(P=a.stats)||void 0===P?void 0:P.diggCount)-Number(a.userDigged)+Number(V),L({awemeId:v,diggStatus:V,count:U}),C.emit(C.EVENT.syncInteractionStatus,{fromUserId:n,awemeId:a.awemeId,action:o}),null==c||c({logPb:f,action:o,diggStatus:V})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),null==r||r({logPb:f,action:o});case 19:return null==d||d({logPb:f,action:o}),e.abrupt("return",{statusCode:m});case 21:case"end":return e.stop()}}),e,null,[[4,16]])})));return function(t){return e.apply(this,arguments)}}(),[a,c,r,d,T,n]),A=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var n,i,a,l,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=(a=t||{}).clickMethod,r=a.noLoginCb,(0,p.ZP)({success:function(){var e=(0,o.Z)(u().mark((function e(){var t,n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Z.current=!0,e.next=3,null==N?void 0:N();case 3:return e.next=5,D({action:"digg",clickMethod:l});case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={};case 8:t=e.t0,n=t.statusCode,Z.current=!1,R.current=n,R.current===g.ERROR_CODE.ERROR_USER_UNLOGIN&&(null==r||r());case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u70b9\u8d5e\u559c\u6b22\u7684\u5185\u5bb9",enterMethod:"digg",next:"https://".concat(null===(n=window)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.host)},P);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[N,P,D]),M=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var n,o,l;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=(t||{}).clickMethod,k.i.sendLog("clickLike",(0,i.Z)({urlParamList:["previous_page"],author_id:null==a||null===(n=a.authorInfo)||void 0===n?void 0:n.uid,group_id:null==a?void 0:a.awemeId,enter_from:E.mo(),tab_name:b.getTabName()||x.Rs("tab_name")||"",is_full_screen:S.r()?"1":"0",click_method:l||"icon",from_follow_list:null!==(o=_.Le.getConfig(_.gI.FromFollowList))&&void 0!==o&&o.tag?"1":"0"},T)),!Z.current){e.next=4;break}return e.abrupt("return");case 4:if(!m){e.next=11;break}return Z.current=!0,e.next=8,D({action:"digg",clickMethod:l});case 8:Z.current=!1,e.next=12;break;case 11:A({clickMethod:l,noLoginCb:function(){v()((function(){A({clickMethod:l})}),1e3)}});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,m,P,N,n,D,T,A,t]),B=(0,f.useCallback)(function(){var e=(0,o.Z)(u().mark((function e(t){var n,i,a;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(t||{}).clickMethod,!m){e.next=10;break}if(!Z.current){e.next=4;break}return e.abrupt("return");case 4:return Z.current=!0,e.next=7,D({action:"unDigg",clickMethod:n});case 7:Z.current=!1,e.next=11;break;case 10:(0,p.ZP)({success:function(){var e=(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==N?void 0:N();case 2:return e.next=4,D({action:"unDigg",clickMethod:n});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u5373\u53ef\u70b9\u8d5e\u559c\u6b22\u7684\u5185\u5bb9",enterMethod:"digg",next:"https://".concat(null===(i=window)||void 0===i||null===(a=i.location)||void 0===a?void 0:a.host)},P);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,n,D]);return{digg:M,unDigg:B}}},85757:function(e,t,n){n.d(t,{u:function(){return r}});var i=n(11789),o=n(21528),a=n(18653),l=n(88263),r=function(e){var t,n,r,u,c=e.awemeId,s=e.defaultCount,d=e.selfUid,v=e.defaultCollectStatus,f=a.Le.getConfig(a.gI.CollectStatusCache),m=(0,o.useState)(null!==(t=null==f||null===(n=f[c])||void 0===n?void 0:n.count)&&void 0!==t?t:s),p=(0,i.Z)(m,2),g=p[0],h=p[1],_=(0,o.useState)(null!==(r=null==f||null===(u=f[c])||void 0===u?void 0:u.collectStatus)&&void 0!==r?r:v),y=(0,i.Z)(_,2),w=y[0],k=y[1];return(0,o.useEffect)((function(){var e,t,n,i;h(null!==(e=null==f||null===(t=f[c])||void 0===t?void 0:t.count)&&void 0!==e?e:s),k(null!==(n=null==f||null===(i=f[c])||void 0===i?void 0:i.collectStatus)&&void 0!==n?n:v)}),[v,s,c]),(0,o.useEffect)((function(){var e=l.listen(l.EVENT.syncInteractionStatus,(function(e){var t=e.fromUserId,n=e.awemeId,i=e.action,o=t===undefined||d===undefined;if((t===d||o)&&n===c&&("collect"===i||"unCollect"===i)){var l,r,u,f=null===(l=a.Le.getConfig(a.gI.CollectStatusCache))||void 0===l?void 0:l[c];h(null!==(r=null==f?void 0:f.count)&&void 0!==r?r:s),k(null!==(u=null==f?void 0:f.collectStatus)&&void 0!==u?u:v)}}));return function(){e()}}),[d,c,s,v]),{count:g,collectStatus:w}}},22758:function(e,t,n){n.d(t,{P:function(){return r}});var i=n(11789),o=n(21528),a=n(18653),l=n(88263),r=function(e){var t,n,r,u=e.awemeId,c=e.defaultCount,s=e.selfUid,d=e.defaultDiggStatus,v=null===(t=a.Le.getConfig(a.gI.DiggStatusCache))||void 0===t?void 0:t[u],f=(0,o.useState)(null!==(n=null==v?void 0:v.count)&&void 0!==n?n:c),m=(0,i.Z)(f,2),p=m[0],g=m[1],h=(0,o.useState)(null!==(r=null==v?void 0:v.diggStatus)&&void 0!==r?r:d),_=(0,i.Z)(h,2),y=_[0],w=_[1];return(0,o.useEffect)((function(){var e,t;g(null!==(e=null==v?void 0:v.count)&&void 0!==e?e:c),w(null!==(t=null==v?void 0:v.diggStatus)&&void 0!==t?t:d)}),[d,c,u]),(0,o.useEffect)((function(){var e=l.listen(l.EVENT.syncInteractionStatus,(function(e){var t=e.fromUserId,n=e.awemeId,i=e.action,o=t===undefined||s===undefined;if((t===s||o)&&n===u&&("digg"===i||"unDigg"===i)){var l,r,v,f=null===(l=a.Le.getConfig(a.gI.DiggStatusCache))||void 0===l?void 0:l[u];g(null!==(r=null==f?void 0:f.count)&&void 0!==r?r:c),w(null!==(v=null==f?void 0:f.diggStatus)&&void 0!==v?v:d)}}));return function(){e()}}),[s,u,c,d]),{count:p,diggStatus:y}}},65371:function(e,t,n){n.d(t,{P:function(){return r}});var i=n(11789),o=n(11235),a=n.n(o),l=n(21528);function r(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.delayDisappear,n=void 0===t?200:t,o=e.delayShow,r=void 0===o?0:o,u=(0,l.useState)(""),c=(0,i.Z)(u,2),s=c[0],d=c[1],v=(0,l.useRef)(0),f=(0,l.useRef)(0),m=function(e){clearTimeout(v.current),r?f.current=a()((function(){d(e)}),r):d(e)},p=function(){v.current=a()((function(){d("")}),n),clearTimeout(f.current)},g=function(e,t){t?d(e):e?m(e):p()},h=function(){return clearTimeout(f.current)},_=function(){return clearTimeout(v.current)};return{type:s,changeType:g,showTimer:f,disappearTimer:v,clearShowTimer:h,clearDisappearTimer:_}}},34999:function(e,t,n){n.d(t,{_:function(){return l}});var i=n(52708),o=n.n(i),a=n(21528),l=function(e){var t=e.keyDownInterval,n=void 0===t?500:t,i=e.diggInterval,l=void 0===i?1e3:i,r=e.diggState,u=(0,a.useRef)(0),c=(0,a.useRef)(0);return{resetUsedKeyDownTime:(0,a.useCallback)((function(){u.current=o()()}),[]),resetDiggTime:(0,a.useCallback)((function(){c.current=o()()}),[]),initTime:(0,a.useCallback)((function(){u.current=o()(),c.current=o()()}),[]),checkIsCancelDigg:(0,a.useCallback)((function(){return!!(r&&o()()-u.current>n&&o()()-c.current>l)}),[r,n,l])}}},2079:function(e,t,n){n.d(t,{cQ:function(){return o},DJ:function(){return A}});var i,o,a=n(29588),l=n(41257),r=n(53778),u=n(33734),c=n(1885),s=n(45255),d=n.n(s),v=n(78133),f=n.n(v),m=n(10396),p=n.n(m),g=n(97448),h=n.n(g),_=n(54882),y=n.n(_),w=n(63862),k=n.n(w),E=n(90400),b=n.n(E),x=n(4650),S=n.n(x),C=n(88263),I=n(9220),L=n(32286),N=n.n(L),P=n(61912);!function(e){e[e.Global=0]="Global",e[e.Player=1]="Player"}(i||(i={})),function(e){e[e.Shift=0]="Shift",e[e.Ctrl=1]="Ctrl",e[e.Meta=2]="Meta"}(o||(o={}));var T=function(){C.emit(C.EVENT.focusSearch,{isFocus:!1})},Z={close:{code:["KeyQ"],combinationKey:[o.Shift],scene:i.Global,desc:"\u4e00\u952e\u5173\u95ed\u5f53\u524d\u9875"},search:{code:["KeyF"],combinationKey:[o.Shift],scene:i.Global,desc:"\u6296\u97f3\u641c\u7d22",onRegister:function(){C.commonEvent.on("changePrev",T),C.commonEvent.on("changeNext",T)},onDestroy:function(){C.commonEvent.off("changePrev",T),C.commonEvent.off("changeNext",T)}},help:{code:["Slash"],combinationKey:[o.Shift],scene:i.Global,desc:"\u547c\u51fa\u5feb\u6377\u952e"}},R=function(e,t){return t&&e.metaKey===p()(t).call(t,o.Meta)&&e.shiftKey===p()(t).call(t,o.Shift)&&e.ctrlKey===p()(t).call(t,o.Ctrl)},D=function(){function e(){(0,u.Z)(this,e),this.pauseList=[],this.currentShortcutList=[],this.config={},this.abtestData={}}return(0,c.Z)(e,[{key:"getAllActionList",value:function(){return h()(Z)}},{key:"getCurrentActionList",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=d()(this.currentShortcutList,this.pauseList);return e?t:this.currentShortcutList}},{key:"setConfig",value:function(e){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];this.config=e,t&&this.refresh()}},{key:"setABTestData",value:function(e){this.abtestData=e}},{key:"register",value:function(e,t){this.currentShortcutList=e,t&&(this.config=t),this.registerGlobal(e)}},{key:"pause",value:function(e){var t;this.pauseList=y()(t=[]).call(t,(0,r.Z)(this.pauseList),(0,r.Z)(e))}},{key:"resume",value:function(e){var t;this.pauseList=k()(t=this.pauseList).call(t,(function(t){return!p()(e).call(e,t)}))}},{key:"destroy",value:function(){var e=this.currentShortcutList,t=this.getShortcutList(e,i.Global);b()(e).call(e,(function(e){var n,i;null===(n=t[e])||void 0===n||null===(i=n.onDestroy)||void 0===i||i.call(n)})),document.removeEventListener("keydown",this.globalKeyDownHandler)}},{key:"getShortcutList",value:function(e,t){return null==e?void 0:S()(e).call(e,(function(e,n){return t===Z[n].scene?(0,l.Z)((0,l.Z)({},e),{},(0,a.Z)({},n,Z[n])):e}),{})}},{key:"handleGlobalKeyDown",value:function(e){var t=this;return function(n){!function(e,t){var n,i,o,a,l,r,u,c,s,d,v;if("INPUT"!==(null==e||null===(n=e.target)||void 0===n?void 0:n.tagName)&&"true"!==(null==e||null===(i=e.target)||void 0===i?void 0:i.contentEditable)){var f=t.shortcut,m=void 0===f?{}:f;null!==(o=m.close)&&void 0!==o&&null!==(a=o.code)&&void 0!==a&&p()(a).call(a,e.code)&&R(e,null===(l=m.close)||void 0===l?void 0:l.combinationKey)&&(I.DT()?N().app.minimize():(window.location.href="about:blank",window.close())),null!==(r=m.search)&&void 0!==r&&null!==(u=r.code)&&void 0!==u&&p()(u).call(u,e.code)&&R(e,null===(c=m.search)||void 0===c?void 0:c.combinationKey)&&C.emit(C.EVENT.focusSearch,{isFocus:!0}),null!==(s=m.help)&&void 0!==s&&null!==(d=s.code)&&void 0!==d&&p()(d).call(d,e.code)&&R(e,null===(v=m.help)||void 0===v?void 0:v.combinationKey)&&(0,P.n)({abtestData:null==t?void 0:t.abtestData,logParams:{clickMethod:"hot_key"}})}}(n,{shortcut:f()(e,t.pauseList),abtestData:t.abtestData})}}},{key:"registerGlobal",value:function(e){var t=this.getShortcutList(e,i.Global);b()(e).call(e,(function(e){var n,i;null===(n=t[e])||void 0===n||null===(i=n.onRegister)||void 0===i||i.call(n)})),this.globalKeyDownHandler=this.handleGlobalKeyDown(t),document.addEventListener("keydown",this.globalKeyDownHandler)}},{key:"refresh",value:function(){this.destroy(),this.register(this.currentShortcutList)}}]),e}(),A=new D},817:function(e,t,n){n.d(t,{f:function(){return f}});var i=n(41257),o=n(11789),a=n(21528),l=n(40494),r=n(24713),u=n(70335),c=n.n(u),s="wD8o9sOR",d=n(33527),v=n(83846),f=(0,a.forwardRef)((function(e,t){var n=e.className,u=e.style,f=e.children,m=e.xgplayerConfig,p=e.isInitPlayer,g=e.onReady,h=e.onClick,_=(0,a.useState)(null),y=(0,o.Z)(_,2),w=y[0],k=y[1],E=(0,a.useRef)(null);return(0,a.useEffect)((function(){if(p){var e;(null===(e=v.bE("new_player"))||void 0===e?void 0:e.length)<1&&v.B1("new_player");var t=new l.Z((0,i.Z)({el:E.current,width:"100%",height:"100%",closeFocusVideoFocus:!0},m));k(t);var n=function(){null==g||g()};return null==t||t.on(r.READY,n),function(){null==t||t.off(r.READY,n),null==t||t.destroy(),k(null)}}}),[p]),(0,a.useImperativeHandle)(t,(function(){return{getPlayer:function(){return w},player:w}}),[w]),a.createElement("div",{onClick:h,className:c()(s,n),style:u,ref:E},a.createElement(d.E.Provider,{value:{player:w}},f))}))},98620:function(e,t,n){n.d(t,{G:function(){return i}});var i={paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.8,paramVl2:3,paramVlUpper:.9,paramVlLower:.7,bitrateUpper:2e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:2e7,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e5,25e5],mode:"buffer-info",quality_filter:{}}},31452:function(e,t,n){var i;n.d(t,{B:function(){return i}}),function(e){e.MiniWinChange="miniWinChange",e.PlayRatioChange="playRatioChange",e.UpdateCommentCount="updateCommentCount",e.Blur="blur",e.VolumeUp="upVolume",e.VolumeDown="downVolume",e.NextAutoplayChange="nextAutoplayChange",e.BeforePlaySwitchPrev="playSwitchPrevBefore",e.AfterPlaySwitchNext="playSwitchNextBefore",e.KeyPlaySwitchPrev="keyPlaySwitchPrev",e.KeyPlaySwitchNext="keyPlaySwitchNext",e.Waiting="waiting",e.ManualChangeMiniState="manual_change_min_state",e.Star="onStar",e.ShowComment="showComment",e.Collect="onCollect",e.ShowShareCode="showShareCode",e.Dislike="onDislike",e.Avatar="onAvatar",e.Follow="onFollow",e.FakeScreen="onFakeScreen",e.SwitchFullScreen="switch_fullscreen",e.FakeScreenChange="fakeScreenChange",e.PlayRatioPanelShow="playRatioPanelShow",e.LightBottomControls="lightBottomControls",e.ResolutionChange="resolutionChange",e.PlayResolutionClick="playResolutionClick",e.PlayResolutionEnter="playResolutionEnter",e.VolumeChange="volumechange",e.UpdateImmersiveSwitch="updateImmersiveSwitch",e.ImmersiveSwitchChange="immersiveSwitchChange",e.UpdateAutoPlaySwitch="updateAutoPlay",e.AutoPlaySwitchChange="autoPlaySwitchChange",e.CustomShortCut="customShortCut",e.ChangePlayRate="changePlayRate"}(i||(i={}))},46449:function(e,t,n){n.d(t,{K:function(){return b},M:function(){return x}});var i=n(91023),o=n(94),a=n(42284),l=n(27448),r=n(81842),u=n(14870),c=n(10708),s=n(68180),d=n(24837),v=n(28470),f=n(90634),m=n(82269),p=n(71141),g=n(88983),h=n(39458),_=n(71753),y=n(14181),w=n(54853),k=n(50692),E=n(20369),b={play:(0,i.Y)(o.Z,{src:l.Z,width:32,height:32,viewBox:"0 0 39 39"}),pause:(0,i.Y)(o.Z,{src:r.Z,width:32,height:32,viewBox:"0 0 39 39"}),startPlay:(0,i.Y)(o.Z,{src:l.Z,width:32,height:32,viewBox:"0 0 39 39"}),startPause:(0,i.Y)(o.Z,{src:r.Z,width:32,height:32,viewBox:"0 0 39 39"}),playNext:(0,i.Y)(o.Z,{src:u.Z,width:36,height:36}),mini:(0,i.Y)(o.Z,{src:c.Z,width:32,height:32,viewBox:"0 0 39 39"}),volumeSmall:(0,i.Y)(o.Z,{src:s.Z,width:32,height:32,viewBox:"0 0 39 39"}),volumeLarge:(0,i.Y)(o.Z,{src:s.Z,width:32,height:32,viewBox:"0 0 39 39"}),volumeMuted:(0,i.Y)(o.Z,{src:d.Z,width:32,height:32,viewBox:"-3 0 39 39"}),fullscreen:(0,i.Y)(o.Z,{src:v.Z,width:32,height:32,viewBox:"0 0 39 39"}),exitFullscreen:(0,i.Y)(o.Z,{src:f.Z,width:32,height:32,viewBox:"0 0 39 39"}),playSwitchPrev:(0,i.Y)(o.Z,{src:m.Z,width:36,height:36}),playSwitchNext:(0,i.Y)(o.Z,{src:p.Z,width:36,height:36}),loadingIcon:(0,i.Y)(a.g,{})},x={play:(0,i.Y)(o.Z,{src:g.Z,width:32,height:32,viewBox:"0 0 32 32"}),pause:(0,i.Y)(o.Z,{src:h.Z,width:32,height:32,viewBox:"0 0 32 32"}),startPlay:(0,i.Y)(o.Z,{src:g.Z,width:32,height:32,viewBox:"0 0 32 32"}),startPause:(0,i.Y)(o.Z,{src:h.Z,width:32,height:32,viewBox:"0 0 32 32"}),playNext:(0,i.Y)(o.Z,{src:u.Z,width:36,height:36}),mini:(0,i.Y)(o.Z,{src:c.Z,width:32,height:32,viewBox:"0 0 39 39"}),volumeSmall:(0,i.Y)(o.Z,{src:y.Z,width:32,height:32,viewBox:"0 0 32 32"}),volumeLarge:(0,i.Y)(o.Z,{src:w.Z,width:32,height:32,viewBox:"0 0 32 32"}),volumeMuted:(0,i.Y)(o.Z,{src:_.Z,width:32,height:32,viewBox:"0 0 32 32"}),fullscreen:(0,i.Y)(o.Z,{src:k.Z,width:32,height:32,viewBox:"0 0 32 32"}),exitFullscreen:(0,i.Y)(o.Z,{src:E.Z,width:32,height:32,viewBox:"0 0 32 32"}),playSwitchPrev:(0,i.Y)(o.Z,{src:m.Z,width:36,height:36}),playSwitchNext:(0,i.Y)(o.Z,{src:p.Z,width:36,height:36}),loadingIcon:(0,i.Y)(a.g,{})}},82496:function(e,t,n){n.d(t,{k:function(){return b},L:function(){return x}});var i=n(41257),o=n(94615),a=n.n(o),l=n(91703),r=n.n(l),u=n(48382),c=n(19085),s=n(34738),d=n(18653),v=n(73824),f=n(66870),m=n(91023),p=n(41316),g=n(94),h=n(27017),_=n(85876),y=n(46449),w=n(98620),k=n(57350),E=n(73682),b=function(e,t){var n,o,a,l,r=arguments.length>2&&arguments[2]!==undefined&&arguments[2],p=(0,E.U)({awemeInfo:e,abtestData:t})?"h265":"h264",b={lang:"zh",inactive:2e3,leavePlayerTime:0,autoplay:!0,autoplayMuted:1===(null!==(n=u.$o(c.LocalStorageKeys.PLAYER_IS_MUTE))&&void 0!==n?n:0),volume:null!==(o=u.$o(c.LocalStorageKeys.PLAYER_VOLUME))&&void 0!==o?o:.6,loop:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,closePlayVideoFocus:!0,closeVideoPreventDefault:!0,closeVideoStopPropagation:!0,playbackRate:!1,cssFullscreen:!1,dynamicBg:{disable:!0,frameRate:10,filter:"blur(60px)",maskBg:"rgba(0,0,0,0.7)"},enter:{innerHtml:'<div class="xg-douyin-loading" />'},start:{disableAnimate:!0},ignores:["poster","definition"],progresspreview:{disable:!0},progress:!0,miniprogress:!1,miniscreen:{width:350,height:197,left:-1,top:-1,disableDrag:!0},vodLogOpts:{line_app_id:s.APP_ID,line_user_id:(null===(a=d.Es())||void 0===a?void 0:a.user_unique_id)||"",vtype:"MP4",tag:v.yW(),codec_type:p,drm_type:0,sendLocalCallback:function(e,t){},disableLocalCache:!0,channel:"cn",closeResolutionLog:!0,closeSeekLog:!0,maxQueueCount:5,isTask:!1,enableAbTest:!0,checkByInnerLog:!0},icons:r?y.M:y.K,closeVideoDblclick:!0,plugins:[_.Z,k.Z],BitrateSelector:(0,i.Z)((0,i.Z)({},w.G),(null==t?void 0:t.BitrateSelector)||{}),controls:{mode:"normal",autoHide:!1,initShow:!0},marginControls:!0,keyboard:{isGlobalTrigger:!0,disableRootTrigger:!0},vtype:(null==e?void 0:e.awemeType)===f.ed.Note?"MP3":"MP4"};return b.keyboard=(0,i.Z)((0,i.Z)({},b.keyboard),{},{seekStep:5}),b.volume={default:null!==(l=u.$o(c.LocalStorageKeys.PLAYER_VOLUME))&&void 0!==l?l:.6,showValueLabel:!0},b.icons=(0,i.Z)((0,i.Z)({},b.icons),{},{volumeSmall:(0,m.Y)(g.Z,{src:h.Z,width:32,height:32,viewBox:"0 0 39 39"})}),null!=t&&t.equalizeVolume&&(b.crossOrigin="anonymous"),b},x=function(e){var t=e.hasDanmakuStyle,n=e.changePlayerHeight,i=void 0===n?0:n,o=[{hasDanmakuStyle:!0,changePlayerHeight:0,height:p.NV.danMu},{hasDanmakuStyle:!1,changePlayerHeight:1,height:p.NV.midLow},{hasDanmakuStyle:!1,changePlayerHeight:2,height:p.NV.midHigh},{hasDanmakuStyle:!1,changePlayerHeight:3,height:p.NV.danMu},{hasDanmakuStyle:!1,changePlayerHeight:0,height:p.NV.default}],l=r()(o,a()({hasDanmakuStyle:Boolean(t),changePlayerHeight:i}));return l.length>0?l[0].height:p.NV.default}},33527:function(e,t,n){n.d(t,{E:function(){return i}});var i=n(21528).createContext({player:{}})},57602:function(e,t,n){n.d(t,{C:function(){return y}});var i,o=n(41257),a=n(4650),l=n.n(a),r=n(63862),u=n.n(r),c=n(18556),s=n.n(c),d=n(64059),v=n.n(d),f=n(90400),m=n.n(f),p=n(10441),g=n.n(p),h=n(73404),_=n(21528);!function(e){e[e.PlayIcon=32]="PlayIcon",e[e.PlayerTime=100]="PlayerTime",e[e.DanMuInput=351]="DanMuInput",e[e.Clear=100]="Clear",e[e.autoPlayer=100]="autoPlayer",e[e.PlayBackRatio=44]="PlayBackRatio",e[e.FakeScreen=44]="FakeScreen",e[e.volume=36]="volume",e[e.pageFullScreen=36]="pageFullScreen",e[e.fullscreen=36]="fullscreen"}(i||(i={}));var y=function(e){var t=e.isActive,n=e.player,i=e.abtestData,a=e.hasDanmu,r=e.isClientMiniWin,c=void 0!==r&&r,d=e.hasDanmuStyle;(0,_.useEffect)((function(){if(t&&n&&d&&!c){var e,r,f=[{className:"hidePlayerTime",rank:10,width:100},{className:"hideAutoPlayer",rank:11,width:71},{className:"hidePlayIcon",width:32},{className:"hidePlayBackRatio",width:43},{className:"hideVolume",width:35},{className:"hidePageFullScreen",width:35},{className:"hideFullscreen",width:35},{className:"margin",width:74}];i.claritySelection&&f.push({className:"hideFakeScreen",width:43}),f.push({className:"hideImmersivePlayer",rank:12,width:71}),a&&f.push({className:"hideDanMuInput",rank:13,width:351});var p=l()(f).call(f,(function(e,t){return e+(null==t?void 0:t.width)}),0),_=u()(f).call(f,(function(e){return e.rank}));_=s()(e=v()(_).call(_,(function(e,t){return e.rank>t.rank?1:-1}))).call(e,(function(e,t){return _[t-1]&&(p-=_[t-1].width),(0,o.Z)((0,o.Z)({},e),{},{minWidth:p})}));var y,w=function(e){var t=(null==e?void 0:e[0])||{},n=t.target,i=t.contentRect;if(i){var o=i.width;m()(_).call(_,(function(e){o<e.minWidth?n.classList.add(e.className):n.classList.remove(e.className)}))}},k=null===(r=n.root.getElementsByClassName("xgplayer-controls"))||void 0===r?void 0:r[0];if(k)g()(y=h.Z).call(y,k,w);return function(){k&&h.Z.remove(k,w)}}}),[t,n,i,c])}},21466:function(e,t,n){n.d(t,{N:function(){return h}});var i=n(41257),o=n(2193),a=n(11789),l=n(52708),r=n.n(l),u=n(21528),c=n(86788),s=n(48382),d=n(19085),v=n(18653),f=["count"],m=["count","expire"],p=14*c.s2,g=7*c.s2,h=function(e){var t=e.noDisturb,n=(0,u.useState)(!0),l=(0,a.Z)(n,2),c=l[0],h=l[1],_=(0,u.useCallback)((function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.isClear,n=s.$o(d.LocalStorageKeys.HoverInteractionInfo)||{},a=n.count,l=void 0===a?0:a,r=(0,o.Z)(n,f),u=l+1;t&&(u=0),s.qQ(d.LocalStorageKeys.HoverInteractionInfo,(0,i.Z)({count:u},r))}),[]),y=(0,u.useCallback)((function(){var e=s.$o(d.LocalStorageKeys.HoverInteractionInfo)||{},t=e.count,n=(e.expire,(0,o.Z)(e,m));s.qQ(d.LocalStorageKeys.HoverInteractionInfo,(0,i.Z)({count:t,expire:r()()},n))}),[]);return{isCanShowTip:c,updateIsCanShowTip:(0,u.useCallback)((function(){var e=(v.Le.getConfig(v.gI.FirstInstallTime)||{}).time;if(t)if(r()()-1e3*e>p){var n=s.$o(d.LocalStorageKeys.HoverInteractionInfo)||{},i=n.count,o=void 0===i?0:i,a=n.expire,l=void 0===a?0:a;r()()-l<=g?(h(!1),_({isClear:!0})):o<10?(h(!0),_()):(h(!1),y())}else h(!0)}),[t])}}},9187:function(e,t,n){n.d(t,{O:function(){return l}});var i=n(11789),o=n(21528),a=n(31452);function l(e){var t=e.player,n=e.isActive,l=(0,o.useState)(undefined),r=(0,i.Z)(l,2),u=r[0],c=r[1];return(0,o.useEffect)((function(){if(t&&n){var e=function(e){return"boolean"==typeof(null==e?void 0:e.isOn)&&c(e.isOn)};return t.on(a.B.ImmersiveSwitchChange,e),function(){t.off(a.B.ImmersiveSwitchChange,e)}}!n&&t&&c(!1)}),[t,n]),{inImmersive:u}}},59662:function(e,t,n){n.d(t,{n:function(){return a}});var i=n(21528),o=n(33527),a=function(){return(0,i.useContext)(o.E).player}},7578:function(e,t,n){n.d(t,{ZL:function(){return Q}});var i=n(33734),o=n(1885),a=n(47044),l=n(96879),r=n(96288),u=n(29588),c=n(41257),s=n(4966),d=n(11789),v=n(54882),f=n.n(v),m=n(90400),p=n.n(m),g=n(97448),h=n.n(g),_=n(70403),y=n.n(_),w=n(10396),k=n.n(w),E=n(52708),b=n.n(E),x=n(18556),S=n.n(x),C=n(10441),I=n.n(C),L=n(21528),N=n(19785),P=n(70335),T=n.n(P),Z=n(77060),R=n(94344),D=n(87461),A=n(30234),M=n(24189),B=n(24206),F=n(64625),O=n(48382),V=n(59013),U=n(88263),H=n(19085),W=n(66870),z=n(16612),q=n(59662),K=n(28054),G=n(67381),j=function(e){var t=e.awemeInfo,n=e.userInfo,i=void 0===n?{}:n,o=e.onMouseLeave,a=e.dispatch,l=e.player,r=e.isActive,u=e.currentDefinition,v=e.userSelectDefinition,m=e.abtestData,g=e.userSelectUpdate,_=null==t?void 0:t.awemeId,w=(0,L.useState)(""),E=(0,d.Z)(w,2),x=E[0],C=E[1],I=(0,L.useState)(K.QM.Auto),N=(0,d.Z)(I,2),P=N[0],Z=N[1],B=i.isLogin,W=(0,L.useMemo)((function(){var e,t,n,i;return(null==m||null===(e=m.claritySelection)||void 0===e?void 0:e.allowList)||((null==m||null===(t=m.claritySelection)||void 0===t?void 0:t.clarity)===(null===(n=A.ClaritySelection)||void 0===n||null===(i=n.Real)||void 0===i?void 0:i.clarity)?A.ClaritySelection.Real.allowList:A.ClaritySelection.Virtual.allowList)}),[m]),z=(0,L.useMemo)((function(){var e,n,i,o,a=[{key:K.hq.Hd,label:K.QM.Hd,val:L.createElement("div",{className:"item"},L.createElement("span",null,f()(e="".concat(K.QM.Hd)).call(e,(null==m||null===(n=m.claritySelection)||void 0===n?void 0:n.clarity)===(null===(i=A.ClaritySelection)||void 0===i||null===(o=i.Real)||void 0===o?void 0:o.clarity)&&!1===B?"(1080p)":"")),!1===B?L.createElement("span",{className:"login"},"\u767b\u5f55\u5373\u4eab"):null),stat:K.hq.Hd,quality:0,defaultQuality:1,gearName:"",gearType:K.EA.Hd},{key:K.hq.Clear,label:K.QM.Clear,val:K.QM.Clear,stat:K.hq.Clear,quality:0,defaultQuality:10,gearName:"",gearType:K.EA.Clear},{key:K.hq.Smooth,label:K.QM.Smooth,val:K.QM.Smooth,stat:K.hq.Smooth,quality:0,defaultQuality:20,gearName:"",gearType:K.EA.Smooth},{key:K.hq.Fast,label:K.QM.Fast,val:K.QM.Fast,stat:K.hq.Fast,quality:0,defaultQuality:24,gearName:"",gearType:K.EA.Fast},{key:K.hq.Auto,label:K.QM.Auto,val:K.QM.Auto,stat:K.hq.Auto,quality:0,gearName:"",gearType:K.EA.Auto}];if(r){var u,c,s=[];p()(u=(null==t||null===(c=t.video)||void 0===c?void 0:c.bitRateList)||[]).call(u,(function(e){var t;s.push(e.gearName),p()(t=h()(W)).call(t,(function(t){var n,i=y()(a).call(a,(function(e){return e.key===t}));i>-1&&k()(n=W[t]).call(n,e.gearName)&&(a[i].quality=e.qualityType,a[i].gearName=e.gearName)}))}));var d=F.G(H.SessionStorageKeys.manualSwitch)||{};d.clarityReal=s,F.t_(H.SessionStorageKeys.manualSwitch,d),l.gearList=a,l.allowList=W}return a}),[B,t,W,u,r,v,g]);(0,L.useEffect)((function(){var e=F.G(H.SessionStorageKeys.manualSwitch)||{};if(e.gearClarity){var t,n=(0,s.Z)(z);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(e.gearClarity===i.key){C(i.key),Z(i.label);break}}}catch(o){n.e(o)}finally{n.f()}}else Z(K.QM.Auto),C(K.hq.Auto)}),[B,i,z,v,g]),(0,L.useEffect)((function(){var e;l&&(l.videoList=null==t||null===(e=t.video)||void 0===e?void 0:e.bitRateList)}),[t,l]);var q=(0,L.useCallback)((function(){var e=b()(),t=O.$o(H.LocalStorageKeys.ClarityToast)||(0,c.Z)({},K.bG);e-t.lastTimestamp>K.Ts&&t.times<3&&(t.times+=1,t.lastTimestamp=e,R.F.info({text:"\u6e05\u6670\u5ea6\u9009\u62e9\u5c06\u4ece\u4e0b\u4e2a\u89c6\u9891\u5f00\u59cb\u751f\u6548",className:"toastWrapper"},l.root,3e3),O.qQ(H.LocalStorageKeys.ClarityToast,t))}),[]),j=(0,L.useCallback)((function(e,t){var n=F.G(H.SessionStorageKeys.manualSwitch)||{};n.done=1;var i=e||t===K.hq.Auto&&(null==z?void 0:z[(null==z?void 0:z.length)-1])||t===K.hq.Hd&&(null==z?void 0:z[0]);i&&(n.gearClarity=i.key,n.qualityType=i.quality||(null==e?void 0:e.defaultQuality),n.gearName=i.label,n.gearType=i.gearType),F.t_(H.SessionStorageKeys.manualSwitch,n)}),[z]);return(0,L.useEffect)((function(){var e,t,n,i=null===(e=U)||void 0===e?void 0:e.listen(null==M||null===(t=U)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,(function(e){var t,n,i,o,a,r,u,c;e.hdLogin&&(j(null,K.hq.Hd),null!=l&&l.config&&(l.config.userSelectUpdate=b()()),null==l||null===(t=l.plugins)||void 0===t||null===(n=t.playclaritysettingplugin)||void 0===n||n.updateConfig({userInfo:{isLogin:!0}}),null==l||null===(i=l.plugins)||void 0===i||null===(o=i.playclaritysettingplugin)||void 0===o||o.renderRoot(),q());e.autoSwitch&&(j(null,K.hq.Auto),l.config.userSelectUpdate=b()(),null==l||null===(a=l.plugins)||void 0===a||null===(r=a.playclaritysettingplugin)||void 0===r||r.renderRoot(),q());e.exitInner&&(l.config.userSelectUpdate=b()(),null==l||null===(u=l.plugins)||void 0===u||null===(c=u.playclaritysettingplugin)||void 0===c||c.renderRoot())}));return function(){i()}}),[l]),L.createElement("div",{className:"gear"},L.createElement("div",{className:"virtual"},null==z?void 0:S()(z).call(z,(function(e){return L.createElement("div",{key:e.key,className:T()("item",{selected:e.key===x}),onClick:function(){return function(e){null==o||o();var t=F.G(H.SessionStorageKeys.manualSwitch)||{};G.Z.sendLog("clarityCellClick",(0,c.Z)({group_id:_,action:e.key},V.t())),!1!==B||e.key!==K.hq.Hd?(j(e),q(),C(e.key),Z(e.label)):(0,D.ZP)({headerText:"\u767b\u5f55\u540e\u5373\u53ef\u4eab\u53d7\u9ad8\u6e05\u753b\u8d28",success:function(){var e,t,n,i;a({type:"updateUserInfo"}),j(null,K.hq.Hd),null!=l&&l.config&&(l.config.userSelectDefinition=1),null==l||null===(e=l.plugins)||void 0===e||null===(t=e.playclaritysettingplugin)||void 0===t||t.updateConfig({userInfo:{isLogin:!0}}),null==l||null===(n=l.plugins)||void 0===n||null===(i=n.playclaritysettingplugin)||void 0===i||i.renderRoot(),q()},enterMethod:"clarity_panel",clarity:t.gearClarity,isAuto:t.done?0:1,gearName:t.gearName})}(e)}},e.val)}))),L.createElement("div",{className:"btn"},P))},Y=function(e){(0,l.Z)(n,e);var t=(0,r.Z)(n);function n(){var e,o;(0,i.Z)(this,n);for(var l=arguments.length,r=new Array(l),s=0;s<l;s++)r[s]=arguments[s];return o=t.call.apply(t,f()(e=[this]).call(e,r)),(0,u.Z)((0,a.Z)(o),"onMouseleave",(function(){N.Util.addClass(o.root,"disappear")})),(0,u.Z)((0,a.Z)(o),"onMouseenter",(function(){var e,t,n,i;(U.emit(null==M||null===(e=U)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0}),N.Util.hasClass(o.root,"disappear"))&&G.Z.sendLog("clarityCellShow",(0,c.Z)({group_id:null===(n=o.config)||void 0===n||null===(i=n.awemeInfo)||void 0===i?void 0:i.awemeId},V.t()));N.Util.removeClass(o.root,"disappear")})),o}return(0,o.Z)(n,[{key:"beforePlayerInit",value:function(){this.renderRoot()}},{key:"updateConfig",value:function(e){this.config=(0,c.Z)((0,c.Z)({},this.config),e)}},{key:"afterCreate",value:function(){I()(this).call(this,"mouseenter",this.onMouseenter),I()(this).call(this,"mouseleave",this.onMouseleave),this.renderRoot(),N.Util.addClass(this.root,"disappear")}},{key:"destroy",value:function(){this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),Z.unmountComponentAtNode(this.root)}},{key:"renderRoot",value:function(){var e,t,n,i,o,a,l,r,u;(null===(e=this.config)||void 0===e||null===(t=e.awemeInfo)||void 0===t?void 0:t.awemeType)!==(null==B||null===(n=W.ed)||void 0===n?void 0:n.Note)&&Z.hydrate(L.createElement(j,(0,c.Z)((0,c.Z)({onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave},this.config),{},{player:this.player,currentDefinition:null===(i=this.player)||void 0===i||null===(o=i.getPlugin)||void 0===o||null===(a=o.call(i,"bitrateselector"))||void 0===a||null===(l=a.curBitRate)||void 0===l?void 0:l.definition,userSelectDefinition:null===(r=this.player)||void 0===r?void 0:r.config.userSelectDefinition,userSelectUpdate:null===(u=this.player)||void 0===u?void 0:u.config.userSelectUpdate})),this.root)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-playclarity-setting" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"PlayClaritySettingPlugin"}},{key:"defaultConfig",get:function(){return{position:N.POSITIONS.CONTROLS_RIGHT,index:7,className:"xgplayer-playclarity-setting"}}}]),n}(z.ZP),Q=function(e){var t=e.userInfo.isLogin,n=e.awemeInfo,i=(0,q.n)();return(0,L.useEffect)((function(){return i&&(null==n?void 0:n.awemeType)!==W.ed.Note?(i.registerPlugin(Y,(0,c.Z)((0,c.Z)({},e),{},{player:i})),function(){i.getPlugin("PlayClaritySettingPlugin")&&i.unRegisterPlugin("PlayClaritySettingPlugin",!0)}):null}),[i,t,n]),null}},28054:function(e,t,n){var i,o,a,l,r,u;n.d(t,{hq:function(){return i},EA:function(){return o},QM:function(){return a},jH:function(){return l},eR:function(){return r},a7:function(){return u},Ts:function(){return c},hR:function(){return s},Mh:function(){return d},C7:function(){return v},g:function(){return f},bG:function(){return m},J7:function(){return p},y8:function(){return g}}),function(e){e.Hd="5",e.Clear="4",e.Smooth="3",e.Fast="2",e.Auto="0"}(i||(i={})),function(e){e[e.Hd=1]="Hd",e[e.Clear=2]="Clear",e[e.Smooth=3]="Smooth",e[e.Fast=4]="Fast",e[e.Auto=0]="Auto"}(o||(o={})),function(e){e.Hd="\u9ad8\u6e05",e.Clear="\u6e05\u6670",e.Smooth="\u6d41\u7545",e.Fast="\u6781\u901f",e.Auto="\u667a\u80fd"}(a||(a={})),function(e){e.low="\u5f53\u524d\u7f51\u7edc\u8f83\u5dee\uff0c",e.high="\u5f53\u524d\u7f51\u7edc\u826f\u597d\uff0c",e.lowTail="\u66f4\u6d41\u7545",e.highTail="\u66f4\u6e05\u6670"}(l||(l={})),function(e){e.Normal="\u767b\u5f55\u5373\u53ef\u9009\u62e9\u9ad8\u6e05\u753b\u8d28",e.Hd="\u767b\u5f55\u5373\u4eab\u5168\u90e8\u89c6\u9891\u9ad8\u6e05\u753b\u8d28"}(r||(r={})),function(e){e.Normal="clarity",e.Hd="high_clarity"}(u||(u={}));var c=864e5,s=5*c,d=3,v={normalTimestamp:0,normalTimes:0,closeTimestamp:0,hdTimestamp:0,hdTimes:0},f={highTimestamp:0,highTimes:0,lowTimestamp:0},m={lastTimestamp:0,times:0},p=1,g=["volume","fullscreen"]},67381:function(e,t,n){var i=n(74269);t.Z=new i.hD({clarityNotifyShow:{eventName:"clarity_notify_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityNotifyClick:{eventName:"clarity_notify_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityCellShow:{eventName:"clarity_cell_show",params:{group_id:"",clarity:"",is_auto:1,gear_name:""}},clarityCellClick:{eventName:"clarity_cell_click",params:{group_id:"",action:"",clarity:"",is_auto:1,gear_name:""}},clarityBubbleShow:{eventName:"clarity_bubble_show",params:{group_id:"",clarity:"",is_auto:1,method:"",gear_name:""}}})},15516:function(e,t,n){n.d(t,{V7:function(){return li}});var i,o,a,l,r,u,c,s=n(33734),d=n(1885),v=n(96879),f=n(96288),m=n(85891),p=n(11789),g=n(33485),h=n.n(g),_=n(21528),y=n(77060),w=n(16612),k=n(19785),E=n(98228),b=n(30234),x=n(73824),S=n(59662),C=n(11235),I=n.n(C),L=n(18653),N=n(24713),P=n(41257),T=n(29588),Z=n(79296),R=n.n(Z),D=n(71249),A=n.n(D),M=n(1744),B=n.n(M),F=n(15553),O=n.n(F),V=n(34154),U=n.n(V),H=n(38373),W=n.n(H),z=n(23947),q=n.n(z),K=n(59755),G="scroll",j=12e3,Y="updateLogin",Q="bullet_hover",X="ratechange",J="clearCache",$="reportIdChange",ee={1:{desc:"\u4e00\u884c",value:.1},2:{desc:"25%",value:.25},3:{desc:"50%",value:.5},4:{desc:"80%",value:.8}},te={1:{desc:"\u5c0f\u53f7",value:20},2:{desc:"\u9002\u4e2d",value:24},3:{desc:"\u5927\u53f7",value:28},4:{desc:"\u8d85\u5927",value:32}},ne={1:{desc:"\u8f83\u6162",value:18e3},2:{desc:"\u9002\u4e2d",value:14400},3:{desc:"\u8f83\u5feb",value:10800}},ie=new(n(74269).hD)({danmakuPubShow:{eventName:"danmaku_pub_show",params:{enter_from:"",group_id:"",author_id:"",danmaku_switch_status:0,is_post:0}},inputDanmaku:{eventName:"input_danmaku",params:{enter_from:""}},emojiTabShow:{eventName:"emoji_tab_show",params:{enter_from:"",enter_method:""}},clickEmoji:{eventName:"click_emoji",params:{enter_from:"",enter_method:"",click_method:""}},danmakuPubDone:{eventName:"danmaku_pub_done",params:{enter_from:"",click_method:"",group_id:"",author_id:"",danmaku_id:"",video_time:0,video_pct:0,danmaku_pub_duration:0,is_author:0,emoji_id:""}},firstDanmakuShow:{eventName:"first_danmaku_show",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",video_time:0,video_pct:0}},danmakuPlayResult:{eventName:"danmaku_play_result",params:{enter_from:"",group_id:"",author_id:"",danmaku_count:0,danmaku_pub_count:0,danmaku_play_count:0,speed_value:0,area_value:0,size_value:0,opacity_value:0,speed_video:0,play_time:0}},danmakuSwitch:{eventName:"danmaku_switch",params:{enter_from:"",group_id:"",author_id:"",action:""}},enterDanmakuSetting:{eventName:"enter_danmaku_setting",params:{enter_from:""}},danmakuOpacitySetting:{eventName:"danmaku_opacity_setting",params:{enter_from:"",group_id:"",author_id:"",opacity_value:80,pre_value:80}},danmakuSizeSetting:{eventName:"danmaku_size_setting",params:{enter_from:"",group_id:"",author_id:"",size_value:1,pre_value:1}},danmakuSpeedSetting:{eventName:"danmaku_speed_setting",params:{enter_from:"",group_id:"",author_id:"",speed_value:1,pre_value:1}},danmakuAreaSetting:{eventName:"danmaku_area_setting",params:{enter_from:"",group_id:"",author_id:"",area_value:.25,pre_value:.25}},clickDanmakuDefaultSetting:{eventName:"click_danmaku_default_setting",params:{enter_from:"",group_id:"",author_id:"",pre_speed_value:1,pre_area_value:.25,pre_size_value:1,pre_opacity_value:80}},pickDanmaku:{eventName:"pick_danmaku",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:""}},likeDanmaku:{eventName:"like_danmaku",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},cancelLikeDanmaku:{eventName:"cancel_like_danmaku",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},deleteDanmaku:{eventName:"delete_danmaku",params:{enter_from:"",group_id:"",author_id:"",danmaku_id:"",enter_method:""}},clickDanmakuList:{eventName:"click_danmaku_list",params:{enter_from:"",group_id:""}},danmakuListShow:{eventName:"danmaku_list_show",params:{enter_from:"",group_id:""}}}),oe={fontSize:2,speed:2,region:2,opacity:100,isOpen:!1},ae=L.gI.DanmakuSetting,le=new(q())([["fontSize",["danmakuSizeSetting","size_value"]],["region",["danmakuAreaSetting","area_value"]],["opacity",["danmakuOpacitySetting","opacity_value"]],["speed",["danmakuSpeedSetting","speed_value"]]]),re=function(e,t,n){var i=x.yW(),o=n||{},a=o.awemeId,l=o.authorUserId;if(B()(e).length>=le.size){var r=A()(t)?oe:t,u=r.speed,c=r.region,s=r.fontSize,d=r.opacity;ie.sendLog("clickDanmakuDefaultSetting",{enter_from:i,group_id:a,author_id:String(l),pre_speed_value:u-1,pre_area_value:ee[c].value,pre_size_value:s-1,pre_opacity_value:d})}else 1===B()(e).length&&O()(e,"isOpen")?ie.sendLog("danmakuSwitch",{enter_from:i,action:e.isOpen?"1":"0",group_id:a,author_id:String(l)}):U()(e,(function(e,n){var o;if("isOpen"!==n){var r=function(e,t,n){return"opacity"===e?[t,n]:"region"===e?[ee[t].value,ee[n].value]:[t-1,n-1]}(n,Number(e),t[n]),u=(0,p.Z)(r,2),c=u[0],s=u[1],d=le.get(n),v=(0,p.Z)(d,2),f=v[0],m=v[1];f&&ie.sendLog(f,(o={enter_from:i,group_id:a,author_id:String(l)},(0,T.Z)(o,m,c),(0,T.Z)(o,"pre_value",s),o))}}))},ue=function(){return L.Le.getConfig(ae)},ce=function(){var e,t;return(null===(e=ee[null===(t=ue())||void 0===t?void 0:t.region])||void 0===e?void 0:e.value)||.5},se=function(){var e,t;return(null===(e=te[null===(t=ue())||void 0===t?void 0:t.fontSize])||void 0===e?void 0:e.value)||24},de=function(){var e,t;return(null===(e=ne[null===(t=ue())||void 0===t?void 0:t.speed])||void 0===e?void 0:e.value)||j},ve=function(){var e=(0,m.Z)(h().mark((function e(){var t,n,i,o,a,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=L.Le.getConfig(ae))){e.next=3;break}return e.abrupt("return",t);case 3:return e.prev=3,e.next=6,K.Ri();case 6:if(0!==(null==(n=e.sent)?void 0:n.statusCode)){e.next=16;break}return o=null==n||null===(i=n.confList)||void 0===i?void 0:i[0],a=R()(o,(function(e,t){return"isOn"===t||0!==e})),l=(0,P.Z)((0,P.Z)({},oe),a),document.body.style.setProperty("--danmaku-img-height","".concat(te[l.fontSize].value,"px")),L.Le.setConfig(ae,l),e.abrupt("return",l);case 16:document.body.style.setProperty("--danmaku-img-height","".concat(te[oe.fontSize].value,"px"));case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(3);case 21:return document.body.style.setProperty("--danmaku-img-height","".concat(te[oe.fontSize].value,"px")),e.abrupt("return",oe);case 23:case"end":return e.stop()}}),e,null,[[3,19]])})));return function(){return e.apply(this,arguments)}}(),fe=W()(function(){var e=(0,m.Z)(h().mark((function e(t){var n,i,o,a,l,r,u,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.conf,i=t.oldConf,o=t.isSendLog,a=void 0===o||o,l=t.awemeInfo,r=t.isLogin,u=(0,P.Z)({},L.Le.getConfig(ae)||i),c=(0,P.Z)((0,P.Z)({},u),n),document.body.style.setProperty("--danmaku-img-height","".concat(te[c.fontSize].value,"px")),L.Le.setConfig(ae,c),!r){e.next=10;break}return e.next=8,K.RB(c);case 8:0===e.sent.statusCode&&a&&re(n,u,l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),100),me=[{key:"opacity",desc:"\u4e0d\u900f\u660e\u5ea6",showDots:!1,max:100,getLabelFunc:function(e){return"".concat(e,"%")},defaultVal:100..toString(),onChange:(l=(0,m.Z)(h().mark((function e(t){var n,i,o,a,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.val,i=t.danmu,o=t.awemeInfo,a=t.isLogin,l=Math.max(n/100,.2),fe({conf:{opacity:Math.max(n,20)},awemeInfo:o,isLogin:a}),null==i||i.setOpacity(l);case 4:case"end":return e.stop()}}),e)}))),function(e){return l.apply(this,arguments)})},{key:"region",desc:"\u663e\u793a\u533a\u57df",showDots:!0,max:3,getLabelFunc:function(e){var t;return null===(t=ee[e])||void 0===t?void 0:t.desc},defaultVal:"2",onChange:(a=(0,m.Z)(h().mark((function e(t){var n,i,o,a,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.val,i=t.danmu,o=t.awemeInfo,a=t.isLogin,l=(0,P.Z)({start:0,end:ee[n].value},1===n?{lines:1}:{}),fe({conf:{region:n},awemeInfo:o,isLogin:a}),null==i||i.setArea(l);case 4:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"fontSize",desc:"\u5b57\u4f53\u5927\u5c0f",showDots:!0,max:3,getLabelFunc:function(e){return te[e].desc},defaultVal:"2",onChange:(o=(0,m.Z)(h().mark((function e(t){var n,i,o,a,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.val,i=t.danmu,o=t.awemeInfo,a=t.isLogin,l=te[n].value,fe({conf:{fontSize:n},awemeInfo:o,isLogin:a}),null==i||i.setFontSize(String(l),l+20);case 4:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"speed",desc:"\u79fb\u52a8\u901f\u5ea6",showDots:!0,max:2,getLabelFunc:function(e){var t;return null===(t=ne[e])||void 0===t?void 0:t.desc},defaultVal:"2",onChange:(i=(0,m.Z)(h().mark((function e(t){var n,i,o,a,l,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.val,i=t.danmu,o=t.awemeInfo,a=t.player,l=t.isLogin,r=ne[n].value,fe({conf:{speed:n},awemeInfo:o,isLogin:l}),null==i||i.setAllDuration(G,r/(null==a?void 0:a.playbackRate));case 4:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})}],pe=null,ge=function(e){var t=e.player,i=e.isActive,o=e.awemeInfo,a=e.ref,l=e.danmakuInfo,r=e.initialStatus,u=e.setDanmakuInited,c=(0,_.useState)(Boolean(pe)),s=(0,p.Z)(c,2),d=s[0],v=s[1],f=(0,_.useRef)(null),g=(0,_.useRef)(0);(0,_.useEffect)((function(){return(0,m.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=14;break}return e.next=3,n.e(4580).then(n.t.bind(n,84580,23));case 3:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=7;break}e.t0=void 0===t;case 7:if(!e.t0){e.next=11;break}e.t2=void 0,e.next=12;break;case 11:e.t2=t.default;case 12:pe=e.t2,v(!0);case 14:case"end":return e.stop()}}),e)})))(),null}),[]);var y=function(e){g.current=e};return(0,_.useEffect)((function(){return null==t||t.on($,y),function(){null==t||t.off($,y),g.current=null}}),[t,o]),(0,_.useEffect)((function(){if(t&&i&&!t.danmaku&&r&&d){var e={needResizeObserver:!0,disableCopyDOM:!0,mouseControl:!0,mouseControlPause:!0,container:a.current,live:!1,player:t,direction:"r2l",channelSize:se()+20||40,area:{start:0,end:ce()||.5,lines:0===ce()?1:undefined},defaultOff:!0,dropStaleComments:!0},n=new pe(e);n.setOpacity((null===(k=ue())||void 0===k?void 0:k.opacity)/100||1),t.paused?t.needStart=!0:n.start(),t.danmaku=n,u(!0);var c=function e(){if(g.current)return g.current=0,void(f.current=null);var t=f.current;null!=t&&t.el&&(null==t||t.el.removeEventListener("mouseleave",e),null==t||t.el.removeEventListener("click_timestamp",e)),null!=t&&t.id&&(n.restartComment(null==t?void 0:t.id),t.el.style.setProperty("z-index","9")),f.current=null},s=function(e){var n,i=e.bullet;i!==f.current&&null!==i.el&&(ie.sendLog("pickDanmaku",{enter_from:x.yW(),group_id:null==o?void 0:o.awemeId,author_id:null==o||null===(n=o.authorInfo)||void 0===n?void 0:n.uid,danmaku_id:i.id}),f.current=i,t.danmaku.freezeComment(i.id),i.el.addEventListener("mouseleave",c),i.el.addEventListener("click_timestamp",c),i.el.style.setProperty("z-index","11"))};n.on(Q,s);var v=function(){var e;return null===(e=n)||void 0===e?void 0:e.resize()},m=function(){var e,i,o,a;(null==t||null===(e=t.danmaku)||void 0===e||e.clear(),null==t||null===(i=t.danmaku)||void 0===i||i.stop(),null!==(o=L.Le.getConfig(L.gI.DanmakuSetting))&&void 0!==o&&o.isOpen||l)&&(t.paused?t.needStart=!0:null===(a=n)||void 0===a||a.start())},p=function(){var e;c(),null==t||t.emit(J),null===(e=n)||void 0===e||e.stop()},h=function(){var e;return null===(e=n)||void 0===e?void 0:e.pause()},_=function(){var e,i,o;(null!==(e=L.Le.getConfig(L.gI.DanmakuSetting))&&void 0!==e&&e.isOpen||l)&&(t.needStart?(t.danmaku.start(),t.needStart=!1):null===(i=n)||void 0===i||null===(o=i.play)||void 0===o||o.call(i))},y=function(){var e,i=de();t.playbackRate&&(null===(e=n)||void 0===e||e.setAllDuration(G,i/t.playbackRate))},w=function(){l&&0!==(null==l?void 0:l.status)&&I()((function(){var e;(l.pausedStatus&&!t.paused||!l.pausedStatus)&&(null==t||null===(e=t.danmaku)||void 0===e||e.start())}),500)};if(t.on(N.FULLSCREEN_CHANGE,v),t.on(N.CSS_FULLSCREEN_CHANGE,v),t.on(N.MINI_STATE_CHANGE,v),t.on(N.SEEKED,m),t.on(N.SEEKING,p),t.on(N.PAUSE,h),t.on(N.PLAY,_),t.on(N.CANPLAY,w),t.on("ratechange",y),null!=l&&l.danmakuOffset&&0!==(null==l?void 0:l.status)){de();t.currentTime=Math.max((null==l?void 0:l.danmakuOffset)/1e3-1,0),I()((function(){var e;null==t||null===(e=t.danmaku)||void 0===e||e.start()}),500)}return function(){var e,i;null==t||t.off(N.FULLSCREEN_CHANGE,v),null==t||t.off(N.CSS_FULLSCREEN_CHANGE,v),null==t||t.off(N.MINI_STATE_CHANGE,v),t.off(N.SEEKED,m),null==t||t.off(N.SEEKING,p),null==t||t.off(N.PAUSE,h),t.off(N.PLAY,_),null==t||t.off(N.CANPLAY,w),null==t||t.off(X,y),null===(e=n)||void 0===e||e.off(Q,s),null===(i=n)||void 0===i||i.destroy(),n=null,t.danmaku=null}}var k;return null}),[t,i,o.awemeId,r,d]),null},he=n(46227),_e=n.n(he),ye=n(18556),we=n.n(ye),ke=n(68671),Ee="FgEeQg6q",be="G3IjO_vP",xe="pLIaEP5v",Se="jlUeXrgE",Ce="oxhbOz1m",Ie="dB9oUHYF",Le="O5eaZ45x",Ne="E_mTRaS5",Pe="xyRWL__J",Te="wekit4lP",Ze="ovV4WzRj",Re="MjMINqma",De="queCTwhe",Ae="FWxc2Y0l",Me="pItZxDIB",Be=n(70335),Fe=n.n(Be),Oe=n(54882),Ve=n.n(Oe),Ue=function(e){for(var t,n=e.text,i=e.emojiListMapped,o=e.danmakuId,a=[],l=-1,r=0,u=0,c=0;c<n.length;c++)if("]"===n[c]&&"["===n[l]){var s=n.substring(l,c+1);if(i.has(s)){var d,v;if(l-r>0)u+=1,a.push(_.createElement("span",{key:Ve()(v="".concat(o,"_")).call(v,u)},n.substring(r,l)));u+=1,a.push(_.createElement("img",{key:Ve()(d="img_".concat(o,"_")).call(d,u),src:i.get(s)})),r=c+1}}else"["===n[c]&&(l=c);r<n.length&&(u+=1,a.push(_.createElement("span",{key:Ve()(t="".concat(o,"_")).call(t,u)},n.substring(r))));return _.createElement(_.Fragment,null,a)},He=function(e){return null==e?void 0:e.stopPropagation()},We=n(63862),ze=n.n(We),qe=n(44632),Ke=n.n(qe),Ge=n(90400),je=n.n(Ge),Ye=n(40549),Qe=Ye.kv(),Xe=function(e){var t;return ze()(t=Ke()(e)).call(t,(function(e){return 1!==(null==e?void 0:e.hide)}))},Je=Xe(Qe),$e=function(){var e=(0,_.useState)(Je),t=(0,p.Z)(e,2),n=t[0],i=t[1];(0,_.useEffect)((function(){var e=!1,t=function(){var t=(0,m.Z)(h().mark((function t(){var n,o,a,l,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye.zk();case 2:n=t.sent,o=n.statusCode,a=n.data,l=void 0===a?[]:a,0===o?(r=Xe(l),e||i(r)):r=Je;case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!0}}),[]);var o=(0,_.useMemo)((function(){var e=new(q());return null==n||je()(n).call(n,(function(t){e.set(t.name,t.img)})),e}),[n]);return{emojiList:n,emojiListMapped:o}},et=n(88263),tt=n(53328),nt=n(94),it=n(87461),ot=n(52181);function at(){return at=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},at.apply(this,arguments)}var lt,rt,ut,ct=function(e){return _.createElement("svg",at({width:20,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_.createElement("mask",{id:"like_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},r||(r=_.createElement("path",{fill:"#D9D9D9",d:"M0 0h20v20H0z"}))),u||(u=_.createElement("g",{mask:"url(#like_svg__a)"},_.createElement("path",{d:"M9.798 3.842a.5.5 0 00.77-.06c.731-1.044 1.944-1.614 3.319-1.614 2.59 0 4.782 2.262 4.782 4.981l-.002.184a12.694 12.694 0 01-.001.108c0 .01 0 .025.003.043-.013.522-.1.967-.266 1.569-.061.086-.111.179-.152.262a5.07 5.07 0 00-.15.346c-.15.235-.224.38-.315.618-1.02 1.697-2.696 3.441-4.18 4.812a49.967 49.967 0 01-1.947 1.703l-.58.476-.057.047-.017.014c-.139.113-.264.216-.318.27-.254.254-.385.373-.684.373-.3 0-.43-.119-.685-.374-.055-.055-.19-.16-.335-.276l-.035-.028-.025-.02c-.176-.14-.41-.323-.684-.546a43.977 43.977 0 01-2.142-1.85c-1.625-1.501-3.379-3.394-4.208-5.192l-.007-.014c-.106-.212-.241-.61-.353-1.057a6.216 6.216 0 01-.192-1.13 1.537 1.537 0 00.002-.125v-.027c-.002-.048-.003-.107-.003-.186 0-2.72 2.191-4.981 4.782-4.981 1.36 0 2.611.563 3.68 1.674z",fill:"url(#like_svg__paint0_linear_30891_122313)",stroke:"#AD2342",strokeLinejoin:"round"}))),c||(c=_.createElement("defs",null,_.createElement("linearGradient",{id:"like_svg__paint0_linear_30891_122313",x1:10.003,y1:1.668,x2:10.003,y2:18.474,gradientUnits:"userSpaceOnUse"},_.createElement("stop",{stopColor:"#FF4370"}),_.createElement("stop",{offset:1,stopColor:"#FF375B"})))))},st=function(){return _.createElement("div",{className:Me},_.createElement("svg",{xmlns:"http://www.w3.org/2000/svg"},_.createElement("symbol",{id:"svg-like",width:"14",height:"13",viewBox:"0 0 14 13"},_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.88448 0.398438C8.76117 0.398438 7.74021 0.852731 7.11838 1.71269C6.26503 0.852731 5.24305 0.398438 4.12177 0.398438C1.98145 0.398438 0.203125 2.19879 0.203125 4.34121C0.203125 4.48708 0.210222 4.5534 0.203125 4.56025C0.214278 5.05421 0.454581 5.94437 0.647185 6.31825C1.94356 9.04193 6.0401 11.9265 6.23271 12.1134C6.42531 12.3004 6.61792 12.4873 7.00313 12.4873C7.38833 12.4873 7.58094 12.3004 7.77354 12.1134C7.96615 11.9265 11.5463 9.30121 13.1116 6.75067C13.1796 6.57644 13.2242 6.49033 13.3421 6.31259C13.4168 6.12907 13.4919 5.96279 13.5726 5.8745C13.7149 5.3828 13.795 5.01066 13.8031 4.56025C13.797 4.54746 13.8031 4.48609 13.8031 4.34121C13.8031 2.19978 12.0238 0.398438 9.88448 0.398438Z"})),_.createElement("symbol",{id:"svg-report",width:"14",height:"14",viewBox:"0 0 14 14"},_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.13316 1.23494L13.8226 11.7956C14.3266 12.7751 13.6965 14 12.6888 14H1.3112C0.303482 14 -0.326644 12.7751 0.177387 11.7956L5.86554 1.23494C6.36957 0.25502 7.62913 0.25502 8.13316 1.23494ZM7.00041 12.3C6.30991 12.3 5.75 11.7407 5.75 11.05C5.75 10.3593 6.30991 9.8 7.00041 9.8C7.69009 9.8 8.25 10.3593 8.25 11.05C8.25 11.7407 7.69009 12.3 7.00041 12.3ZM7 4.2C6.44772 4.2 6 4.64772 6 5.2V7.7C6 8.25228 6.44772 8.7 7 8.7C7.55228 8.7 8 8.25228 8 7.7V5.2C8 4.64772 7.55228 4.2 7 4.2Z"})),_.createElement("symbol",{id:"svg-delete",width:"12",height:"14",viewBox:"0 0 12 14"},_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.39844 0.199219H3.59844L3.19844 0.999219H1.39844C0.846153 0.999219 0.398438 1.44693 0.398438 1.99922V3.39922H11.5984V1.99922C11.5984 1.44693 11.1507 0.999219 10.5984 0.999219H8.79844L8.39844 0.199219ZM1.19844 4.99922H10.7984L10.4418 12.8446C10.4176 13.3787 9.97749 13.7992 9.44286 13.7992H2.55402C2.01939 13.7992 1.57932 13.3787 1.55505 12.8446L1.19844 4.99922Z"}))),_.createElement(nt.Z,{src:ct,viewBox:"0 0 20 20",width:20,height:20}))},dt=function(e){var t,n=e.text,i=e.danmakuId,o=e.awemeId,a=e.player,l=e.isLogin,r=e.isDanmuAuthor,u=void 0!==r&&r,c=e.isAwemeAuthor,s=void 0!==c&&c,d=e.isLike,v=void 0!==d&&d,f=e.isAnchor,g=void 0!==f&&f,y=e.authorId,w=void 0===y?"":y,k=e.loginDispatch,b=e.firstDanmakuShowRef,S=e.offsetTime,C=(0,_.useState)(null),L=(0,p.Z)(C,2),N=L[0],P=L[1],Z=$e(),R=Z.emojiList,D=Z.emojiListMapped,A=(0,_.useState)(v),M=(0,p.Z)(A,2),B=M[0],F=M[1],O=(0,_.useState)(l),V=(0,p.Z)(O,2),U=V[0],H=V[1],W=(0,_.useRef)(v),z=(0,E.x)((function(){!b.current&&S&&(ie.sendLog("firstDanmakuShow",{enter_from:x.yW(),group_id:o,author_id:w,danmaku_id:i,video_time:S,video_pct:Math.floor(a.currentTime/a.duration*100)}),b.current=!0)}));(0,_.useEffect)((function(){if(R&&D){var e=Ue({danmakuId:i,text:n,emojiList:R,emojiListMapped:D});P(e)}}),[R,D]),(0,_.useEffect)((function(){W.current=B}),[B]),(0,_.useEffect)((function(){var e=function(){H(!0)};return a&&a.on(Y,e),function(){a.off(Y,e)}}),[a,o]);var q=(0,_.useCallback)(_e()((0,m.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U){e.next=5;break}I()((function(){a.danmaku.freezeComment(i)}),100),(0,it.ZP)({success:function(){var e=(0,m.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k({type:"updateUserInfo"}),a.emit(Y),e.next=4,(0,K.ob)({danmakuId:i,awemeId:o,type:1});case 4:t=e.sent,n=t.statusCode,a.danmaku.restartComment(i),0===n&&F((function(e){return!e}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u53ef\u4e3a\u5f39\u5e55\u70b9\u8d5e",enterMethod:"like_danmaku",onClose:function(){a.danmaku.restartComment(i)}}),e.next=11;break;case 5:return F((function(e){return!e})),e.next=8,(0,K.ob)({danmakuId:i,awemeId:o,type:W.current?0:1});case 8:t=e.sent,0===t.statusCode&&ie.sendLog(W.current?"likeDanmaku":"cancelLikeDanmaku",{enter_from:x.yW(),group_id:o,author_id:w,danmaku_id:i,enter_method:"video"});case 11:case"end":return e.stop()}}),e)}))),500),[i,U,o]),G=(0,_.useCallback)((function(){a.emit($,i),a.danmaku.freezeComment(i),et.emit(et.EVENT.videoStopPlayNext);(0,tt.m)({title:"\u4e3e\u62a5\u5f39\u5e55",type:"danmaku",object_id:i,onClose:function(){et.emit(et.EVENT.videoRemoveStopPlayNext),a.danmaku.restartComment(i),a.emit($,null)},logParams:{enter_method:"video"}})}),[i]),j=(0,_.useCallback)((0,m.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=a&&a.danmaku&&(null==a||a.danmaku.removeComment(i),ot.F.info({text:"\u5df2\u5220\u9664\u5f39\u5e55",elTarget:(null==a?void 0:a.root)||document.body})),e.next=3,(0,K.YO)({userType:u?1:2,danmakuId:i});case 3:t=e.sent,0===t.statusCode&&ie.sendLog("deleteDanmaku",{enter_from:x.yW(),group_id:o,author_id:w,danmaku_id:i,enter_method:"video"});case 6:case"end":return e.stop()}}),e)}))),[i,o,a]);return _.createElement("div",{className:Fe()(Ee,be,(t={},(0,T.Z)(t,xe,u),(0,T.Z)(t,Se,g),t)),key:i,ref:z},_.createElement("div",{className:Ce,onClick:q},N),B&&_.createElement("div",{className:Fe()(Ne)},_.createElement(nt.Z,{src:ct,viewBox:"0 0 20 20",width:20,height:20})),_.createElement("div",{className:Ie}),_.createElement("div",{className:Le},_.createElement("div",{className:Fe()(Pe,Ze,(0,T.Z)({},Te,B)),onClick:q},_.createElement("svg",{className:Ae,width:"14",height:"13",viewBox:"0 0 14 13"},_.createElement("use",{href:"#svg-like"}))),!u&&_.createElement("div",{className:Fe()(Pe,Re),onClick:G},_.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14"},_.createElement("use",{href:"#svg-report"}))),(s||u)&&_.createElement("div",{className:Fe()(Pe,De),onClick:j},_.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14"},_.createElement("use",{href:"#svg-delete"})))))},vt=function(e){var t=document.createElement("div");return t.id=e.danmakuId,y.render(_.createElement(dt,(0,ke.Z)({},e,{key:e.danmakuId})),t),t},ft={isLoading:!1,hasUsed:!1,fetchTimes:0,data:[]},mt=function(e){var t=e.player,n=e.isActive,i=e.awemeInfo,o=e.userInfo,a=e.danmakuInited,l=e.danmakuInfo,r=e.firstDanmakuShowRef,u=e.loginDispatch,c=i.awemeId,s=i.authorInfo,d=(0,_.useRef)({}),v=(0,_.useRef)(0),f=(0,_.useRef)(0),g=(0,_.useRef)(!1),y=(0,_.useCallback)((function(e,t){if(!t)return[0,8];var n=8*Math.floor(t/8);return[n,n+8<e?n+8:e]}),[]),w=function(){d.current={}},k=function(){w(),g.current||(g.current=!0,(0,m.Z)(h().mark((function e(){var n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve();case 2:o=e.sent,ie.sendLog("danmakuPlayResult",{enter_from:x.yW(),group_id:null==i?void 0:i.awemeId,author_id:null==i||null===(n=i.authorInfo)||void 0===n?void 0:n.uid,danmaku_count:v.current,danmaku_pub_count:v.current,danmaku_play_count:f.current,speed_value:o.speed-1,area_value:ce(),size_value:o.fontSize-1,opacity_value:o.opacity,speed_video:t.playbackRate,play_time:t.currentTime||t.duration});case 4:case"end":return e.stop()}}),e)})))())};(0,_.useEffect)((function(){return d.current={},function(){k()}}),[c]),(0,_.useEffect)((function(){return null==t||t.on(J,w),function(){null==t||t.off(J,w)}}),[t,c]),(0,_.useEffect)((function(){if(t&&n&&t.danmaku&&a){var e=_e()((0,m.Z)(h().mark((function e(){var n,i,a,m,g,_,w,k,E,b,x,S,C,I;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=L.Le.getConfig(L.gI.DanmakuSetting))&&void 0!==n&&n.isOpen||l){e.next=2;break}return e.abrupt("return");case 2:if(i=y(t.duration,t.currentTime),a=(0,p.Z)(i,2),m=a[0],g=a[1],d.current.awemeId=d.current.awemeId||{},d.current.awemeId[m]||(d.current.awemeId[m]=(0,P.Z)({},ft)),!(null!=(_=d.current.awemeId[m])&&_.isLoading||null!=_&&_.hasUsed)){e.next=8;break}return e.abrupt("return");case 8:return _.fetchTimes++,_.isLoading=!0,e.next=12,(0,K.N6)({awemeId:c,startTime:Math.round(1e3*m),endTime:Math.round(1e3*g)});case 12:if(w=e.sent,_.isLoading=!1,0===w.statusCode){e.next=17;break}return e.abrupt("return");case 17:_.hasUsed=!0,k=w.danmakuList,E=void 0===k?[]:k,b=w.total,v.current=b,x="".concat(se(),"px"),(S=null==E?void 0:we()(E).call(E,(function(e){var n,i;return{start:(null==l?void 0:l.danmakuId)===e.danmakuId?undefined:e.offsetTime,realTime:(null==l?void 0:l.danmakuId)===e.danmakuId,duration:de()/t.playbackRate,id:e.danmakuId,user_id:e.userId,el:vt({text:e.text,danmakuId:e.danmakuId,awemeId:c,isLogin:null==o?void 0:o.isLogin,player:t,isDanmuAuthor:(null==e?void 0:e.userId)===(null==o||null===(n=o.info)||void 0===n?void 0:n.uid),isAwemeAuthor:(null==s?void 0:s.uid)===(null==o||null===(i=o.info)||void 0===i?void 0:i.uid),isAnchor:(null==l?void 0:l.danmakuId)===e.danmakuId,isLike:1===e.diggType,authorId:null==s?void 0:s.uid,loginDispatch:u,firstDanmakuShowRef:r,offsetTime:e.offsetTime,fontSize:x}),style:{fontSize:x,height:x,lineHeight:x,color:"#FFFFFF",marginTop:"20px"},prior:(null==l?void 0:l.danmakuId)===e.danmakuId||!1}}))).length>0&&(null==t||null===(C=t.danmaku)||void 0===C||null===(I=C.updateComments)||void 0===I||I.call(C,S,!1),f.current=f.current+S.length);case 23:case"end":return e.stop()}}),e)}))),2e3,{leading:!0,trailing:!1}),i=function(){!t.paused&&n&&t.danmaku&&a&&e()};return t.on(N.CANPLAY,e),t.on(N.TIME_UPDATE,i),t.on(N.ENDED,k),function(){t.off(N.CANPLAY,e),t.off(N.TIME_UPDATE,i),t.off(N.ENDED,k)}}return null}),[t,n,c,a,u])},pt=n(94344),gt=n(83100),ht=n(24189);function _t(){return _t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_t.apply(this,arguments)}var yt,wt,kt,Et=function(e){return _.createElement("svg",_t({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),lt||(lt=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29 6.29a2 2 0 012-2h10.693a2 2 0 012 2v5.404a5.55 5.55 0 00-2.472-.55V8.274a.6.6 0 00-.6-.6h-.771l.321-.478a.6.6 0 10-.996-.67l-.771 1.148h-.317l-.772-1.148a.6.6 0 00-.996.67l.322.478h-.775a.6.6 0 00-.6.6v3.772a.6.6 0 00.6.6h1.609a5.602 5.602 0 00-.625.69h-1.463a.6.6 0 100 1.2h.763a5.554 5.554 0 00-.443 2.181c0 .76.152 1.484.428 2.144H6.289a2 2 0 01-2-2V6.29zm11.021 4.997a5.525 5.525 0 00-.552.158h-.626v-.684h1.178v.526zM6.277 7.332a.6.6 0 01.6-.6h2.378a.6.6 0 01.6.6v2.83a.6.6 0 01-.6.6H7.477v1.157h1.778a.6.6 0 01.6.6v3.3a.6.6 0 01-.6.6H6.877a.6.6 0 010-1.2h1.778v-2.1H6.877a.6.6 0 01-.6-.6V10.16a.6.6 0 01.6-.6h1.778V7.932H6.877a.6.6 0 01-.6-.6zm5.48 4.113v-.684h1.177v.684h-1.178zm0-1.884h1.177v-.688h-1.178v.688zm2.377 0h1.177v-.688h-1.178v.688z",fill:"#fff"})),rt||(rt=_.createElement("path",{d:"M20.425 16.713a3.857 3.857 0 11-7.714 0 3.857 3.857 0 017.714 0z",fill:"#fff"})),ut||(ut=_.createElement("path",{d:"M15.258 16.802l1.028 1.079L18 15.859",stroke:"#FE2C55",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round"})))};function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bt.apply(this,arguments)}var xt,St=function(e){return _.createElement("svg",bt({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),yt||(yt=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.29 6.29a2 2 0 012-2h10.693a2 2 0 012 2v5.404a5.55 5.55 0 00-2.472-.55V8.274a.6.6 0 00-.6-.6h-.771l.321-.478a.6.6 0 10-.996-.67l-.771 1.148h-.317l-.772-1.148a.6.6 0 00-.996.67l.322.478h-.775a.6.6 0 00-.6.6v3.772a.6.6 0 00.6.6h1.609a5.602 5.602 0 00-.625.69h-1.463a.6.6 0 100 1.2h.763a5.554 5.554 0 00-.443 2.181c0 .76.152 1.484.428 2.144H6.289a2 2 0 01-2-2V6.29zm11.021 4.997a5.525 5.525 0 00-.552.158h-.626v-.684h1.178v.526zM6.277 7.332a.6.6 0 01.6-.6h2.378a.6.6 0 01.6.6v2.83a.6.6 0 01-.6.6H7.477v1.157h1.778a.6.6 0 01.6.6v3.3a.6.6 0 01-.6.6H6.877a.6.6 0 010-1.2h1.778v-2.1H6.877a.6.6 0 01-.6-.6V10.16a.6.6 0 01.6-.6h1.778V7.932H6.877a.6.6 0 01-.6-.6zm5.48 4.113v-.684h1.177v.684h-1.178zm0-1.884h1.177v-.688h-1.178v.688zm2.377 0h1.177v-.688h-1.178v.688z",fill:"#fff"})),wt||(wt=_.createElement("circle",{cx:16.566,cy:16.714,r:3.855,fill:"#fff"})),kt||(kt=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.613 18.824a2.355 2.355 0 01-3.157-3.157l3.157 3.157zm1.061-1.06l-3.158-3.158a2.355 2.355 0 013.158 3.158zm1.747-1.05a3.855 3.855 0 11-7.71 0 3.855 3.855 0 017.71 0z",fill:"#FE2C55"})))};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ct.apply(this,arguments)}var It,Lt,Nt=function(e){return _.createElement("svg",Ct({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xt||(xt=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.29 4.29a2 2 0 00-2 2v10.57a2 2 0 002 2H16.983a2 2 0 002-2V6.29a2 2 0 00-2-2H6.288zm5.483 2.072a.6.6 0 01.833.163l.77 1.147h.313l.77-1.147a.6.6 0 01.996.67l-.32.477h.775a.6.6 0 01.6.6V12.044a.6.6 0 01-.6.6h-1.78v.69h2.254a.6.6 0 110 1.2H14.13v1.754a.6.6 0 01-1.2 0v-1.754h-2.252a.6.6 0 010-1.2h2.252v-.69h-1.775a.6.6 0 01-.6-.6V8.271a.6.6 0 01.6-.6h.776l-.321-.476a.6.6 0 01.163-.833zm3.537 2.51v.689h-1.18v-.69h1.18zm0 1.889h-1.18v.683h1.18v-.684zm-2.38-1.89v.69h-1.175v-.69h1.175zm0 1.89h-1.175v.683h1.175v-.684zM6.873 6.732a.6.6 0 000 1.2h1.778v1.63H6.873a.6.6 0 00-.6.6v2.357a.6.6 0 00.6.6h1.778v2.101H6.873a.6.6 0 000 1.2h2.378a.6.6 0 00.6-.6v-3.3a.6.6 0 00-.6-.6H7.473v-1.158h1.778a.6.6 0 00.6-.6v-2.83a.6.6 0 00-.6-.6H6.873z",fill:"#fff"})))},Pt="nuVKXZuV",Tt="d4SO9THv",Zt="KeLUrWhP",Rt=function(e){var t=e.player,n=e.initialStatus,i=e.setInitialStatus,o=e.awemeInfo,a=e.isConfGot,l=e.isLogin,r=e.noDisturb,u=(0,_.useState)(n),c=(0,p.Z)(u,2),s=c[0],d=c[1],v=(0,_.useRef)(),f=(0,_.useRef)(!1);(0,_.useEffect)((function(){if(n){var e,i,a,r;if(t.danmaku)if(s)if(fe({conf:{isOpen:!0},awemeInfo:o,isSendLog:f.current,isLogin:l}),t.paused)t.needStart=!0;else null==t||null===(e=t.danmaku)||void 0===e||null===(i=e.start)||void 0===i||i.call(e);else t.needStart=!1,null==t||null===(a=t.danmaku)||void 0===a||null===(r=a.stop)||void 0===r||r.call(a);f.current=!1}else f.current=!1}),[s]),(0,_.useEffect)((function(){n&&d(!0)}),[n]);var m=function(){d(!0)};(0,_.useEffect)((function(){null==t||t.on("DANMAKU_SWITCH_OPEN",m);var e=et.listen(et.EVENT.syncInteraction,(function(){return d(ue().isOpen)}));return function(){null==t||t.off("DANMAKU_SWITCH_OPEN",m),null==e||e()}}),[]);var g=(0,_.useMemo)((function(){return a?s?Et:St:Nt}),[a,s]);return _.createElement("div",{className:Pt},_.createElement(gt.e,{target:v.current,text:"".concat(s?"\u5173\u95ed":"\u6253\u5f00","\u5f39\u5e55"),type:"top",className:Zt},_.createElement("span",{className:Tt,onMouseEnter:function(){var e,t;r&&et.emit(null==ht||null===(e=et)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})},ref:v},_.createElement(nt.Z,{src:g,width:24,height:24,viewBox:"0 0 24 24",onClick:function(){if(f.current=!0,t){if(!n)return i(!0),d(!0),void fe({conf:{isOpen:!0},awemeInfo:o,isLogin:l});fe({conf:{isOpen:!s},awemeInfo:o,isLogin:l}),d((function(e){return!e}))}}}))))},Dt=n(94147),At=n(57398),Mt=n(3388);function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Bt.apply(this,arguments)}var Ft,Ot=function(e){return _.createElement("svg",Bt({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),It||(It=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.867 6.29a2 2 0 012-2H16.44a2 2 0 012 2v5.25l-1.644-.959a1 1 0 00-.801-.09V8.272a.6.6 0 00-.6-.6h-.76l.32-.48a.6.6 0 00-.999-.666l-.764 1.146h-.305l-.764-1.146a.6.6 0 00-.998.666l.32.48h-.765a.6.6 0 00-.6.6v3.772a.6.6 0 00.6.6h1.57l-.605.353a1 1 0 00-.346.337h-1.091a.6.6 0 100 1.2h.94v4.178c0 .05.005.1.012.147H5.867a2 2 0 01-2-2V6.29zm10.927 4.87l-.488.285h-.67v-.684h1.158v.4zM5.836 7.333a.6.6 0 01.6-.6h2.358a.6.6 0 01.6.6v2.83a.6.6 0 01-.6.6H7.036v1.157h1.758a.6.6 0 01.6.6v3.3a.6.6 0 01-.6.6H6.436a.6.6 0 010-1.2h1.758v-2.1H6.436a.6.6 0 01-.6-.6V10.16a.6.6 0 01.6-.6h1.758V7.932H6.436a.6.6 0 01-.6-.6zm5.443 4.113v-.684h1.157v.684h-1.157zm0-1.884h1.157v-.688h-1.157v.688zm2.357 0h1.158v-.688h-1.158v.688z",fill:"#fff"})),Lt||(Lt=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.778 12.703a1 1 0 00-.98 0l-2.429 1.366a1 1 0 00-.51.871v2.688a1 1 0 00.51.871l2.429 1.366a1 1 0 00.98 0l2.429-1.366a1 1 0 00.51-.871V14.94a1 1 0 00-.51-.871l-2.429-1.366zm-.49 2.299a1.286 1.286 0 100 2.571 1.286 1.286 0 000-2.571z",fill:"#fff"})))},Vt="NeVK4K7J",Ut="mOZQ6qTC",Ht="Ct2Y7RCs",Wt="A_tOU8ZU",zt="VP4NJV6i",qt="gkixdBnK",Kt="YRAF0Pq9",Gt="_sN3nn_G",jt="Ijw_vxyr",Yt="o6ynkHZH",Qt="oACe20E4",Xt="Ok2ACNO0",Jt="QyDcSfQq",$t=n(53778),en=n(70403),tn=n.n(en),nn=n(78650),on=n.n(nn),an=n(10441),ln=n.n(an),rn=n(21706),un=n(36800),cn=n(89086),sn=n(42284),dn=n(48374);function vn(){return vn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vn.apply(this,arguments)}var fn,mn=function(e){return _.createElement("svg",vn({width:6,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Ft||(Ft=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.22 9.79a.69.69 0 010-1.01L4.19 5 .22 1.22a.69.69 0 010-1.01.777.777 0 011.06 0l4.5 4.285a.69.69 0 010 1.01l-4.5 4.286a.777.777 0 01-1.06 0z",fill:"#fff"})))};function pn(){return pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pn.apply(this,arguments)}var gn,hn=function(e){return _.createElement("svg",pn({width:13,height:13,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),fn||(fn=_.createElement("path",{d:"M12.601 12.601a1.362 1.362 0 01-1.927 0L6.5 8.427 2.326 12.6a1.362 1.362 0 01-1.927-1.927L4.573 6.5.4 2.326A1.362 1.362 0 112.326.399L6.5 4.573 10.674.4a1.362 1.362 0 111.927 1.927L8.427 6.5l4.174 4.174a1.362 1.362 0 010 1.927z",fill:"#fff",fillOpacity:.8})))},_n={container:"CMczMJpF",danmukuList:"BsEwlJ9h",disable:"o3j60atn",modalBackground:"FuHuRzHh",modal:"WnEYavX5",header:"BvbOS8z7",divider:"a7vwnOzj",content:"PgbsaihK",danmakuHeader:"yv8IDbW4",time:"Miewz3GE",text:"_JRThMv_",noMore:"Vt3R4An8",danmakuList:"SQv4WVUj",danmakuLi:"ayrZoO1l",interaction:"yeiYJggj",timeLi:"f6F3WLNl",textLi:"I0jxIWJt",icon:"ltiMXcmU",isLike:"huFy2l7k",likeIcon:"LqDshKsU",report:"fnBwMqee",deleteIcon:"UW2yjcw6",error:"Gs7xrqqA",toast:"EQnZA4sO",defaultLoading:"AdCGMWlA",centerLoading:"bdJ3xez3"},yn=function(e){var t=e.danmaku,n=e.isLogin,i=e.player,o=e.loginDispatch,a=e.awemeId,l=e.authorId,r=e.isDanmuAuthor,u=e.isAwemeAuthor,c=e.setDanmakuList,s=t.danmakuId,d=t.text,v=t.offsetTime,f=t.diggType,g=(0,_.useState)(null),y=(0,p.Z)(g,2),w=y[0],k=y[1],E=$e(),b=E.emojiList,S=E.emojiListMapped,C=(0,_.useState)(Boolean(f)),I=(0,p.Z)(C,2),L=I[0],N=I[1],P=(0,_.useRef)(Boolean(f)),Z=(0,_.useState)(n),R=(0,p.Z)(Z,2),D=R[0],A=R[1];(0,_.useEffect)((function(){if(b&&S){var e=Ue({danmakuId:s,text:d,emojiList:b,emojiListMapped:S});k(e)}}),[b,S]),(0,_.useEffect)((function(){P.current=L}),[L]),(0,_.useEffect)((function(){var e=function(){A(!0)};return i&&i.on(Y,e),function(){i.off(Y,e)}}),[i,a]);var M=(0,_.useCallback)(_e()((0,m.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=4;break}(0,it.ZP)({success:function(){var e=(0,m.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o({type:"updateUserInfo"}),i.emit(Y),e.next=4,K.ob({danmakuId:s,awemeId:a,type:1});case 4:t=e.sent,0===t.statusCode&&(N((function(e){return!e})),c((function(e){var t=tn()(e).call(e,(function(e){return e.danmakuId===s}));return e[t].diggType=e[t].diggType?0:1,(0,$t.Z)(e)})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),headerText:"\u767b\u5f55\u540e\u53ef\u4e3a\u5f39\u5e55\u70b9\u8d5e",enterMethod:"like_danmaku",onClose:function(){}}),e.next=11;break;case 4:return N((function(e){return!e})),c((function(e){var t=tn()(e).call(e,(function(e){return e.danmakuId===s}));return e[t].diggType=e[t].diggType?0:1,(0,$t.Z)(e)})),e.next=8,K.ob({danmakuId:s,awemeId:a,type:P.current?0:1});case 8:t=e.sent,0===t.statusCode&&ie.sendLog(P.current?"likeDanmaku":"cancelLikeDanmaku",{enter_from:x.yW(),group_id:a,author_id:l,danmaku_id:s,enter_method:"list"});case 11:case"end":return e.stop()}}),e)}))),500),[s,D,a]),B=(0,_.useCallback)((function(){(0,tt.m)({title:"\u4e3e\u62a5\u5f39\u5e55",type:"danmaku",object_id:s,onClose:function(){et.emit(et.EVENT.videoRemoveStopPlayNext)},logParams:{enter_method:"list"}})}),[s]),F=(0,_.useCallback)((0,m.Z)(h().mark((function e(){var t,n,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=i&&i.danmaku&&(pt.F.info({text:"\u5df2\u5220\u9664\u5f39\u5e55",elTarget:null!==(t=document)&&void 0!==t&&t.fullscreenElement?null===(n=document)||void 0===n?void 0:n.fullscreenElement:document.body}),c((function(e){var t=tn()(e).call(e,(function(e){return e.danmakuId===s}));return on()(e).call(e,t,1),(0,$t.Z)(e)}))),e.next=3,K.YO({userType:r?1:2,danmakuId:s});case 3:o=e.sent,0===o.statusCode&&ie.sendLog("deleteDanmaku",{enter_from:x.yW(),group_id:a,author_id:l,danmaku_id:s,enter_method:"list"});case 6:case"end":return e.stop()}}),e)}))),[s,a,i,l,r]);return _.createElement("li",{className:_n.danmakuLi},_.createElement("div",{className:_n.timeLi},cn.$y(v)),_.createElement("div",{className:_n.textLi},w),_.createElement("div",{className:_n.interaction},_.createElement("div",{className:Fe()(_n.icon,_n.likeIcon,(0,T.Z)({},_n.isLike,L)),onClick:M},_.createElement("svg",{className:_n.iconLike,width:"14",height:"13",viewBox:"0 0 14 13"},_.createElement("use",{href:"#svg-like"}))),!r&&_.createElement("div",{className:Fe()(_n.icon,_n.report),onClick:B},_.createElement("svg",{width:"14",height:"14",viewBox:"0 0 14 14"},_.createElement("use",{href:"#svg-report"}))),(u||r)&&_.createElement("div",{className:Fe()(_n.icon,_n.deleteIcon),onClick:F},_.createElement("svg",{width:"12",height:"14",viewBox:"0 0 12 14"},_.createElement("use",{href:"#svg-delete"})))))},wn=function(e){var t=e.player,n=e.loginDispatch,i=e.isLogin,o=e.awemeInfo,a=e.userUid,l=(0,_.useState)([]),r=(0,p.Z)(l,2),u=r[0],c=r[1],s=(0,_.useState)(!1),d=(0,p.Z)(s,2),v=d[0],f=d[1],g=(0,_.useState)(!1),y=(0,p.Z)(g,2),w=y[0],k=y[1],b=(0,_.useState)(!0),S=(0,p.Z)(b,2),C=S[0],I=S[1],L=(0,_.useRef)(!0),N=(0,_.useRef)(0),P=(0,_.useCallback)((0,m.Z)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w&&L.current){e.next=2;break}return e.abrupt("return");case 2:return k(!0),e.next=5,K.JV({awemeId:null==o?void 0:o.awemeId,offset:N.current,count:50});case 5:(null==(n=e.sent)||null===(t=n.danmakuList)||void 0===t?void 0:t.length)>0&&c((function(e){var t;return Ve()(t=[]).call(t,(0,$t.Z)(e),(0,$t.Z)(n.danmakuList))})),null!=n&&n.hasMore&&(N.current+=50),I(null==n?void 0:n.hasMore),k(!1);case 10:case"end":return e.stop()}}),e)}))),[null==o?void 0:o.awemeId,w,C]);(0,_.useEffect)((function(){L.current=C}),[C]);var T=(0,_.useCallback)((0,m.Z)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c([]),e.next=3,I(!0);case 3:return N.current=0,e.next=6,P();case 6:case"end":return e.stop()}}),e)}))),[P]),Z=(0,_.useCallback)((function(e){var t=e.target;t.scrollHeight,t.scrollTop,t.clientHeight,t.scrollHeight-t.scrollTop<t.clientHeight+200&&P()}),[P]),R=function(){ie.sendLog("danmakuListShow",{enter_from:x.vM(),group_id:null==o?void 0:o.awemeId})},D=(0,E.x)(ln()(R).call(R,null));return _.createElement("div",{className:_n.container},_.createElement("div",{className:Fe()(_n.danmukuList),onClick:function(){document.body.classList.add("hidden"),un.YY.replaceCurrentTask({id:"danmuList"}),ie.sendLog("clickDanmakuList",{enter_from:x.vM(),group_id:null==o?void 0:o.awemeId}),T(),f(!0),et.emit(et.EVENT.videoStopPlayNext)}},_.createElement("div",null,"\u5f39\u5e55\u5217\u8868"),_.createElement(nt.Z,{src:mn,width:6,height:10,viewBox:"0 0 6 10"})),v&&_.createElement(rn.u,{className:Fe()(_n.modal),modalClassName:_n.modalBackground,type:"custom",onCancel:function(){document.body.classList.remove("hidden"),et.emit(et.EVENT.videoRemoveStopPlayNext),f(!1),un.YY.finishTask("danmuList")},isHide:!v},_.createElement("div",{className:_n.header,ref:D},_.createElement("div",null,"\u5f39\u5e55\u5217\u8868"),_.createElement(nt.Z,{src:hn,width:13,height:13,viewBox:"0 0 13 13",onClick:function(){et.emit(et.EVENT.videoRemoveStopPlayNext),f(!1)}})),_.createElement(At.i,{className:_n.divider}),_.createElement("div",{className:_n.content},_.createElement("div",{className:_n.danmakuHeader},_.createElement("div",{className:_n.time},"\u65f6\u95f4"),_.createElement("div",{className:_n.text},"\u5f39\u5e55\u5185\u5bb9")),(null==u?void 0:u.length)>0&&_.createElement("ul",{className:_n.danmakuList,onScroll:Z,onWheel:function(e){return e.stopPropagation()}},we()(u).call(u,(function(e){return _.createElement(yn,{danmaku:e,key:null==e?void 0:e.danmakuId,player:t,isLogin:i,awemeId:o.awemeId,authorId:null==o?void 0:o.authorInfo.uid,isDanmuAuthor:(null==e?void 0:e.userId)===a,isAwemeAuthor:a===(null==o?void 0:o.authorInfo.uid),loginDispatch:n,setDanmakuList:c})})),w&&_.createElement(sn.g,{className:Fe()(_n.defaultLoading),text:"\u52a0\u8f7d\u4e2d"}),!C&&_.createElement("li",{className:_n.noMore},"\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4e86")),(null==u?void 0:u.length)<=0&&w&&_.createElement(sn.g,{className:Fe()(_n.centerLoading),text:"\u52a0\u8f7d\u4e2d"}),(null==u?void 0:u.length)<=0&&!w&&_.createElement(dn.gi,{className:_n.error,title:"",desc:"\u6682\u65f6\u6ca1\u6709\u66f4\u591a\u4e86"}))))},kn=function(e){var t=e.label,n=e.max,i=e.showDots,o=e.getLabelFunc,a=e.defaultValue,l=e.onChange,r=e.resetVal,u=e.min,c=(0,_.useState)(a||"1"),s=(0,p.Z)(c,2),d=s[0],v=s[1];(0,_.useEffect)((function(){v(a)}),[r,a]);var f=(0,_.useCallback)((function(e){l(Number(e)),v(e)}),[l]);return _.createElement("div",{className:Xt},_.createElement("span",null,t),_.createElement(Dt.i,{className:Jt,min:u||0,max:n,getLabelFunc:o,showDots:i,value:d,onChange:f}))},En=function(e){var t=e.player,n=e.awemeInfo,i=e.isLogin,o=e.noDisturb,a=e.loginDispatch,l=e.userUid,r=(0,_.useState)(!1),u=(0,p.Z)(r,2),c=u[0],s=u[1],d=(0,_.useState)(!0),v=(0,p.Z)(d,2),f=v[0],m=v[1];return(0,_.useEffect)((function(){var e=et.listen(et.EVENT.syncInteraction,(function(){return s((function(e){return!e}))}));return function(){null==e||e()}}),[]),_.createElement("div",{className:Vt,onMouseEnter:function(){var e,t;(ie.sendLog("enterDanmakuSetting",{enter_from:x.yW()}),m(!1),o)&&et.emit(null==ht||null===(e=et)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})}},f?null:_.createElement("div",{className:Ut},_.createElement("div",{className:Ht},_.createElement("div",{className:qt},_.createElement("div",{className:Kt},"\u5f39\u5e55\u8bbe\u7f6e"),_.createElement("div",{className:Gt,onClick:function(){!function(e,t,n,i){var o=(0,P.Z)({},L.Le.getConfig(ae)),a=oe.opacity,l=oe.speed,r=oe.fontSize,u=oe.region;L.Le.setConfig(ae,null),null==e||e.setOpacity(a/100);var c=te[r].value;null==e||e.setFontSize(String(c),c+20,{reflow:!1});var s=(0,P.Z)({start:0,end:ee[u].value},1===u?{lines:1}:{});null==e||e.setArea(s),null==e||e.setAllDuration(G,ne[l].value/(null==n?void 0:n.playbackRate)),fe({conf:{region:u,speed:l,fontSize:r,opacity:a,isOpen:o.isOpen},awemeInfo:t,oldConf:o,isLogin:i})}(null==t?void 0:t.danmaku,n,t,i),s((function(e){return!e}))}},_.createElement(nt.Z,{src:Mt.Z,width:13,height:12,viewBox:"0 0 14 13"}),_.createElement("span",null,"\u6062\u590d\u9ed8\u8ba4"))),_.createElement(At.i,{className:jt}),_.createElement("div",{className:Qt},we()(me).call(me,(function(e){return _.createElement(kn,{key:e.key,label:e.desc,showDots:e.showDots,max:"opacity"===e.key?e.max:e.max+1,min:"opacity"===e.key?20:1,getLabelFunc:e.getLabelFunc,defaultValue:(o=e.key,String((null===(a=ue())||void 0===a?void 0:a[o])||oe[o])||e.defaultVal),onChange:function(o){return e.onChange({danmu:null==t?void 0:t.danmaku,val:o,awemeInfo:n,player:t,isLogin:i})},resetVal:c});var o,a}))),_.createElement(At.i,{className:Yt}),_.createElement(wn,{userUid:l,awemeInfo:n,player:t,loginDispatch:a,isLogin:i})),_.createElement("div",{className:Wt})),_.createElement(nt.Z,{className:zt,src:Ot,width:24,height:24,viewBox:"0 0 24 24"}))},bn=n(59156),xn=n.n(bn),Sn=n(3429),Cn=n.n(Sn),In=n(10396),Ln=n.n(In),Nn=n(97448),Pn=n.n(Nn),Tn=n(52708),Zn=n.n(Tn),Rn=n(24514),Dn=n.n(Rn),An=n(47999),Mn="foy8gwIu",Bn="RYqjae0C",Fn="pLLE5Uol",On="KegQvOm6",Vn="a2nFYRcv",Un="bOlXi_Q3",Hn="YDbUa2ls",Wn="_Edz0_KI",zn="UBnH43aH";function qn(){return qn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},qn.apply(this,arguments)}var Kn,Gn,jn=function(e){return _.createElement("svg",qn({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),gn||(gn=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 12a7 7 0 11-14 0 7 7 0 0114 0zm-7 9a9 9 0 100-18 9 9 0 000 18zM10.36 9.955c0 .903-.549 1.636-1.226 1.636-.678 0-1.228-.732-1.228-1.636 0-.904.55-1.637 1.228-1.637.677 0 1.227.733 1.227 1.637zm4.5 1.636c.678 0 1.227-.732 1.227-1.636 0-.904-.55-1.637-1.227-1.637-.678 0-1.227.733-1.227 1.637 0 .903.55 1.636 1.227 1.636zM12 15.297c-1.356 0-2.455-.785-2.455-1.753 0-.969 4.91-.969 4.91 0 0 .968-1.1 1.753-2.455 1.753z",fill:"#fff",fillOpacity:.5})))};function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yn.apply(this,arguments)}var Qn=function(e){return _.createElement("svg",Yn({width:24,height:24,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Kn||(Kn=_.createElement("rect",{x:4.664,y:4.668,width:14.667,height:14.667,rx:7.333,fill:"#fff"})),Gn||(Gn=_.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 21a9 9 0 100-18 9 9 0 000 18zM7.966 10.137a.908.908 0 001.285 1.284l1.87-1.87v6.912a.908.908 0 001.816 0v-6.92l.809.808 1.07 1.07a.908.908 0 001.284-1.284l-3.302-3.302a1.081 1.081 0 00-1.53 0l-3.302 3.302z",fill:"#FE2C55"})))},Xn=function(e,t){var n,i=ze()(n=e.match(/\[[\u4e00-\u9fa5]+\]/g)||[]).call(n,(function(e){return Ln()(t).call(t,e)}));return i[i.length-1]||""},Jn=function(e){var t,n,i,o=e.awemeInfo,a=e.userInfo,l=e.player,r=e.loginDispatch,u=e.setInitialStatus,c=(e.initialStatus,e.firstDanmakuShowRef),s=(0,_.useState)(0),d=(0,p.Z)(s,2),v=d[0],f=d[1],g=(0,_.useState)(""),y=(0,p.Z)(g,2),w=y[0],k=y[1],E=(0,_.useRef)(null),b=(0,_.useRef)(null),S=(0,_.useRef)(0),C=(0,_.useRef)(!1),L=(0,_.useRef)(0),N=(0,_.useRef)(!1),P=(0,_.useRef)(0),Z=(0,_.useRef)(!1),R=$e().emojiList,D=(0,_.useMemo)((function(){var e;return we()(e=Pn()(R)).call(e,(function(e){return R[e].name}))}),[R]),A=(0,_.useMemo)((function(){var e,t;if(null==o||null===(e=o.danmakuControl)||void 0===e||!e.isPostDenied)return"\u53d1\u6761\u5f39\u5e55\u5427...";return"\u4f5c\u8005\u4ec5\u5141\u8bb8".concat({1:"\u7c89\u4e1d",2:"\u597d\u53cb",3:"\u81ea\u5df1"}[null==o||null===(t=o.danmakuControl)||void 0===t?void 0:t.postPrivilegeLevel],"\u53d1\u5f39\u5e55")}),[o]),M=(0,_.useCallback)(function(){var e=(0,m.Z)(h().mark((function e(t){var n,i,s,d,v,f,m,p,g,_,y,E;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==o||null===(n=o.danmakuControl)||void 0===n||!n.isPostDenied){e.next=2;break}return e.abrupt("return");case 2:if(!(Zn()()-L.current<5e3)){e.next=5;break}return pt.F.info("\u53d1\u9001\u9891\u7387\u8fc7\u5feb, \u7b49\u5f855\u79d2\u540e\u53ef\u518d\u6b21\u53d1\u9001"),e.abrupt("return");case 5:if(!/^\s*$/.test(w)&&!C.current){e.next=7;break}return e.abrupt("return");case 7:return C.current=!0,m=Math.floor(1e3*(null==l?void 0:l.currentTime)),e.next=11,(0,K.FW)({item_id:null==o?void 0:o.awemeId,text:w,user_id:null==a||null===(i=a.info)||void 0===i?void 0:i.uid,offset_time:m});case 11:p=e.sent,C.current=!1,L.current=Zn()(),g=p.statusCode,_=p.danmakuId,y=_||Cn()("postComment"),ie.sendLog("danmakuPubDone",{enter_from:x.vM(),click_method:t,group_id:null==o?void 0:o.awemeId,author_id:null==o||null===(s=o.authorInfo)||void 0===s?void 0:s.uid,danmaku_id:null!=_?_:0,video_time:Math.floor(1e3*l.currentTime||0),video_pct:1e3*l.currentTime/(null==o||null===(d=o.video)||void 0===d?void 0:d.duration),danmaku_pub_duration:Zn()()-S.current,is_author:(null==a||null===(v=a.info)||void 0===v?void 0:v.uid)===(null==o||null===(f=o.authorInfo)||void 0===f?void 0:f.uid)?1:0,emoji_id:Xn(w,D)}),u(!0),null==l||l.emit("DANMAKU_SWITCH_OPEN"),E="".concat(se(),"px"),I()((function(){var e,t,n,i,u;null==l||null===(e=l.danmaku)||void 0===e||e.sendComment({prior:!0,user_id:null==a||null===(t=a.info)||void 0===t?void 0:t.uid,id:y,duration:de()/l.playbackRate,realTime:!0,el:vt({text:w,danmakuId:y,awemeId:null==o?void 0:o.awemeId,isLogin:null==a?void 0:a.isLogin,player:l,isDanmuAuthor:!0,isAwemeAuthor:(null==o||null===(n=o.authorInfo)||void 0===n?void 0:n.uid)===(null==a||null===(i=a.info)||void 0===i?void 0:i.uid),authorId:null==o||null===(u=o.authorInfo)||void 0===u?void 0:u.uid,loginDispatch:r,firstDanmakuShowRef:c,offsetTime:0===g?m:0}),style:{color:"#FFFFFF",fontSize:E,height:E,lineHeight:E,marginTop:"20px"}}),k("")}),200);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,w,a,o,D]),B=(0,_.useCallback)((function(e){var t=e.key,n=e.ctrlKey||e.metaKey;return"Enter"!==t||n||N.current?null:M("hot_key")}),[M]),F=(0,_.useCallback)((function(e){var t=E.current.selectionStart,n=t,i=function(e,t){for(var n=t-1,i=!1,o=t,a=!1;n>=0;){if("["===e[n]){i=!0;break}if("]"===e[n])break;n--}for(;o<=e.length-1;){if("]"===e[o]){a=!0;break}if("["===e[o])break;o++}return i&&a?[n,o+1]:[-1,-1]}(w,t),o=(0,p.Z)(i,2),a=o[0],l=o[1];if(Ln()(D).call(D,Dn()(w).call(w,a,l))){if(w.length-(l-a+1)+e.name.length>40)return f(2),void E.current.focus();k((function(t){return Dn()(t).call(t,0,a)+e.name+Dn()(t).call(t,l)})),n=a}else{if(w.length+e.name.length>40)return f(2),void E.current.focus();k((function(n){return Dn()(n).call(n,0,t)+e.name+Dn()(n).call(n,t)}))}f(2),I()((function(){E.current.setSelectionRange(n+e.name.length,n+e.name.length),E.current.focus()}))}),[w,D]),O=(0,_.useCallback)((function(e){k(e.target.value)}),[]);return(0,_.useEffect)((function(){if(0!==w.length)return 0===S.current&&(S.current=Zn()()),et.emit(et.EVENT.videoStopPlayNext),function(){et.emit(et.EVENT.videoRemoveStopPlayNext)};S.current,An.vU()&&(Z.current=!0,I()((function(){return Z.current=!1})))}),[w]),(0,_.useEffect)((function(){var e,t,n,i,o,a;return null===(e=E.current)||void 0===e||null===(t=e.addEventListener)||void 0===t||t.call(e,"keydown",B),null===(n=E.current)||void 0===n||null===(i=n.addEventListener)||void 0===i||i.call(n,"keydown",He),null===(o=E.current)||void 0===o||null===(a=o.addEventListener)||void 0===a||a.call(o,"selectstart",He),function(){var e,t,n,i,o,a;null===(e=E.current)||void 0===e||null===(t=e.removeEventListener)||void 0===t||t.call(e,"keydown",B),null===(n=E.current)||void 0===n||null===(i=n.removeEventListener)||void 0===i||i.call(n,"keydown",He),null===(o=E.current)||void 0===o||null===(a=o.removeEventListener)||void 0===a||a.call(o,"selectstart",He)}}),[B]),(0,_.useEffect)((function(){if(v){var e=b.current;return null==e||e.addEventListener("wheel",He),function(){null==e||e.removeEventListener("wheel",He)}}}),[v]),(0,_.useEffect)((function(){if(1===v){var e;ie.sendLog("emojiTabShow",{enter_from:x.vM(),enter_method:"danmaku"});var t=E.current;return t.addEventListener("click",He),xn()(l,"config.closeDelayBlur",!0),null==l||null===(e=l.focus)||void 0===e||e.call(l,{autoHide:!1}),function(){var e;xn()(l,"config.closeDelayBlur",!1),null==l||null===(e=l.focus)||void 0===e||e.call(l),t.removeEventListener("click",He)}}}),[v]),_.createElement("div",{className:Mn},v?_.createElement("div",{className:Fe()(On,(0,T.Z)({},Un,2===v)),ref:b,onMouseEnter:function(){clearTimeout(P.current)},onMouseLeave:function(){P.current=I()((function(){return f(2)}),700)}},_.createElement("div",{className:Vn,onClick:function(e){return e.nativeEvent.stopImmediatePropagation()}},we()(R).call(R,(function(e){return _.createElement("img",{src:e.img,key:e.name,onClick:function(t){t.preventDefault(),ie.sendLog("clickEmoji",{enter_from:x.vM(),enter_method:"danmaku",click_method:"emoji"}),F(e)}})})))):null,null!=a&&a.isLogin?_.createElement("input",{ref:E,className:Bn,type:"text",disabled:(null==o||null===(t=o.danmakuControl)||void 0===t?void 0:t.isPostDenied)||!1,maxLength:40,value:w,onChange:O,placeholder:w?"":A,spellCheck:!1,onFocus:function(){var e;ie.sendLog("inputDanmaku",{enter_from:x.vM()}),xn()(l,"config.closeDelayBlur",!0),null==l||null===(e=l.focus)||void 0===e||e.call(l,{autoHide:!1}),et.emit(et.EVENT.videoStopPlayNext)},onBlur:function(){var e;xn()(l,"config.closeDelayBlur",!1),null==l||null===(e=l.focus)||void 0===e||e.call(l),et.emit(et.EVENT.videoRemoveStopPlayNext)},onCompositionStart:function(){N.current=!0},onCompositionEnd:function(e){I()((function(){return N.current=!1}),10)}}):_.createElement("div",{className:Fn,onClick:function(){(0,it.ZP)({enterMethod:"danmaku",headerText:"\u767b\u5f55\u540e\u53ef\u53d1\u5e03\u5f39\u5e55\u4e92\u52a8",success:function(){r({type:"updateUserInfo"})}})}},_.createElement("span",null,"\u767b\u5f55"),"\u540e\u53ef\u53d1\u5e03\u5f39\u5e55"),_.createElement(nt.Z,{src:jn,className:Fe()([Hn],(i={},(0,T.Z)(i,Wn,1===v),(0,T.Z)(i,zn,!1===(null==a?void 0:a.isLogin)||!0===(null==o||null===(n=o.danmakuControl)||void 0===n?void 0:n.isPostDenied)),i)),width:24,height:24,viewBox:"0 0 24 24",onMouseEnter:function(e){var t;!1===(null==a?void 0:a.isLogin)||!0===(null==o||null===(t=o.danmakuControl)||void 0===t?void 0:t.isPostDenied)||Z.current||(clearTimeout(P.current),f(1))},onMouseLeave:function(){P.current=I()((function(){f((function(e){return 0===e?0:2}))}),700)}}),w?_.createElement(nt.Z,{src:Qn,width:24,height:24,viewBox:"0 0 24 24",onClick:function(){return M("click")}}):null)},$n="cL3t_Mk2",ei="aoXhLsp0",ti="ezX8A3xQ",ni="I6WvmKj6",ii="E8wnDxIb",oi=function(e){var t,n=e.isActive,i=e.awemeInfo,o=e.userInfo,a=e.player,l=e.bulletRef,r=e.loginDispatch,u=e.danmakuInfo,c=e.abtestData,s=(0,_.useState)(Boolean(u)||!1),d=(0,p.Z)(s,2),v=d[0],f=d[1],g=(0,_.useState)(!1),y=(0,p.Z)(g,2),w=y[0],k=y[1],S=(0,_.useState)(!1),C=(0,p.Z)(S,2),I=C[0],L=C[1],N=(0,_.useState)(Boolean(u)||!1),P=(0,p.Z)(N,2),T=P[0],Z=P[1],R=(0,_.useRef)(!1);(0,_.useEffect)((function(){0===(null==u?void 0:u.status)&&pt.F.info("\u6b64\u5f39\u5e55\u5df2\u5220\u9664")}),[]);var D=(0,E.x)((function(){return k(!0)}));return(0,_.useEffect)((function(){var e=!1;return(0,m.Z)(h().mark((function t(){var n,a,l;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ve();case 2:n=t.sent,e||u||(f(n.isOpen),Z(!0),w&&ie.sendLog("danmakuPubShow",{enter_from:x.vM(),group_id:null==i?void 0:i.awemeId,author_id:null==i||null===(a=i.authorInfo)||void 0===a?void 0:a.uid,danmaku_switch_status:n.isOpen?1:0,is_post:null==o||!o.isLogin||null!=i&&null!==(l=i.danmakuControl)&&void 0!==l&&l.isPostDenied?0:1}));case 4:case"end":return t.stop()}}),t)})))(),function(){e=!0}}),[i,u,w]),ge({ref:l,isActive:n,player:a,awemeInfo:i,danmakuInfo:u,initialStatus:v,setDanmakuInited:L}),mt({isActive:n,player:a,awemeInfo:i,userInfo:o,danmakuInfo:u,danmakuInited:I,firstDanmakuShowRef:R,loginDispatch:r}),_.createElement("div",{className:ei,ref:D},_.createElement(Rt,{player:a,initialStatus:v,setInitialStatus:f,awemeInfo:i,isConfGot:T,isLogin:null==o?void 0:o.isLogin,noDisturb:(null==c?void 0:c.noDisturb)===b.NoDisturbABVal.All}),_.createElement(En,{player:a,awemeInfo:i,isLogin:null==o?void 0:o.isLogin,noDisturb:(null==c?void 0:c.noDisturb)===b.NoDisturbABVal.All,loginDispatch:r,userUid:null==o||null===(t=o.info)||void 0===t?void 0:t.uid}),_.createElement("div",{className:ti}),_.createElement(Jn,{awemeInfo:i,userInfo:o,player:a,loginDispatch:r,setInitialStatus:f,initialStatus:v,firstDanmakuShowRef:R}))},ai=function(e){(0,v.Z)(n,e);var t=(0,f.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"afterCreate",value:function(){this.renderRoot()}},{key:"destroy",value:function(){y.unmountComponentAtNode(this.root)}},{key:"renderRoot",value:function(){y.render(_.createElement(oi,this.config),this.root)}},{key:"updateConfig",value:function(e){this.config=e,this.renderRoot()}},{key:"render",value:function(){return'<div data-state="normal" class="'.concat($n,'" data-e2e=\'danmaku-container\' style=""></div>')}}],[{key:"pluginName",get:function(){return"DanmakuPlugin"}},{key:"defaultConfig",get:function(){return{position:k.POSITIONS.CONTROLS_LEFT,index:9,className:"xgplayer-danmaku"}}}]),n}(w.ZP),li=function(e){var t=e.isActive,n=e.awemeInfo,i=e.userInfo,o=e.loginDispatch,a=e.danmakuInfo,l=e.abtestData,r=(0,S.n)(),u=(0,_.useRef)();return(0,_.useEffect)((function(){return r&&t?(r.registerPlugin(ai,{player:r,bulletRef:u,isActive:t,userInfo:i,loginDispatch:o,awemeInfo:n,danmakuInfo:a,abtestData:l}),function(){var e,t;null!=r&&null!==(e=r.getPlugin)&&void 0!==e&&e.call(r,"DanmakuPlugin")&&(null==r||null===(t=r.unRegisterPlugin)||void 0===t||t.call(r,"DanmakuPlugin"))}):null}),[r,t,n]),(0,_.useEffect)((function(){if(r&&t){var e=r.getPlugin("DanmakuPlugin");e&&e.updateConfig({player:r,bulletRef:u,isActive:t,userInfo:i,loginDispatch:o,awemeInfo:n,danmakuInfo:a})}}),[i]),t?_.createElement(_.Fragment,null,_.createElement(st,null),_.createElement("div",{ref:u,className:Fe()(ni,ii)})):null}},33466:function(e,t,n){n.d(t,{E:function(){return P}});var i=n(59662),o=(n(81799),n(41257)),a=n(29588),l=n(11789),r=n(12544),u=n.n(r),c=n(21528),s=n(30234),d=n(18653),v=n(73824),f=n(64625),m=n(73843),p=n(19085),g=n(76055),h=n(47237),_=n(6749),y=n(94344),w=n(42457),k=n(72559),E=n(88263),b=n(41316),x=n(24713),S=new(n(74269).hD)({retryClick:{eventName:"retry_click",params:{group_id:"",log_pb:"",enter_from:""}}}),C=n(11235),I=n.n(C),L=n(63862),N=n.n(L),P=function(e){var t=(0,i.n)(),n=e.isActive,r=e.awemeInfo,C=e.clarityAB,L=e.deleteCurrentSwiper,P=e.config,T=e.abtestData,Z=e.noAutoPlay;return function(e){var t=e.player,n=e.isActive,i=e.awemeInfo,r=e.deleteCurrentSwiper,k=e.abtestData,E=(0,c.useState)(!0),b=(0,l.Z)(E,2),x=b[0],S=b[1],C=(0,c.useRef)(n);C.current=n,(0,c.useEffect)((function(){if(t&&x){if((null==k?void 0:k.blankScreenOptimize)===s.BlankScreenOptimize.On){var e=!1,n=!1,l=function(l){if(d.Le.getConfig(d.gI.RefetchAwemeInfo)[null==i?void 0:i.awemeId]){var r;w.i.sendLog("playerBlankScreen",{enter_from:v.vM(),error_code:(null==l||null===(r=l.mediaError)||void 0===r?void 0:r.code)||"",has_retried:1})}else{if(!n)return new(u())((function(e){n=!0,null==t||t.retry(),e(!1)}));t.removeClass(h.Z.ERROR),t.addClass(h.Z.LOADING);var c=t.currentTime;(0,g.m_)({awemeId:null==i?void 0:i.awemeId}).then((function(n){if(n.statusCode===m.ERROR_CODE.ERROR_404)d.Le.getConfig(d.gI.RefetchAwemeInfo)[null==i?void 0:i.awemeId]=null,e||S(!1);else{var l;if(!t.video)return;d.Le.setConfig(d.gI.RefetchAwemeInfo,(0,a.Z)({},null==i?void 0:i.awemeId,n.detail)),t.resetState(),t.isPlaying=!1,t.setConfig((0,o.Z)({autoplay:C.current},(0,_.Td)({awemeInfo:n.detail,abtestData:k,userselection:null===(l=f.G(p.SessionStorageKeys.manualSwitch))||void 0===l?void 0:l.gearType}))),C.current?(t.config.startTime=c,t.play()):t.start()}})).catch((function(){var e;w.i.sendLog("playerBlankScreen",{enter_from:v.vM(),error_code:(null==l||null===(e=l.mediaError)||void 0===e?void 0:e.code)||"",has_retried:0}),t.addClass(h.Z.ERROR),t.removeClass(h.Z.LOADING)}))}};return t.on("error",l),t.usePluginHooks("error","errorRetry",(function(){return t.removeClass("xgplayer-is-error"),t.emit("waiting"),new(u())((function(e){t.retry(),e(!1)}))})),function(){t.off("error",l),e=!0}}var r=0;t.usePluginHooks("error","errorHandler",(function(){if(!(r>0))return t.removeClass("xgplayer-is-error"),t.emit("waiting"),new(u())((function(e){r++,t.retry(),e(!1)}))})),t.usePluginHooks("error","errorRetry",(function(){return t.removeClass("xgplayer-is-error"),t.emit("waiting"),new(u())((function(e){t.retry(),e(!1)}))}))}}),[t,i,k,x]),(0,c.useEffect)((function(){!x&&n&&(y.F.info("\u8be5\u89c6\u9891\u5df2\u88ab\u5220\u9664"),r(),S(!0))}),[n,x])}({player:t,isActive:n,awemeInfo:r,deleteCurrentSwiper:L,abtestData:T}),function(e){var t=e.player,n=e.isActive,i=e.clarityAB,o=e.awemeInfo,l=e.config,r=e.noAutoPlay,u=e.abtestData;(0,c.useEffect)((function(){var e,a=null===(e=f.G(p.SessionStorageKeys.manualSwitch))||void 0===e?void 0:e.gearType;if(t){if(!n){t.config.autoplay=!1,t.autoplay=!1;var u=function(){t.pause()};return u(),t.on(x.TIME_UPDATE,u),function(){t.off(x.TIME_UPDATE,u)}}var c,s,d,v;if(t.config.autoplay=!r,t.autoplay=!r,t.isPlaying)i&&t.config.userSelectDefinition!==a&&(t.config.userSelectDefinition=a,t.config.definition=null==l?void 0:l.definition,null===(c=t.getPlugin)||void 0===c||null===(s=c.call(t,"PlayClaritySettingPlugin"))||void 0===s||s.updateConfig({awemeInfo:o})),t.resetState(),t.isPlaying=!1,t.start(null);else i&&t.config.userSelectDefinition!==a?(null===(d=t.getPlugin)||void 0===d||null===(v=d.call(t,"PlayClaritySettingPlugin"))||void 0===v||v.updateConfig({awemeInfo:o}),t.config.userSelectDefinition=a,t.config.definition=null==l?void 0:l.definition,t.resetState(),t.isPlaying=!1,t.start(null)):r?t.pause():t.play()}}),[t,n,null==l?void 0:l.definition,r]),(0,c.useEffect)((function(){t&&n&&window.dispatchEvent(new Event("playNext",{bubbles:!0}))}),[t,n]),(0,c.useEffect)((function(){if(t&&n){window.player=t,k.s.getPlayersByScene(b.lT.Modal).length>0&&k.s.getPlayerScene(t.playerId)!==b.lT.Modal||null==t||t.setUserActive(!0);var e=E.listen(E.EVENT.videoPause,(function(){return t.pause()}));return function(){e()}}}),[t,n]),(0,c.useEffect)((function(){if(t){var e=function(){"dash"===t.playerType&&(0,g.m_)({awemeId:null==o?void 0:o.awemeId}).then((function(e){var n=e.detail;d.Le.setConfig(d.gI.RefetchAwemeInfo,(0,a.Z)({},null==o?void 0:o.awemeId,n));var i=(0,_.Td)({awemeInfo:n,abtestData:u});t.config.DashPlugin.dashOpts.dynamic_video=i.DashPlugin.dashOpts.dynamic_video,t.playNext(t.config,t.currentTime,"MEDIA_EXPIRED")}))};return t.on("MEDIA_EXPIRED",e),function(){t.off("MEDIA_EXPIRED",e)}}}),[t,o])}({player:t,isActive:n,clarityAB:C,awemeInfo:r,config:P,noAutoPlay:Z,abtestData:T}),function(e){var t=e.player,n=e.isActive,i=e.awemeInfo;(0,c.useEffect)((function(){if(t&&n){var e=function(e){"error_retry"===e.action&&S.sendLog("retryClick",{group_id:null==i?void 0:i.awemeId,log_pb:null==i?void 0:i.logPb,enter_from:v.vM()})};return t.on("user_action",e),function(){t.off("user_action",e)}}}),[t,n,i])}({player:t,isActive:n,awemeInfo:r}),function(e){var t=e.player,n=e.isActive;(0,c.useEffect)((function(){if(t&&t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className="".concat(t.root.getElementsByClassName("xgplayer-start")[0].className," douyinHide"),n)){var e=I()((function(){var e;t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className=N()(e=t.root.getElementsByClassName("xgplayer-start")[0].className.split(" ")).call(e,(function(e){return"douyinHide"!==e})).join(" "))}),1e3),i=function(){var n;clearTimeout(e),t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className=N()(n=t.root.getElementsByClassName("xgplayer-start")[0].className.split(" ")).call(n,(function(e){return"douyinHide"!==e})).join(" "))};return t.once(x.AUTOPLAY_STARTED,i),function(){t.off(x.AUTOPLAY_STARTED,i),t.root.getElementsByClassName("xgplayer-start")[0]&&(t.root.getElementsByClassName("xgplayer-start")[0].className="".concat(t.root.getElementsByClassName("xgplayer-start")[0].className," douyinHide"))}}}),[t,n])}({player:t,isActive:n}),null}},64385:function(e,t,n){n.d(t,{h:function(){return A}});var i=n(41257),o=n(53778),a=n(11789),l=n(16979),r=n.n(l),u=n(59156),c=n.n(u),s=n(52708),d=n.n(s),v=n(54882),f=n.n(v),m=n(11235),p=n.n(m),g=n(63862),h=n.n(g),_=n(18556),y=n.n(_),w=n(21528),k=n(59662),E=n(61655),b=n(36210),x=n.n(b),S="q5Hnj0xS",C="MjxE7ivv",I="eXHTAsg4",L=n(70335),N=n.n(L);function P(e){var t=e.x,n=void 0===t?50:t,i=e.y,o=void 0===i?50:i,a=(0,w.useRef)(x()(String(1e4*Math.random()%61-30))),l={left:n-35,top:o-34,transform:"rotate(".concat(a.current,"deg)")};return w.createElement("div",{style:l,className:S},w.createElement("img",{src:"//lf3-static.bytednsdoc.com/obj/eden-cn/ulkphgeh7nuvspognuhbo/douyin_web/img/images/feed_money_like_icon.svg",className:N()(C,I)}))}var T=n(58117),Z=n(18653),R=n(85924),D=n(24713),A=function(e){var t=e||{},n=t.isActive,l=t.awemeInfo,u=(t.userInfo,(0,k.n)()),s=(0,w.useRef)(0),v=(0,w.useRef)(0),m=(0,w.useState)([]),g=(0,a.Z)(m,2),_=g[0],b=g[1];(0,w.useCallback)((function(e){e.stopPropagation()}),[]);return(0,w.useEffect)((function(){if(u&&n){var e,t,a,m,g=null===(e=u.root.getElementsByClassName("focusPanel"))||void 0===e?void 0:e[0],_=T.e((function(){null!=u&&u.paused?(u.play(),u.emitUserAction(D.USER_ACTION,"switch_play_pause",{action:"switch_play_pause",paused:!0,pluginName:"click"})):(u.pause(),u.emitUserAction(D.USER_ACTION,"switch_play_pause",{action:"switch_play_pause",paused:!1,pluginName:"click"}))}),(function(e,t){u.emit("onStar",{event:e,clickMethod:t})}),300),y=function(e){(e.target===u.root||e.target===u.video||e.target===u.innerContainer||e.target===u.video.__canvas||g)&&_(e,"mouse")},w={space:{keyCode:32,action:function(e){_(e,"space")},disable:!1,noBodyTarget:!1}},k=function(e){var t,n=e.event,i=e.isKeyWorkCancalLike,a=e.clickMethod,r=null===(t=Z.Le.getConfig(Z.gI.DiggStatusCache))||void 0===t?void 0:t[null==l?void 0:l.awemeId];d()()-((null==r?void 0:r.lastDiggTime)||0)>1e3&&(null==r?void 0:r.diggStatus)===R.gZ.Digged&&"hot_key"===a&&i&&d()()-v.current>500||(v.current=d()(),function(e){var t,n,i=0,a=0;e&&"keydown"===e.type?(i=(null==u||null===(t=u.root)||void 0===t?void 0:t.clientWidth)/2,a=(null==u||null===(n=u.root)||void 0===n?void 0:n.clientHeight)/2):(i=null==e?void 0:e.offsetX,a=null==e?void 0:e.offsetY);var l=d()();b((function(e){var t;return s.current++,f()(t=[]).call(t,(0,o.Z)(e),[{x:i,y:a,index:s.current,timeFlag:l}])})),p()((function(){b((function(e){return h()(e).call(e,(function(e){return e.timeFlag!==l}))}))}),1e3)}(n))};u.config.closeVideoClick=!0,g?g.addEventListener("click",y,!1):u.root.addEventListener("click",y,!1);var x={space:null==u||null===(t=u.plugins)||void 0===t||null===(a=t.keyboard)||void 0===a||null===(m=a.keyCodeMap)||void 0===m?void 0:m.space};return c()(u,"plugins.keyboard.keyCodeMap",(0,i.Z)((0,i.Z)({},r()(u,"plugins.keyboard.keyCodeMap")||{}),w)),u.on("onStar",k),function(){u.config.closeVideoClick=!1,g?g.removeEventListener("click",y,!1):u.root.removeEventListener("click",y,!1),u.plugins.keyboard&&((0,E.v)({currentCodeMap:u.plugins.keyboard.keyCodeMap,additionalCodeMap:w}),c()(u,"plugins.keyboard.keyCodeMap",(0,i.Z)((0,i.Z)({},r()(u,"plugins.keyboard.keyCodeMap")||{}),x))),u.off("onStar",k)}}}),[u,n,l]),(0,w.useEffect)((function(){if(u)return u.config.closeVideoClick=!0,function(){u.config.closeVideoClick=!1}}),[u]),w.createElement(w.Fragment,null,y()(_).call(_,(function(e){return w.createElement(P,{x:e.x,y:e.y,key:e.index})})))}},42048:function(e,t,n){n.d(t,{Z:function(){return oe}});var i=n(53778),o=n(64343),a=n(41257),l=n(48797),r=n.n(l),u=n(38373),c=n.n(u),s=n(90400),d=n.n(s),v=n(97448),f=n.n(v),m=n(18556),p=n.n(m),g=n(54882),h=n.n(g),_=n(10396),y=n.n(_),w=n(11235),k=n.n(w),E=n(52708),b=n.n(E),x=n(93326),S=n.n(x),C=n(21528),I=n(59662),L=n(39027),N=n(18653),P=n(21972),T=n(73824),Z=n(21144),R=n(92354),D=n(53549),A=n(59013),M=n(47999),B=n(84815),F=n(48382),O=n(12458),V=n(71487),U=n(31301),H=n(19085),W=n(44738),z=n(86358),q=n(41316),K=n(209),G=n(25994),j=n(74269),Y={videoPlayQuality:{eventName:"video_play_quality",params:{group_id:"",previous_page:"",tab_name:"",bitrate_set:"",enter_from:"",codec_format:"",duration:0,cache_size:0,video_quality:"",video_format:"",video_bitrate:"",vduration:"",internet_speed:0,player_type:"xgplayer",player_version:"",internet_speed_dl:0,preload_time:0,preload_size:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",player_first_frame:0,current_low_decode_count:0,decoder_mode:0,h265_failure_rate:-1}},prfVolumeChange:{eventName:"prf_volume_change",params:{down:0,enter_from:"",search_params:undefined}},videoBlock:{eventName:"video_block",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",codec_format:"",duration:0,cache_size:0,video_quality:"",video_format:"",video_bitrate:"",vduration:"",block_type:"",internet_speed_dl:0,internet_speed:0,player_type:"xgplayer",player_version:"",cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:""}},videoPlayEnd:{eventName:"video_play_end",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",codec_format:"",duration:0,is_success:0,vduration:"",internet_speed:0,player_type:"xgplayer",player_version:"",video_quality:"",video_format:"",video_bitrate:"",internet_speed_dl:0,preload_time:0,preload_size:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",current_low_decode_count:0,decoder_mode:0,is_bytevc1:0}},videoPlayFailed:{eventName:"video_play_failed",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",cache_size:0,errorCode:0,errorDesc:"",is_cdn_expired:0,vduration:"",internet_speed:"",player_type:"xgplayer",player_version:"",internet_speed_dl:0,is_video_support:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:"",h265_failure_rate:-1}},videoRequest:{eventName:"video_request",params:{group_id:"",previous_page:"",tab_name:"",enter_from:"",video_quality:"",video_format:"",internet_speed:0,is_csr:1,compilation_id:"",cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:""}},videoRequestResponse:{eventName:"video_request_response",params:{group_id:"",enter_from:"",previous_page:"",tab_name:"",video_quality:"",video_format:"",vduration:"",duration:"",is_success:0,internet_speed:0,is_csr:1,compilation_id:"",internet_speed_dl:0,cpu_core:0,memory_size:0,UA_info:"",host:"",vtype:""}},videoPlay:{eventName:"video_play",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",enter_from_merge:"",previous_page:"",is_visible:"1",compilation_id:"",is_auto_play:"0",impression_data:"",video_detail_enter_from:"web_link",tab_name:"",speed:"1",auto_cnt:1,is_full_screen:"0",trending_topic:"",enter_method:"",from_follow_list:"0",is_mute:"0",mute_type:"",from_academy:0,is_small_window:"0",clarity:"",first_tag_name:"",top:0}},videoPlayFinish:{eventName:"video_play_finish",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",enter_from_merge:"",compilation_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",mute_type:"",trending_topic:"",is_small_window:"0",first_tag_name:"",top:0}},playTime:{eventName:"play_time",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",enter_from_merge:"",previous_page:"",is_auto_play:"0",is_visible:"1",duration:0,from_percent:0,to_percent:0,video_detail_enter_from:"web_link",tab_name:"",speed:"",is_full_screen:"0",trending_topic:"",enter_method:"",from_follow_list:"0",is_mute:"0",mute_type:"",is_small_window:"0",clarity:"",first_tag_name:"",top:0,is_insert_wallpaper:0}},videoPlayCheckPoint:{eventName:"video_play_check_point",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",enter_from_merge:"",previous_page:"",compilation_id:"",order:0,tab_name:"",trending_topic:"",first_tag_name:"",top:0}},clickPreviousVideo:{eventName:"click_previous_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",tab_name:"",click_from:"",is_small_window:"0",trending_topic:"",first_tag_name:"",top:0}},clickNextVideo:{eventName:"click_next_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:"",tab_name:"",is_small_window:"0",trending_topic:"",first_tag_name:"",top:0}},clickAutoPlay:{eventName:"click_auto_play",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",status:""}},clickVideoSpeed:{eventName:"click_video_speed",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",speed:""}},enterFullScreen:{eventName:"enter_full_screen",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:""}},exitFullScreen:{eventName:"exit_full_screen",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",click_from:""}},clickScreenMode:{eventName:"click_screen_mode",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",status:""}},clickVolume:{eventName:"click_volume",params:{enter_from:"",mute_remind:"none",status:"0"}},pauseVideo:{eventName:"pause_video",params:{enter_from:"",mute_remind:"none",click_method:"click",is_small_window:"0"}},startVideo:{eventName:"start_video",params:{enter_from:"",mute_remind:"none",click_method:"click"}},openPureMode:{eventName:"open_pure_mode",params:{enter_from:"",enter_method:""}},closePureMode:{eventName:"close_pure_mode",params:{enter_from:"",enter_method:""}},progressClick:{eventName:"progress_click",params:{enter_from:"",click_method:"hot_key",rate:-1}}},Q=new j.hD(Y),X=n(59218),J=n(24713),$=n(31452),ee=n(88263),te=n(73682),ne=n(9187),ie={videoPlay:["is_click_cover"],playTime:["is_click_cover"],videoPlayFinish:["is_click_cover"]},oe=function(e){var t=e||{},n=t.awemeInfo,l=t.isActive,u=t.isNext,s=t.isPrev,v=t.logParams,m=t.userInfo,g=t.isClientMiniWin,_=t.isFirst,w=(0,I.n)(),E=(0,C.useRef)(null),x=(0,C.useRef)(null),j=(0,C.useRef)("click"),Y=(0,C.useRef)({videoRequest:[],videoRequestResponse:[],videoPlayFailed:[]}),oe=(0,C.useRef)({}),ae=(0,C.useRef)(!1);u?j.current="down":s&&(j.current="up");var le=(0,ne.O)({player:w,isActive:l}).inImmersive;oe.current=(0,C.useMemo)((function(){var e,t={};return d()(e=f()(ie)).call(e,(function(e){var n,i={};d()(n=ie[e]).call(n,(function(e){i[e]=v[e]})),t[e]=i})),t}),[v]),x.current=(0,C.useMemo)((function(){var e,t,i,o,l,r,u,c,s,m,k,b,x,S,C,I,P,T,Z,R,D,A,M,B,F,O,V,U,W,z,q;E.current&&null!=n&&n.awemeId&&(null==n?void 0:n.awemeId)!==E.current&&(ae.current=!0,j.current="click"),E.current=null==n?void 0:n.awemeId;var K=(0,a.Z)({},v);return d()(e=f()(ie)).call(e,(function(e){var t;d()(t=ie[e]).call(t,(function(e){delete K[e]}))})),{is_click_cover:_?1:0,author_id:null==n||null===(t=n.authorInfo)||void 0===t?void 0:t.uid,group_id:null==n?void 0:n.awemeId,log_pb:null==n?void 0:n.logPb,compilation_id:null==n||null===(i=n.mixInfo)||void 0===i?void 0:i.mixId,impressionData:null==n?void 0:n.impressionData,awemeId:null==n?void 0:n.awemeId,vduration:null==n||null===(o=n.video)||void 0===o?void 0:o.duration,qualityType:(null==n||null===(l=n.video)||void 0===l||null===(r=l.bitRateList)||void 0===r||null===(u=r[0])||void 0===u?void 0:u.qualityType)||(null==n||null===(c=n.video)||void 0===c?void 0:c.qualityType),bitRate:(null==n||null===(s=n.video)||void 0===s||null===(m=s.bitRateList)||void 0===m||null===(k=m[0])||void 0===k?void 0:k.bitRate)||(null==n||null===(b=n.video)||void 0===b?void 0:b.bitRate),gearName:(null==n||null===(x=n.video)||void 0===x||null===(S=x.bitRateList)||void 0===S||null===(C=S[0])||void 0===C?void 0:C.gearName)||"",bitrate_set:null==n||null===(I=n.video)||void 0===I||null===(P=I.bitRateList)||void 0===P?void 0:p()(P).call(P,(function(e){return null==e?void 0:e.gearName})),quality_bitrate:null==n||null===(T=n.video)||void 0===T||null===(Z=T.bitRateList)||void 0===Z?void 0:p()(Z).call(Z,(function(e){var t;return h()(t="".concat(null==e?void 0:e.qualityType,":")).call(t,null==e?void 0:e.bitRate)})),action_type:j.current,aweme_type:null==n?void 0:n.awemeType,pic_cnt:null!==(R=null==n||null===(D=n.images)||void 0===D?void 0:D.length)&&void 0!==R?R:0,is_small_window:g?"1":"0",trending_topic:null==n||null===(A=n.hotList)||void 0===A?void 0:A.header,first_tag_name:null==n||null===(M=n.hotList)||void 0===M?void 0:M.sentence,top:null==n||null===(B=n.hotList)||void 0===B?void 0:B.rank,is_pure:le?"1":"0",extraParams:K,awemeRequestTime:null==n?void 0:n.requestTime,video_play_mode:1===(null===(F=L.Q.getItem({sKey:H.CookieKeys.VideoFilterMemoSelect,refresh:!1}))||void 0===F?void 0:F.type)?"landscape":"all",is_landscape:(null==n||null===(O=n.video)||void 0===O?void 0:O.width)>(null==n||null===(V=n.video)||void 0===V?void 0:V.height)?1:0,isFromNextAutoPlay:null==w||null===(U=w.plugins)||void 0===U||null===(W=U.autoplaysettingplugin)||void 0===W||null===(z=W.config)||void 0===z?void 0:z.nextAutoPlay,is_insert_wallpaper:null!==(q=N.Le.getConfig(N.gI.WallPaperIds))&&void 0!==q&&y()(q).call(q,null==n?void 0:n.awemeId)?1:0}}),[n,v,u,s,_,g,le,w]);var re=(0,C.useCallback)((function(e){var t,n=e.awemeInfo,i=e.player,o=(0,te.U)({awemeInfo:n,player:i});return{isH265:o,codecFormat:o?"bytevc":"h264",videoFormat:null!==(t=null==i?void 0:i.playerType)&&void 0!==t?t:"mp4"}}),[]),ue=(0,C.useCallback)((function(e){var t,i,o,l=e.group_id,r=e.compilation_id,u=void 0===r?"":r,c=e.is_csr,s=void 0===c?1:c,d=e.extraParams,v=void 0===d?{}:d,f=e.host,m=e.vtype;if(P.p())return!1;var p=x.current,g=p.aweme_type,h=p.video_play_mode,_=p.is_landscape,y=re({awemeInfo:n,player:w}),k=y.isH265,E=y.videoFormat;return Q.sendLog("videoRequest",(0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:l,compilation_id:u,enter_from:T.mo(),is_csr:s,cpu_core:null===(t=navigator)||void 0===t?void 0:t.hardwareConcurrency,memory_size:null===(i=navigator)||void 0===i?void 0:i.deviceMemory,UA_info:null===(o=navigator)||void 0===o?void 0:o.userAgent,host:f,vtype:m,aweme_type:g,action_type:j.current,video_format:E,video_play_mode:h,is_landscape:_,is_bytevc1:k},v)),!0}),[w]),ce=(0,C.useCallback)((function(e){var t,i,o,l,r,u=e.group_id,c=e.compilation_id,s=void 0===c?"":c,d=e.vduration,v=e.duration,f=e.is_success,m=e.is_csr,p=void 0===m?1:m,g=e.videoQuality,h=void 0===g?"":g,_=e.extraParams,y=void 0===_?{}:_,k=e.host,E=e.vtype;if(P.p())return!1;var b=x.current,S=b.aweme_type,C=b.video_play_mode,I=b.is_landscape,L=re({awemeInfo:n,player:w}),N=L.isH265,Z=L.videoFormat,R=null===(t=navigator)||void 0===t||null===(i=t.connection)||void 0===i?void 0:i.downlink;return Q.sendLog("videoRequestResponse",(0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:u,compilation_id:s,enter_from:T.mo(),vduration:d,video_quality:h,video_format:Z,is_success:f,duration:v,is_csr:p,internet_speed_dl:R,cpu_core:null===(o=navigator)||void 0===o?void 0:o.hardwareConcurrency,memory_size:null===(l=navigator)||void 0===l?void 0:l.deviceMemory,UA_info:null===(r=navigator)||void 0===r?void 0:r.userAgent,host:k,vtype:E,action_type:j.current,aweme_type:S,video_play_mode:C,is_landscape:I,is_bytevc1:N},y)),!0}),[w]);return(0,C.useEffect)((function(){if(w&&l){var e,t,i=function(){var e,t,i,o,l,r=x.current,u=r.author_id,c=r.group_id,s=r.log_pb,d=r.compilation_id,v=r.isFromNextAutoPlay,f=r.impressionData,m=r.extraParams,p=r.aweme_type,g=r.pic_cnt,h=r.is_small_window,_=r.trending_topic,y=r.first_tag_name,k=r.top,E=r.is_pure,b=r.is_click_cover,S=r.is_insert_wallpaper,C=re({awemeInfo:n,player:w}).isH265,I=N.Le.getConfig(N.gI.VideoFeedList),L=(null==I?void 0:I.autoPlayCount)||1,P=0;Z.Rs("modeFrom")!==W.MODE_FROM&&Z.Rs("modeFrom")!==W.MODE_FROM_SEARCH||(P=1),Q.sendLog("videoPlay",(0,a.Z)((0,a.Z)((0,a.Z)({is_click_cover:b,is_insert_wallpaper:S,urlParamList:["enter_method","trending_topic","previous_page","keywords_index","keywords_content"],author_id:u,enter_from:T.mo(),group_id:c,log_pb:s,compilation_id:d,is_auto_play:String(v?1:0),is_visible:String("visible"===document.visibilityState?1:0),impression_data:f,speed:"".concat(null==w?void 0:w.playbackRate),auto_cnt:L,video_detail_enter_from:R.z("web_link"),is_full_screen:D.r()?"1":"0",is_full_webscreen:null!==(e=N.Le.getConfig(N.gI.IsPageFullScreen))&&void 0!==e&&e.type?"1":"0",tab_name:z.getTabName()||Z.Rs("tab_name")||"",is_author_card_expand:null!==(t=N.Le.getConfig(N.gI.IsCollapseAuthorCard))&&void 0!==t&&t.isCollapseAuthorCard?0:1,from_follow_list:null!==(i=N.Le.getConfig(N.gI.FromFollowList))&&void 0!==i&&i.tag?"1":"0",is_mute:null!=w&&w.muted?"1":"0",mute_type:null===(o=N.Le.getConfig(N.gI.ForceMuted))||void 0===o?void 0:o.currentMuteType,is_pure:E},A.t()),{},{from_academy:P,aweme_type:p,pic_cnt:g,is_small_window:h,trending_topic:_,first_tag_name:y,top:k,browser_height:M.P6(),browser_width:M.wi(),browser_ratio:M.P6()/M.wi(),is_bytevc1:C,is_force:"browser"===(null===(l=N.Le.getConfig(N.gI.ForceMuted))||void 0===l?void 0:l.currentMuteType)?"1":"0"},m),oe.current.videoPlay||{}))};w.on("autoplay_started",i);var r=function(){var e,t,i,o,l,r=x.current,u=r.author_id,c=r.group_id,s=r.log_pb,d=r.compilation_id,v=r.extraParams,f=r.aweme_type,m=r.is_small_window,p=r.trending_topic,g=r.first_tag_name,h=r.top,_=r.is_click_cover,y=r.is_pure,k=r.is_insert_wallpaper,E=re({awemeInfo:n,player:w}).isH265;Q.sendLog("videoPlayFinish",(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({is_click_cover:_,urlParamList:["enter_method","trending_topic","previous_page"],enter_from:T.mo(),author_id:u,group_id:c,log_pb:s,compilation_id:d,is_insert_wallpaper:k,tab_name:z.getTabName()||Z.Rs("tab_name")||"",is_full_screen:D.r()?"1":"0",is_full_webscreen:null!==(e=N.Le.getConfig(N.gI.IsPageFullScreen))&&void 0!==e&&e.type?"1":"0",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:null!==(t=N.Le.getConfig(N.gI.IsCollapseAuthorCard))&&void 0!==t&&t.isCollapseAuthorCard?0:1,from_follow_list:null!==(i=N.Le.getConfig(N.gI.FromFollowList))&&void 0!==i&&i.tag?"1":"0",is_mute:null!=w&&w.muted?"1":"0"},A.t()),{},{mute_type:null===(o=N.Le.getConfig(N.gI.ForceMuted))||void 0===o?void 0:o.currentMuteType,is_force:"browser"===(null===(l=N.Le.getConfig(N.gI.ForceMuted))||void 0===l?void 0:l.currentMuteType)?"1":"0",aweme_type:f,is_small_window:m,trending_topic:p,first_tag_name:g,top:h,is_pure:y},v),oe.current.videoPlayFinish||{}),{},{is_bytevc1:E}))};68!==(null==n?void 0:n.awemeType)&&w.once("ended",r);var u=function(e){var t=x.current,n=t.author_id,i=t.group_id,o=t.log_pb,l=t.extraParams,r=t.is_small_window,u=t.trending_topic,c=t.first_tag_name,s=t.top;Q.sendLog("clickPreviousVideo",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:o,enter_from:T.mo(),click_from:e?"keyboard":"click_button",tab_name:z.getTabName()||Z.Rs("tab_name")||"",is_small_window:r,trending_topic:u,first_tag_name:c,top:s},l))},c=function(e){var t=x.current,n=t.author_id,i=t.group_id,o=t.log_pb,l=t.extraParams,r=t.is_small_window,u=t.trending_topic,c=t.first_tag_name,s=t.top;Q.sendLog("clickNextVideo",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:o,enter_from:T.mo(),click_from:e?"keyboard":"click_button",tab_name:z.getTabName()||Z.Rs("tab_name")||"",is_small_window:r,trending_topic:u,first_tag_name:c,top:s},l))},s=function(){var e=x.current,t=e.author_id,n=e.group_id,i=e.log_pb,o=e.extraParams,l=e.is_small_window;Q.sendLog("clickNextVideo",(0,a.Z)({urlParamList:["previous_page"],author_id:t,group_id:n,log_pb:i,enter_from:T.mo(),click_from:"click_bar_button",tab_name:z.getTabName()||Z.Rs("tab_name")||"",is_small_window:l},o))};w.on("playSwitchPrevBefore",u),w.on("playSwitchNextBefore",c),w.on("custome_next_click",s);var d=function(e){var t=x.current,n=t.author_id,i=t.group_id,o=t.log_pb,l=t.extraParams;Q.sendLog("clickAutoPlay",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:o,enter_from:T.yW(),status:e?"on":"off"},l))};w.on("nextAutoplayChange",d);var v=function(e){var t=x.current,n=t.author_id,i=t.group_id,l=t.log_pb,r=t.extraParams;!0!==(null==e?void 0:e.isInnerReset)&&Q.sendLog("clickAutoPlay",(0,a.Z)((0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:l,enter_from:T.yW(),status:null!=e&&e.isOn?"on":"off"},r),"object"===(0,o.Z)(null==e?void 0:e.logParams)?null==e?void 0:e.logParams:{}))};w.on($.B.AutoPlaySwitchChange,v);var f=function(e){var t=x.current,n=t.author_id,i=t.group_id,o=t.log_pb,l=t.extraParams;Q.sendLog("clickVideoSpeed",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:o,enter_from:T.yW(),speed:e},l))};w.on("playRatioChange",f);var m=function(e){if("switch_fullscreen"===e.action){var t="";switch(e.eventType){case"click":t="click_button";break;case"dblclick":t="double_click";break;default:t="keyboard"}var n=x.current,i=n.author_id,o=n.group_id,l=n.log_pb,r=n.extraParams;e.fullscreen?Q.sendLog("exitFullScreen",(0,a.Z)({urlParamList:["previous_page"],author_id:i,group_id:o,log_pb:l,enter_from:T.yW(),click_from:t},r)):Q.sendLog("enterFullScreen",(0,a.Z)({urlParamList:["previous_page"],author_id:i,group_id:o,log_pb:l,enter_from:T.yW(),click_from:t},r))}},p=function(e){var t=x.current,n=t.author_id,i=t.group_id,o=t.log_pb,l=t.extraParams;e.fullscreen?Q.sendLog("enterFullScreen",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:o,enter_from:T.yW(),click_from:"hot_key"},l)):Q.sendLog("exitFullScreen",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:o,enter_from:T.yW(),click_from:"hot_key"},l))};w.on("user_action",m),w.on("switch_fullscreen",p);var g=function(e){if("switch_play_pause"===(null==e?void 0:e.action)){var t,n="pauseVideo";n=e.paused?"startVideo":"pauseVideo";var i=null!==(t=e.pluginName)&&void 0!==t?t:"click",o=x.current,l=o.extraParams,r=o.is_small_window;Q.sendLog(n,(0,a.Z)({enter_from:T.yW(),click_method:i,is_small_window:r},l))}};w.on("user_action",g);var h=function(e){if("change_muted"===(null==e?void 0:e.action)||"change_volume"===(null==e?void 0:e.action)){var t=!1,n=x.current.extraParams;"change_muted"===(null==e?void 0:e.action)?(Q.sendLog("clickVolume",(0,a.Z)({enter_from:T.yW(),status:e.muted?"1":"0"},n)),(null==e?void 0:e.muted)&&(t=!0)):e.volume>0&&(t=!0),t&&(null==w||w.emit("openVolume"))}};w.on("user_action",h);var _=function(e){var t=x.current.getEnterFromDynamic;if(!e.isInnerReset){var n=(null==t?void 0:t())||T.mo();e.isOn&&Q.sendLog("openPureMode",(0,a.Z)({enter_from:n},e.logParams||{})),!e.isOn&&Q.sendLog("closePureMode",(0,a.Z)({enter_from:n},e.logParams||{}))}};w.on($.B.ImmersiveSwitchChange,_);var y=!1,E=function(){return y=!0},b=null===(e=w.root)||void 0===e||null===(t=e.getElementsByClassName("xgplayer-progress"))||void 0===t?void 0:t[0],S=function(e){k()((function(){var t=y?"click":"hot_key";y=!1;var n=e||{},i=n.duration,o=n.currentTime;Q.sendLog("progressClick",{enter_from:T.yW(),click_method:t,rate:Number(o)/Number(i)})}),500)};return w.on(J.SEEKING,S),null==b||b.addEventListener("click",E),function(){w.off("autoplay_started",i),w.off("ended",r),w.off("playSwitchPrevBefore",u),w.off("playSwitchNextBefore",c),w.off("custome_next_click",s),w.off("nextAutoplayChange",d),w.off("playRatioChange",f),w.off("user_action",m),w.off("switch_fullscreen",p),w.off("user_action",g),w.off("user_action",h),w.off($.B.ImmersiveSwitchChange,_),w.off($.B.AutoPlaySwitchChange,v),w.off(J.SEEKING,S),null==b||b.removeEventListener("click",E)}}}),[w,n,l]),(0,C.useEffect)((function(){if(w&&l){var e,t,n,i,o=0,r=0,u=0,s=0,d=0,v=(w.config.vid,null!==(e=null===(t=window)||void 0===t?void 0:t.ROUTE_PARAMS)&&void 0!==e?e:(0,X.parse)(null===(n=window)||void 0===n||null===(i=n.location)||void 0===i?void 0:i.search)),f=z.getTabName()||(null==v?void 0:v.tab_name)||"",m=function(){r=b()(),null!=w&&w.video&&(o=w.currentTime)},p=function(){s=1},g=function(e){var t,n,i,l,c,v=x.current,m=v.author_id,p=v.group_id,g=v.log_pb,h=v.isFromNextAutoPlay,_=v.vduration,y=v.extraParams,k=v.pic_cnt,E=v.aweme_type,S=v.is_small_window,C=v.trending_topic,I=v.first_tag_name,L=v.top,P=v.is_click_cover,B=v.is_pure,F=v.is_insert_wallpaper,O=b()()-r,V=w.cumulateTime-u;if(u=w.cumulateTime,r&&w&&null!=w&&w.video&&p&&!(b()()-d<100)&&!(O<100)){var U=0;Z.Rs("modeFrom")!==W.MODE_FROM&&Z.Rs("modeFrom")!==W.MODE_FROM_SEARCH||(U=1),Q.sendLog("playTime",(0,a.Z)((0,a.Z)((0,a.Z)((0,a.Z)({is_click_cover:P,is_insert_wallpaper:F,is_visible:String(e?1:0),duration:O,duration_moving:V,from_percent:1e3*o/_,to_percent:1e3*(null==w?void 0:w.currentTime)/_,is_auto_play:String(h?1:0),urlParamList:["enter_method","trending_topic","previous_page"],tab_name:f,author_id:m,enter_from:T.mo(),group_id:p,log_pb:g,video_detail_enter_from:R.z("web_link"),speed:String(null==w?void 0:w.playbackRate),is_loop:String(s),is_full_screen:D.r()?"1":"0",is_full_webscreen:null!==(t=N.Le.getConfig(N.gI.IsPageFullScreen))&&void 0!==t&&t.type?"1":"0",is_author_card_expand:null!==(n=N.Le.getConfig(N.gI.IsCollapseAuthorCard))&&void 0!==n&&n.isCollapseAuthorCard?0:1,from_follow_list:null!==(i=N.Le.getConfig(N.gI.FromFollowList))&&void 0!==i&&i.tag?"1":"0",is_mute:null!=w&&w.muted?"1":"0"},A.t()),{},{mute_type:null===(l=N.Le.getConfig(N.gI.ForceMuted))||void 0===l?void 0:l.currentMuteType,from_academy:U,pic_cnt:k,aweme_type:E,is_small_window:S,trending_topic:C,first_tag_name:I,top:L,is_pure:B,browser_height:M.P6(),browser_width:M.wi(),browser_ratio:M.P6()/M.wi()},y),oe.current.playTime||{}),{},{is_force:"browser"===(null===(c=N.Le.getConfig(N.gI.ForceMuted))||void 0===c?void 0:c.currentMuteType)?"1":"0"}),!1),r=b()(),d=b()()}},h=c()((function(){g("visible"===document.visibilityState)}),500,{leading:!0,trailing:!1}),_=c()((function(){m()}),500,{leading:!1,trailing:!0}),y=function(){g("visible"===document.visibilityState),m()},k=function(e){!w.video||null!=w&&w.paused||(g(e),m())};return w.on("seeked",_),w.on("seeking",h),w.on("play",m),w.on("replay",p),w.on("pause",y),B.vP(k),function(){w.off("seeked",_),w.off("seeking",h),w.off("play",m),w.off("replay",p),w.off("pause",y),null!=w&&w.paused||y(),B.xC(k)}}}),[w,n,l]),(0,C.useEffect)((function(){if(w){var e=!1,t=function(){w.emit("focus"),e=!0},n=function(){e=!0},i=function(){e=!1},o=1,l=S()((function(){var t=x.current,n=t.author_id,i=t.group_id,l=t.log_pb,r=t.compilation_id,u=t.extraParams,c=t.trending_topic,s=t.first_tag_name,d=t.top;e&&Q.sendLog("videoPlayCheckPoint",(0,a.Z)({urlParamList:["previous_page"],author_id:n,group_id:i,log_pb:l,enter_from:T.mo(),compilation_id:r,order:o++,tab_name:z.getTabName()||Z.Rs("tab_name")||"",trending_topic:c,first_tag_name:s,top:d},u))}),6e4);return w.on("autoplay_started",t),w.on("play",n),w.on("pause",i),function(){l&&clearInterval(l),w.off("autoplay_started",t),w.off("play",n),w.off("pause",i)}}}),[w,n]),(0,C.useEffect)((function(){if(w){if(l){var e,t=function(e){var t=x.current,i=t.group_id,o=t.vduration,l=t.bitRate,r=t.qualityType,u=t.extraParams,c=t.bitrate_set,s=t.quality_bitrate,d=t.action_type,v=t.aweme_type,f=t.video_play_mode,m=t.is_landscape,p=re({awemeInfo:n,player:w}),g=p.codecFormat,h=p.isH265,_=p.videoFormat;if("firstFrame"===e.eventType){var y,k,E,S,C,I,L,P,Z,R,D,A,M,B=(null==w?void 0:w.preLoadData)||(null==w||null===(y=w.plugins)||void 0===y||null===(k=y.mp4encryptplayer)||void 0===k?void 0:k.preLoadData)||{},V=B.duration,U=B.byteLength,W=V&&"number"==typeof V?1e3*V:0,z=(null==w?void 0:w.curDefinition)||{},q=(z.definition,z.bitrate),K=z.networkSpeed,G=(N.Le.getConfig(N.gI.SlideStartTime)||{}).slideStartTime,j=(null===(E=w.video)||void 0===E||null===(S=E.getStats)||void 0===S?void 0:S.call(E))||{},Y=j.currentLowDecodeCount,X=void 0===Y?0:Y,J=j.decoderMode,$=void 0===J?0:J,ee=j.lowdecodeVV,te=void 0===ee?0:ee,ne=j.vv,ie=void 0===ne?0:ne,oe=ae.current||!G?null==e?void 0:e.costTime:b()()-G;Q.sendLog("videoPlayQuality",(0,a.Z)((0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:i,bitrate_set:c,player_first_frame:null==e?void 0:e.costTime,duration:oe,vduration:o,enter_from:T.mo(),player_version:w.version,video_quality:(null==w||null===(C=w.plugins)||void 0===C||null===(I=C.bitrateselector)||void 0===I||null===(L=I.curBitRate)||void 0===L?void 0:L.qualityType)||r,video_format:_,video_bitrate:q||l,codec_format:g,internet_speed:K?Math.floor(K/1e3):0,internet_speed_dl:null===(P=navigator)||void 0===P||null===(Z=P.connection)||void 0===Z?void 0:Z.downlink},u),{},{preload_time:W,preload_size:U||0,cpu_core:null===(R=navigator)||void 0===R?void 0:R.hardwareConcurrency,memory_size:null===(D=navigator)||void 0===D?void 0:D.deviceMemory,UA_info:null===(A=navigator)||void 0===A?void 0:A.userAgent,is_mute:null!=w&&w.muted?"1":"0",player_volume:null==w?void 0:w.volume,local_mute:F.$o(H.LocalStorageKeys.PLAYER_IS_MUTE),local_volume:F.$o(H.LocalStorageKeys.PLAYER_VOLUME),host:null==e?void 0:e.host,vtype:null==e?void 0:e.vtype,is_video_support:Number(O.k().isSupport),quality_bitrate:s,action_type:d,aweme_type:v,is_bytevc1:h,equalize_state:null!==(M=null==w?void 0:w.equalizeVolumeState)&&void 0!==M?M:0,video_play_mode:f,is_landscape:m,current_low_decode_count:X,decoder_mode:$,h265_failure_rate:10===ie?te/ie:-1}))}};w.on("xglog",t);var o=function(e){var t,i,o,l,u,c,s,d,v,f=x.current,m=f.group_id,p=f.vduration,g=f.extraParams,h=f.action_type,_=f.aweme_type,y=f.awemeRequestTime,k=f.log_pb,E=re({awemeInfo:n,player:w}),S=E.isH265,C=E.codecFormat,I=E.videoFormat,L=(0,a.Z)((0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:m,errorCode:(null==e||null===(t=e.mediaError)||void 0===t?void 0:t.code)||"",errorDesc:(null==e||null===(i=e.mediaError)||void 0===i?void 0:i.message)||"",vduration:p,enter_from:T.yW(),player_version:w.version,internet_speed_dl:null===(o=navigator)||void 0===o||null===(l=o.connection)||void 0===l?void 0:l.downlink,is_video_support:Number(O.k().isSupport)},g),{},{cpu_core:null===(u=navigator)||void 0===u?void 0:u.hardwareConcurrency,memory_size:null===(c=navigator)||void 0===c?void 0:c.deviceMemory,UA_info:null===(s=navigator)||void 0===s?void 0:s.userAgent,host:null==e?void 0:e.host,vtype:null==e?void 0:e.vtype,action_type:h,is_active:1,is_cdn_expired:b()()-y>36e5?1:0,is_bytevc1:S,aweme_type:_,log_pb:k,codec_format:C,video_format:I});6===(null==e||null===(d=e.mediaError)||void 0===d?void 0:d.code)&&(L.aweme_info=null==w||null===(v=w.config)||void 0===v?void 0:v.url);Q.sendLog("videoPlayFailed",L),V.o.event.info({name:V.M.VideoPlayFailed,report:L}),U.q.custom.emit("xgplayer_error",r()(L,["player_version","errorCode","errorDesc","host","vtype"]))};d()(e=Y.current.videoPlayFailed).call(e,(function(e){Q.sendLog("videoPlayFailed",e)})),Y.current.videoPlayFailed=[],w.on("error",o);var u=0,c=function(e){var t,i,o,c,s,d,v,f,m,p,g,h,_=x.current,y=_.group_id,k=_.vduration,E=_.bitRate,S=_.qualityType,C=_.extraParams,I=_.action_type,L=_.aweme_type,P=_.video_play_mode,Z=_.is_landscape,R=re({awemeInfo:n,player:w}),D=R.codecFormat,A=R.isH265,M=R.videoFormat,B=(null==w?void 0:w.curDefinition)||{},F=(B.definition,B.bitrate),O=B.networkSpeed,H=(0,a.Z)((0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:y,duration:e.costTime,vduration:k,enter_from:T.yW(),player_version:w.version,video_quality:(null==w||null===(t=w.plugins)||void 0===t||null===(i=t.bitrateselector)||void 0===i||null===(o=i.curBitRate)||void 0===o?void 0:o.qualityType)||S,video_format:M,video_bitrate:F||E,codec_format:D,internet_speed:O?Math.floor(O/1e3):0,internet_speed_dl:null===(c=navigator)||void 0===c||null===(s=c.connection)||void 0===s?void 0:s.downlink},C),{},{cpu_core:null===(d=navigator)||void 0===d?void 0:d.hardwareConcurrency,memory_size:null===(v=navigator)||void 0===v?void 0:v.deviceMemory,UA_info:null===(f=navigator)||void 0===f?void 0:f.userAgent,block_type:null==e?void 0:e.type,end_type:null==e?void 0:e.endType,host:null==e?void 0:e.host,vtype:null==e?void 0:e.vtype,action_type:I,aweme_type:L,drop_frame:null===(m=w.videoFrameInfo)||void 0===m?void 0:m.dropped,total_play_frame:null===(p=w.videoFrameInfo)||void 0===p?void 0:p.total,drop_frame_rate:null===(g=w.videoFrameInfo)||void 0===g?void 0:g.droppedRate,drop_frame_duration:null===(h=w.videoFrameInfo)||void 0===h?void 0:h.droppedDuration,is_bytevc1:A,video_play_mode:P,is_landscape:Z});if("waitingEnd"===e.eventType&&1===e.type){if(!1===l)H.duration=0;else{var W=(N.Le.getConfig(N.gI.SlideStartTime)||{}).slideStartTime,z=ae.current||!W||b()()-W>(null==e?void 0:e.costTime)?null==e?void 0:e.costTime:b()()-W;H.duration=z}Q.sendLog("videoBlock",H),V.o.event.warn({name:V.M.VideoPlayBlock,report:r()(H,["player_version","video_quality","block_type","end_type","host","vtype","duration"])})}if(!1!==l&&("waitingStart"===e.eventType&&(u=b()()),"waitingEnd"===e.eventType)){if(0===u||1===(null==e?void 0:e.type))return;Q.sendLog("videoBlock",H),V.o.event.warn({name:V.M.VideoPlayBlock,report:r()(H,["player_version","video_quality","block_type","end_type","host","vtype","duration"])}),U.q.custom.emit("xgplayer_block",r()(H,["player_version","video_quality","block_type","end_type","host","vtype"])),u=0}};return w.on("xglog",c),function(){w.off("xglog",t),w.off("error",o),w.off("xglog",c)}}var s=function(e){var t,o,l,r,u,c,s,d,v=x.current,f=v.group_id,m=v.vduration,p=v.extraParams,g=v.action_type,_=v.awemeRequestTime,y=v.aweme_type,k=v.log_pb,E=v.video_play_mode,S=v.is_landscape,C=re({awemeInfo:n,player:w}).isH265,I=(0,a.Z)((0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:f,errorCode:(null==e||null===(t=e.mediaError)||void 0===t?void 0:t.code)||"",errorDesc:(null==e||null===(o=e.mediaError)||void 0===o?void 0:o.message)||"",vduration:m,enter_from:T.yW(),player_version:w.version,internet_speed_dl:null===(l=navigator)||void 0===l||null===(r=l.connection)||void 0===r?void 0:r.downlink,is_video_support:Number(O.k().isSupport)},p),{},{cpu_core:null===(u=navigator)||void 0===u?void 0:u.hardwareConcurrency,memory_size:null===(c=navigator)||void 0===c?void 0:c.deviceMemory,UA_info:null===(s=navigator)||void 0===s?void 0:s.userAgent,host:null==e?void 0:e.host,vtype:null==e?void 0:e.vtype,action_type:g,is_active:0,is_cdn_expired:b()()-_>36e5?1:0,aweme_type:y,log_pb:k,video_play_mode:E,is_landscape:S,is_bytevc1:C});Y.current.videoPlayFailed=h()(d=[]).call(d,(0,i.Z)(Y.current.videoPlayFailed||[]),[I])};return w.on("error",s),function(){w.off("error",s)}}}),[w,n,l]),(0,C.useEffect)((function(){if(w){if(l){var e,t,n=0,o=function(){var e,t,i,o=x.current,a=o.awemeId,l=o.vduration,r=o.compilation_id,u=o.qualityType,c=o.extraParams;0===n?(ue({group_id:a,extraParams:c}),n=(new Date).getTime()):(n=(new Date).getTime()-n,ce({group_id:a,vduration:l,duration:n,compilation_id:r,videoQuality:(null==w||null===(e=w.plugins)||void 0===e||null===(t=e.bitrateselector)||void 0===t||null===(i=t.curBitRate)||void 0===i?void 0:i.qualityType)||u,is_success:0}),ue({group_id:a,extraParams:c}),n=(new Date).getTime())},r=function(){var e,t,i;n=(new Date).getTime()-n;var o=x.current,a=o.awemeId,l=o.vduration,r=o.compilation_id,u=o.qualityType,c=o.extraParams;ce({group_id:a,vduration:l,duration:n,compilation_id:r,videoQuality:(null==w||null===(e=w.plugins)||void 0===e||null===(t=e.bitrateselector)||void 0===t||null===(i=t.curBitRate)||void 0===i?void 0:i.qualityType)||u,is_success:1,extraParams:c}),n=0};return d()(e=Y.current.videoRequest).call(e,(function(e){ue(e)})),Y.current.videoRequest=[],d()(t=Y.current.videoRequestResponse).call(t,(function(e){var t,n,i;ce((0,a.Z)((0,a.Z)({},e),{},{videoQuality:null==w||null===(t=w.plugins)||void 0===t||null===(n=t.bitrateselector)||void 0===n||null===(i=n.curBitRate)||void 0===i?void 0:i.qualityType}))})),Y.current.videoRequestResponse=[],w.on(J.LOAD_START,o),w.on(J.LOADED_DATA,r),function(){w.off(J.LOAD_START,o),w.off(J.LOADED_DATA,r)}}var u=0,c=function(){var e,t,n,o=x.current,a=o.awemeId,l=o.extraParams;0===u?(Y.current.videoRequest=h()(e=[]).call(e,(0,i.Z)(Y.current.videoRequest||[]),[{group_id:a,extraParams:l}]),u=(new Date).getTime()):(u=(new Date).getTime()-u,Y.current.videoRequestResponse=h()(t=[]).call(t,(0,i.Z)(Y.current.videoRequestResponse||[]),[{group_id:a,extraParams:l}]),Y.current.videoRequest=h()(n=[]).call(n,(0,i.Z)(Y.current.videoRequest||[]),[{group_id:a,extraParams:l}]),u=(new Date).getTime())},s=function(){var e,t,n,o;u=(new Date).getTime()-u;var a=x.current,l=a.awemeId,r=a.vduration,c=a.compilation_id,s=a.qualityType,d=a.extraParams;Y.current.videoRequestResponse=h()(e=[]).call(e,(0,i.Z)(Y.current.videoRequestResponse||[]),[{group_id:l,vduration:r,duration:u,compilation_id:c,videoQuality:(null==w||null===(t=w.plugins)||void 0===t||null===(n=t.bitrateselector)||void 0===n||null===(o=n.curBitRate)||void 0===o?void 0:o.qualityType)||s,is_success:1,extraParams:d}]),u=0};return w.on(J.LOAD_START,c),w.on(J.LOADED_DATA,s),function(){w.off(J.LOAD_START,c),w.off(J.LOADED_DATA,s)}}}),[w,n,l]),(0,C.useEffect)((function(){if(w&&l){var e=0,t=!1,i="",o="",r=function(t){e=1,i=null==t?void 0:t.host,o=null==t?void 0:t.vtype},u=function(){var l,r,u,c,s,d,v,f,m,p,g,h,_,y,k,E;if(!t){var b=x.current,S=b.group_id,C=b.vduration,I=b.bitRate,L=b.qualityType,N=b.extraParams,P=b.bitrate_set,Z=b.quality_bitrate,R=b.action_type,D=b.aweme_type,A=b.video_play_mode,M=b.is_landscape,B=re({awemeInfo:n,player:w}),F=B.codecFormat,O=B.isH265,V=B.videoFormat;t=!0;var U=(null==w?void 0:w.preLoadData)||(null==w||null===(l=w.plugins)||void 0===l||null===(r=l.mp4encryptplayer)||void 0===r?void 0:r.preLoadData)||{},H=U.duration,W=U.byteLength,z=(null==w?void 0:w.curDefinition)||{},q=(z.definition,z.bitrate),K=z.networkSpeed,G=(null===(u=w.video)||void 0===u||null===(c=u.getStats)||void 0===c?void 0:c.call(u))||{},j=G.currentLowDecodeCount,Y=void 0===j?0:j,X=G.decoderMode,J=void 0===X?0:X,$=G.lowdecodeVV,ee=void 0===$?0:$,te=G.vv,ne=void 0===te?0:te;Q.sendLog("videoPlayEnd",(0,a.Z)((0,a.Z)({urlParamList:["previous_page","tab_name"],group_id:S,duration:w.cumulateTime?w.cumulateTime:0,vduration:C,enter_from:T.mo(),is_success:e,player_version:w.version,codec_format:F,video_quality:(null==w||null===(s=w.plugins)||void 0===s||null===(d=s.bitrateselector)||void 0===d||null===(v=d.curBitRate)||void 0===v?void 0:v.qualityType)||L,video_format:V,video_bitrate:q||I,internet_speed:K?Math.floor(K/1e3):0,internet_speed_dl:null===(f=navigator)||void 0===f||null===(m=f.connection)||void 0===m?void 0:m.downlink},N),{},{preload_time:H||0,preload_size:W||0,cpu_core:null===(p=navigator)||void 0===p?void 0:p.hardwareConcurrency,memory_size:null===(g=navigator)||void 0===g?void 0:g.deviceMemory,UA_info:null===(h=navigator)||void 0===h?void 0:h.userAgent,host:i,vtype:o,bitrate_set:P,quality_bitrate:Z,action_type:"click"===R?"click":"up"===R?"down":"up",aweme_type:D,drop_frame:null===(_=w.videoFrameInfo)||void 0===_?void 0:_.dropped,total_play_frame:null===(y=w.videoFrameInfo)||void 0===y?void 0:y.total,drop_frame_rate:null===(k=w.videoFrameInfo)||void 0===k?void 0:k.droppedRate,drop_frame_duration:null===(E=w.videoFrameInfo)||void 0===E?void 0:E.droppedDuration,is_bytevc1:O,video_play_mode:A,is_landscape:M,current_low_decode_count:Y,decoder_mode:J,h265_failure_rate:10===ne?ee/ne:-1}))}};return w.on("play",r),window.addEventListener("beforeunload",u),function(){u(),w.off("play",r),window.removeEventListener("beforeunload",u)}}}),[w,n,l]),(0,C.useEffect)((function(){if(w){var e,t=null===(e=w.config)||void 0===e?void 0:e.volume,n=null,i=function(e){"change_volume"===e.action&&(n&&clearTimeout(n),n=k()((function(){var n,i;if(null!==(n=e.props)&&void 0!==n&&n.volume){var o=(null===(i=e.props)||void 0===i?void 0:i.volume).to,l=t>o;t=o;var r=x.current.extraParams;Q.sendLog("prfVolumeChange",(0,a.Z)({down:l?1:0,enter_from:T.vM()},r))}}),500))};return w.on("user_action",i),function(){w.off("user_action",i)}}}),[w]),(0,C.useEffect)((function(){if(w&&n){var e=function(){var e,t,i;null!=m&&m.isLogin&&(0,K.w6)({awemeId:null==n?void 0:n.awemeId,authorId:null==n||null===(i=n.authorInfo)||void 0===i?void 0:i.uid});(null===(e=N.Le.getConfig(N.gI.UnLookVideos))||void 0===e||null===(t=e[null==n?void 0:n.awemeId])||void 0===t?void 0:t.status)===q.Pl.UnLook&&((0,G.uR)({awemeIds:n.awemeId}),function(e){var t,n=e.awemeInfo,i=N.Le.getConfig(N.gI.UnLookVideos);i&&(null===(t=i[null==n?void 0:n.awemeId])||void 0===t?void 0:t.status)===q.Pl.UnLook&&(i[null==n?void 0:n.awemeId].status=q.Pl.Looked,ee.emit(ee.EVENT.syncInteractionStatus,{action:"lookVideo",awemeId:n.awemeId}))}({awemeInfo:n}))};return w.on("autoplay_started",e),function(){w.off("autoplay_started",e)}}}),[w,n,m]),null}},72823:function(e,t,n){n.d(t,{I:function(){return l}});var i=n(21528),o=n(59662),a=n(53549),l=function(e){var t=(0,o.n)(),n=e.isActive,l=e.fullScreenTarget;return(0,i.useEffect)((function(){t&&(t.config&&t.config.fullscreenTarget!==l&&(t.config.fullscreenTarget=l),n&&a.r()&&t.getFullscreen(l))}),[t,n,l]),null}},7598:function(e,t,n){n.d(t,{_:function(){return P}});var i=n(29588),o=n(11789),a=n(10441),l=n.n(a),r=n(21528),u=n(24713),c=n(47999),s=n(73404),d=n(41316),v=n(66870),f=n(70335),m=n.n(f),p=n(93669),g="Xu8BXy_K",h="qECD3Pse",_="uMIIeuGM",y="Kuz59i8I",w="L6mQYbWy",k="gNyVUu_s",E="F7TPdvit",b="sXkpegZg",x="qAA9SqI5",S="itcVN_1L",C="ugI8COdl",I="moKeyfrE",L="EJhYN2HD",N=n(59662),P=function(e){var t,n,a,f,P,T,Z,R=e.isActive,D=e.awemeInfo,A=e.className,M=e.imgPlaceHolderClassName,B=e.showImg,F=void 0===B||B,O=e.controlHeight,V=(0,N.n)(),U=(0,r.useState)(!0),H=(0,o.Z)(U,2),W=H[0],z=H[1],q=(0,r.useState)(!1),K=(0,o.Z)(q,2),G=K[0],j=K[1],Y=(0,r.useState)(!1),Q=(0,o.Z)(Y,2),X=Q[0],J=Q[1],$=(0,r.useState)(null),ee=(0,o.Z)($,2),te=ee[0],ne=ee[1],ie=(0,r.useRef)(0),oe=c.G6(),ae=c.vU(),le=c.GP();ie.current=(null==D||null===(t=D.video)||void 0===t?void 0:t.width)/(null==D||null===(n=D.video)||void 0===n?void 0:n.height);var re=(0,r.useCallback)((function(){te&&ie.current&&(te.offsetWidth/ie.current>te.offsetHeight-(O||d.NV.default)?z(!0):z(!1))}),[te]),ue=(0,r.useCallback)((function(){!G&&j(!0)}),[G]),ce=(0,r.useCallback)((function(){J(!0)}),[]);return(0,r.useEffect)((function(){var e;if(te&&re)return l()(e=s.Z).call(e,te,re),function(){s.Z.remove(te,re)}}),[te,re]),(0,r.useEffect)((function(){R||J(!1)}),[R]),(0,r.useEffect)((function(){var e;if(V)return null==V||null===(e=V.on)||void 0===e||e.call(V,u.CANPLAY,ce),function(){var e;null==V||null===(e=V.off)||void 0===e||e.call(V,u.CANPLAY,ce)}}),[V,ce]),(0,r.useEffect)((function(){j(!1),J(!1)}),[D]),(null==D?void 0:D.awemeType)===v.ed.Note&&F?null:r.createElement("div",{className:m()(A,g,w,(a={},(0,i.Z)(a,S,ae),(0,i.Z)(a,I,R&&X&&!c.G6()),a),"imgBackground"),ref:ne},!G&&F&&r.createElement("img",{src:null==D||null===(f=D.video)||void 0===f?void 0:f.originCover,className:m()((P={},(0,i.Z)(P,h,!W),(0,i.Z)(P,_,W),(0,i.Z)(P,y,oe),P),C,M),onLoad:re,onError:ue}),r.createElement("div",{className:m()((T={},(0,i.Z)(T,k,!oe),(0,i.Z)(T,b,ae),(0,i.Z)(T,x,oe),(0,i.Z)(T,L,le),T))},r.createElement("img",{src:oe?p:(null==D||null===(Z=D.video)||void 0===Z?void 0:Z.originCover)||p}),!oe&&r.createElement("div",{className:E})))}},57473:function(e,t,n){n.d(t,{U:function(){return cn}});var i,o,a,l=n(41257),r=n(85891),u=n(11789),c=n(33485),s=n.n(c),d=n(54882),v=n.n(d),f=n(52708),m=n.n(f),p=n(21528),g=n(4158),h=n(6857),_=n(55042),y=n(86164),w=n(65371),k=n(30234),E=n(24189),b=n(36800),x=n(43514),S=n(53549),C=n(73824),I=n(21144),L=n(18653),N=n(48382),P=n(88263),T=n(89086),Z=n(76944),R=n(86358),D=n(19085),A=n(66870),M=n(70335),B=n.n(M),F=n(29588),O=n(11235),V=n.n(O);function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U.apply(this,arguments)}var H=function(e){return p.createElement("svg",U({width:32,height:34,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=p.createElement("g",{filter:"url(#ic_feed_follow_svg__filter0_d_318_107303)"},p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16 27.836c6.627 0 12-5.373 12-12s-5.373-12-12-12-12 5.373-12 12 5.373 12 12 12z",fill:"#fff"}))),o||(o=p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.383 13.234l3.46-3.194c.704-.65 1.846-.15 1.846.808v1.988h.25a5 5 0 015 5v2.5a1.5 1.5 0 11-3 0v-2.5a2 2 0 00-2-2h-.25v1.987c0 .96-1.142 1.46-1.846.809l-3.46-3.194a1.5 1.5 0 010-2.204z",fill:"#FE2C55"})),a||(a=p.createElement("defs",null,p.createElement("filter",{id:"ic_feed_follow_svg__filter0_d_318_107303",x:0,y:.836,width:32,height:32,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},p.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),p.createElement("feColorMatrix",{in:"SourceAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),p.createElement("feOffset",{dy:1}),p.createElement("feGaussianBlur",{stdDeviation:2}),p.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),p.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),p.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_318_107303"}),p.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_318_107303",result:"shape"})))))},W=n(87461),z=n(70675),q=n(30050),K=n(89570),G=n(94),j=n(41882),Y=n(68241),Q=n(85924),X=n(59218),J={avatarWrap:"YTu_A7CW",followIcon:"H2HjqV3h",avatar:"mygoURxc",shortcutTip:"xzXuVLDV",tipKey:"XJKFz3Rg",shortcutTipWrap:"ZszyMVh2",keyTip:"J7B3oszA",followWrap:"E9RYG4AQ",avatarBothWrap:"S2zelznm",liveTip:"WX0x9DbD",liveWrap:"ewj4mpKO",liveLottie:"d2e6aFVx",liveText:"N8v_lTLM",animation:"xfVAG0BN",avatarImageWrap:"pXlwVyyi",followWrapBox:"Fivj58Eg",xgTip:"hraSq8Hi",xgIcon:"wSW9ESOR",ableMiniType:"bx6jfq7y",pendantGuide:"cPDS2Gcp",loginGuideText:"nB9WzMxl"},$=n(74269),ee=new $.hD({livesdkLiveShow:{eventName:"livesdk_live_show",params:{enter_from_merge:"",enter_method:"web_video_head",action_type:"",request_id:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:"",anchor_id:"",room_id:""}},livesdkRecLivePlay:{eventName:"livesdk_rec_live_play",params:{anchor_id:"",room_id:"",enter_from_merge:"web_others_homepage",enter_method:"web_video_head",game_name:"",live_type:"",is_aweme_tied:0,game_live_source:"",url:"",url_path:"",action_type:"click",request_id:"",is_vs:0,vs_episode_id:"",vs_ep_group_id:"",vs_season_id:"",vs_episode_stage:""}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",aweme_type:"",from_xigua:0,relation:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:""}},topknotLoginShow:{eventName:"topknot_login_show",params:{group_id:"",relation:0}},chatIconHover:{eventName:"chat_icon_hover",params:{}},chatIconClick:{eventName:"chat_icon_click",params:{}}});function te(e){var t,n=e.awemeInfo,i=e.ableMiniType,o=e.followStatus,a=e.logParams,r=(0,p.useState)(!1),c=(0,u.Z)(r,2),s=c[0],d=c[1];return p.createElement(h.C,{tipClassName:B()(J.xgTip,(0,F.Z)({},J.ableMiniType,i)),showTip:s,type:"left",hoverShow:!0,setShowTip:d,content:p.createElement(p.Fragment,null,"\u524d\u5f80\u897f\u74dc\u89c6\u9891\u5173\u6ce8\u8be5\u4f5c\u8005")},p.createElement(z.a,{id:"xgIcon",href:j.GN(null==n||null===(t=n.authorInfo)||void 0===t?void 0:t.uid),target:"_blank",rel:"noopener noreferrer",className:J.xgIcon,onClick:function(){var e;P.emit(P.EVENT.videoPause),ee.sendLog("follow",(0,l.Z)({urlParamList:["previous_page"],author_id:null==n||null===(e=n.authorInfo)||void 0===e?void 0:e.uid,group_id:null==n?void 0:n.awemeId,enter_from:C.mo(),is_full_screen:S.r()?"1":"0",tab_name:R.getTabName()||I.Rs("tab_name")||"",aweme_type:null==n?void 0:n.awemeType,from_xigua:1,relation:String(o)},a))}}))}var ne=JSON.parse('{"v":"5.7.1","fr":60,"ip":0,"op":91,"w":90,"h":90,"nm":"\u5408\u6210 1","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 2","parent":2,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":80,"s":[100],"e":[0]},{"t":90}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.8,"y":0.66},"o":{"x":0.4,"y":0},"t":2,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}]},{"i":{"x":0.6,"y":1},"o":{"x":0.2,"y":0.34},"t":7,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-7.224,-14.544],[10.21,2.806]],"c":true}]},{"t":13}],"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,1,1,1],"e":[0.996078431606,0.172549024224,0.333333343267,1]},{"t":13}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":90,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":1,"k":[{"i":{"x":0.8,"y":0.68},"o":{"x":0.4,"y":0},"t":2,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-0.062,9.062],[0.021,-8.958]],"c":true}]},{"i":{"x":0.6,"y":1},"o":{"x":0.2,"y":0.32},"t":7,"s":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-0.062,9.062],[0.021,-8.958]],"c":true}],"e":[{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-2.81,10.208],[-12.518,0.573]],"c":true}]},{"t":13}],"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[1,1,1,1],"e":[0.996078431606,0.172549024224,0.333333343267,1]},{"t":13}],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[1],"y":[1]},"o":{"x":[0.167],"y":[0]},"t":19,"s":[100],"e":[100]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.4],"y":[0]},"t":80,"s":[100],"e":[0]},{"t":90}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.6,0.6,0.833],"y":[1,1,5.167]},"o":{"x":[0.167,0.167,0.167],"y":[0.167,0.167,3.333]},"t":0,"s":[100,100,100],"e":[60,60,100]},{"i":{"x":[0.6,0.6,0.833],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,5.682]},"t":2,"s":[60,60,100],"e":[115,115,100]},{"i":{"x":[0.6,0.6,0.833],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,0]},"t":13,"s":[115,115,100],"e":[95,95,100]},{"i":{"x":[0.6,0.6,0.564],"y":[1,1,1]},"o":{"x":[0.314,0.314,0.206],"y":[0,0,0]},"t":19,"s":[95,95,100],"e":[100,100,100]},{"i":{"x":[1,1,0.839],"y":[1,1,1]},"o":{"x":[0.4,0.4,0.304],"y":[0,0,0]},"t":25,"s":[100,100,100],"e":[100,100,100]},{"i":{"x":[0.833,0.833,0.833],"y":[0.833,0.833,14.333]},"o":{"x":[0.4,0.4,0.167],"y":[0,0,-13.333]},"t":80,"s":[100,100,100],"e":[20,20,100]},{"t":90}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-19.882,0],[0,-19.882],[19.882,0],[0,19.882]],"o":[[19.882,0],[0,19.882],[-19.882,0],[0,-19.882]],"v":[[0,-36],[36,0],[0,36],[-36,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":2,"s":[0.996078431606,0.172549024224,0.333333343267,1],"e":[1,1,1,1]},{"t":13}],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"\u586b\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u692d\u5706 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0}],"markers":[]}'),ie=JSON.parse('{"v":"5.7.1","fr":60,"ip":0,"op":11,"w":90,"h":90,"nm":"\u5408\u6210 2","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 2","parent":2,"sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[0],"e":[100]},{"t":10}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,0,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":90,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 2","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[0,0]],"o":[[0,0],[0,0]],"v":[[-13.5,0],[13.562,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"st","c":{"a":0,"k":[1,1,1,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":2,"bm":0,"nm":"\u63cf\u8fb9 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u5f62\u72b6 1","np":2,"cix":2,"bm":0,"ix":2,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"\u5f62\u72b6\u56fe\u5c42 1","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.412],"y":[1]},"o":{"x":[0],"y":[0]},"t":0,"s":[0],"e":[100]},{"t":10}],"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[45,45,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.392,0.392,0.839],"y":[1,1,1]},"o":{"x":[0,0,0.167],"y":[0,0,13.333]},"t":0,"s":[20,20,100],"e":[100,100,100]},{"t":10}],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[-19.882,0],[0,-19.882],[19.882,0],[0,19.882]],"o":[[19.882,0],[0,19.882],[-19.882,0],[0,-19.882]],"v":[[0,-36],[36,0],[0,36],[-36,0]],"c":true},"ix":2},"nm":"\u8def\u5f84 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[0.996078431606,0.172549024224,0.333333343267,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"\u586b\u5145 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"\u692d\u5706 1","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":120,"st":0,"bm":0}],"markers":[]}'),oe=n(9187),ae=n(21466);function le(e){var t,n,i,o,a,c,d,v,f,m,g,_,w,x=e.player,C=e.awemeInfo,I=void 0===C?{}:C,L=e.loginUserInfo,N=e.fullScreenTarget,T=e.isFollowClickedRef,Z=e.onAvatarClick,R=void 0===Z?null:Z,D=e.preventAvatarDefaultHandle,M=void 0===D||D,O=e.shortcut,U=void 0===O?{}:O,$=e.isShowKeyHotTip,le=e.customHrefParams,re=void 0===le?{}:le,ue=e.ableMiniType,ce=void 0!==ue&&ue,se=e.followBtnMouseEnter,de=e.followBtnMouseLeave,ve=e.showPendantTip,fe=e.setShowPendantTip,me=e.reportExtraParams,pe=e.showFollowBtn,ge=void 0===pe||pe,he=e.showImBtn,_e=void 0!==he&&he,ye=e.imBtnMouseEnter,we=e.imBtnMouseLeave,ke=e.actionFollow,Ee=e.actionUnFollow,be=e.noDisturb,xe=void 0===be?0:be,Se=(null==I?void 0:I.awemeType)===A.ed.XgVideo,Ce=j.HC,Ie=(0,p.useRef)(null),Le=(0,p.useRef)(null),Ne=(0,p.useRef)(!1),Pe=(0,p.useState)(!1),Te=(0,u.Z)(Pe,2),Ze=Te[0],Re=Te[1],De=(0,p.useState)(!0),Ae=(0,u.Z)(De,2),Me=Ae[0],Be=Ae[1],Fe=(0,p.useState)(!1),Oe=(0,u.Z)(Fe,2),Ve=Oe[0],Ue=Oe[1],He=(0,p.useState)(!1),We=(0,u.Z)(He,2),ze=We[0],qe=We[1],Ke=null==I||null===(t=I.authorInfo)||void 0===t?void 0:t.avatarUri,Ge=I.groupId,je=(0,p.useRef)(null),Ye=(0,p.useRef)(null),Qe=(0,p.useMemo)((function(){var e,t;return(null==I?void 0:I.awemeType)===A.ed.XgVideo?j.GN(null==I||null===(e=I.authorInfo)||void 0===e?void 0:e.uid):Ce(null==I||null===(t=I.authorInfo)||void 0===t?void 0:t.secUid,(0,X.stringify)((0,l.Z)({is_full_screen:S.r()?"1":"0",enter_method:"video_title",from_gid:Ge,vid:null==I?void 0:I.awemeId},re)))}),[I,re]),Xe=(0,oe.O)({player:x,isActive:!0}).inImmersive,Je=(0,ae.N)({noDisturb:Boolean(xe)}),$e=Je.isCanShowTip,et=Je.updateIsCanShowTip,tt=(0,y.r)({selfUid:null==L||null===(n=L.info)||void 0===n?void 0:n.uid,actionUid:null==I||null===(i=I.authorInfo)||void 0===i?void 0:i.uid,defaultFollowerStatus:null==I||null===(o=I.authorInfo)||void 0===o?void 0:o.followerStatus,defaultFollowStatus:null==I||null===(a=I.authorInfo)||void 0===a?void 0:a.followStatus}).followStatus,nt=function(){var e,t,n,i,o=null===(e=je.current)||void 0===e||null===(t=e.getLottieInstance)||void 0===t?void 0:t.call(e),a=null===(n=Ye.current)||void 0===n||null===(i=n.getLottieInstance)||void 0===i?void 0:i.call(n),l=function(){var e;null==o||null===(e=o.goToAndStop)||void 0===e||e.call(o,0),Re(!1),Be(!0)},r=function(){var e;null==a||null===(e=a.goToAndStop)||void 0===e||e.call(a,0),Re(!0),Be(!1)};return{follow:function(){l(),V()((function(){var e;return null==o||null===(e=o.play)||void 0===e?void 0:e.call(o)})),_e||(Ne.current=!0),T.current=!1},unfollow:function(){r(),V()((function(){var e;return null==a||null===(e=a.play)||void 0===e?void 0:e.call(a)})),_e||(Ne.current=!0),T.current=!1},followEnd:function(){l(),Ne.current=!1},unfollowEnd:function(){r(),Ne.current=!1},setFollowStatus:r,setUnFollowStatus:l}};(0,p.useEffect)((function(){var e,t,n;Ne.current=!1,(null===(e=Le.current)||void 0===e||null===(t=e.authorInfo)||void 0===t?void 0:t.uid)!==(null==I||null===(n=I.authorInfo)||void 0===n?void 0:n.uid)?tt===Q.$u.UnFollow?nt().setUnFollowStatus():nt().setFollowStatus():Y.F(tt)?nt().follow():nt().unfollow(),Le.current=I}),[tt]);var it=(0,p.useCallback)((function(){var e;return null==x||null===(e=x.pause)||void 0===e?void 0:e.call(x)}),[x]),ot=(0,p.useCallback)((function(e){var t=null==R?void 0:R(e,{clickMethod:"hot_key"});!M&&it(),!t&&window.open(Qe)}),[R,it,M,Qe]),at=(0,p.useCallback)((0,r.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Se){e.next=4;break}return P.emit(P.EVENT.videoPause),window.open(j.GN(null==I||null===(t=I.authorInfo)||void 0===t?void 0:t.uid)),e.abrupt("return");case 4:T.current=!0,Ne.current||(Y.V(tt)?null==Ee||Ee({clickFrom:"hot_key"}):null==ke||ke({clickFrom:"hot_key"}),_e&&(Ne.current=!1));case 6:case"end":return e.stop()}}),e)}))),[Ee,ke,tt,Se,N,null==I||null===(c=I.authorInfo)||void 0===c?void 0:c.uid,T,me,_e,Xe]);(0,p.useEffect)((function(){if(x)return null==x||x.on("onAvatar",ot),null==x||x.on("onFollow",at),function(){null==x||x.off("onAvatar",ot),null==x||x.off("onFollow",at)}}),[x,ot,at]);var lt=(0,p.useMemo)((function(){return ve?p.createElement("div",{onClick:function(e){var t;null==e||e.stopPropagation(),null==e||e.preventDefault(),(0,W.ZP)({headerText:"\u767b\u5f55\u540e\u83b7\u5f97\u4e13\u5c5e\u5934\u50cf\u6302\u4ef6",enterMethod:"topknot",success:(t=(0,r.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.location.reload();case 1:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})})}},p.createElement("span",null,"\u9886\u53d6\u540c\u6b3e\u5934\u50cf\u6302\u4ef6\uff01"),p.createElement("span",{className:J.loginGuideText},"\u9a6c\u4e0a\u767b\u5f55")):p.createElement("div",{className:J.shortcutTip},"\u524d\u5f80\u897f\u74dc\u89c6\u9891\u8bbf\u95ee\u4f5c\u8005\u4e3b\u9875")}),[ve]);return p.createElement("div",{className:B()(J.avatarWrap,(d={},(0,F.Z)(d,J.ableMiniType,ce),(0,F.Z)(d,J.animation,!0),d)),ref:Ie},p.createElement(z.a,{className:J.avatar,"data-e2e":"video-avatar",onClick:function(e){null==x||x.emit("shortcutTopic"),null==R||R(e,{clickMethod:"icon"}),!M&&it()},href:Qe,target:"_blank",rel:"noopener noreferrer"},p.createElement(h.C,{type:"left",tipClassName:ve?J.pendantGuide:J.shortcutTipWrap,showTip:(Se&&ze||ve)&&$e,setShowTip:function(e){if(ve?fe(e):qe(e),e){var t,n;if(xe===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:lt},p.createElement(q.q,{src:Ke,type:"extraSmall",className:B()(J.horizontalAvatar,J.avatarImageWrap),pendantConf:{pendantRequest:!1,pendantLottie:!0,avatarUid:null==I||null===(v=I.authorInfo)||void 0===v?void 0:v.uid}}))),ge&&p.createElement(h.C,{type:"left",showTip:$&&Ve&&!Ze&&$e,setShowTip:function(e){if(Ue(e),e){var t,n;if(xe===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});et(),b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:p.createElement("div",{className:J.shortcutTip},p.createElement(p.Fragment,null,"\u5173\u6ce8",(null==U||null===(f=U.follow)||void 0===f?void 0:f.key)&&p.createElement("span",{className:J.tipKey},U.follow.key)))},p.createElement("div",{className:B()(J.followWrap),"data-e2e":"feed-follow-icon"},p.createElement("div",{onMouseEnter:function(e){Ze||null==se||se(e)},onMouseLeave:function(e){Ze||null==de||de(e)},onClick:function(e){var t;if(null==x||x.emit("shortcutTopic"),"xgIcon"!==(null==e||null===(t=e.target)||void 0===t?void 0:t.id)){var n;if(Se)return P.emit(P.EVENT.videoPause),void window.open(j.GN(null==I||null===(n=I.authorInfo)||void 0===n?void 0:n.uid));T.current=!0,Ne.current||Ze||(Y.V(tt)?null==Ee||Ee():null==ke||ke())}},className:B()(J.followWrapBox)},Se&&p.createElement(te,{awemeInfo:I,ableMiniType:ce,followStatus:tt,logParams:{is_pure:Xe?"1":"0"}}),!Se&&p.createElement(p.Fragment,null,(null==I||null===(m=I.authorInfo)||void 0===m?void 0:m.uid)!==(null==L||null===(g=L.info)||void 0===g?void 0:g.uid)&&p.createElement(K.default,{hidden:Ze,onComplete:function(){return nt().unfollowEnd()},className:J.followIcon,data:ne,ref:je,loop:!1,autoplay:!1}),p.createElement(K.default,{hidden:Me,onComplete:function(){return nt().followEnd()},className:J.followIcon,data:ie,ref:Ye,loop:!1,autoplay:!1}))))),_e&&p.createElement(h.C,{type:"left",showTip:$&&Ve&&$e,setShowTip:function(e){if(Ue(e),e){var t,n;if(xe===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});et(),b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:p.createElement("div",{className:J.shortcutTip},"\u79c1\u4fe1")},p.createElement("div",{className:B()(J.followWrap)},p.createElement("div",{onMouseEnter:function(e){null==ye||ye(e),ee.sendLog("chatIconHover")},onMouseLeave:function(e){return null==we?void 0:we(e)},onClick:function(){var e;ee.sendLog("chatIconClick"),P.emit(P.EVENT.sendImUserMsg,{uid:null==I||null===(e=I.authorInfo)||void 0===e?void 0:e.uid,enterMethod:"friend_im_icon"})},className:B()(J.followWrapBox)},(null==I||null===(_=I.authorInfo)||void 0===_?void 0:_.uid)!==(null==L||null===(w=L.info)||void 0===w?void 0:w.uid)&&p.createElement(G.Z,{className:J.followIcon,src:H,width:32,height:33,viewBox:"0 0 32 33"})))))}var re=n(57674),ue=n(19275),ce={recommend:"web_homepage_hot",follow:"web_homepage_follow"};function se(e){var t,n,i,o=e.awemeInfo,a=void 0===o?{}:o,l=e.logId,r=e.className,u=e.ableMiniType,c=null==a?void 0:a.authorInfo,s=c.avatarUri,d=c.roomData,v=c.roomId,f=c.uid;return p.createElement("div",{className:B()(J.avatarWrap,r,(0,F.Z)({},J.ableMiniType,u))},p.createElement(ue.n,{type:"small",src:s,onClick:function(){var t,n;!function(e,t,n,i){var o,a,l,r,u,c=i;ee.sendLog("livesdkRecLivePlay",{enter_from_merge:"web_video_detail",enter_method:"web_video_head",anchor_id:e,room_id:t,game_name:"",live_type:"game",game_live_source:"game_web",url:location.href,url_path:location.pathname,request_id:n,is_vs:c?1:0,vs_episode_id:c?null===(o=i.episode_extra)||void 0===o?void 0:o.episode_id_str:"",vs_ep_group_id:c?null===(a=i.episode_extra)||void 0===a?void 0:a.item_id:"",vs_season_id:c?null===(l=i.episode_extra)||void 0===l?void 0:l.season_id_str:"",vs_episode_stage:c?(null===(r=i.episode_extra)||void 0===r||null===(u=r.mod)||void 0===u?void 0:u.episode_stage)===re.W.FirstLive?"premiere":"live":""})}(f,v,l,null==d?void 0:d.episode_extra),null==e||null===(t=e.player)||void 0===t||null===(n=t.pause)||void 0===n||n.call(t)},liveRoomUrl:j.cc({web_rid:null==d||null===(t=d.owner)||void 0===t?void 0:t.web_rid,enter_from_merge:ce[C.yW()],enter_method:"web_video_head",action_type:"click",room_id:v}),liveRoomParam:{logId:l,episodeExtra:null==d?void 0:d.episode_extra},isFirstLive:2===(null==d||null===(n=d.episode_extra)||void 0===n||null===(i=n.mod)||void 0===i?void 0:i.episode_stage)}))}function de(e){var t=e.logInfo,n=e.player,i=e.onAvatarClick,o=e.isOpenKeyHotEvent,a=(0,p.useRef)("");try{var r;a.current=null===(r=JSON.parse(null==t?void 0:t.log_pb))||void 0===r?void 0:r.impr_id}catch(u){a.current=""}return(0,p.useEffect)((function(){if(n){var e=function(e){o&&(null==i||i(e,{clickMethod:"hot_key"}))};return null==n||n.on("onAvatar",e),function(){null==n||n.off("onAvatar",e)}}}),[n,i]),p.createElement(se,(0,l.Z)((0,l.Z)({},e),{},{logId:a.current}))}var ve="pBxTZJeH",fe="hfgGrUTS",me="tzVl3l7w",pe="aLzJ7lUV",ge="Qz1xVpFH",he=n(59662),_e=new $.hD({clickCommentButton:{eventName:"click_comment_button",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_follow_list:"0",relation:"",aweme_type:""}}}),ye=n(59013),we=n(67866),ke=function(e){var t,n=e.count,i=e.className,o=e.textClassName,a=e.toggleComment,r=e.reportExtraParams,u=e.awemeInfo,c=e.ableMiniType,s=e.onLottieComplete,d=(0,p.useMemo)((function(){var e,t,n,i,o,a,l,r,c,s,d,v,f,m,p,g,h,_,y;return{author_id:null==u||null===(e=u.authorInfo)||void 0===e?void 0:e.uid,group_id:null==u?void 0:u.awemeId,log_pb:null==u?void 0:u.logPb,compilation_id:null==u||null===(t=u.mixInfo)||void 0===t?void 0:t.mixId,impressionData:null==u?void 0:u.impressionData,awemeId:null==u?void 0:u.awemeId,vduration:null==u||null===(n=u.video)||void 0===n?void 0:n.duration,isH265:(null==u||null===(i=u.video)||void 0===i||null===(o=i.bitRateList)||void 0===o||null===(a=o[0])||void 0===a?void 0:a.isH265)||(null==u||null===(l=u.video)||void 0===l?void 0:l.isH265),qualityType:(null==u||null===(r=u.video)||void 0===r||null===(c=r.bitRateList)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.qualityType)||(null==u||null===(d=u.video)||void 0===d?void 0:d.qualityType),bitRate:(null==u||null===(v=u.video)||void 0===v||null===(f=v.bitRateList)||void 0===f||null===(m=f[0])||void 0===m?void 0:m.bitRate)||(null==u||null===(p=u.video)||void 0===p?void 0:p.bitRate),videoFormat:null==u||null===(g=u.video)||void 0===g?void 0:g.videoFormat,gearName:(null==u||null===(h=u.video)||void 0===h||null===(_=h.bitRateList)||void 0===_||null===(y=_[0])||void 0===y?void 0:y.gearName)||""}}),[u]),v=(0,he.n)(),f=(0,p.useRef)(null),m=function(){var e,t,n=null===(e=f.current)||void 0===e||null===(t=e.getLottieInstance)||void 0===t?void 0:t.call(e);return{enter:function(){var e;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[0,33],!0)},leave:function(){var e;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[59,83],!0)}}},g=(0,p.useRef)(null);(0,p.useEffect)((function(){var e=g.current,t=function(){var e,t;null===(e=(t=m()).enter)||void 0===e||e.call(t)},n=function(){var e,t;null===(e=(t=m()).leave)||void 0===e||e.call(t)};return null==e||e.addEventListener("mouseenter",t),null==e||e.addEventListener("mouseleave",n),function(){null==e||e.removeEventListener("mouseenter",t),null==e||e.removeEventListener("mouseleave",n)}}),[]);var h=(0,p.useCallback)((function(e){var t,n,i,o=e.clickMethod,c=void 0===o?"icon":o;null==v||v.emit("shortcutTopic");var s=a({clickMethod:c});_e.sendLog("clickCommentButton",(0,l.Z)((0,l.Z)({urlParamList:["previous_page"],enter_from:C.mo(),author_id:null==u||null===(t=u.authorInfo)||void 0===t?void 0:t.uid,group_id:null==u?void 0:u.awemeId,log_pb:null==d?void 0:d.log_pb,is_full_screen:S.r()?"1":"0",is_full_webscreen:null!==(n=L.Le.getConfig(L.gI.IsPageFullScreen))&&void 0!==n&&n.type?"1":"0",tab_name:R.getTabName()||I.Rs("tab_name")||"",click_method:c,click_from:c,from_follow_list:null!==(i=L.Le.getConfig(L.gI.FromFollowList))&&void 0!==i&&i.tag?"1":"0",aweme_type:"".concat(null==u?void 0:u.awemeType),action:s?"open":"close"},r||{}),ye.t()))}),[v,a,u,r,d]);return(0,p.useEffect)((function(){if(v)return null==v||v.on("showComment",h),function(){null==v||v.off("showComment",h)}}),[v,h]),p.createElement("div",{className:B()(ve,i,(t={},(0,F.Z)(t,ge,c),(0,F.Z)(t,pe,!0),t)),"data-e2e":"feed-comment-icon",onClick:function(){return h({clickMethod:"icon"})},ref:g},p.createElement("div",{className:me},p.createElement(K.default,{ref:f,data:we,loop:!1,autoplay:!1,onComplete:function(){null==s||s()}})),Boolean(n)&&p.createElement("div",{className:B()(fe,o)},n))},Ee=n(10396),be=n.n(Ee),xe=n(63862),Se=n.n(xe),Ce=n(22758),Ie=n(34999),Le=n(6534),Ne=n(26195),Pe=n(10415),Te="kEqb4PZ6",Ze="W9uIxu_l",Re="HNBvVrcV",De="lHmTa40e",Ae="TwlaIXPW",Me="PK0tKym9",Be="up9tZldE",Fe="MHeBD3KS";function Oe(e){var t,n,i,o,a,l=e.awemeInfo,u=e.isLogin,c=e.loginUserInfo,d=e.loginDispatch,v=e.fullScreenTarget,f=e.reportExtraParams,m=void 0===f?{}:f,g=e.ableMiniType,h=void 0!==g&&g,_=e.onLottieComplete,y=e.recordPreferVideoSwitch,w=void 0!==y&&y,k=e.refIsDigged,E=void 0===k?{}:k,b=(0,he.n)(),x=(0,p.useRef)(!0),I=(0,p.useRef)(!1),N=(0,p.useRef)(!1),P=(0,p.useRef)(null),Z=(0,p.useRef)(!1),R=(0,Ce.P)({selfUid:null==c||null===(t=c.info)||void 0===t?void 0:t.uid,awemeId:null==l?void 0:l.awemeId,defaultCount:null==l||null===(n=l.stats)||void 0===n?void 0:n.diggCount,defaultDiggStatus:null!=l&&l.userDigged?Q.gZ.Digged:Q.gZ.UnDigg}),D=R.count,A=R.diggStatus,M=(0,Ie._)({diggState:A===Q.gZ.Digged}),O=M.resetUsedKeyDownTime,V=M.resetDiggTime,U=M.checkIsCancelDigg,H=(0,Le.i)({selfUid:null==c||null===(i=c.info)||void 0===i?void 0:i.uid,isLogin:u,awemeInfo:l,onLoginSuccess:(a=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==d||d({type:"updateUserInfo"}),"video_detail"!==C.vM()){e.next=4;break}return e.next=4,(0,Ne.a8)({secUid:null==l||null===(t=l.authorInfo)||void 0===t?void 0:t.secUid,uid:null==l||null===(n=l.authorInfo)||void 0===n?void 0:n.uid});case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),reportExtraParams:m,accountParentEl:S.r()&&v,defaultDiggStatus:null!=l&&l.userDigged?Q.gZ.Digged:Q.gZ.UnDigg}),W=H.digg,z=H.unDigg,q=(0,p.useCallback)((function(e){if(!I.current){if(N.current=!0,w){var t,n,i=L.Le.getConfig(L.gI.AwemePcRecRawData)||{videoPrefer:{fsn:[],like:[],halfMin:[],min:[]}},o=i.videoPrefer.like;!be()(t=Se()(o).call(o,(function(e,t){return t%2==0}))).call(t,null==l?void 0:l.groupId)&&o.push(null==l?void 0:l.groupId,null==l||null===(n=l.authorInfo)||void 0===n?void 0:n.uid),L.Le.setConfig(L.gI.AwemePcRecRawData,i)}A===Q.gZ.Digged?z({clickMethod:e}):W({clickMethod:e})}}),[v,A,W,z,w]);(0,p.useEffect)((function(){A&&V()}),[A]),(0,p.useEffect)((function(){if(b){var e=function(e){var t=e.clickMethod;e.isKeyWorkCancalLike;A?A&&"hot_key"!==t||(U()&&q(t),O()):q(t)};return null==b||b.on("onStar",e),function(){null==b||b.off("onStar",e)}}}),[b,q,null==l?void 0:l.awemeId,A]);var G=function(){var e,t,n=null===(e=P.current)||void 0===e||null===(t=e.getLottieInstance)||void 0===t?void 0:t.call(e),i=function(){var e,t;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[0,1],!0),null==n||null===(t=n.goToAndStop)||void 0===t||t.call(n,88,!0)},o=function(){var e,t;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[0,1],!0),null==n||null===(t=n.goToAndStop)||void 0===t||t.call(n,0,!0)};return{setLikedStatus:i,setUnLikedStatus:o,like:function(){var e;I.current=!0,N.current=!1,null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[39,65],!0)},dislike:function(){var e;I.current=!0,N.current=!1,null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[124,162],!0)},enter:function(){var e,t;A?null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[96,120],!0):null==n||null===(t=n.playSegments)||void 0===t||t.call(n,[0,32],!0)},leave:function(){var e,t;A?null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[64,88],!0):null==n||null===(t=n.playSegments)||void 0===t||t.call(n,[162,186],!0)},end:function(){I.current=!1,Z.current||(A?i():o())}}},j=(0,p.useRef)(null);return(0,p.useEffect)((function(){var e=j.current,t=function(){var e,t;Z.current=!0,null===(e=(t=G()).enter)||void 0===e||e.call(t)},n=function(){var e,t;Z.current=!1,null===(e=(t=G()).leave)||void 0===e||e.call(t)};return null==e||e.addEventListener("mouseenter",t),null==e||e.addEventListener("mouseleave",n),function(){null==e||e.removeEventListener("mouseenter",t),null==e||e.removeEventListener("mouseleave",n)}}),[G]),(0,p.useEffect)((function(){if(x.current)return A?G().setLikedStatus():G().setUnLikedStatus(),void(x.current=!1);N.current?A?G().like():G().dislike():(A?G().setLikedStatus():G().setUnLikedStatus(),N.current=!1)}),[A]),(0,p.useEffect)((function(){E.current=A}),[A,E]),p.createElement("div",{className:B()(Te,Be,(o={},(0,F.Z)(o,Ze,A),(0,F.Z)(o,Fe,h),o)),onClick:function(){null==b||b.emit("shortcutTopic"),q()},ref:j,"data-e2e-state":A?"video-player-is-digged":"video-player-no-digged","data-e2e":"video-player-digg"},p.createElement("div",{className:De},p.createElement(K.default,{ref:P,className:Re,data:Pe,loop:!1,autoplay:!1,onComplete:function(){null==_||_(),G().end()}})),p.createElement("div",{className:B()(Me,Ae)},T.qe(D)))}var Ve=n(73843),Ue=n(94344),He=n(93289),We=n(85757),ze=new $.hD({clickFavoriteVideo:{eventName:"click_favorite_video",params:{click_from:"icon",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0",click_method:""}},clickCancelFavoriteVideo:{eventName:"click_cancel_favorite_video",params:{click_from:"icon",previous_page:"",author_id:"",group_id:"",log_pb:"",enter_from:"",is_full_screen:"0"}}}),qe="CT3y5rWY",Ke="qc4FQDvn",Ge="ywWMyrCr",je="H2e1f_wM",Ye="UgpbNsc3",Qe="jtnwH7Q7",Xe=n(31081);function Je(e){var t,n,i,o,a,u=e.awemeInfo,c=e.isLogin,d=e.loginUserInfo,v=e.loginDispatch,f=e.fullScreenTarget,m=e.toast,g=e.ableMiniType,h=void 0!==g&&g,_=e.reportExtraParams,y=void 0===_?{}:_,w=e.onLottieComplete,k=e.refIsCollected,E=void 0===k?{}:k,b=(0,p.useRef)(!0),x=(0,p.useRef)(!1),L=(0,p.useRef)(!1),N=(0,p.useRef)(null),P=(0,p.useRef)(null),Z=(0,p.useRef)(!1),D=(0,he.n)(),A=(0,He.p)({selfUid:null==d||null===(t=d.info)||void 0===t?void 0:t.uid,awemeInfo:u,defaultCollectStatus:null!=u&&u.userCollected?Q.c.Collected:Q.c.Uncollected,isLogin:c,accountParentEl:S.r()&&f,reportExtraParams:y,onLoginSuccess:(a=(0,r.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==v||v({type:"updateUserInfo"}),"video_detail"!==C.vM()){e.next=4;break}return e.next=4,(0,Ne.a8)({secUid:null==u||null===(t=u.authorInfo)||void 0===t?void 0:t.secUid,uid:null==u||null===(n=u.authorInfo)||void 0===n?void 0:n.uid});case 4:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)}),success:function(e){"collect"===e.action&&(m?m(Q.a$.CollectSuccess):Ue.F.info(Q.a$.CollectSuccess))},fail:function(e){var t=e.statusCode;t!==Ve.ERROR_CODE.ERROR_USER_UNLOGIN&&(t!==Ve.ERROR_CODE.ERROR_COLLECT_TOO_FAST?t!==Ve.ERROR_CODE.ERROR_COLLECT_RESTRICTED?m?m(Q.a$.CollectFail):Ue.F.info(Q.a$.CollectFail):m?m(Q.a$.CollectBan):Ue.F.info(Q.a$.CollectBan):m?m(Q.a$.TooFast):Ue.F.info(Q.a$.TooFast))}}),M=A.unCollect,O=A.collect,V=(0,We.u)({selfUid:null==d||null===(n=d.info)||void 0===n?void 0:n.uid,awemeId:null==u?void 0:u.awemeId,defaultCollectStatus:null!=u&&u.userCollected?Q.c.Collected:Q.c.Uncollected,defaultCount:null==u||null===(i=u.stats)||void 0===i?void 0:i.collectCount}),U=V.collectStatus,H=V.count,W=function(){var e,t,n=null===(e=N.current)||void 0===e||null===(t=e.getLottieInstance)||void 0===t?void 0:t.call(e),i=function(){var e,t;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[0,1],!0),null==n||null===(t=n.goToAndStop)||void 0===t||t.call(n,115,!0)},o=function(){var e,t;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[0,1],!0),null==n||null===(t=n.goToAndStop)||void 0===t||t.call(n,0,!0)};return{toLottieStart:o,toLottieEnd:i,addCollect:function(){var e;x.current=!0,L.current=!1,null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[58,92],!0)},cancelCollect:function(){var e;x.current=!0,L.current=!1,null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[151,170],!0)},enter:function(){var e,t;U?null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[121,145],!0):null==n||null===(t=n.playSegments)||void 0===t||t.call(n,[10,43],!0)},leave:function(){var e,t;U?null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[92,115],!0):null==n||null===(t=n.playSegments)||void 0===t||t.call(n,[195,207],!0)},end:function(){x.current=!1,Z.current||(U?i():o())}}},z=function(e){var t,n,i=(e||{}).clickMethod,o=void 0===i?"icon":i;x.current||(L.current=!0,U===Q.c.Collected?ze.sendLog("clickCancelFavoriteVideo",(0,l.Z)({click_from:"icon",urlParamList:["previous_page"],author_id:null==u||null===(t=u.authorInfo)||void 0===t?void 0:t.uid,group_id:null==u?void 0:u.awemeId,log_pb:null==u?void 0:u.logPb,enter_from:C.mo(),is_full_screen:S.r()?"1":"0",tab_name:R.getTabName()||I.Rs("tab_name")||""},y)):ze.sendLog("clickFavoriteVideo",(0,l.Z)({click_from:"icon",urlParamList:["previous_page"],author_id:null==u||null===(n=u.authorInfo)||void 0===n?void 0:n.uid,group_id:null==u?void 0:u.awemeId,log_pb:null==u?void 0:u.logPb,enter_from:C.mo(),is_full_screen:S.r()?"1":"0",click_method:o,tab_name:R.getTabName()||I.Rs("tab_name")||""},y)),null==D||D.emit("shortcutTopic"),U===Q.c.Collected?M({clickMethod:o}):O({clickMethod:o}))};return(0,p.useEffect)((function(){var e=P.current,t=function(){var e,t;Z.current=!0,null===(e=(t=W()).enter)||void 0===e||e.call(t)},n=function(){var e,t;Z.current=!1,null===(e=(t=W()).leave)||void 0===e||e.call(t)};return null==e||e.addEventListener("mouseenter",t),null==e||e.addEventListener("mouseleave",n),function(){null==e||e.removeEventListener("mouseenter",t),null==e||e.removeEventListener("mouseleave",n)}}),[W]),(0,p.useEffect)((function(){return null==D||D.on("onCollect",z),function(){null==D||D.off("onCollect",z)}}),[D,z]),(0,p.useEffect)((function(){if(b.current)return U===Q.c.Collected?W().toLottieEnd():W().toLottieStart(),void(b.current=!1);L.current?U===Q.c.Collected?W().addCollect():W().cancelCollect():(U===Q.c.Collected?W().toLottieEnd():W().toLottieStart(),L.current=!1)}),[U]),(0,p.useEffect)((function(){E.current=U}),[E,U]),p.createElement("div",{className:B()(qe,(o={},(0,F.Z)(o,Qe,h),(0,F.Z)(o,Ye,!0),o)),onClick:function(){return z()},ref:P,"data-e2e-state":U?"video-player-is-collected":"video-player-no-collect","data-e2e":"video-player-collect"},p.createElement("div",{className:Ge},p.createElement(K.default,{ref:N,className:je,data:Xe,loop:!1,autoplay:!1,onComplete:function(){null==w||w(),W().end()}})),p.createElement("div",{className:B()(Ke)},T.qe(H)))}var $e,et,tt=new $.hD({clickCommentButton:{eventName:"click_comment_button",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",from_follow_list:"0",trending_topic:"",first_tag_name:"",top:0,aweme_type:-1}},follow:{eventName:"follow",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",click_method:"",relation:"",trending_topic:"",first_tag_name:"",top:0,aweme_type:-1,is_pure:""}},followCancel:{eventName:"follow_cancel",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tab_name:"",trending_topic:"",first_tag_name:"",top:0}},shareVideo:{eventName:"share_video",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",type:"",is_full_screen:"0",from_follow_list:"0",aweme_type:"",tab_name:"",is_pure:"",click_method:""}}}),nt=new $.hD({clickMusicEntrance:{eventName:"click_music_entrance",params:{author_id:"",group_id:"",music_id:"",enter_from:"",status:"on",position:""}}}),it="XKRPug6G",ot="HLklvbEN",at="jxlAav9e",lt="plQBP5Cj",rt="pUAFRv8U",ut="pqQK6fV_",ct="VJaopB18",st="lX6VwnJQ",dt="bvwktQrg",vt="uXFu9X4i",ft="BKaa3YbL",mt="fcsC8RiH",pt="fybORMhT",gt="PaGZ_HTI",ht="JPA7MMKV",_t=n(91479),yt=JSON.parse('{"v":"5.6.10","fr":60,"ip":0,"op":122,"w":200,"h":240,"nm":"\u25bd Group 8","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":4,"nm":"Shape Copy 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":-81,"s":[100]},{"t":40,"s":[0]}],"ix":11},"r":{"a":0,"k":96,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-81,"s":[110.447,181.044,0],"to":[-16.583,-54.833,0],"ti":[-19.583,40.667,0]},{"t":40,"s":[122.947,12.044,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-81,"s":[0,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-66,"s":[-141,141,100]},{"t":40,"s":[-100,100,100]}],"ix":6}},"ao":1,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-0.03,-0.01],[0,0],[0,0]],"o":[[0.03,0],[0,0],[0,0],[0,0]],"v":[[-3.667,-5.042],[-3.567,-5.032],[-3.567,-5.042],[-3.667,-5.042]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0.21,0.18],[0.28,-0.04],[0,0],[0,0],[0,-0.47],[0,0],[0.59,0],[0,-1.04],[-1.04,0],[0,1.05],[0,0],[0,0],[0,0],[0,0],[0.6,0],[0,-1.04],[-1.04,0],[0,1.05],[0,0]],"o":[[0,-0.28],[-0.22,-0.18],[0,0],[0,0],[-0.46,0.07],[0,0],[-0.35,-0.42],[-1.04,0],[0,1.05],[1.05,0],[0,0],[0,0],[0,0],[0,0],[-0.35,-0.43],[-1.04,0],[0,1.05],[1.05,0],[0,0],[0,0]],"v":[[5.751,-5.107],[5.421,-5.827],[4.651,-6.047],[4.651,-6.047],[-1.599,-4.907],[-2.399,-3.977],[-2.399,2.963],[-3.859,2.273],[-5.749,4.163],[-3.859,6.053],[-1.969,4.163],[-1.969,4.163],[-1.969,-1.337],[5.321,-2.727],[5.321,2.973],[3.841,2.273],[1.951,4.163],[3.841,6.053],[5.731,4.163],[5.751,-5.107]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Shape Copy","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":41,"st":-81,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"Shape Copy 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":41,"s":[100]},{"t":162,"s":[0]}],"ix":11},"r":{"a":0,"k":96,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":41,"s":[110.447,181.044,0],"to":[-16.583,-54.833,0],"ti":[-19.583,40.667,0]},{"t":162,"s":[122.947,12.044,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":41,"s":[0,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":56,"s":[-141,141,100]},{"t":162,"s":[-100,100,100]}],"ix":6}},"ao":1,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-0.03,-0.01],[0,0],[0,0]],"o":[[0.03,0],[0,0],[0,0],[0,0]],"v":[[-3.667,-5.042],[-3.567,-5.032],[-3.567,-5.042],[-3.667,-5.042]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0.21,0.18],[0.28,-0.04],[0,0],[0,0],[0,-0.47],[0,0],[0.59,0],[0,-1.04],[-1.04,0],[0,1.05],[0,0],[0,0],[0,0],[0,0],[0.6,0],[0,-1.04],[-1.04,0],[0,1.05],[0,0]],"o":[[0,-0.28],[-0.22,-0.18],[0,0],[0,0],[-0.46,0.07],[0,0],[-0.35,-0.42],[-1.04,0],[0,1.05],[1.05,0],[0,0],[0,0],[0,0],[0,0],[-0.35,-0.43],[-1.04,0],[0,1.05],[1.05,0],[0,0],[0,0]],"v":[[5.751,-5.107],[5.421,-5.827],[4.651,-6.047],[4.651,-6.047],[-1.599,-4.907],[-2.399,-3.977],[-2.399,2.963],[-3.859,2.273],[-5.749,4.163],[-3.859,6.053],[-1.969,4.163],[-1.969,4.163],[-1.969,-1.337],[5.321,-2.727],[5.321,2.973],[3.841,2.273],[1.951,4.163],[3.841,6.053],[5.731,4.163],[5.751,-5.107]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Shape Copy","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":41,"op":122,"st":41,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"Shape 5","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":-15,"s":[100]},{"t":106,"s":[0]}],"ix":11},"r":{"a":0,"k":155,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-15,"s":[107.239,174.641,0],"to":[-41,-41.75,0],"ti":[-29.5,55.25,0]},{"t":106,"s":[81.739,17.641,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-15,"s":[0,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":0,"s":[100,100,100]},{"t":106,"s":[56,56,100]}],"ix":6}},"ao":1,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-0.05,-0.01],[0,0],[0,0]],"o":[[0.05,0],[0,0],[0,0],[0,0]],"v":[[-6.618,-9.1],[-6.468,-9.09],[-6.468,-9.1],[-6.618,-9.1]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0.38,0.32],[0.49,-0.08],[0,0],[0,0],[0,-0.84],[0,0],[1.07,0],[0,-1.89],[-1.88,0],[0,1.88],[0,0],[0,0],[0,0],[0,0],[1.08,0],[0,-1.89],[-1.88,0],[0,1.88],[0,0]],"o":[[0,-0.5],[-0.38,-0.33],[0,0],[0,0],[-0.83,0.13],[0,0],[-0.63,-0.76],[-1.88,0],[0,1.88],[1.89,0],[0,0],[0,0],[0,0],[0,0],[-0.62,-0.78],[-1.88,0],[0,1.88],[1.89,0],[0,0],[0,0]],"v":[[10.375,-9.221],[9.775,-10.521],[8.405,-10.911],[8.395,-10.911],[-2.895,-8.861],[-4.325,-7.181],[-4.325,5.349],[-6.965,4.099],[-10.375,7.519],[-6.965,10.929],[-3.545,7.519],[-3.545,7.519],[-3.545,-2.411],[9.595,-4.911],[9.595,5.379],[6.935,4.099],[3.525,7.519],[6.935,10.929],[10.355,7.519],[10.375,-9.221]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Shape","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":122,"st":-15,"bm":0},{"ddd":0,"ind":4,"ty":4,"nm":"Shape 3","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":107,"s":[100]},{"t":228,"s":[0]}],"ix":11},"r":{"a":0,"k":155,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":107,"s":[107.239,174.641,0],"to":[-41,-41.75,0],"ti":[-29.5,55.25,0]},{"t":228,"s":[81.739,17.641,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":107,"s":[0,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":122,"s":[100,100,100]},{"t":228,"s":[56,56,100]}],"ix":6}},"ao":1,"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[-0.05,-0.01],[0,0],[0,0]],"o":[[0.05,0],[0,0],[0,0],[0,0]],"v":[[-6.618,-9.1],[-6.468,-9.09],[-6.468,-9.1],[-6.618,-9.1]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ind":1,"ty":"sh","ix":2,"ks":{"a":0,"k":{"i":[[0,0],[0.38,0.32],[0.49,-0.08],[0,0],[0,0],[0,-0.84],[0,0],[1.07,0],[0,-1.89],[-1.88,0],[0,1.88],[0,0],[0,0],[0,0],[0,0],[1.08,0],[0,-1.89],[-1.88,0],[0,1.88],[0,0]],"o":[[0,-0.5],[-0.38,-0.33],[0,0],[0,0],[-0.83,0.13],[0,0],[-0.63,-0.76],[-1.88,0],[0,1.88],[1.89,0],[0,0],[0,0],[0,0],[0,0],[-0.62,-0.78],[-1.88,0],[0,1.88],[1.89,0],[0,0],[0,0]],"v":[[10.375,-9.221],[9.775,-10.521],[8.405,-10.911],[8.395,-10.911],[-2.895,-8.861],[-4.325,-7.181],[-4.325,5.349],[-6.965,4.099],[-10.375,7.519],[-6.965,10.929],[-3.545,7.519],[-3.545,7.519],[-3.545,-2.411],[9.595,-4.911],[9.595,5.379],[6.935,4.099],[3.525,7.519],[6.935,10.929],[10.355,7.519],[10.375,-9.221]],"c":true},"ix":2},"nm":"Path 2","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"mm","mm":1,"nm":"Merge Paths 1","mn":"ADBE Vector Filter - Merge","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Shape","np":4,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":107,"op":122,"st":107,"bm":0},{"ddd":0,"ind":5,"ty":4,"nm":"Shape 4","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":-54,"s":[100]},{"t":67,"s":[0]}],"ix":11},"r":{"a":0,"k":93,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":-54,"s":[102.972,179.127,0],"to":[-14.583,-25.667,0],"ti":[-19.417,88.167,0]},{"t":67,"s":[94.972,15.127,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-54,"s":[0,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":-39,"s":[100,100,100]},{"t":67,"s":[78,78,100]}],"ix":6}},"ao":1,"ef":[{"ty":25,"nm":"\u6295\u5f71","np":8,"mn":"ADBE Drop Shadow","ix":1,"en":1,"ef":[{"ty":2,"nm":"\u9634\u5f71\u989c\u8272","mn":"ADBE Drop Shadow-0001","ix":1,"v":{"a":0,"k":[0,0,0,0.10000000149],"ix":1}},{"ty":0,"nm":"\u4e0d\u900f\u660e\u5ea6","mn":"ADBE Drop Shadow-0002","ix":2,"v":{"a":0,"k":25.5,"ix":2}},{"ty":0,"nm":"\u65b9\u5411","mn":"ADBE Drop Shadow-0003","ix":3,"v":{"a":0,"k":180,"ix":3}},{"ty":0,"nm":"\u8ddd\u79bb","mn":"ADBE Drop Shadow-0004","ix":4,"v":{"a":0,"k":4,"ix":4}},{"ty":0,"nm":"\u67d4\u548c\u5ea6","mn":"ADBE Drop Shadow-0005","ix":5,"v":{"a":0,"k":4,"ix":5}},{"ty":7,"nm":"\u4ec5\u9634\u5f71","mn":"ADBE Drop Shadow-0006","ix":6,"v":{"a":0,"k":0,"ix":6}}]}],"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[2.16,0.36],[0,0],[0,0],[0.84,0],[0,-2.28],[-2.37,0],[0,2.27],[0,0.06],[0,0.03],[0,0],[-1.61,1.07],[0.12,-0.04]],"o":[[-3.84,1.22],[-3.06,-0.51],[0,0],[-0.66,-0.41],[-2.37,0],[0,2.27],[2.36,0],[0,-0.06],[0,-0.02],[0.14,-0.74],[0,0],[1.85,-1.24],[0,0]],"v":[[5.992,-8.522],[0.572,-9.142],[-1.608,-6.112],[0.512,1.598],[-1.768,0.958],[-6.048,5.078],[-1.768,9.188],[2.502,5.078],[2.502,4.898],[2.512,4.838],[0.572,-5.412],[4.372,-5.332],[5.992,-8.522]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":-44,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Shape","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":68,"st":-54,"bm":0},{"ddd":0,"ind":6,"ty":4,"nm":"Shape 2","sr":1,"ks":{"o":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":68,"s":[100]},{"t":189,"s":[0]}],"ix":11},"r":{"a":0,"k":93,"ix":10},"p":{"a":1,"k":[{"i":{"x":0.667,"y":1},"o":{"x":0.333,"y":0},"t":68,"s":[102.972,179.127,0],"to":[-14.583,-25.667,0],"ti":[-19.417,88.167,0]},{"t":189,"s":[94.972,15.127,0]}],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":1,"k":[{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":68,"s":[0,0,100]},{"i":{"x":[0.667,0.667,0.667],"y":[1,1,1]},"o":{"x":[0.333,0.333,0.333],"y":[0,0,0]},"t":83,"s":[100,100,100]},{"t":189,"s":[78,78,100]}],"ix":6}},"ao":1,"ef":[{"ty":25,"nm":"\u6295\u5f71","np":8,"mn":"ADBE Drop Shadow","ix":1,"en":1,"ef":[{"ty":2,"nm":"\u9634\u5f71\u989c\u8272","mn":"ADBE Drop Shadow-0001","ix":1,"v":{"a":0,"k":[0,0,0,0.10000000149],"ix":1}},{"ty":0,"nm":"\u4e0d\u900f\u660e\u5ea6","mn":"ADBE Drop Shadow-0002","ix":2,"v":{"a":0,"k":25.5,"ix":2}},{"ty":0,"nm":"\u65b9\u5411","mn":"ADBE Drop Shadow-0003","ix":3,"v":{"a":0,"k":180,"ix":3}},{"ty":0,"nm":"\u8ddd\u79bb","mn":"ADBE Drop Shadow-0004","ix":4,"v":{"a":0,"k":4,"ix":4}},{"ty":0,"nm":"\u67d4\u548c\u5ea6","mn":"ADBE Drop Shadow-0005","ix":5,"v":{"a":0,"k":4,"ix":5}},{"ty":7,"nm":"\u4ec5\u9634\u5f71","mn":"ADBE Drop Shadow-0006","ix":6,"v":{"a":0,"k":0,"ix":6}}]}],"shapes":[{"ty":"gr","it":[{"ind":0,"ty":"sh","ix":1,"ks":{"a":0,"k":{"i":[[0,0],[2.16,0.36],[0,0],[0,0],[0.84,0],[0,-2.28],[-2.37,0],[0,2.27],[0,0.06],[0,0.03],[0,0],[-1.61,1.07],[0.12,-0.04]],"o":[[-3.84,1.22],[-3.06,-0.51],[0,0],[-0.66,-0.41],[-2.37,0],[0,2.27],[2.36,0],[0,-0.06],[0,-0.02],[0.14,-0.74],[0,0],[1.85,-1.24],[0,0]],"v":[[5.992,-8.522],[0.572,-9.142],[-1.608,-6.112],[0.512,1.598],[-1.768,0.958],[-6.048,5.078],[-1.768,9.188],[2.502,5.078],[2.502,4.898],[2.512,4.838],[0.572,-5.412],[4.372,-5.332],[5.992,-8.522]],"c":true},"ix":2},"nm":"Path 1","mn":"ADBE Vector Shape - Group","hd":false},{"ty":"fl","c":{"a":0,"k":[1,1,1,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[200,200],"ix":3},"r":{"a":0,"k":-44,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"\u53d8\u6362"}],"nm":"Shape","np":2,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":68,"op":122,"st":68,"bm":0}],"markers":[]}'),wt=n(83100);function kt(){return kt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},kt.apply(this,arguments)}var Et,bt,xt,St,Ct,It=function(e){return p.createElement("svg",kt({width:12,height:14,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),$e||($e=p.createElement("path",{opacity:.9,d:"M10.5 5.09c-1.183-.24-2.75-.953-2.75-3.34v7.181s-.18 3.319-3.059 3.319c-2.507 0-3.222-2.01-3.189-2.89.035-1.496.83-2.905 2.368-2.862",stroke:"url(#music_logo_svg__paint0_linear_20225_195792)",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),et||(et=p.createElement("defs",null,p.createElement("linearGradient",{id:"music_logo_svg__paint0_linear_20225_195792",x1:1.5,y1:1.75,x2:1.5,y2:12.25,gradientUnits:"userSpaceOnUse"},p.createElement("stop",{stopColor:"#fff"}),p.createElement("stop",{offset:1,stopColor:"#fff"})))))};function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lt.apply(this,arguments)}var Nt,Pt=function(e){return p.createElement("svg",Lt({width:17,height:20,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),Et||(Et=p.createElement("path",{d:"M6.62 7.569v-.746A5.837 5.837 0 000 12.601c0 1.967.984 3.717 2.486 4.773A5.788 5.788 0 01.922 13.41c.01-3.18 2.548-5.768 5.698-5.84z",fill:"#00FAF0"})),bt||(bt=p.createElement("path",{d:"M6.755 16.049c1.43 0 2.6-1.14 2.652-2.558V.808h2.32A4.11 4.11 0 0111.656 0h-3.17v12.684a2.659 2.659 0 01-2.652 2.557c-.446 0-.87-.114-1.233-.31a2.64 2.64 0 002.155 1.118zM16.067 5.115V4.41a4.37 4.37 0 01-2.403-.715 4.502 4.502 0 002.403 1.419z",fill:"#00FAF0"})),xt||(xt=p.createElement("path",{d:"M13.675 3.696A4.391 4.391 0 0112.587.808h-.85a4.456 4.456 0 001.938 2.888zM5.833 9.93a2.66 2.66 0 00-2.663 2.66c0 1.025.58 1.905 1.43 2.35a2.677 2.677 0 01-.508-1.553 2.66 2.66 0 012.663-2.66c.269 0 .538.04.787.124V7.62a6.558 6.558 0 00-.787-.053H6.62v2.485a2.46 2.46 0 00-.787-.124z",fill:"#FE2C55"})),St||(St=p.createElement("path",{d:"M16.068 5.115V7.58a7.522 7.522 0 01-4.403-1.419v6.43c0 3.21-2.61 5.83-5.833 5.83a5.783 5.783 0 01-3.335-1.057 5.835 5.835 0 004.268 1.864 5.837 5.837 0 005.832-5.83v-6.43A7.546 7.546 0 0017 8.389v-3.17a5.467 5.467 0 01-.932-.103z",fill:"#FE2C55"})),Ct||(Ct=p.createElement("path",{d:"M11.664 12.59V6.16a7.546 7.546 0 004.403 1.42V5.114a4.464 4.464 0 01-2.403-1.419A4.357 4.357 0 0111.737.808h-2.32V13.49a2.659 2.659 0 01-2.653 2.558 2.63 2.63 0 01-2.155-1.108 2.66 2.66 0 01-1.43-2.35A2.66 2.66 0 015.843 9.93c.27 0 .539.041.787.124V7.569a5.832 5.832 0 00-5.687 5.819c0 1.532.59 2.93 1.564 3.966a5.807 5.807 0 003.336 1.056c3.201.01 5.822-2.61 5.822-5.82z",fill:"#fff"})))},Tt=function(e){var t,n,i,o,a,l=e.onClick,r=e.awemeInfo,c=(0,p.useRef)(null),s=(0,p.useState)(!1),d=(0,u.Z)(s,2),v=d[0],f=d[1],m=(0,p.useState)(!1),g=(0,u.Z)(m,2),h=g[0],_=g[1],y=(0,he.n)(),w=(0,p.useRef)(null);return(0,p.useEffect)((function(){var e;(null===(e=w.current)||void 0===e?void 0:e.clientWidth)>250&&_(!0)}),[w.current]),(0,p.useEffect)((function(){var e,t;y&&f(!(null!=y&&y.paused));var n=function(){f(!1)},i=function(){f(!0)};return null==y||null===(e=y.on)||void 0===e||e.call(y,"pause",n),null==y||null===(t=y.on)||void 0===t||t.call(y,"play",i),function(){var e,t;null==y||null===(e=y.off)||void 0===e||e.call(y,"pause",n),null==y||null===(t=y.off)||void 0===t||t.call(y,"play",i)}}),[y]),p.createElement("div",{className:B()(it),onClick:function(e){var t,n,i,o,a;null!=r&&null!==(t=r.music)&&void 0!==t&&t.mid?(null==e?void 0:e.target)===c.current&&(null==l||l(),nt.sendLog("clickMusicEntrance",{author_id:null==r||null===(n=r.authorInfo)||void 0===n?void 0:n.uid,group_id:null==r?void 0:r.awemeId,music_id:null==r||null===(i=r.music)||void 0===i?void 0:i.mid,enter_from:C.yW(),status:"on",position:"cover"})):(null==l||l(),nt.sendLog("clickMusicEntrance",{author_id:null==r||null===(o=r.authorInfo)||void 0===o?void 0:o.uid,group_id:null==r?void 0:r.awemeId,music_id:(null==r||null===(a=r.music)||void 0===a?void 0:a.mid)||"",enter_from:C.yW(),status:"on",position:"cover"}))}},p.createElement("div",{className:B()(ot,(0,F.Z)({},at,!v))},p.createElement(_t.Q,{src:null==r||null===(t=r.music)||void 0===t||null===(n=t.coverThumb)||void 0===n||null===(i=n.urlList)||void 0===i?void 0:i[0],className:lt,iconWidth:20,iconHeight:20,skeletonClass:rt,renderDefault:p.createElement("div",{className:ut},p.createElement(G.Z,{width:17,height:20,src:Pt,viewBox:"0 0 17 20",className:mt}))})),(null==r||null===(o=r.music)||void 0===o?void 0:o.mid)&&p.createElement(wt.e,{text:"",type:"left",onTipClick:function(){var e,t;null==l||l(),nt.sendLog("clickMusicEntrance",{author_id:null==r||null===(e=r.authorInfo)||void 0===e?void 0:e.uid,group_id:null==r?void 0:r.awemeId,music_id:null==r||null===(t=r.music)||void 0===t?void 0:t.mid,enter_from:C.yW(),status:"on",position:"title"})},className:dt,renderContent:p.createElement("div",{className:vt},p.createElement(G.Z,{width:12,height:14,src:It,viewBox:"0 0 12 14",className:mt}),p.createElement("p",{className:ft},p.createElement("span",{className:B()(pt,(0,F.Z)({},gt,h)),ref:w},T.n3(null==r||null===(a=r.music)||void 0===a?void 0:a.musicName,"@")))),clickHidden:!0,target:c.current},p.createElement("div",{ref:c,className:ct})),p.createElement(K.default,{className:B()(st,(0,F.Z)({},ht,!v)),data:yt,loop:!0,autoplay:!0}))},Zt=n(23947),Rt=n.n(Zt),Dt=n(38574),At=n.n(Dt),Mt=n(18556),Bt=n.n(Mt),Ft=n(40729),Ot=n(60312),Vt=n(35033),Ut=n(91874),Ht=n(9491),Wt=n(71296),zt=n(98228),qt=n(36049),Kt=n(53328),Gt=n(61912),jt=new $.hD({dislike:{eventName:"dislike",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",enter_method:"",is_full_screen:"0",tab_name:"",click_method:"",from_follow_list:"0",aweme_type:"",is_insert_wallpaper:0}},report:{eventName:"report",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",enter_method:"",is_full_screen:"0"}},creatorDataEntranceClick:{eventName:"creator_data_entrance_click",params:{}},creatorDataEntranceShow:{eventName:"creator_data_entrance_show",params:{}}}),Yt={more:"V5Rmr_ZY",moreBox:"se14DHcz",itemWrap:"FbuERyN5",disableItem:"EM7WWsTO",itemIcon:"Ejbx5dGa",itenDesc:"n0iTjXhb",ableMiniType:"IS7FyuLE",analysisIcon:"PGh2bCYe",shortcutList:"ouFbTbn7"};!function(e){e[e.Enable=0]="Enable",e[e.OutDate=1]="OutDate",e[e.Private=2]="Private"}(Nt||(Nt={}));var Qt={notInterestingIcon:!0,unfollow:!0,report:!0,shortcutList:!1,dataAnalysis:!1};function Xt(e){var t,n,i,o,a,u=e.player,c=e.awemeInfo,d=e.loginUserInfo,v=e.deleteCurrentSwiper,f=e.singleBox,g=e.setSingleBox,h=e.logInfo,_=e.isFollowClickedRef,k=e.toast,b=e.videoReportModalContainer,x=e.reportExtraParams,T=void 0===x?{}:x,Z=e.ableMiniType,M=void 0!==Z&&Z,O=e.showList,V=e.abtestData,U=e.actionUnFollow,H=(0,w.P)({delayDisappear:50,delayShow:50}),W=H.type,z=H.changeType,q=(0,p.useRef)(null),K=(0,p.useMemo)((function(){return O?(0,l.Z)((0,l.Z)({},Qt),O):Qt}),[O]),X=(0,p.useMemo)((function(){var e;return 1e3*((null==c?void 0:c.createTime)+2592e3)<m()()?Nt.OutDate:0!==(null==c||null===(e=c.status)||void 0===e?void 0:e.privateStatus)?Nt.Private:Nt.Enable}),[null==c?void 0:c.createTime,null==c||null===(t=c.status)||void 0===t?void 0:t.privateStatus]),J=(0,y.r)({selfUid:null==d||null===(n=d.info)||void 0===n?void 0:n.uid,actionUid:null==c||null===(i=c.authorInfo)||void 0===i?void 0:i.uid,defaultFollowerStatus:null==c||null===(o=c.authorInfo)||void 0===o?void 0:o.followerStatus,defaultFollowStatus:null==c||null===(a=c.authorInfo)||void 0===a?void 0:a.followStatus}).followStatus,$=(0,p.useCallback)((function(){_.current=!0,Y.V(J)&&(U(),z("",!0))}),[J,z,U]),ee=(0,p.useCallback)((0,r.Z)(s().mark((function e(){var t,n,i,o,a,r,u,d,f,m=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=m.length>0&&m[0]!==undefined?m[0]:{clickMethod:"icon"},i=n.clickMethod,null!=K&&K.notInterestingIcon){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,qt.w(null==c?void 0:c.awemeId);case 5:o=e.sent,a=o.statusCode,r=o.errMsg,u=null!==(t=L.Le.getConfig(L.gI.WallPaperIds))&&void 0!==t&&be()(t).call(t,null==c?void 0:c.awemeId)?1:0,0===a?(Ue.F.info("\u64cd\u4f5c\u6210\u529f\uff0c\u5c06\u51cf\u5c11\u6b64\u7c7b\u89c6\u9891\u51fa\u73b0"),jt.sendLog("dislike",(0,l.Z)({urlParamList:["previous_page"],enter_from:C.mo(),author_id:null==c||null===(d=c.authorInfo)||void 0===d?void 0:d.uid,group_id:null==c?void 0:c.awemeId,log_pb:null==h?void 0:h.log_pb,is_full_screen:S.r()?"1":"0",tab_name:R.getTabName()||I.Rs("tab_name")||"",click_method:i,from_follow_list:null!==(f=L.Le.getConfig(L.gI.FromFollowList))&&void 0!==f&&f.tag?"1":"0",aweme_type:null==c?void 0:c.awemeType,is_insert_wallpaper:u},T)),null==v||v()):k(r),z("",!0),u&&N.qQ(D.LocalStorageKeys.WallPaper,{disappear:!0});case 12:case"end":return e.stop()}}),e)}))),[T,c,v,k,h,z,K]),te=(0,p.useCallback)((function(){var e;jt.sendLog("report",{urlParamList:["previous_page"],enter_from:C.mo(),author_id:null==c||null===(e=c.authorInfo)||void 0===e?void 0:e.uid,group_id:null==c?void 0:c.awemeId,log_pb:null==h?void 0:h.log_pb,is_full_screen:S.r()?"1":"0"}),P.emit(P.EVENT.videoStopPlayNext);if(c.awemeType===A.ed.XgVideo)return P.emit(P.EVENT.videoPause),window.open(j.Tl({videoid:null==c?void 0:c.awemeId,param:"envoke_tipoff",value:"1"})),void(null==v||v());(0,Kt.m)({title:"\u4e3e\u62a5\u89c6\u9891",type:"video",object_id:null==c?void 0:c.awemeId,onClose:function(){P.emit(P.EVENT.videoRemoveStopPlayNext)}},b),z("")}),[c,z,h,b]),ne=p.useCallback((function(){switch(X){case Nt.OutDate:k("\u53d1\u5e03\u8d85\u8fc730\u5929\u7684\u4f5c\u54c1\u6682\u4e0d\u652f\u6301\u5206\u6790");break;case Nt.Private:k("\u79c1\u5bc6\u4f5c\u54c1\u6682\u4e0d\u652f\u6301\u5206\u6790");break;default:jt.sendLog("creatorDataEntranceClick"),window.open(j.hj(null==c?void 0:c.awemeId))}}),[null==c?void 0:c.awemeId,X,k]);(0,p.useEffect)((function(){"more"!==f&&z("",!0)}),[f]);var ie=new(Rt())([["notInterestingIcon","video-player-no-like"],["report","video-player-report"],["shortcutList","video-player-shoret-cut"]]),oe=(0,p.useMemo)((function(){var e,t,n,i,o,a=[{icon:Vt.Z,desc:"\u4e0d\u611f\u5174\u8da3",key:"notInterestingIcon",onClick:function(){return ee()},hidden:"undefined"!=typeof window&&-1!==(null===(e=window)||void 0===e||null===(t=e.location)||void 0===t||null===(n=t.pathname)||void 0===n?void 0:At()(n).call(n,"/video"))||!(null!=K&&K.notInterestingIcon)||(null==c||null===(i=c.authorInfo)||void 0===i?void 0:i.uid)===(null==d||null===(o=d.info)||void 0===o?void 0:o.uid)},{icon:Ot.Z,desc:"\u53d6\u6d88\u5173\u6ce8",key:"unfollow",onClick:$,hidden:J===Q.$u.UnFollow||!(null!=K&&K.unfollow)},{icon:Wt.Z,desc:"\u4e3e\u62a5",key:"report",onClick:te,hidden:!(null!=K&&K.report)},{icon:Ut.Z,desc:"\u6570\u636e\u5206\u6790",key:"dataAnalysis",onClick:ne,hidden:!(null!=K&&K.dataAnalysis),className:B()(Yt.analysisIcon,(0,F.Z)({},Yt.disableItem,X!==Nt.Enable))},{icon:Ht.Z,desc:"\u5feb\u6377\u952e\u5217\u8868",key:"shortcutList",onClick:function(){return(0,Gt.n)({abtestData:V,logParams:{clickMethod:"more_button"}})},hidden:!(null!=K&&K.shortcutList),className:Yt.shortcutList}];return Se()(a).call(a,(function(e){return!e.hidden}))}),[J,ee,te,$,K,c,d,X,ne]);(0,p.useEffect)((function(){var e,t,n=(null==c||null===(e=c.authorInfo)||void 0===e?void 0:e.uid)!==(null==d||null===(t=d.info)||void 0===t?void 0:t.uid)&&(null==K?void 0:K.notInterestingIcon);return n&&(null==u||u.on("onDislike",ee)),null==u||u.on("showReportModal",te),function(){n&&(null==u||u.off("onDislike",ee)),null==u||u.off("showReportModal",te)}}),[u,ee,c,K,te,d]);var ae=(0,p.useCallback)((function(){null!=K&&K.dataAnalysis&&jt.sendLog("creatorDataEntranceShow")}),[null==K?void 0:K.dataAnalysis]),le=(0,zt.x)(ae);return p.createElement("div",{className:B()(Yt.more,(0,F.Z)({},Yt.ableMiniType,M)),onMouseEnter:function(){var e,t;g("more"),z("more"),P.emit(null==E||null===(e=P)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})},onMouseLeave:function(){z("")},ref:q,"data-e2e":"video-play-more"},p.createElement(G.Z,{src:Ft.Z,viewBox:"0 0 36 36",height:36,width:36,className:Yt.svgWraper}),p.createElement("div",{ref:le,className:Yt.moreBox,style:{display:"more"!==W?"none":"flex"},onMouseEnter:function(){z("more")},onMouseLeave:function(){z("",!0)}},Bt()(oe).call(oe,(function(e){var t;return p.createElement("div",{key:e.key,className:B()(Yt.itemWrap,e.className),onClick:e.onClick,"data-e2e":null!==(t=ie.get(e.key))&&void 0!==t?t:""},p.createElement("div",{className:Yt.itemIcon},p.createElement(G.Z,{src:e.icon,height:36,width:36,viewBox:"0 0 36 36"})),p.createElement("div",{className:Yt.itenDesc},e.desc))}))))}var Jt=n(86135),$t={},en=n(80900),tn="OFZHdvpl",nn="ZfrXkYoG",on="xccodDG4",an="o1olQOk8",ln="o0jc2k3u",rn="D2CKIux7",un="zo5LeZEf",cn=function(e){var t,n,i,o,a,c,d,f,M,F,O,V,U,H,W,z,q,K,G,j,Y,Q,X,J,$,ee,te,ne,ie,re,ue,ce,se,ve,fe,me,pe,ge,_e,ye,we,Ee=e.toggleComment,be=e.awemeInfo,xe=e.loginUserInfo,Se=e.loginDispatch,Ce=e.deleteCurrentSwiper,Ie=e.fullScreenTarget,Le=e.onAvatarClick,Ne=e.abtestData,Pe=(e.isActive,e.videoToast),Te=e.videoReportModalContainer,Ze=e.moreBoxShowList,Re=e.reportExtraParams,De=void 0===Re?{}:Re,Ae=e.canShowMore,Me=void 0===Ae||Ae,Be=e.onMusicClick,Fe=e.showMusicEntry,Ve=void 0!==Fe&&Fe,Ue=e.recordPreferVideoSwitch,He=e.shortcutKeyDisable,We=e.canShowAvatarFollowBtn,ze=void 0===We||We,qe=e.canShowAvatarImBtn,Ke=void 0!==qe&&qe,Ge=e.canShowAvatar,je=void 0===Ge||Ge,Ye=e.canShowCollection,Qe=void 0===Ye||Ye,Xe=e.className,$e=e.actionFollow,et=e.actionUnFollow,nt=xe.isLogin,it=(0,p.useMemo)((function(){return(null==be?void 0:be.awemeType)===A.ed.XgVideo}),[be]),ot=(0,p.useState)(""),at=(0,u.Z)(ot,2),lt=at[0],rt=at[1],ut=(0,p.useRef)(!1),ct=(0,p.useRef)(be),st=(0,p.useRef)(null),dt=(0,p.useRef)(""),vt=(0,p.useRef)(!1),ft=(0,p.useRef)(!1),mt=(0,he.n)();(0,p.useRef)(mt).current=mt;var pt=(0,ae.N)({noDisturb:Boolean(null==Ne?void 0:Ne.noDisturb)}),gt=pt.isCanShowTip,ht=pt.updateIsCanShowTip,_t=(0,p.useState)("icon"),yt=(0,u.Z)(_t,2),wt=yt[0],kt=yt[1],Et=(0,p.useState)(!1),bt=(0,u.Z)(Et,2),xt=bt[0],St=bt[1],Ct=(0,p.useState)(!1),It=(0,u.Z)(Ct,2),Lt=It[0],Nt=It[1],Pt=(0,p.useState)(!1),Zt=(0,u.Z)(Pt,2),Rt=Zt[0],Dt=Zt[1],At=(0,p.useState)(!1),Mt=(0,u.Z)(At,2),Bt=Mt[0],Ft=Mt[1],Ot=(0,p.useState)(!1),Vt=(0,u.Z)(Ot,2),Ut=(Vt[0],Vt[1]),Ht=(0,p.useState)(!1),Wt=(0,u.Z)(Ht,2),zt=Wt[0],qt=Wt[1],Kt=(0,p.useState)(!1),Gt=(0,u.Z)(Kt,2),jt=Gt[0],Yt=Gt[1],Qt=(0,p.useState)(!1),cn=(0,u.Z)(Qt,2),sn=cn[0],dn=cn[1],vn={author_id:null==be||null===(t=be.authorInfo)||void 0===t?void 0:t.uid,group_id:null==be?void 0:be.awemeId,log_pb:null==be?void 0:be.logPb,compilation_id:null==be||null===(n=be.mixInfo)||void 0===n?void 0:n.mixId,impressionData:null==be?void 0:be.impressionData,awemeId:null==be?void 0:be.awemeId,vduration:null==be||null===(i=be.video)||void 0===i?void 0:i.duration,isH265:(null==be||null===(o=be.video)||void 0===o||null===(a=o.bitRateList)||void 0===a||null===(c=a[0])||void 0===c?void 0:c.isH265)||(null==be||null===(d=be.video)||void 0===d?void 0:d.isH265),qualityType:(null==be||null===(f=be.video)||void 0===f||null===(M=f.bitRateList)||void 0===M||null===(F=M[0])||void 0===F?void 0:F.qualityType)||(null==be||null===(O=be.video)||void 0===O?void 0:O.qualityType),bitRate:(null==be||null===(V=be.video)||void 0===V||null===(U=V.bitRateList)||void 0===U||null===(H=U[0])||void 0===H?void 0:H.bitRate)||(null==be||null===(W=be.video)||void 0===W?void 0:W.bitRate),videoFormat:null==be||null===(z=be.video)||void 0===z?void 0:z.videoFormat,gearName:(null==be||null===(q=be.video)||void 0===q||null===(K=q.bitRateList)||void 0===K||null===(G=K[0])||void 0===G?void 0:G.gearName)||""},fn=(0,oe.O)({player:mt,isActive:!0}).inImmersive,mn=((0,p.useContext)(g.v)||{}).globalCommentCount,pn=(0,y.r)({selfUid:null==xe||null===(j=xe.info)||void 0===j?void 0:j.uid,actionUid:null==be||null===(Y=be.authorInfo)||void 0===Y?void 0:Y.uid,defaultFollowerStatus:null==be||null===(Q=be.authorInfo)||void 0===Q?void 0:Q.followerStatus,defaultFollowStatus:null==be||null===(X=be.authorInfo)||void 0===X?void 0:X.followStatus}),gn=pn.followStatus,hn=pn.text;(0,p.useEffect)((function(){var e,t;En.current="",$t[null==be||null===(e=be.authorInfo)||void 0===e?void 0:e.uid]=be,(null===(t=ct.current)||void 0===t?void 0:t.awemeId)!==(null==be?void 0:be.awemeId)&&null!=be&&be.awemeId&&(ct.current=be)}),[be]);var _n=(0,w.P)({delayDisappear:50,delayShow:50}),yn=_n.type,wn=_n.changeType;(0,p.useEffect)((function(){"share_btn"!==lt&&wn("",!0)}),[lt]);var kn=Z.getShortcut({disable:He}),En=(0,p.useRef)(""),bn=(0,p.useCallback)((0,r.Z)(s().mark((function e(){var t,n,i,o,a,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(null==be?void 0:be.shareInfo)||{},i=n.shareLinkDesc,o=n.shareUrl,a=o&&v()(t="".concat(o,"&from=")).call(t,"web_code_link"),e.next=4,(0,en.R)(a);case 4:l=e.sent,En.current=i&&i.replace("%s",l);case 6:case"end":return e.stop()}}),e)}))),[null==be?void 0:be.shareInfo]),xn=(0,p.useCallback)(function(){var e=(0,r.Z)(s().mark((function e(t){var n,i,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(En.current){e.next=3;break}return e.next=3,bn();case 3:x.J(En.current,{target:S.r()&&Ie?Ie:null}),tt.sendLog("shareVideo",(0,l.Z)({urlParamList:["previous_page"],author_id:null==be||null===(n=be.authorInfo)||void 0===n?void 0:n.uid,group_id:null==be?void 0:be.awemeId,enter_from:C.mo(),log_pb:null==be?void 0:be.logPb,type:"copy_link",is_full_screen:S.r()?"1":"0",click_method:null!==(i=null==t?void 0:t.clickMethod)&&void 0!==i?i:"hot_key",tab_name:R.getTabName()||I.Rs("tab_name")||"",from_follow_list:null!==(o=L.Le.getConfig(L.gI.FromFollowList))&&void 0!==o&&o.tag?"1":"0",aweme_type:"".concat(null==be?void 0:be.awemeType),is_pure:fn?"1":"0"},De)),Pe("\u5df2\u590d\u5236\u5206\u4eab\u94fe\u63a5");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[bn,Pe,fn,be,Ie]);(0,p.useEffect)((function(){return null==mt||mt.on("showShareCode",xn),function(){null==mt||mt.off("showShareCode",xn)}}),[mt,xn]);var Sn=(0,p.useCallback)((function(e){var t={isUse:!1,expireTime:Number(m()())+2592e5,useHistory:{3:!0}},n=N.$o(D.LocalStorageKeys.ShortcutKeyTopicInfo);if(e)return n||(n=t),n.isUse=e,void N.qQ(D.LocalStorageKeys.ShortcutKeyTopicInfo,n);if(n){var i,o=((null===(i=n)||void 0===i?void 0:i.expireTime)||0)-Number(m()()),a=Math.ceil(o/864e5);if(n.isUse||!(o>0)||n.useHistory[a])return;n.useHistory[a]=!0,N.qQ(D.LocalStorageKeys.ShortcutKeyTopicInfo,n)}else N.qQ(D.LocalStorageKeys.ShortcutKeyTopicInfo,t)}),[Pe]);return(0,p.useEffect)((function(){return null==mt||mt.on("shortcutTopic",Sn),function(){null==mt||mt.off("shortcutTopic",Sn)}}),[mt,Sn]),p.createElement("div",{className:B()(tn,Xe),ref:st},je&&p.createElement(p.Fragment,null,null!=be&&null!==(J=be.authorInfo)&&void 0!==J&&null!==($=J.roomData)&&void 0!==$&&null!==(ee=$.owner)&&void 0!==ee&&ee.web_rid?p.createElement(de,{player:mt,statusText:hn,loginUserInfo:xe,awemeInfo:be,logInfo:vn,isLogin:nt,loginDispatch:Se,fullScreenTarget:Ie,isFollowClickedRef:ut,onAvatarClick:Le,shortcut:kn,reportExtraParams:De,ableMiniType:!0,isOpenKeyHotEvent:!0,isFirstLive:2===(null==be||null===(te=be.authorInfo)||void 0===te||null===(ne=te.roomData)||void 0===ne||null===(ie=ne.episode_extra)||void 0===ie||null===(re=ie.mod)||void 0===re?void 0:re.episode_stage)}):p.createElement(h.C,{type:"left",showTip:xt&&!it&&!zt&&!sn&&!jt&&gt,setShowTip:function(e){if(St(e),e){var t,n;if((null==Ne?void 0:Ne.noDisturb)===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});ht(),b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:p.createElement("div",{className:ln},p.createElement(p.Fragment,null,"\u8fdb\u5165\u4f5c\u8005\u4e3b\u9875",(null===(ue=kn.avatar)||void 0===ue?void 0:ue.key)&&p.createElement("span",{className:rn},kn.avatar.key)))},p.createElement(le,{player:mt,loginUserInfo:xe,actionFollow:$e,actionUnFollow:et,awemeInfo:be,isLogin:nt,loginDispatch:Se,fullScreenTarget:Ie,isFollowClickedRef:ut,onAvatarClick:Le,shortcut:kn,reportExtraParams:De,ableMiniType:!0,isShowTip:!0,isShowKeyHotTip:!0,followStatus:gn,noDisturb:null==Ne?void 0:Ne.noDisturb,followBtnMouseEnter:function(){qt(!0)},followBtnMouseLeave:function(){qt(!1),ht()},imBtnMouseEnter:function(){Yt(!0)},imBtnMouseLeave:function(){Yt(!1),ht()},showPendantTip:sn,setShowPendantTip:dn,showImBtn:Ke,showFollowBtn:ze}))),p.createElement(h.C,{type:"left",tipClassName:un,showTip:Lt&&gt,setShowTip:function(e){if(Nt(e),e){var t,n;if((null==Ne?void 0:Ne.noDisturb)===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});ht(),b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:p.createElement("div",{className:ln},vt.current?"\u53d6\u6d88\u70b9\u8d5e":"\u70b9\u8d5e",(null===(ce=kn.like)||void 0===ce?void 0:ce.key)&&p.createElement("span",{className:rn},null===(se=kn.like)||void 0===se?void 0:se.key))},p.createElement(Oe,{toast:Pe,awemeInfo:be,isLogin:nt,loginUserInfo:xe,loginDispatch:Se,fullScreenTarget:Ie,reportExtraParams:(0,l.Z)((0,l.Z)({},De),{},{relation:null!==(ve=null==De?void 0:De.relation)&&void 0!==ve?ve:String(gn)}),ableMiniType:!0,onLottieComplete:function(){"digg"===dt.current&&Nt(!0)},recordPreferVideoSwitch:Ue,refIsDigged:vt})),p.createElement(h.C,{type:"left",tipClassName:un,showTip:Rt&&gt,setShowTip:function(e){if(Dt(e),e){var t,n;if((null==Ne?void 0:Ne.noDisturb)===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});ht(),b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:p.createElement("div",{className:ln},"\u8bc4\u8bba",(null===(fe=kn.comment)||void 0===fe?void 0:fe.key)&&p.createElement("span",{className:rn},kn.comment.key))},p.createElement(ke,{count:T.qe(Number(mn||0)),type:"comment",toggleComment:Ee,awemeInfo:be,reportExtraParams:(0,l.Z)((0,l.Z)({},De),{},{relation:null!==(me=null==De?void 0:De.relation)&&void 0!==me?me:String(gn)}),ableMiniType:!0,onLottieComplete:function(){"comment"===dt.current&&Dt(!0)},abtestData:Ne})),Qe&&p.createElement(h.C,{type:"left",tipClassName:un,showTip:Bt&&gt,setShowTip:function(e){if(Ft(e),e){var t,n;if((null==Ne?void 0:Ne.noDisturb)===k.NoDisturbABVal.All)P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0});ht(),b.iO.replaceCurrentTask({id:b.cl.Other,priority:b.y4.HoverPriority})}else b.iO.finishTask(b.cl.Other)},hoverShow:!0,content:p.createElement("div",{className:ln},ft.current?"\u53d6\u6d88\u6536\u85cf":"\u6536\u85cf",(null===(pe=kn.collect)||void 0===pe?void 0:pe.key)&&p.createElement("span",{className:rn},null===(ge=kn.collect)||void 0===ge?void 0:ge.key))},p.createElement(Je,{awemeInfo:be,isLogin:nt,loginUserInfo:xe,loginDispatch:Se,fullScreenTarget:Ie,toast:Pe,shortcut:kn,ableMiniType:!0,reportExtraParams:(0,l.Z)((0,l.Z)({},De),{},{relation:null!==(_e=null==De?void 0:De.relation)&&void 0!==_e?_e:String(gn)}),onLottieComplete:function(){"collection"===dt.current&&Ft(!0)},refIsCollected:ft})),p.createElement("div",{className:nn,onMouseEnter:function(){var e;!1!==(null==be||null===(e=be.awemeControl)||void 0===e?void 0:e.canShare)&&(kt("icon"),rt("share_btn"),wn("share_btn"))},onMouseLeave:function(){wn("")}},p.createElement(h.C,{type:"left",tipClassName:un,showTip:!1,setShowTip:function(e){var t,n;(Ut(e),e&&(null==Ne?void 0:Ne.noDisturb)===k.NoDisturbABVal.All)&&P.emit(null==E||null===(t=P)||void 0===t||null===(n=t.EVENT)||void 0===n?void 0:n.clarityRel,{hoverSelected:!0})},hoverShow:!0,content:p.createElement("div",{className:ln},"\u5206\u4eab",(null===(ye=kn.share)||void 0===ye?void 0:ye.key)&&p.createElement("span",{className:rn},kn.share.key))},p.createElement(Jt.Z,{shortcut:kn,ableMiniType:!0,disableShare:!1===(null==be||null===(we=be.awemeControl)||void 0===we?void 0:we.canShare)})),p.createElement(_.ZP,{toast:Pe,shareShowMethod:wt,awemelogPb:null==be?void 0:be.logPb,awemeInfo:be,className:B()(on,an),isLogin:nt,fullScreenTarget:Ie,loginDispatch:Se,hidden:"share_btn"!==yn,abtestData:Ne,handleClose:function(){return wn("")},shortcutObj:kn,onMouseEnter:function(){},onMouseLeave:function(){},reportExtraParams:(0,l.Z)({is_pure:fn?"1":"0"},De)})),Me&&p.createElement(Xt,{player:mt,singleBox:lt,setSingleBox:rt,awemeInfo:be,loginUserInfo:xe,isLogin:nt,logInfo:vn,loginDispatch:Se,deleteCurrentSwiper:Ce,fullScreenTarget:Ie,isFollowClickedRef:ut,toast:Pe,videoReportModalContainer:Te,ableMiniType:!0,showList:Ze,abtestData:Ne,actionUnFollow:et,reportExtraParams:De}),Ve&&p.createElement(Tt,{awemeInfo:be,onClick:Be}))}},70298:function(e,t,n){n.d(t,{N:function(){return r}});var i=n(21528),o=n(88263),a=n(24189),l=n(24713),r=function(e){var t=e.player,n=e.isActive;return(0,i.useEffect)((function(){var e=function(){var e,t;n&&o.emit(null==a||null===(e=o)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})};return null==t||t.on(l.PAUSE,e),function(){null==t||t.off(l.PAUSE,e)}}),[t,n]),(0,i.useEffect)((function(){var e,n,i=null==t||null===(e=t.plugins)||void 0===e||null===(n=e.progress)||void 0===n?void 0:n.root,l=function(){var e,t;o.emit(null==a||null===(e=o)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})};return i&&i.addEventListener("mouseenter",l),function(){i&&i.removeEventListener("mouseenter",l)}}),[t]),null}},19616:function(e,t,n){n.d(t,{h:function(){return De}});var i,o,a=n(29588),l=n(11789),r=n(10441),u=n.n(r),c=n(18556),s=n.n(c),d=n(54882),v=n.n(d),f=n(21528),m="hGj6kBXN",p="FrPqWf3c",g="PdiOodzz",h="MXeghcLf",_="rJkNu_iK",y="XhLWAMjR",w="ejuvdEW1",k=n(59662),E=n(29972),b=n(25956),x=n(11235),S=n.n(x),C=n(47999),I=n(73404),L=n(70335),N=n.n(L),P=n(66798),T="Bj07xoIA",Z="q4JrLhPM",R="yWm90O3y",D="uQC8UHff",A="U8RNVATZ",M="iRX47Q8q",B="zRXWKKO9",F="aDCpkgmW",O="_uoKs3MB",V="QDUexymC",U="LrgYn5wq";!function(e){e[e.NORMAL=0]="NORMAL",e[e.BOTTOM=33]="BOTTOM"}(i||(i={})),function(e){e[e.LENGTH=2e3]="LENGTH"}(o||(o={}));var H,W,z="http://p3-pc-sign.douyinpic.com/tos-cn-i-tsj2vxp0zn/douyinDefault.png~tplv-tsj2vxp0zn-image.image?x-expires=1681880038&x-signature=u5JMjYkJkiopSbLgS2NC5ojHSXY%3D",q=function(e){var t=e.imageInfo,n=e.className,r=e.imgPlaceHolderClassName,c=e.isMini,d=(0,f.useState)(!0),v=(0,l.Z)(d,2),m=v[0],p=v[1],g=(0,f.useState)(!1),h=(0,l.Z)(g,2),_=h[0],y=h[1],w=(0,f.useState)(null),k=(0,l.Z)(w,2),E=k[0],b=k[1],x=(0,f.useState)(-1),L=(0,l.Z)(x,2),H=L[0],W=L[1],q=(0,f.useRef)(0),K=C.G6(),G=C.vU();q.current=(null==t?void 0:t.width)/(null==t?void 0:t.height);var j=(0,f.useCallback)((function(){E&&q.current&&(E.offsetWidth/q.current>E.offsetHeight-(c?i.NORMAL:i.BOTTOM)?p(!0):p(!1))}),[E,c]),Y=(0,f.useCallback)((function(){!_&&y(!0)}),[_]);(0,f.useEffect)((function(){var e;if(E&&j)return u()(e=I.Z).call(e,E,j),function(){I.Z.remove(E,j)}}),[E,j]),(0,f.useEffect)((function(){E&&(c?E.setAttribute("normal",""):E.removeAttribute("normal"))}),[E,c]);var Q=(0,f.useMemo)((function(){if(_)return null;var e,n;if(-1!==H)return f.createElement(f.Fragment,null,f.createElement("img",{src:null==t?void 0:t.urlList[H],className:N()((e={},(0,a.Z)(e,Z,!m),(0,a.Z)(e,R,m),(0,a.Z)(e,D,K),e),U,r),onError:Y}),f.createElement("div",{className:N()((n={},(0,a.Z)(n,M,!K),(0,a.Z)(n,F,G),(0,a.Z)(n,O,K),n))},f.createElement("img",{src:K?P:(null==t?void 0:t.urlList[H])||P}),!K&&f.createElement("div",{className:B})));var i,l,u=new Image;u.src=null==t?void 0:t.urlList[0];var c=S()((function(){var e;null==t||s()(e=t.urlList).call(e,(function(e,t){var n=new Image;n.src=e,n.onload=function(){return W(t)}}))}),o.LENGTH);return u.onload=function(){W(0),clearTimeout(c)},f.createElement(f.Fragment,null,f.createElement("img",{src:z,className:N()((i={},(0,a.Z)(i,Z,!m),(0,a.Z)(i,R,m),(0,a.Z)(i,D,K),i),U,r)}),f.createElement("div",{className:N()((l={},(0,a.Z)(l,M,!K),(0,a.Z)(l,F,G),(0,a.Z)(l,O,K),l))},f.createElement("img",{src:K?P:z}),!K&&f.createElement("div",{className:B})))}),[_,H,Y,m]);return f.createElement("div",{className:N()(n,T,A,(0,a.Z)({},V,G)),ref:b},Q)},K=n(41257),G=n(52708),j=n.n(G),Y=n(33734),Q=n(1885),X=n(47044),J=n(96879),$=n(96288),ee=n(57276),te=n.n(ee),ne=n(10282),ie=n(16612),oe=n(36210),ae=n.n(oe),le=n(70403),re=n.n(le),ue=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played transition",styleKey:"playedColor"}],ce=function(){function e(t){(0,Y.Z)(this,e),this.fragments=t.fragments||[],this.onInnerClick=t.onInnerClick,this.focusClass="inner-focus",this.style=t.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0}return(0,Q.Z)(e,[{key:"updateDuration",value:function(e){var t=this;this.duration=ae()(1e3*e);var n=0,i=this.fragments;this.fragments=s()(i).call(i,(function(e){return e.start=n,e.end=n+e.percent*t.duration,e.duration=e.percent*t.duration,n+=e.percent*t.duration,e}))}},{key:"updateProgress",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,i=this.fragments,o=t.newIndex,a=t.curIndex,l=t.millisecond;o!==a&&s()(n).call(n,(function(t,n){n<o?t[e].style.width="100%":n>o&&(t[e].style.width=0)}));var r=i[o],u=0===l?0:(l-r.start)/r.duration;n[o]&&(n[o][e].style.width=u<0?0:"".concat(100*u,"%"))}},{key:"reset",value:function(){var e=this.progressList;this.fragments;s()(e).call(e,(function(e,t){ne.Z.removeClass(e.played,"transition"),S()((function(){return ne.Z.addClass(e.played,"transition")}),100)})),this.update({played:0},this.duration)}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:undefined;if(!this.duration||ae()(1e3*t,10)!==this.duration){if(!t&&0!==t)return;this.updateDuration(t)}var n=this.playedIndex,i=this.cachedIndex;if("Undefined"!==ne.Z.typeOf(e.played)){var o,a=re()(o=this).call(o,1e3*e.played,n);this.updateProgress("played",{newIndex:a,curIndex:n,millisecond:ae()(1e3*e.played,10)}),this.playedIndex=a}if("Undefined"!==ne.Z.typeOf(e.cached)){var l,r=re()(l=this).call(l,1e3*e.cached,i);this.updateProgress("cached",{newIndex:r,curIndex:i,millisecond:ae()(1e3*e.cached,10)}),this.cachedIndex=r}}},{key:"findIndex",value:function(e,t){if(1===this.fragments.length||0===e)return 0;for(var n=t,i=0;i<this.fragments.length;i++){var o=this.fragments[i];if(n=i,e>o.start&&e<=o.end)break}return n}},{key:"findHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)if(ne.Z.hasClass(e[t],this.focusClass))return{dom:e[t],pos:e[t].getBoundingClientRect()}}},{key:"findFragment",value:function(e){var t=this.root.children;return e<0||e>=t.length?null:{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var e=this.root.children,t=0;t<e.length;t++)ne.Z.removeClass(e[t],this.focusClass)}},{key:"setHightLight",value:function(e){var t=this.root.children;if(e<t.length)return ne.Z.addClass(t[e],this.focusClass),{dom:t[e],pos:t[e].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"render",value:function(){var e,t=this,n=this.style.progressColor;(this.root=ne.Z.createDom("xg-inners","",{},"progress-list"),this.fragments)&&(this.progressList=s()(e=this.fragments).call(e,(function(e,i){var o,a=ne.Z.createDom("xg-inner","",{style:n?v()(o="background:".concat(n,"; flex: ")).call(o,e.percent):"flex: ".concat(e.percent)},"".concat(e.isFocus?"inner-focus":""," xgplayer-progress-inner picture-inner"));return a.addEventListener("click",(function(){return t.onInnerClick(i)})),t.root.appendChild(a),s()(ue).call(ue,(function(e){a.appendChild(ne.Z.createDom(e.tag,"",{style:e.styleKey?"background: ".concat(t.style[e.styleKey],"; width:0;"):"width:0;"},e.className))})),{cached:a.children[0],played:a.children[1]}})));return this.root}}]),e}(),se=function(e){(0,J.Z)(n,e);var t=(0,$.Z)(n);function n(e){var i;return(0,Y.Z)(this,n),i=t.call(this,e),(0,a.Z)((0,X.Z)(i),"onBodyClick",(function(e){e.preventDefault(),e.stopPropagation()})),(0,a.Z)((0,X.Z)(i),"onStopPropagation",(function(e){e.stopPropagation()})),(0,a.Z)((0,X.Z)(i),"onMouseDown",(function(e){var t=(0,X.Z)(i),n=t.player,o=(t.pos,t.config,t.playerConfig,ne.Z.getEventPos(e,n.zoom)),a=i.root.getBoundingClientRect(),l=a.width,r=(a.height,a.top,a.left),u=(o.clientX-r)/l;i.updatePercent(u)})),i.useable=!1,i.isProgressMoving=!1,i.__dragCallBacks=[],i._state={now:-1,direc:0,time:0},i}return(0,Q.Z)(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"beforeCreate",value:function(e){"boolean"==typeof e.player.config.progress&&(e.config.disable=!e.player.config.progress)}},{key:"createInner",value:function(){var e,t=this;this.innerList=new ce({fragments:this.config.fragments,style:this.playerConfig.commonStyle||{},onInnerClick:this.config.onInnerClick}),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),s()(e=["findHightLight","unHightLight","setHightLight","findFragment"]).call(e,(function(e){var n;t[e]=u()(n=t.innerList[e]).call(n,t.innerList)}))}},{key:"afterCreate",value:function(){this.config.disable||this.playerConfig.isLive||(this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=te()(this).call(this,"xg-outer"),this.createInner(),u()(this).call(this,"pointerdown",this.onStopPropagation),u()(this).call(this,"touchstart",this.onStopPropagation))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),ne.Z.addClass(this.root,"active")}},{key:"blur",value:function(){this.player.controls.recoverAutoHide(),ne.Z.removeClass(this.root,"active")}},{key:"updateTime",value:function(e){var t=this.player,n=this.duration;e>n?e=n:e<0&&(e=0);var i=t.plugins.time;i&&i.updateTime(e)}},{key:"updatePercent",value:function(e){e=e>1?1:e<0?0:e,this.innerList.update({played:e*this.duration},this.duration)}},{key:"destroy",value:function(){this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null,this.unbind("mousedown",this.onMouseDown),this.unbind("pointerdown",this.onStopPropagation),this.unbind("touchstart",this.onStopPropagation)}},{key:"render",value:function(){if(!this.config.disable&&!this.playerConfig.isLive){var e=this.player.controls?this.player.controls.config.mode:"";return'\n    <xg-progress class="xgplayer-progress '.concat("bottom"===e?"xgplayer-progress-bottom":"",'">\n      <xg-outer class="xgplayer-progress-outer picture">\n      </xg-outer>\n    </xg-progress>\n    ')}}}],[{key:"pluginName",get:function(){return"pictureProgress"}},{key:"defaultConfig",get:function(){return{position:ie.kd.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){}}}}]),n}(ie.ZP),de=se,ve=n(35371),fe=n(58403),me=n(94);function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pe.apply(this,arguments)}var ge,he=function(e){return f.createElement("svg",pe({width:72,height:72,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),H||(H=f.createElement("circle",{cx:36,cy:36,r:36,fill:"#363741"})),W||(W=f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.791 50.032a2.7 2.7 0 010-3.818l10.183-10.182L27.79 25.849a2.7 2.7 0 013.819-3.818L43.7 34.122a2.7 2.7 0 010 3.819L31.61 50.032a2.7 2.7 0 01-3.819 0z",fill:"#fff",fillOpacity:.8})))},_e=n(24713),ye=n(59156),we=n.n(ye),ke=n(16979),Ee=n.n(ke),be=n(61655),xe=n(74269),Se=n(66870),Ce={multiPhotoSlide:{eventName:"multi_photo_slide",params:{aweme_type:Se.ed.Note,enter_from:"",enter_method:"",author_id:"",group_id:"",pic_cnt:0,is_zoom:!1}},enterGraphicDetail:{eventName:"enter_graphic_detail",params:{enter_from:"",author_id:"",group_id:"",pic_cnt:0}},videoPlayFinish:{eventName:"video_play_finish",params:{author_id:"",group_id:"",log_pb:"",is_visible:"1",enter_from:"",compilation_id:"",previous_page:"",tab_name:"",from_follow_list:"0",is_mute:"0",is_force:"0",trending_topic:""}}},Ie=new xe.hD(Ce),Le=n(53549),Ne=n(73824),Pe=n(21144),Te=n(18653),Ze=n(86358);!function(e){e[e.singleTime=3e3]="singleTime",e[e.speed=250]="speed"}(ge||(ge={}));var Re=function(e){var t,n=e.isActive,i=e.awemeInfo,o=e.swiper,r=e.playNextFunc,u=e.ablePlayNext,c=e.logParams,d=e.arrowButtonSize,v=void 0===d?72:d,_=e.isClientMiniWin,y=(0,k.n)(),w=(0,f.useState)(!0),E=(0,l.Z)(w,2),b=E[0],x=E[1],C=(0,f.useState)([!0,!0]),I=(0,l.Z)(C,2),L=I[0],P=I[1],T=(0,f.useRef)(j()()),Z=(0,f.useRef)(0),R=(0,f.useRef)(c);R.current=c;var D=(0,f.useCallback)((function(e){var t,n=y.getPlugin("pictureProgress");null==n||null===(t=n.updatePercent)||void 0===t||t.call(n,e),Z.current=e}),[y]),A=(0,f.useCallback)((function(e){var t,n;Ie.sendLog("multiPhotoSlide",(0,K.Z)({enter_from:null===(t=R.current)||void 0===t?void 0:t.enter_from,enter_method:"click_pic",author_id:null==i||null===(n=i.authorInfo)||void 0===n?void 0:n.uid,group_id:null==i?void 0:i.awemeId,pic_cnt:i.images.length,is_zoom:Le.r()},R.current)),null==o||o.slideTo(e,0),P([0===o.activeIndex,o.activeIndex===(null==i?void 0:i.images.length)-1]),x(!1),D((e+1)/i.images.length)}),[o,D,i]),M=(0,f.useCallback)((function(e){var t,n;o.activeIndex>0&&(Ie.sendLog("multiPhotoSlide",(0,K.Z)({enter_from:null===(t=R.current)||void 0===t?void 0:t.enter_from,enter_method:"click"===(null==e?void 0:e.type)?"click_button":"keyboard",author_id:null==i||null===(n=i.authorInfo)||void 0===n?void 0:n.uid,group_id:null==i?void 0:i.awemeId,pic_cnt:i.images.length,is_zoom:Le.r()},R.current)),x(!1),D(o.activeIndex/i.images.length),o.slidePrev(),P([0===o.activeIndex,o.activeIndex===(null==i?void 0:i.images.length)-1]))}),[o,D,i]),B=(0,f.useCallback)((function(e){var t;o.activeIndex<o.slides.length-1&&(Ie.sendLog("multiPhotoSlide",(0,K.Z)({enter_from:null==c?void 0:c.enter_from,enter_method:"click"===(null==e?void 0:e.type)?"click_button":"keyboard",author_id:null==i||null===(t=i.authorInfo)||void 0===t?void 0:t.uid,group_id:null==i?void 0:i.awemeId,pic_cnt:i.images.length,is_zoom:Le.r()},R.current)),x(!1),D((o.activeIndex+2)/i.images.length),o.slideNext(),P([0===o.activeIndex,o.activeIndex===(null==i?void 0:i.images.length)-1]))}),[o,D,i]);return function(e){var t=(0,k.n)(),n=e.preClick,i=e.nextClick;(0,f.useEffect)((function(){if(t){var e={left:{keyCode:37,action:n,disable:!1,noBodyTarget:!1},right:{keyCode:39,action:i,disable:!1,noBodyTarget:!1},letterA:{keyCode:65,action:n,disable:!1,noBodyTarget:!1},letterD:{keyCode:68,action:i,disable:!1,noBodyTarget:!1}},o={left:Ee()(t,"plugins.keyboard.keyCodeMap.left"),right:Ee()(t,"plugins.keyboard.keyCodeMap.right"),letterA:Ee()(t,"plugins.keyboard.keyCodeMap.letterA"),letterD:Ee()(t,"plugins.keyboard.keyCodeMap.letterD")};return we()(t,"plugins.keyboard.keyCodeMap",(0,K.Z)((0,K.Z)({},Ee()(t,"plugins.keyboard.keyCodeMap")||{}),e)),function(){t.plugins.keyboard&&((0,be.v)({currentCodeMap:t.plugins.keyboard.keyCodeMap,additionalCodeMap:e}),we()(t,"plugins.keyboard.keyCodeMap",(0,K.Z)((0,K.Z)({},Ee()(t,"plugins.keyboard.keyCodeMap")||{}),o)))}}}),[t,n,i])}({preClick:M,nextClick:B}),(0,f.useEffect)((function(){if(y&&(null==i?void 0:i.awemeType)===Se.ed.Note){var e=y.getPlugin("AutoPlaySettingPlugin"),t=function(e){var t;e&&Ie.sendLog("enterGraphicDetail",{enter_from:null==c?void 0:c.enter_from,author_id:null==i||null===(t=i.authorInfo)||void 0===t?void 0:t.uid,group_id:null==i?void 0:i.awemeId,pic_cnt:i.images.length})};if(e)return e.playeNextWeightNum+=1,y.on(_e.FULLSCREEN_CHANGE,t),function(){e.playeNextWeightNum-=1,y.off(_e.FULLSCREEN_CHANGE,t)}}}),[i,y]),(0,f.useEffect)((function(){var e;if(y)return Z.current=0,y.registerPlugin(de,{fragments:s()(e=i.images).call(e,(function(e){return{percent:1/i.images.length}})),onInnerClick:A}),y.getPlugin(ve.Z.pluginName)&&y.unRegisterPlugin(ve.Z.pluginName,!0),y.getPlugin(fe.Z.pluginName)&&y.unRegisterPlugin(fe.Z.pluginName,!0),function(){y.getPlugin(de.pluginName)&&y.unRegisterPlugin(de.pluginName,!0),y.registerPlugin(ve.Z,{}),y.registerPlugin(fe.Z,{})}}),[y,A]),(0,f.useEffect)((function(){if(o){var e=!1,t=function(){e=!1,S()((function(){return A(o.activeIndex)}))},n=function(){x(!1),D((o.activeIndex+1)/i.images.length),!e&&o.once("touchEnd",t),e=!0};try{o.on("touchMove",n)}catch(a){}return function(){try{null==o||o.off("touchMove",n)}catch(a){}}}}),[o,D,A]),(0,f.useEffect)((function(){if(n&&y){if(b){T.current=j()()-Z.current*ge.singleTime*i.images.length;var e,t,a,l=y.getPlugin("pictureProgress");if(0===Z.current)null==l||null===(e=l.innerList)||void 0===e||e.reset();else null==l||null===(t=l.innerList)||void 0===t||null===(a=t.progressList)||void 0===a||s()(a).call(a,(function(e,t){ne.Z.addClass(null==e?void 0:e.played,"transition")}));var d=function(){var e=Math.floor((j()()-T.current)/ge.singleTime);if(o.activeIndex!==e&&S()((function(){var t;null!=o&&o.destroyed||(Ie.sendLog("multiPhotoSlide",(0,K.Z)({enter_from:null==c?void 0:c.enter_from,enter_method:"auto",author_id:null==i||null===(t=i.authorInfo)||void 0===t?void 0:t.uid,group_id:null==i?void 0:i.awemeId,pic_cnt:i.images.length,is_zoom:Le.r()},R.current)),o.slideTo(e,o.activeIndex===i.images.length-1?0:ge.speed),P([0===o.activeIndex,o.activeIndex===(null==i?void 0:i.images.length)-1]))}),o.activeIndex===i.images.length-1?0:100),(j()()-T.current)/(ge.singleTime*i.images.length)>=1){var t;D(1);var n=y.getPlugin("AutoPlaySettingPlugin");n&&null!=n&&null!==(t=n.config)&&void 0!==t&&t.nextAutoPlay&&(null==n?void 0:n.playeNextWeightNum)<=1&&u?null==r||r():S()((function(){var e;Z.current=0,T.current=j()(),null==l||null===(e=l.innerList)||void 0===e||e.reset()}),250)}else D((j()()-T.current)/(ge.singleTime*i.images.length))},v=function(){T.current=j()()-Z.current*ge.singleTime*i.images.length};return y.on(_e.TIME_UPDATE,d),y.on(_e.PLAY,v),function(){y.off(_e.TIME_UPDATE,d),y.off(_e.PLAY,v)}}var f,m,p=y.getPlugin("pictureProgress");null==p||null===(f=p.innerList)||void 0===f||null===(m=f.progressList)||void 0===m||s()(m).call(m,(function(e,t){ne.Z.removeClass(null==e?void 0:e.played,"transition")}));var g=function(){x(!0)},h=function(){y.once(_e.PLAY,g)},_=function(){y.off(_e.PLAY,g)};return y.on(_e.PAUSE,h),y.on(_e.ENDED,_),function(){var e,t;y.off(_e.PAUSE,h),y.off(_e.ENDED,_),null==p||null===(e=p.innerList)||void 0===e||null===(t=e.progressList)||void 0===t||s()(t).call(t,(function(e,t){ne.Z.addClass(null==e?void 0:e.played,"transition")}))}}Z.current=0}),[n,y,b,D,o,r,u]),(0,f.useEffect)((function(){if(o){var e=function e(){if(o.activeIndex===(null==i?void 0:i.images.length)-1){var t,n,a,l,r,u;Ie.sendLog("videoPlayFinish",(0,K.Z)({urlParamList:["enter_method","trending_topic","previous_page"],enter_from:Ne.mo(),author_id:null==i||null===(t=i.authorInfo)||void 0===t?void 0:t.uid,group_id:null==i?void 0:i.awemeId,log_pb:null==i?void 0:i.logPb,compilation_id:null==i||null===(n=i.mixInfo)||void 0===n?void 0:n.mixId,tab_name:Ze.getTabName()||Pe.Rs("tab_name")||"",is_visible:String("visible"===document.visibilityState?1:0),is_author_card_expand:null!==(a=Te.Le.getConfig("isCollapseAuthorCard"))&&void 0!==a&&a.isCollapseAuthorCard?0:1,from_follow_list:null!==(l=Te.Le.getConfig("fromFollowList"))&&void 0!==l&&l.tag?"1":"0",is_mute:null!=y&&y.muted?"1":"0",is_force:"browser"===(null===(r=Te.Le.getConfig(Te.gI.ForceMuted))||void 0===r?void 0:r.currentMuteType)?"1":"0",trending_topic:"",aweme_type:null==i?void 0:i.awemeType,pic_cnt:null==i||null===(u=i.images)||void 0===u?void 0:u.length},c));try{o.off("slideChange",e)}catch(s){}}};try{o.slideTo(0,0),P([0===o.activeIndex,o.activeIndex===(null==i?void 0:i.images.length)-1]),o.on("slideChange",e)}catch(t){}return function(){try{o.off("slideChange",e)}catch(t){}}}}),[o,i]),!_&&(null==i||null===(t=i.images)||void 0===t?void 0:t.length)>1?f.createElement(f.Fragment,null,f.createElement(me.Z,{src:he,width:v,height:v,className:N()(g,m,(0,a.Z)({},p,L[0])),viewBox:"0 0 72 72",onClick:M}),f.createElement(me.Z,{src:he,width:v,height:v,className:N()(h,m,(0,a.Z)({},p,L[1])),viewBox:"0 0 72 72",onClick:B})):f.createElement(f.Fragment,null)},De=(n(48249),function(e){var t,n=e.isActive,i=e.awemeInfo,o=e.playNextFunc,r=e.ablePlayNext,c=e.logParams,d=e.isMini,m=e.isClientMiniWin,p=e.customProps,g=(0,k.n)(),h=(0,f.useState)(null),x=(0,l.Z)(h,2),S=x[0],C=x[1],L=(0,f.useState)(i),P=(0,l.Z)(L,2),T=P[0],Z=P[1],R=p||{},D=R.arrowButtonSize,A=void 0===D?72:D,M=R.disableInactiveCursor,B=void 0!==M&&M;return(0,f.useEffect)((function(){return function(){return C(null)}}),[]),(0,f.useEffect)((function(){if(n&&S&&g){var e,t,i=function(){S.update()};return S.update(),u()(e=I.Z).call(e,null==S||null===(t=S.$el)||void 0===t?void 0:t[0],i),function(){var e;I.Z.remove(null==S||null===(e=S.$el)||void 0===e?void 0:e[0],i)}}}),[S,n,g]),(0,f.useEffect)((function(){Z(i)}),[i]),68!==(null==i?void 0:i.awemeType)?null:f.createElement(f.Fragment,null,f.createElement(E.t,{direction:"horizontal",onSwiper:C,className:N()(_,"focusPanel"),threshold:15,tabIndex:-1},null==i||null===(t=i.images)||void 0===t?void 0:s()(t).call(t,(function(e,t){var i;return f.createElement(b.o,{key:v()(i="".concat(null==e?void 0:e.uri,"_")).call(i,t),style:{height:"100%",position:"relative"}},(function(){return f.createElement(f.Fragment,null,f.createElement("button",{style:{width:"100%",height:"100%",zIndex:2,background:"transparent"},className:N()(y,(0,a.Z)({},w,!n&&B)),type:"button"}),f.createElement(q,{imageInfo:e,isMini:d}))}))}))),T===i&&n&&f.createElement(Re,{isActive:n,awemeInfo:i,swiper:S,playNextFunc:o,ablePlayNext:r,logParams:c,arrowButtonSize:A,isClientMiniWin:m}))})},68037:function(e,t,n){n.d(t,{I:function(){return p}});var i,o=n(21528),a=n(70335),l=n.n(a);function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r.apply(this,arguments)}var u,c=function(e){return o.createElement("svg",r({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=o.createElement("path",{d:"M10.065 22.592a1.928 1.928 0 010-2.728l7-7a1.928 1.928 0 012.728 0l.015.016 6.985 6.984a1.928 1.928 0 11-2.727 2.728l-5.637-5.637-5.637 5.637a1.928 1.928 0 01-2.727 0z",fill:"#0A0C20"})))};function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}var d=function(e){return o.createElement("svg",s({width:36,height:36,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),u||(u=o.createElement("path",{d:"M10.065 12.864a1.928 1.928 0 000 2.727l7 7a1.929 1.929 0 002.728 0l.015-.015 6.985-6.985a1.928 1.928 0 10-2.727-2.727L18.429 18.5l-5.637-5.637a1.928 1.928 0 00-2.727 0z",fill:"#0A0C20"})))},v=n(94),f=n(59662),m=n(97227),p=function(e){var t=e.playPrevFunc,n=e.playNextFunc,i=e.disablePrev,a=e.disableNext,r=e.className,u=e.style,s=(0,f.n)(),p=(0,o.useCallback)((function(e){var n;i||t&&s&&(null===(n=s.emit)||void 0===n||n.call(s,"playSwitchPrevBefore",!1),t())}),[s,t,i]),g=(0,o.useCallback)((function(e){var t;a||n&&s&&(null===(t=s.emit)||void 0===t||t.call(s,"playSwitchNextBefore",!1),n())}),[s,n,a]);return o.createElement("div",{className:l()("xgplayer-playswitch",r),"data-state":"normal",style:u},o.createElement("div",{className:"xgplayer-icon"},o.createElement("div",{className:"xgplayer-playswitch-tab"},o.createElement("div",{"data-e2e":"video-switch-prev-arrow",className:l()("xgplayer-playswitch-prev",{disabled:i}),onClick:function(e){m.i0(m.CK.User),p(e)}},o.createElement(v.Z,{src:c,width:36,height:36})),o.createElement("div",{"data-e2e":"video-switch-next-arrow",className:l()("xgplayer-playswitch-next",{disabled:a}),onClick:function(e){m.i0(m.CK.User),g(e)}},o.createElement(v.Z,{src:d,width:36,height:36})))))}},57425:function(e,t,n){n.d(t,{c:function(){return E}});var i=n(41257),o=n(29588),a=n(11789),l=n(10441),r=n.n(l),u=n(21528),c=n(70335),s=n.n(c),d=n(59662),v=n(30234),f=n(73404),m=n(47999),p=n(41316),g=n(24713),h="qicIW75i",_="_M5JRynA",y="L1TH4HdO",w="eWo1GKyO",k="nFM5CuoV",E=function(e){var t,n=(0,u.useState)(!1),l=(0,a.Z)(n,2),c=l[0],E=l[1],b=e.position,x=e.children,S=e.awemeInfo,C=e.style,I=void 0===C?{}:C,L=e.className,N=e.isActive,P=e.controlHeight,T=e.isClientMiniWin,Z=void 0!==T&&T,R=e.abtestData,D=(0,u.useState)(!1),A=(0,a.Z)(D,2),M=A[0],B=A[1],F=(0,u.useState)(!1),O=(0,a.Z)(F,2),V=O[0],U=O[1],H=(0,u.useState)(!1),W=(0,a.Z)(H,2),z=W[0],q=W[1],K=(0,u.useState)(!1),G=(0,a.Z)(K,2),j=G[0],Y=G[1],Q=(0,u.useState)(!1),X=(0,a.Z)(Q,2),J=X[0],$=X[1],ee=(0,u.useState)(!1),te=(0,a.Z)(ee,2),ne=te[0],ie=te[1],oe=(0,u.useState)(!1),ae=(0,a.Z)(oe,2),le=ae[0],re=ae[1],ue=(0,u.useState)(!1),ce=(0,a.Z)(ue,2),se=ce[0],de=ce[1],ve=(0,u.useState)(!1),fe=(0,a.Z)(ve,2),me=fe[0],pe=fe[1],ge=(0,d.n)(),he=(0,u.useState)({}),_e=(0,a.Z)(he,2),ye=_e[0],we=_e[1];return(0,u.useEffect)((function(){var e,t=function(e){var t,n=((null==e?void 0:e[0])||{}).contentRect,i=(null==n?void 0:n.height)||(null==ge||null===(t=ge.root)||void 0===t?void 0:t.offsetHeight),o=i-P,a=p.nl,l=a.maxHeight,r=a.miniAvatar,u=a.miniText,c=a.miniPadding,s=a.miniIocn,d=a.oldHideChangeVideo,f=a.oldHideInteractionNumber,m=a.oldMiniPadding;switch(null==R?void 0:R.interactiveAdapter){case v.InterActiveAdapter.NewAdapter:if(i>=l)we({transformOrigin:"bottom",transform:"scale(".concat(i/2/416,")"),height:"auto",bottom:"".concat(P===p.NV.default?0:P+12,"px")});else we({height:"auto",bottom:"".concat(P===p.NV.default?0:P+12,"px")});B(i<=d),ie(i<=r),re(i<=u),de(i<=c),pe(i<=s);break;case v.InterActiveAdapter.DefaultPlus:B(i<=d),$(i<=f),ie(i<=m),Y(i<=m);break;default:var g=p.gJ,h=g.hideChangeVideo,_=g.hideInteractionNumber,y=g.minPageHeight;B(o<=h),U(o<=_),q(o<=y)}};ge&&N&&!Z&&r()(e=f.Z).call(e,null==ge?void 0:ge.root,t);return function(){ge&&f.Z.remove(null==ge?void 0:ge.root,t)}}),[ge,N,Z,P]),(0,u.useEffect)((function(){if(ge)return ge.on(g.FULLSCREEN_CHANGE,E),function(){ge.off(g.FULLSCREEN_CHANGE,E)}}),[ge]),u.createElement(u.Fragment,null,"bottom"===b&&u.createElement("div",{className:s()(h,null==L?void 0:L.bottom),style:I},x),"left"===b&&u.createElement("div",{className:s()(_,null==L?void 0:L.left),style:I},x),"right"===b&&u.createElement("div",{className:s()(y,null==L?void 0:L.right,(t={},(0,o.Z)(t,w,m.vU()&&!c&&68!==(null==S?void 0:S.awemeType)),(0,o.Z)(t,"hideChangeVideo",M),(0,o.Z)(t,"hideInteractionNumber",V),(0,o.Z)(t,"minPageHeight",z),(0,o.Z)(t,"newHideInteractionNumber",J),(0,o.Z)(t,"oldMiniSpacing",j),(0,o.Z)(t,"newMiniAvatar",ne),(0,o.Z)(t,"newMiniFontSize",le),(0,o.Z)(t,"newMiniSpacing",se),(0,o.Z)(t,"newMiniIcon",me),t)),style:(0,i.Z)((0,i.Z)({},I),ye)},x),"top"===b&&u.createElement("div",{className:s()(k,null==L?void 0:L.top),style:I},x))}},58183:function(e,t,n){n.d(t,{B:function(){return P}});var i=n(41257),o=n(11789),a=n(68671),l=n(29588),r=n(18556),u=n.n(r),c=n(21528),s=n(70675),d=n(91479),v=n(94),f=n(98228),m=n(73824),p=n(92354),g="P5gEuHFN",h="KGHq4TxW",_="ZegEIkFD",y="zKIzeVet",w="tTtgp_ip",k="eICnKLMF",E="Rt2qN_yG",b="wdlYfGsQ",x=n(70335),S=n.n(x),C=n(27448),I=new(n(74269).hD)({videoAnchorShow:{eventName:"video_anchor_show",params:{group_id:"",author_id:"",enter_from:"",type:""}},videoAnchorClick:{eventName:"video_anchor_click",params:{group_id:"",author_id:"",enter_from:"",type:""}},vsVideoShow:{eventName:"vs_video_show",params:{enter_from_merge:"",enter_method:"",previous_page:"",action_type:"",is_vs:1,vs_season_id:"",vs_episode_id:"",room_id:"",vs_ep_group_id:"",vs_episode_stage:"",vs_episode_type:"",vs_episode_sub_type:"",vs_play_status:"",vs_is_portraid_content:""}}}),L=n(59662);function N(e){var t=e.onClick,n=e.targetHref,i=e.className,o=e.cardHidden,r=e.style,u=e.alinkProps,m=void 0===u?{}:u,p=e.imgSrc,x=e.description,I=e.title,L=e.onShow,N=e.type,P=void 0===N?"":N,T=e.player,Z=e.target,R=(0,f.x)((function(){return L()}));return c.createElement(s.a,(0,a.Z)({onClick:function(e){null==t||t(e),null==T||T.pause()},href:n,className:S()(g,i,(0,l.Z)({},b,o)),style:r,refEl:R},m,{target:Z}),c.createElement("div",{className:h},c.createElement(d.Q,{src:p,iconStyle:{width:"100%",height:"100%"}}),"variety"===P&&c.createElement(c.Fragment,null,c.createElement("div",{className:_},"\u6b63\u7247"),c.createElement(v.Z,{className:y,src:C.Z,width:32,height:32,viewBox:"0 0 39 39"}))),c.createElement("div",{className:w},c.createElement("div",{className:k},x),c.createElement("div",{className:E},I)))}function P(e){var t,n,a,l,r,s,d,v,f,g=e.awemeInfo,h=e.abtestData,_=e.isActive,y=(0,L.n)(),w=(0,c.useRef)(""),k=(0,c.useState)(!1),E=(0,o.Z)(k,2),b=E[0],x=E[1],S=(0,c.useCallback)((function(e){x(!e)}),[]),C=(null==g||null===(t=g.webRawData)||void 0===t?void 0:t.anchorCardInfo)||{},P=C.title,T=C.subtitle,Z=C.roomLink,R=C.link,D=(C.liveSource,C.type,C.vsContent),A={dependOnPlayer:!0,title:T,description:P,targetHref:Z,imgSrc:R,onShow:function(){return null},onClick:function(){return null},target:"_self"},M={group_id:null==g?void 0:g.awemeId,enter_from:m.yW(),type:""};switch(null==g||null===(n=g.webRawData)||void 0===n||null===(a=n.anchorCardInfo)||void 0===a?void 0:a.source){case"pc_movie_father":A.hidden=1!==(null==h?void 0:h.showMovie),A.className="",A.target="_blank",A.targetHref+="?previous_page=".concat(m.yW()),M.type="movie",A.onShow=function(){I.sendLog("videoAnchorShow",M)};break;case"variety":A.hidden=!Z||(null==D||null===(l=D.user_statistics)||void 0===l?void 0:l.watch_ratio)>.9,M=(0,i.Z)((0,i.Z)({},M),{},{type:"vs",is_vs:1,author_id:null==D||null===(r=D.owner_user_id)||void 0===r||null===(s=r.c)||void 0===s?void 0:u()(s).call(s,(function(e){return"".concat(e)})).join(""),vs_season_id:null==D?void 0:D.season_id_str,vs_episode_id:null==D?void 0:D.episode_id_str,room_id:"",vs_ep_group_id:null==D?void 0:D.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==D||null===(d=D.episode_type)||void 0===d?void 0:d.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==D||null===(v=D.episode_type)||void 0===v?void 0:v.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==D||null===(f=D.episode_type)||void 0===f?void 0:f.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""}),A.alinkProps={target:"_blank"},A.target="_blank",A.type="variety",A.onShow=function(){var e,t,n;I.sendLog("videoAnchorShow",M),I.sendLog("vsVideoShow",{enter_from_merge:m.yW(),enter_method:"video_anchor_module",previous_page:p.z("web_link"),action_type:"click",is_vs:1,vs_season_id:null==D?void 0:D.season_id_str,vs_episode_id:null==D?void 0:D.episode_id_str,room_id:"",vs_ep_group_id:null==D?void 0:D.item_id,vs_episode_stage:["unknown","live","premiere","record"][(null==D||null===(e=D.episode_type)||void 0===e?void 0:e.episode_stage)||0],vs_episode_type:["unknown","formal","special"][(null==D||null===(t=D.episode_type)||void 0===t?void 0:t.episode_type)||0],vs_episode_sub_type:["unknown","normal","latest","pilot_file"][(null==D||null===(n=D.episode_type)||void 0===n?void 0:n.episode_sub_type)||0],vs_play_status:"",vs_is_portraid_content:""})}}A.onClick=function(){I.sendLog("videoAnchorClick",M)};var B=A.imgSrc,F=A.hidden,O=void 0===F||F;return(0,c.useEffect)((function(){var e;return null==y||null===(e=y.on)||void 0===e||e.call(y,"titleIsFold",S),function(){var e;null==y||null===(e=y.off)||void 0===e||e.call(y,"titleIsFold",S)}}),[]),(0,c.useEffect)((function(){w.current=B}),[B]),c.createElement(c.Fragment,null,O||w.current!==B||!_?c.createElement(c.Fragment,null):c.createElement(N,(0,i.Z)((0,i.Z)({},A),{},{cardHidden:b,player:y})))}},86135:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(29588),o=n(21528),a=n(70335),l=n.n(a),r=n(89570),u={share:"Q79kf5XP",fit:"RuoVpjSW",iconWrap:"BwiwR0v7",disable:"KKAPHPik",ableMiniType:"h9JNjSBI"},c=n(80809);function s(e){var t,n=e.ableMiniType,a=e.disableShare,s=void 0!==a&&a,d=e.type,v=(0,o.useRef)(null),f=(0,o.useRef)(null),m=function(){var e,t,n=null===(e=f.current)||void 0===e||null===(t=e.getLottieInstance)||void 0===t?void 0:t.call(e);return{enter:function(){var e;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[0,33],!0)},leave:function(){var e;null==n||null===(e=n.playSegments)||void 0===e||e.call(n,[62,86],!0)}}};return(0,o.useEffect)((function(){if(s)return null;var e=v.current,t=function(){var e,t;null===(e=(t=m()).enter)||void 0===e||e.call(t)},n=function(){var e,t;null===(e=(t=m()).leave)||void 0===e||e.call(t)};return null==e||e.addEventListener("mouseenter",t),null==e||e.addEventListener("mouseleave",n),function(){null==e||e.removeEventListener("mouseenter",t),null==e||e.removeEventListener("mouseleave",n)}}),[]),o.createElement("div",{className:l()(u.share,u[d],(t={},(0,i.Z)(t,u.ableMiniType,n),(0,i.Z)(t,u.animation4,!0),(0,i.Z)(t,u.disable,s),t)),ref:v,"data-e2e":"video-player-share"},o.createElement("div",{className:l()(u.iconWrap,u[d])},o.createElement(r.default,{ref:f,data:c,loop:!1,autoplay:!1})))}},1250:function(e,t,n){n.d(t,{r:function(){return re}});var i=n(53778),o=n(41257),a=n(2193),l=n(11789),r=n(30562),u=n.n(r),c=n(10396),s=n.n(c),d=n(54882),v=n.n(d),f=n(63862),m=n.n(f),p=n(18556),g=n.n(p),h=n(21528),_=n(59662),y=n(61655),w=n(88263),k=n(41882),E=n(73824),b=n(48427),x=n(18653),S=n(98301),C=n(76944),I=n(86358),L=n(35486),N=n(66870),P=n(53549),T=n(2079),Z=n(31452),R=n(52940),D=function(e){return e.metaKey||e.ctrlKey||e.shiftKey},A=function(e,t){return t&&e.metaKey===s()(t).call(t,T.cQ.Meta)&&e.shiftKey===s()(t).call(t,T.cQ.Shift)&&e.ctrlKey===s()(t).call(t,T.cQ.Ctrl)},M=function(e,t){if(e){if(e.muted)return e.muted=!1,void(e.volume="up"===t?.1:0);var n="up"===t?e.volume+.1:e.volume-.1;n=Math.min(n,1),n=Math.max(n,0),e.volume=n}},B=n(69805),F=n.n(B),O=n(11235),V=n.n(O),U=n(48382),H=n(19085),W=n(41316),z=n(52181),q=new(n(74269).hD)({clickVideoSpeed:{eventName:"click_video_speed",params:{click_method:"hot_key"}}}),K=n(72559),G=function(e){return("KeyD"===e.code||"ArrowRight"===e.code)&&!1===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey},j=function(){return!(t=x.AQ(),!t||new Date(1e3*t).toDateString()!==(new Date).toDateString()||(e=U.$o(H.LocalStorageKeys.IsRatePageShow),Boolean(e)));var e,t},Y=!1,Q=function(e){var t=e.player,n=e.isActive,i=e.isLongPressOn,o=(0,h.useRef)(null),a=(0,h.useRef)(1),l=(0,h.useCallback)((function(e){!Y&&G(e)&&function(e){var t,n,i,o=K.s.getPlayersByScene(W.lT.Modal),a=K.s.getPlayersByScene(W.lT.Recommend);return(null===(t=x.Le.getConfig(x.gI.IsInLookMiniModal))||void 0===t?void 0:t.isInMiniModal)?(null===(n=F()(a))||void 0===n?void 0:n.playerId)===(null==e?void 0:e.playerId):!(o.length>0)||(null===(i=F()(o))||void 0===i?void 0:i.playerId)===(null==e?void 0:e.playerId)}(t)&&(e.preventDefault(),Y=!0,o.current=V()((function(){o.current=null,a.current=t.playbackRate,t.emit(Z.B.ChangePlayRate,{rate:2}),j()&&(z.F.info({text:"2.0x\u64ad\u653e\u4e2d",duration:1e3}),U.qQ(H.LocalStorageKeys.IsRatePageShow,!0)),q.sendLog("clickVideoSpeed")}),200))}),[t]),r=(0,h.useCallback)((function(e){if(G(e)){if(clearTimeout(o.current),o.current){if(!t)return;var n=t.currentTime,i=t.paused;t.seek(n+5,i?"pause":"play")}else t.emit(Z.B.ChangePlayRate,{rate:a.current||1});Y=!1,o.current=null}}),[t]);(0,h.useEffect)((function(){return i&&n&&document.addEventListener("keydown",l),i&&n&&document.addEventListener("keyup",r),function(){i&&document.removeEventListener("keydown",l),i&&document.removeEventListener("keyup",r)}}),[e,n,i,r,l])},X=n(61912),J="TgFPIucP",$="sUBrJFBU",ee="OX6xBOr2",te="v9fW6YMv",ne="rUEb3hkU",ie=n(93209),oe=n(59218),ae=n(9187),le=["enter_from","previous_page","tab_name"],re=function(e){var t,n=e.isActive,r=void 0!==n&&n,c=e.abtestData,d=e.isSliderVideo,f=e.isKeyWorkCancalLike,p=e.shortcutDisable,B=e.shortcutInclude,F=e.shortcutExclude,O=e.awemeInfo,V=e.shortCutFiltered,U=void 0===V?[]:V,H=e.showEnterDetail,W=void 0!==H&&H,z=(0,_.n)(),q=(O||{}).awemeId,K=(0,h.useState)(!1),G=(0,l.Z)(K,2),j=G[0],Y=G[1],re=(0,h.useState)({x:0,y:0}),ue=(0,l.Z)(re,2),ce=ue[0],se=ue[1],de=(0,h.useState)(null),ve=(0,l.Z)(de,2),fe=ve[0],me=ve[1],pe=(0,h.useRef)(null),ge=(0,ae.O)({player:z,isActive:r}).inImmersive;Q({player:z,isActive:r,isLongPressOn:(null==O?void 0:O.awemeType)!==N.ed.Note});var he=(0,h.useMemo)((function(){return C.getShortcut({disable:p,include:B,exclude:F})}),[p,B,F]),_e=(0,h.useCallback)((function(e){e.preventDefault();var t=z.root.getBoundingClientRect(),n=t.width,i=t.height;if(!pe.current||!pe.current.contains(e.target)){var o=pe.current?pe.current.clientWidth:224,a=pe.current?pe.current.clientHeight:208,l=(null==e?void 0:e.offsetX)+o>n?(null==e?void 0:e.offsetX)-o:null==e?void 0:e.offsetX,r=(null==e?void 0:e.offsetY)+a>i?(null==e?void 0:e.offsetY)-a:null==e?void 0:e.offsetY;se({x:l,y:r}),Y(!0)}}),[z,O,pe]),ye=function(e){var t;e&&null!==(t=pe.current)&&void 0!==t&&t.contains(e.target)||Y(!1)},we=(0,h.useCallback)((function(e){var t,n,i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if("feedback"===e&&w.emit(w.EVENT.showFeedback),"enterDetail"===e){var l={},r=I.getTabName();if(null!=O&&O.logParams){var c=O.logParams,d=(c.enter_from,c.previous_page,c.tab_name),v=(0,a.Z)(c,le);d&&(r=d),l[L.LOG_PASS_THROW_PARAMS]=u()(v)}var f="";switch(O.awemeType){case N.ed.Note:f=k.Wr(O.awemeId,(0,oe.stringify)((0,o.Z)((0,o.Z)({tab_name:r,previous_page:E.yW()},b.U()),l)));break;case N.ed.XgVideo:f=k.Tl({videoid:null==O?void 0:O.awemeId});break;default:var m;if(f=k.JF(O.awemeId,(0,oe.stringify)((0,o.Z)((0,o.Z)({tab_name:r,previous_page:E.yW()},b.U()),l))),s()(t=["post","like","favorite_collection"]).call(t,null===(n=O.logParams)||void 0===n?void 0:n.tab_name))f=null===(m=x.Le.getConfig(x.gI.EnterDetailUrl))||void 0===m?void 0:m[O.awemeId]}window.open(f,"_blank"),w.emit(w.EVENT.videoPause)}null==z||z.emit(e,i),Y(!1)}),[z,O]);(0,h.useEffect)((function(){if(z){var e,t=z.root.getElementsByClassName("focusPanel")[0];return null==z||null===(e=z.video)||void 0===e||e.addEventListener("contextmenu",_e),null==t||t.addEventListener("contextmenu",_e),document.addEventListener("click",ye,!0),function(){var e;null==z||null===(e=z.video)||void 0===e||e.removeEventListener("contextmenu",_e),document.removeEventListener("click",ye,!0),null==t||t.removeEventListener("contextmenu",_e)}}return null}),[z,O,_e]),(0,h.useEffect)((function(){return fe?(fe.addEventListener("contextmenu",_e),function(){fe.removeEventListener("contextmenu",_e)}):null}),[fe,_e]),(0,h.useEffect)((function(){if(z&&r){var e,t,n,i,o=!1;if("\u8fdb\u5165\u5168\u5c4f"===(null===ie.Z||void 0===ie.Z||null===(e=ie.Z.lang)||void 0===e||null===(t=e.zh)||void 0===t?void 0:t.FULLSCREEN_TIPS))ie.Z.extend({zh:{FULLSCREEN_TIPS:'\u8fdb\u5165\u5168\u5c4f<span class="shortcutKey">'.concat(null===(n=he.fullscreen)||void 0===n?void 0:n.key,"</span>"),EXITFULLSCREEN_TIPS:'\u9000\u51fa\u5168\u5c4f<span class="shortcutKey">'.concat(null===(i=he.fullscreen)||void 0===i?void 0:i.key,"</span>")}}),o=!0;return z.emit("fullscreen_change",z.fullscreen),function(){o&&ie.Z.extend({zh:{FULLSCREEN_TIPS:"\u8fdb\u5165\u5168\u5c4f",EXITFULLSCREEN_TIPS:"\u9000\u51fa\u5168\u5c4f"}}),z.emit("fullscreen_change",z.fullscreen)}}return function(){return null}}),[z,r,c,null===(t=he.fullscreen)||void 0===t?void 0:t.key]);var ke=(0,h.useMemo)((function(){var e,t,n,i,a;return[{text:"\u6e05\u5c4f",key:null===(e=he.immersivePlayer)||void 0===e?void 0:e.key,handler:function(){return we(Z.B.UpdateImmersiveSwitch,{logParams:{enter_method:"long_press"}})}},{text:"\u8bc4\u8bba",key:null===(t=he.comment)||void 0===t?void 0:t.key,handler:function(){return we("showComment")}},{text:"\u8d5e",key:null===(n=he.like)||void 0===n?void 0:n.key,handler:function(e){return we("onStar",{event:(0,o.Z)((0,o.Z)({},e),{},{offsetX:ce.x,offsetY:ce.y}),clickMethod:"mouse"})}},{text:"\u8fdb\u5165\u4f5c\u8005\u4e3b\u9875",key:null===(i=he.avatar)||void 0===i?void 0:i.key,handler:function(){return we("onAvatar")}},{text:"\u5206\u4eab",key:null===(a=he.share)||void 0===a?void 0:a.key,handler:function(){return we("showShareCode",{clickMethod:"mouse"})}}]}),[c,we,ce,he]),Ee=(0,h.useMemo)((function(){return[{text:"\u4e0d\u611f\u5174\u8da3",key:he.dislike.key,handler:function(){return we("onDislike")}},{text:"\u4e3e\u62a5",handler:function(){return we("showReportModal")}},{text:"\u610f\u89c1\u53cd\u9988",handler:function(){return we("feedback")}}]}),[we]),be=[{text:"\u8fdb\u5165\u8be6\u60c5\u9875",handler:function(){return we("enterDetail")}}],xe=(0,h.useMemo)((function(){var e;return v()(e=[]).call(e,(0,i.Z)(null!=c&&c.newShortcut?[{text:"\u5feb\u6377\u952e\u5217\u8868",key:"?",handler:function(){return(0,X.n)({abtestData:c,logParams:{clickMethod:"right_board"}})}},{text:ge?"\u53d6\u6d88\u6e05\u5c4f":"\u6e05\u5c4f",key:"J",handler:function(){return we(Z.B.UpdateImmersiveSwitch,{logParams:{enter_method:"long_press"}})}}]:[]),(0,i.Z)(null!=c&&c.newShortcut?[]:ke),(0,i.Z)(Ee),(0,i.Z)(W?be:[]))}),[c,we,Ee,ge,W,be]),Se=(0,h.useMemo)((function(){return m()(xe).call(xe,(function(e){return!s()(U).call(U,e.key)}))}),[xe,U]);return(0,h.useEffect)((function(){if(r&&z){S.z5();var e=function(e){z.isUserActive&&function(e,t){var n,i,o,a,l,r,u,c,s,d,v,f,m,p;if("INPUT"!==(null==e||null===(n=e.target)||void 0===n?void 0:n.tagName)&&"true"!==(null==e||null===(i=e.target)||void 0===i?void 0:i.contentEditable)){var g,h=t.player,_=t.shortcut,y=void 0===_?{}:_,k=t.isKeyWorkCancalLike;if("Minus"===e.code&&A(e,[T.cQ.Shift])&&(M(h,"down"),null==h||h.emit(Z.B.CustomShortCut,{action:"volumeDown"}),S.hB()),"Equal"===e.code&&A(e,[T.cQ.Shift])&&(null==h||h.emit(Z.B.CustomShortCut,{action:"volumeUp"}),M(h,"up"),S.hB()),e.code!==(null===(o=y.like)||void 0===o?void 0:o.code)||D(e)||(null==h||h.emit("shortcutTopic",!0),h.emit("onStar",{event:e,clickMethod:"hot_key",isKeyWorkCancalLike:k}),S.hB("like")),e.code!==(null===(a=y.comment)||void 0===a?void 0:a.code)||D(e)||(null==h||h.emit("shortcutTopic",!0),h.emit("showComment",{clickMethod:"hot_key"}),S.hB("comment"),"video_detail"!==E.yW()||P.r()||w.emit(w.EVENT.commentFocus)),e.code!==(null===(l=y.collect)||void 0===l?void 0:l.code)||D(e)||(null==h||h.emit("shortcutTopic",!0),h.emit("onCollect",{clickMethod:"hot_key"}),S.hB()),e.code!==(null===(r=y.share)||void 0===r?void 0:r.code)||D(e)||(h.emit("showShareCode",{clickMethod:"hot_key"}),S.hB()),e.code!==(null===(u=y.dislike)||void 0===u?void 0:u.code)||D(e)||(h.emit("onDislike",{clickMethod:"hot_key"}),S.hB()),e.code!==(null===(c=y.avatar)||void 0===c?void 0:c.code)||D(e)||(null==h||h.emit("shortcutTopic",!0),h.emit("onAvatar"),S.hB("avatar")),e.code!==(null===(s=y.follow)||void 0===s?void 0:s.code)||D(e)||(null==h||h.emit("shortcutTopic",!0),h.emit("onFollow",{clickMethod:"hot_key"}),S.hB()),e.code!==(null===(d=y.fullscreen)||void 0===d?void 0:d.code)||D(e)||(S.hB(),P.r()?(h.exitFullscreen(),h.emit("switch_fullscreen",{fullscreen:!1})):(h.getFullscreen(),h.emit("switch_fullscreen",{fullscreen:!0}))),e.code!==(null===(v=y.pageFullScreen)||void 0===v?void 0:v.code)||D(e)||null!==(f=x.Le.getConfig(x.gI.IsInModalVideo))&&void 0!==f&&f.isInModal||(S.hB(),w.emit(w.EVENT.pageFullScreen,{clickMethod:"hot_key",fullScreen:!(null!==(g=x.Le.getConfig(x.gI.IsPageFullScreen))&&void 0!==g&&g.type)})),e.code!==(null===(m=y.immersivePlayer)||void 0===m?void 0:m.code)||D(e)||(null==h||h.emit(Z.B.UpdateImmersiveSwitch,{logParams:{enter_method:"hot_key"}}),S.hB()),e.code===(null===(p=y.autoPlay)||void 0===p?void 0:p.code)&&!D(e)){var b={switchBy:R.l7.Shortcut,logParams:{enter_method:"hot_key"}};null==h||h.emit(Z.B.UpdateAutoPlaySwitch,b),S.hB()}}}(e,{player:z,shortcut:he,isSliderVideo:d,isKeyWorkCancalLike:f,abtestData:c})};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}return null}),[z,r,c,he,d,f]),(0,h.useEffect)((function(){if(z&&68!==(null==O?void 0:O.awemeType)){var e,t={letterA:{keyCode:65,action:"seekBack",disable:!1,noBodyTarget:!1},letterD:{keyCode:68,action:"seek",disable:!0,noBodyTarget:!1},right:{keyCode:39,action:"seek",disable:!0,noBodyTarget:!1}};if(null!=z&&null!==(e=z.plugins)&&void 0!==e&&e.keyboard){var n,i,a=(null==z||null===(n=z.plugins)||void 0===n||null===(i=n.keyboard)||void 0===i?void 0:i.keyCodeMap)||{};z.plugins.keyboard.keyCodeMap=(0,o.Z)((0,o.Z)({},a),t)}return function(){var e,n;null!=z&&null!==(e=z.plugins)&&void 0!==e&&e.keyboard&&((0,y.v)({currentCodeMap:z.plugins.keyboard.keyCodeMap,additionalCodeMap:t}),null!==(n=z.plugins.keyboard)&&void 0!==n&&n.keyCodeMap&&(z.plugins.keyboard.keyCodeMap.right={keyCode:39,action:"seek",disable:!1,noBodyTarget:!1}))}}return null}),[z,O]),(0,h.useEffect)((function(){ye()}),[q,r]),j?h.createElement("div",{className:J,ref:me},h.createElement("div",{className:$,style:{top:ce.y,left:ce.x},ref:pe},g()(Se).call(Se,(function(e){return h.createElement("div",{className:ee,onClick:e.handler,key:e.text},h.createElement("div",{className:te},e.text),e.key&&h.createElement("div",{className:ne},"\uff08",e.key,"\uff09"))})))):null}},40463:function(e,t,n){n.d(t,{P:function(){return g}});var i=n(41257),o=n(38574),a=n.n(o),l=n(21528),r=n(59662),u=n(97456),c=n(6749),s=n(82298),d=n(64625),v=n(19085),f=n(58214),m=n.n(f),p=n(65261),g=function(e){var t=e.isActive,n=e.awemeInfo,o=e.abtestData,f=(0,r.n)(),g=(0,l.useRef)(n||null);return(0,l.useEffect)((function(){if(f&&t){if(n&&g.current&&n!==g.current){var e,l,r,h;if((0,u.yf)({awemeInfo:n,abtestData:o}))if(a()(r=f.config.plugins).call(r,m())<0){var _;f.unRegisterPlugin(p.Z.pluginName,!0),f.reset(),f.setConfig((0,c.Td)({awemeInfo:n,abtestData:o,userselection:null===(_=d.G(v.SessionStorageKeys.manualSwitch))||void 0===_?void 0:_.gearType})),f.config.plugins.push(m()),f.play()}else{var y,w,k=(0,c.Td)({awemeInfo:n,abtestData:o,userselection:null===(y=d.G(v.SessionStorageKeys.manualSwitch))||void 0===y?void 0:y.gearType});null===(w=f.playNext)||void 0===w||w.call(f,(0,i.Z)({autoplay:!0},k))}else if(a()(h=f.config.plugins).call(h,m())>=0){var E,b;if(f.unRegisterPlugin(m().pluginName,!0),f.reset(),f.setConfig((0,c.Td)({awemeInfo:n,abtestData:o,userselection:null===(E=d.G(v.SessionStorageKeys.manualSwitch))||void 0===E?void 0:E.gearType})),(0,s.su)({awemeInfo:n,abtestData:o}))f.setConfig({mp4encryptplayer:(0,s.rR)({awemeInfo:n,abtestData:o})}),a()(b=f.config.plugins).call(b,p.Z)<0&&f.config.plugins.push(p.Z);f.play()}else{var x,S,C,I;if((0,s.su)({awemeInfo:n,abtestData:o})&&a()(x=f.config.plugins).call(x,p.Z)<0)f.reset(),f.setConfig((0,c.Td)({awemeInfo:n,abtestData:o,userselection:null===(S=d.G(v.SessionStorageKeys.manualSwitch))||void 0===S?void 0:S.gearType})),f.setConfig({mp4encryptplayer:(0,s.rR)({awemeInfo:n,abtestData:o})}),f.config.plugins.push(p.Z),f.play();else null===(C=f.playNext)||void 0===C||C.call(f,(0,i.Z)({autoplay:!0},(0,c.Td)({awemeInfo:n,abtestData:o,userselection:null===(I=d.G(v.SessionStorageKeys.manualSwitch))||void 0===I?void 0:I.gearType})))}null===(e=f.getPlugin)||void 0===e||null===(l=e.call(f,"PlayClaritySettingPlugin"))||void 0===l||l.updateConfig({awemeInfo:n})}g.current=n}}),[f,t,n,o]),null}},9469:function(e,t,n){n.d(t,{g:function(){return d}});var i=n(12544),o=n.n(i),a=n(21528),l=n(59662),r=n(48382),u=n(19085),c=n(88263),s=n(24713),d=function(e){var t=e.isActive,n=(0,l.n)();return(0,a.useEffect)((function(){if(n&&t){var e=function(e){!0!==(null==e?void 0:e.isInternalOp)&&(r.qQ(u.LocalStorageKeys.PLAYER_VOLUME,n.volume),r.qQ(u.LocalStorageKeys.PLAYER_IS_MUTE,n.muted?1:0))};new(o())((function(e,t){try{var i;null===r.$o(u.LocalStorageKeys.PLAYER_VOLUME)&&r.qQ(u.LocalStorageKeys.PLAYER_VOLUME,.6),null===r.$o(u.LocalStorageKeys.PLAYER_IS_MUTE)&&r.qQ(u.LocalStorageKeys.PLAYER_IS_MUTE,0),n.video.volume=Number(r.$o(u.LocalStorageKeys.PLAYER_VOLUME)),n.video.muted=1===r.$o(u.LocalStorageKeys.PLAYER_IS_MUTE),null===(i=n.getPlugin("volume"))||void 0===i||i.onVolumeChange(),e(0)}catch(o){n.volume=Number(r.$o(u.LocalStorageKeys.PLAYER_VOLUME)),n.muted=1===r.$o(u.LocalStorageKeys.PLAYER_IS_MUTE),t(o)}})).then((function(){null==n||n.on(s.VOLUME_CHANGE,e)})).catch((function(e){}));var i=c.listen(c.EVENT.syncInteraction,(function(){null!=n&&n.video&&(n.video.volume=Number(r.$o(u.LocalStorageKeys.PLAYER_VOLUME)),n.video.muted=1===r.$o(u.LocalStorageKeys.PLAYER_IS_MUTE))}));return function(){null==n||n.off(s.VOLUME_CHANGE,e),i()}}}),[n,t]),null}},40939:function(e,t,n){n.d(t,{k:function(){return l}});var i=n(21528),o=n(59662),a=n(31452),l=function(e){var t=e.isActive,n=e.onVolumeShortCutChange,l=(0,o.n)();return(0,i.useEffect)((function(){var e,i=function(e){n(e)};t&&l&&(null===(e=l.on)||void 0===e||e.call(l,a.B.CustomShortCut,i));return function(){var e;null==l||null===(e=l.off)||void 0===e||e.call(l,a.B.CustomShortCut,i)}}),[l,t,n]),null}},52940:function(e,t,n){n.d(t,{kL:function(){return B},l7:function(){return i}});var i,o=n(53778),a=n(41257),l=n(33734),r=n(1885),u=n(47044),c=n(96879),s=n(96288),d=n(29588),v=n(54882),f=n.n(v),m=n(90400),p=n.n(m),g=n(98713),h=n.n(g),_=n(19785),y=n(21528),w=n(77060),k=n(70335),E=n.n(k),b=n(16612),x=n(59662),S=n(24189),C=n(88263),I=n(48382),L=n(73824),N=n(97227),P=n(19085),T=n(96095),Z=n(31452);function R(e){var t=e.isOn;return y.createElement("div",{className:E()("xgTips")},t&&y.createElement("span",null,"\u5173\u95ed\u81ea\u52a8\u8fde\u64ad"),!t&&y.createElement("span",null,"\u81ea\u52a8\u8fde\u64ad"),y.createElement("span",{className:"shortcutKey"},"K"))}function D(e){var t=e.autoplay,n=e.xgSwitch,i=e.isShowAfterTitle,o=e.shortcutDisabled;return y.createElement("div",{className:"xgplayer-icon",onClick:n,onMouseEnter:function(){var e,t;C.emit(null==S||null===(e=C)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})},"data-e2e":"video-player-auto-play","data-e2e-state":t?"video-player-auto-playing":"video-player-no-auto-play"},y.createElement("div",{className:"xgplayer-setting-label"},!i&&y.createElement("span",{className:"xgplayer-setting-title"},"\u81ea\u52a8\u8fde\u64ad"),y.createElement("button",{"aria-checked":"true",className:E()("xg-switch",{"xg-switch-checked":t}),"aria-labelledby":"xg-switch-pip",type:"button"},y.createElement("span",{className:"xg-switch-inner"})),i&&y.createElement("span",{className:"xgplayer-setting-title"},"\u8fde\u64ad")),!o&&y.createElement(R,{isOn:t}))}function A(){var e=I.$o(P.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY);return null!=e?e:0}!function(e){e[e.Shortcut=0]="Shortcut"}(i||(i={}));var M=function(e){(0,c.Z)(n,e);var t=(0,s.Z)(n);function n(){var e,r;(0,l.Z)(this,n);for(var c=arguments.length,s=new Array(c),v=0;v<c;v++)s[v]=arguments[v];return r=t.call.apply(t,f()(e=[this]).call(e,s)),(0,d.Z)((0,u.Z)(r),"switchAutoPlay",(function(e){var t,n=null!==(t=null==e?void 0:e.isOn)&&void 0!==t?t:!r.config.nextAutoPlay;r.config.nextAutoPlay!==n&&r.autoPlayChangeLogic((0,a.Z)((0,a.Z)({},e),{},{isOn:n}))})),(0,d.Z)((0,u.Z)(r),"updateIsAutoPlay",(function(){r.autoPlayChangeLogic({isOn:Boolean(Number(A())),logParams:{},isInnerReset:!0,switchBy:undefined})})),(0,d.Z)((0,u.Z)(r),"autoPlayChangeLogic",(function(e){var t=e.isOn,n=e.logParams,a=e.isInnerReset,l=e.switchBy;if((!r.config.shortcutDisabled||l!==i.Shortcut)&&r.config.nextAutoPlay!==t){var u;r.config.nextAutoPlay=t,I.qQ(P.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,t?"1":"0"),r.renderRoot();var c={isOn:Boolean(t),logParams:n,isInnerReset:a};r.player.emit(Z.B.AutoPlaySwitchChange,c),p()(u=(0,o.Z)(r.root.getElementsByTagName("button"))).call(u,(function(e){return e.blur()}))}})),(0,d.Z)((0,u.Z)(r),"onXgChange",(function(){var e=r.config.logInfo,t=e.author_id,n=e.group_id,i=e.log_pb,o=e.extraParams;I.qQ(P.LocalStorageKeys.PLAYER_NEXT_AUTOPLAY,r.config.nextAutoPlay?"0":"1"),r.autoPlayChangeLogic({isOn:!r.config.nextAutoPlay,logParams:(0,a.Z)({enter_method:"click_bar",urlParamList:["previous_page"],author_id:t,group_id:n,log_pb:i,enter_from:L.yW(),status:r.config.nextAutoPlay?"off":"on"},o),isInnerReset:!1,switchBy:undefined})})),r}return(0,r.Z)(n,[{key:"afterCreate",value:function(){var e,t;this.config.disable||(this.renderRoot(),null===(e=this.player)||void 0===e||e.on("updateIsAutoPlay",this.updateIsAutoPlay),null===(t=this.player)||void 0===t||t.on(Z.B.UpdateAutoPlaySwitch,this.switchAutoPlay))}},{key:"destroy",value:function(){var e,t;w.unmountComponentAtNode(this.root),null===(e=this.player)||void 0===e||e.off("updateIsAutoPlay",this.updateIsAutoPlay),null===(t=this.player)||void 0===t||t.off(Z.B.UpdateAutoPlaySwitch,this.switchAutoPlay)}},{key:"renderRoot",value:function(){var e=Boolean(this.config.nextAutoPlay),t=this.onXgChange;w.hydrate(y.createElement(D,{autoplay:e,xgSwitch:t,shortcutDisabled:this.config.shortcutDisabled,isShowAfterTitle:this.config.isShowAfterTitle}),this.root)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-autoplay-setting automatic-continuous" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"AutoPlaySettingPlugin"}},{key:"defaultConfig",get:function(){return{position:_.POSITIONS.CONTROLS_RIGHT,index:9,className:"xgplayer-autoplay-setting"}}}]),n}(b.ZP),B=function(e){var t=e.isActive,n=e.awemeInfo,i=e.playNextFunc,o=e.ablePlayNext,a=e.isShowAfterTitle,l=e.shortcutDisabled,r=(0,x.n)(),u=(0,y.useMemo)((function(){return n}),[n]),c=(0,y.useCallback)((function(){var e,t=r.getPlugin("AutoPlaySettingPlugin");if(null!=t&&t.disable&&n.awemeId===T.X)return t.disable=!1,void C.emit(C.EVENT.changeLoginGuideStatus,"ShowLoginPanel");i&&null!=t&&null!==(e=t.config)&&void 0!==e&&e.nextAutoPlay&&0===(null==t?void 0:t.playeNextWeightNum)&&o?(N.i0(N.CK.Auto),null==i||i(undefined,{from:"auto"})):r.replay()}),[i,r,o]);return(0,y.useEffect)((function(){if(r&&u&&t){var e,n;if(r.registerPlugin(M,{nextAutoPlay:Number(A()),logInfo:u,isShowAfterTitle:a,shortcutDisabled:l}),r.getPlugin("AutoPlaySettingPlugin")){var i=r.getPlugin("AutoPlaySettingPlugin");h()(i.playeNextWeightNum)||(i.playeNextWeightNum=0),e=C.listen(C.EVENT.videoStopPlayNext,(function(){h()(i.playeNextWeightNum)?i.playeNextWeightNum+=1:i.playeNextWeightNum=1})),n=C.listen(C.EVENT.videoRemoveStopPlayNext,(function(){h()(i.playeNextWeightNum)&&i.playeNextWeightNum>0?i.playeNextWeightNum-=1:i.playeNextWeightNum=0}))}return function(){var t,i;r.getPlugin("AutoPlaySettingPlugin")&&r.unRegisterPlugin("AutoPlaySettingPlugin"),null===(t=e)||void 0===t||t(),null===(i=n)||void 0===i||i()}}}),[r,u,t,a]),(0,y.useEffect)((function(){if(r&&t){var e=r.getPlugin("AutoPlaySettingPlugin");null==e||e.updateIsAutoPlay();var n=C.listen(C.EVENT.syncInteraction,null==e?void 0:e.updateIsAutoPlay);return function(){n()}}}),[r,t]),(0,y.useEffect)((function(){if(r&&t&&c)return r.on("ended",c),function(){r.off("ended",c)}}),[r,t,c]),null}},50984:function(e,t,n){n.d(t,{SD:function(){return Z},m4:function(){return L}});var i=n(53778),o=n(33734),a=n(1885),l=n(47044),r=n(96879),u=n(96288),c=n(29588),s=n(54882),d=n.n(s),v=n(90400),f=n.n(v),m=n(21528),p=n(19785),g=n(77060),h=n(70335),_=n.n(h),y=n(16612),w=n(59662),k=n(85248),E=n(24189),b=n(88263),x=n(31452),S="immersive-player-switch-on",C="immersive-player-switch-on-hide-interaction",I="immersive-player-switch-on-hide-video-info",L="immersive-player-switch-on-hide-interaction-area";function N(e){var t=e.isOn;return m.createElement("div",{className:_()("xgTips")},t&&m.createElement("span",null,"\u53d6\u6d88\u6e05\u5c4f"),!t&&m.createElement("span",null,"\u6e05\u5c4f"),m.createElement("span",{className:"shortcutKey"},"J"))}function P(e){var t=e.isOn,n=e.onSwitch,i=e.isShowAfterTitle;return m.createElement("div",{className:"xgplayer-icon",onClick:n,onMouseEnter:function(){var e,t;b.emit(null==E||null===(e=b)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0})}},m.createElement("div",{className:"xgplayer-setting-label"},!i&&m.createElement("span",{className:"xgplayer-setting-title"},"\u6e05\u5c4f"),m.createElement("button",{"aria-checked":"true",className:_()("xg-switch",{"xg-switch-checked":t}),"aria-labelledby":"xg-switch-pip",type:"button"},m.createElement("span",{className:"xg-switch-inner"})),i&&m.createElement("span",{className:"xgplayer-setting-title"},"\u6e05\u5c4f")),m.createElement(N,{isOn:t}))}var T=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,a;(0,o.Z)(this,n);for(var r=arguments.length,u=new Array(r),s=0;s<r;s++)u[s]=arguments[s];return a=t.call.apply(t,d()(e=[this]).call(e,u)),(0,c.Z)((0,l.Z)(a),"updateImmersiveSwitch",(function(e){var t,n,o=null!==(t=null==e?void 0:e.isOn)&&void 0!==t?t:!a.config.isOn,l=null!==(n=null==e?void 0:e.logParams)&&void 0!==n?n:{};if(a.config.isOn!==o){var r,u;a.config.isOn=o,a.updateTargetsVisiblity();var c={isOn:o,logParams:l,isInnerReset:e.isInnerReset};null===(r=a.player)||void 0===r||r.emit(x.B.ImmersiveSwitchChange,c),a.renderRoot(),f()(u=(0,i.Z)(a.root.getElementsByTagName("button"))).call(u,(function(e){return e.blur()}))}})),a}return(0,a.Z)(n,[{key:"afterCreate",value:function(){var e;this.config.disable||(this.renderRoot(),this.updateTargetsVisiblity(),null===(e=this.player)||void 0===e||e.on(x.B.UpdateImmersiveSwitch,this.updateImmersiveSwitch))}},{key:"destroy",value:function(){var e;g.unmountComponentAtNode(this.root),null===(e=this.player)||void 0===e||e.off(x.B.UpdateImmersiveSwitch,this.updateImmersiveSwitch)}},{key:"shouldHideInteraction",value:function(){return!1}},{key:"hideTargets",value:function(){this.player.addClass(S),this.player.addClass(I),this.shouldHideInteraction()&&this.player.addClass(C)}},{key:"showTargets",value:function(){this.player.removeClass(S),this.player.removeClass(I),this.player.removeClass(C)}},{key:"updateTargetsVisiblity",value:function(){this.config.isOn&&this.hideTargets(),!this.config.isOn&&this.showTargets()}},{key:"renderRoot",value:function(){var e=this;g.hydrate(m.createElement(P,{isOn:Boolean(this.config.isOn),onSwitch:function(){return e.updateImmersiveSwitch({isOn:!e.config.isOn,logParams:{enter_method:"click_bar"}})},isShowAfterTitle:this.config.isShowAfterTitle}),this.root)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-immersive-switch-setting immersive-switch" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"ImmersiveSwitchSettingPlugin"}},{key:"defaultConfig",get:function(){return{position:p.POSITIONS.CONTROLS_RIGHT,index:8,className:"xgplayer-immersive-switch-setting"}}}]),n}(y.ZP),Z=function(e){var t=e.isActive,n=e.awemeInfo,i=e.abtestData,o=e.isShowAfterTitle,a=(0,k.Z)(null==n?void 0:n.awemeId),l=(0,w.n)();return(0,m.useEffect)((function(){if(l&&t)return l.registerPlugin(T,{isOn:!1,abtestData:i,isShowAfterTitle:o}),function(){return l.getPlugin(T.pluginName)&&l.unRegisterPlugin(T.pluginName)}}),[l,t,i]),(0,m.useEffect)((function(){if(l&&t&&(null==n?void 0:n.awemeId)!==a){var e=l.getPlugin(T.pluginName);null==e||e.updateImmersiveSwitch({isOn:!1,isInnerReset:!0})}}),[l,t,null==n?void 0:n.awemeId,a]),null}},76797:function(e,t,n){n.d(t,{W:function(){return O}});var i=n(41257),o=n(33734),a=n(1885),l=n(47044),r=n(96879),u=n(96288),c=n(29588),s=n(18556),d=n.n(s),v=n(54882),f=n.n(v),m=n(11235),p=n.n(m),g=n(10441),h=n.n(g),_=n(63862),y=n.n(_),w=n(19785),k=n(16612),E=n(21528),b=n(77060),x=n(70335),S=n.n(x),C=n(7766),I=n.n(C),L=n(59662),N=new(n(74269).hD)({clickVideoSpeed:{eventName:"click_video_speed",params:{author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",speed:""}}}),P=n(24189),T=n(88263),Z=n(64625),R=n(73824),D=n(19085),A=n(31452),M=["0.75","1.0","1.25","1.5","2.0"];function B(e){var t=e.playbackRate,n=e.xgCase,i=e.hasSelect;return E.createElement(E.Fragment,null,E.createElement("div",{className:"xgplayer-setting-playbackRatio"},n.getIconText(t,i)),E.createElement("div",{className:"xgplayer-slider xgplayer-box-douyin "},E.createElement("div",{className:"xgplayer-setting-content"},E.createElement("div",{className:"xgplayer-playratio-wrap"},d()(M).call(M,(function(e){return E.createElement("div",{className:S()({select:Number(t)===Number(e)},"xgplayer-playratio-item"),onClick:function(){n.onPlayratioClick(e)},key:e},e,"x")}))))))}var F=function(e){(0,r.Z)(n,e);var t=(0,u.Z)(n);function n(){var e,i;(0,o.Z)(this,n);for(var a=arguments.length,r=new Array(a),u=0;u<a;u++)r[u]=arguments[u];return i=t.call.apply(t,f()(e=[this]).call(e,r)),(0,c.Z)((0,l.Z)(i),"onMouseleave",(function(){i.timeoutId||(i.timeoutId=p()((function(){w.Util.removeClass(i.root,"slide-show")}),50))})),(0,c.Z)((0,l.Z)(i),"onMouseenter",(function(){var e,t;T.emit(null==P||null===(e=T)||void 0===e||null===(t=e.EVENT)||void 0===t?void 0:t.clarityRel,{hoverSelected:!0}),i.timeoutId&&(clearTimeout(i.timeoutId),i.timeoutId=null),w.Util.addClass(i.root,"slide-show"),i.player.emit("playRatioPanelShow",i.player.playbackRate)})),i}return(0,a.Z)(n,[{key:"afterCreate",value:function(){var e=this;this.config.disable||(h()(this).call(this,"mouseenter",this.onMouseenter),h()(this).call(this,["blur","mouseleave"],this.onMouseleave),this.player.on("updatePlayBackRatio",(function(){e.updatePlayBackRatio()})),this.updatePlayBackRatio())}},{key:"updatePlayBackRatio",value:function(){var e,t=Z.G(D.SessionStorageKeys.PlayerPlaybackratio)||1;null==this||null===(e=this.onPlayRatioChange)||void 0===e||e.call(this,t)}},{key:"onPlayratioClick",value:function(e){var t,n;if(Number(e)===Number(this.player.playbackRate))return!1;null===(t=(n=this.config).onRatioClick)||void 0===t||t.call(n,e),this.onPlayRatioChange(e)}},{key:"onPlayRatioChange",value:function(e){var t,n;this.player&&(this.player.config.defaultPlaybackRate=Number(e),this.player.playbackRate=Number(e)),null!==(t=this.player)&&void 0!==t&&null!==(n=t.video)&&void 0!==n&&n.defaultPlaybackRate&&(this.player.video.defaultPlaybackRate=Number(e)),this.config.playBackRatio=Number(e),this.renderRoot(),w.Util.removeClass(this.root,"slide-show")}},{key:"getIconText",value:function(e,t){if(!t)return"\u500d\u901f";var n=y()(M).call(M,(function(t){return Number(t)===Number(e)}))||"1.0";return"".concat(n,"x")}},{key:"destroy",value:function(){this.player.playbackRate=1,this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),b.unmountComponentAtNode(this.root)}},{key:"renderRoot",value:function(){var e,t=this.config.playBackRatio||1,n=((null===(e=this.player)||void 0===e?void 0:e.config)||{}).playerPermanentlyShowInfo;this.root&&b.render(E.createElement(B,{hasSelect:null!==Z.G(D.SessionStorageKeys.PlayerPlaybackratio),playbackRate:t,playerPermanentlyShowInfo:n,onMouseEnter:this.onMouseenter,onMouseLeave:this.onMouseleave,xgCase:this}),this.root)}},{key:"render",value:function(){return'\n    <xg-icon class="xgplayer-playback-setting" data-state="normal">\n    </xg-icon>'}}],[{key:"pluginName",get:function(){return"PlayBackSettingPlugin"}},{key:"defaultConfig",get:function(){return{position:w.POSITIONS.CONTROLS_RIGHT,index:6,className:"xgplayer-playback-setting"}}}]),n}(k.ZP),O=function(e){var t=e.awemeInfo,n=e.logParams,o=e.isActive,a=(0,L.n)(),l=(0,E.useRef)(null);return l.current=(0,E.useCallback)((function(e){var o;N.sendLog("clickVideoSpeed",(0,i.Z)({urlParamList:["previous_page"],author_id:null==t||null===(o=t.authorInfo)||void 0===o?void 0:o.uid,group_id:null==t?void 0:t.awemeId,log_pb:null==t?void 0:t.logPb,enter_from:R.yW(),speed:e},n)),Z.t_(D.SessionStorageKeys.PlayerPlaybackratio,Number(e))}),[n,t]),(0,E.useEffect)((function(){if(a&&68!==(null==t?void 0:t.awemeType))return a.registerPlugin(F,{onRatioClick:function(){l.current.apply(l,arguments)}}),function(){a.getPlugin("PlayBackSettingPlugin")&&a.unRegisterPlugin("PlayBackSettingPlugin")}}),[a,t]),(0,E.useEffect)((function(){if(a&&o){var e=a.getPlugin("PlayBackSettingPlugin");e&&(null==e||e.updatePlayBackRatio());var t=T.listen(T.EVENT.syncInteraction,(function(){e&&(null==e||e.updatePlayBackRatio())}));return function(){t()}}}),[o,a]),function(e,t,n){E.useEffect((function(){return n&&e?(null==e||e.on(t,n),function(){null==e||e.off(t,n)}):I()}),[n,t,e])}(a,A.B.ChangePlayRate,(function(e){var t=e.rate;if(a&&o){var n=a.getPlugin("PlayBackSettingPlugin");n&&(null==n||n.onPlayratioClick(t))}})),null}},62814:function(e,t,n){n.d(t,{I:function(){return c}});var i=n(38373),o=n.n(i),a=n(73824),l=n(21528),r=n(59662),u=new(n(74269).hD)({clickVideoDetail:{eventName:"progress_preview",params:{enter_from:"",enter_method:""}}});n.e(8745).then(n.bind(n,98745));var c=function(e){var t=(0,r.n)(),n=e.isActive,i=e.awemeInfo;return(0,l.useEffect)((function(){var e,l;if(t&&i&&n&&null!=i&&null!==(e=i.video)&&void 0!==e&&null!==(l=e.bigThumbs)&&void 0!==l&&l[0]){var r,c,s,d,v,f=(null==i||null===(r=i.video)||void 0===r||null===(c=r.bigThumbs)||void 0===c?void 0:c[0])||{},m=f.img_url,p=f.img_num,g=f.img_x_len,h=f.img_y_len,_=f.img_y_size,y=f.img_x_size,w=y/_;null==t||t.setConfig({thumbnail:{urls:[m],pic_num:p,row:h,col:g,height:_,width:y},progresspreview:{width:w<1?90:90*w,height:w<1?90/w:90}}),null==t||null===(s=t.plugins)||void 0===s||null===(d=s.progresspreview)||void 0===d||null===(v=d.enable)||void 0===v||v.call(d);var k=t.getPlugin("progress"),E=o()((function(){u.sendLog("clickVideoDetail",{enter_from:a.vM(),enter_method:"hover"})}),500),b=function(){u.sendLog("clickVideoDetail",{enter_from:a.vM(),enter_method:"click"})};return null==k||k.addCallBack("dragmove",E),null==k||k.addCallBack("click",b),function(){var e,n,i;null==t||null===(e=t.plugins)||void 0===e||null===(n=e.progresspreview)||void 0===n||null===(i=n.disable)||void 0===i||i.call(n),null==k||k.removeCallBack("dragmove",E),null==k||k.removeCallBack("click",b)}}}),[t,n,i]),null}},98946:function(e,t,n){n.d(t,{_:function(){return Ze}});var i,o,a=n(29588),l=n(41257),r=n(11789),u=n(38373),c=n.n(u),s=n(10396),d=n.n(s),v=n(11235),f=n.n(v),m=n(36210),p=n.n(m),g=n(63862),h=n.n(g),_=n(24514),y=n.n(_),w=n(54882),k=n.n(w),E=n(21528),b=n(70335),x=n.n(b),S=n(98228),C=n(42457),I=n(21972),L=n(18653),N=n(73824),P=n(89086),T=n(53549),Z=n(59013),R=n(88263),D=n(41882),A=n(47999),M=n(66870),B=n(89756),F=n(95151),O=n(70134),V=n(23947),U=n.n(V),H=n(18556),W=n.n(H),z=n(94),q=n(74269),K=new q.hD({compilationEntranceShow:{eventName:"compilation_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:""}},hotEntranceShow:{eventName:"hot_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0}},compilationEntranceClick:{eventName:"compilation_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",compilation_id:""}},hotEntranceClick:{eventName:"hot_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:"",trending_topic:"",first_tag_name:"",top:0}},moreVideoEntranceShow:{eventName:"more_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:""}},moreVideoEntranceClick:{eventName:"more_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:""}},trendingWordsShow:{eventName:"trending_words_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0}},trendingWordsClick:{eventName:"trending_words_click",params:{words_source:"related_search_anchor_v2",enter_from:"",words_content:"",enter_group_id:"",words_position:0}},relatedVideoEntranceShow:{eventName:"related_video_entrance_show",params:{enter_from:"recommend",group_id:"",author_id:""}},relatedVideoEntranceClick:{eventName:"related_video_entrance_click",params:{enter_from:"recommend",group_id:"",author_id:""}}}),G="s0w6Jo4w",j="Xg7imLcG",Y="_7tt1bXNG",Q="s8RCBVFF",X="VzED0RH9",J="PeKH830H",$="L68G58YI",ee="QrWUQ_MF";function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},te.apply(this,arguments)}var ne,ie,oe,ae=function(e){return E.createElement("svg",te({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),i||(i=E.createElement("g",{clipPath:"url(#mix_svg__clip0_27954_219993)",fill:"#fff"},E.createElement("path",{d:"M.678 3.845a.778.778 0 010-1.367L4.662.22a1.707 1.707 0 011.676 0l3.984 2.258a.778.778 0 010 1.367L6.338 6.103a1.707 1.707 0 01-1.676 0L.678 3.845z"}),E.createElement("path",{d:"M.076 5.273a.562.562 0 01.753-.188l4.112 2.331c.345.195.773.195 1.118 0l4.112-2.33a.562.562 0 01.753.187.518.518 0 01-.195.724l-4.112 2.33c-.69.39-1.545.39-2.234 0L.27 5.997a.518.518 0 01-.195-.724z"}),E.createElement("path",{d:"M.83 7.465a.562.562 0 00-.754.187.518.518 0 00.195.724l4.112 2.331c.69.39 1.545.39 2.234 0l4.112-2.33a.518.518 0 00.195-.725.562.562 0 00-.753-.187l-4.112 2.33a1.138 1.138 0 01-1.118 0L.83 7.466z"}))),o||(o=E.createElement("defs",null,E.createElement("clipPath",{id:"mix_svg__clip0_27954_219993"},E.createElement("path",{fill:"#fff",d:"M0 0h12v12H0z"})))))};function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},le.apply(this,arguments)}var re,ue=function(e){return E.createElement("svg",le({width:10,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),E.createElement("mask",{id:"hot_svg__a",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:-2,width:10,height:14},ne||(ne=E.createElement("path",{d:"M.5-1.05h9.208v8.234A4.516 4.516 0 015.192 11.7 4.692 4.692 0 01.5 7.008V-1.05z",fill:"#C4C4C4"}))),ie||(ie=E.createElement("g",{mask:"url(#hot_svg__a)"},E.createElement("path",{d:"M8.393 3.553c.961 1.063 1.315 2.125 1.315 3.188 0 1.416-.067 1.796 0 1.77-1.858.738-5.122-.93-6.02-3.187-.899-2.257.38-4.25 2.353-5.312.078-.042.126.027.126.132 0 1.638 1.265 2.347 2.226 3.41z",fill:"url(#hot_svg__paint0_linear_23665_194053)"}),E.createElement("path",{d:"M9.545 8.872c.191-.348.557 1.057.164-1.226.354-1.967-1.142-2.745-2.125-2.322-1.645.709-2.48.709-3.542.355-.69-.23-1.638-.709-1.934-1.771-.329 1.416.66 4.065 2.157 4.964 1.497.899 5.09.348 5.28 0z",fill:"url(#hot_svg__paint1_linear_23665_194053)"}),E.createElement("path",{d:"M1.775 3.339C1.534 3.58.5 4.826.5 6.816c0 1.99 1.063 4.884 4.604 4.884 3.542 0 4.931-1.406 5.313-3.255-3.188 1.77-5.656 0-6.021-.354-.9-.872-2.125-2.412-2.338-4.604-.029-.302-.042-.39-.283-.148z",fill:"url(#hot_svg__paint2_linear_23665_194053)"}))),oe||(oe=E.createElement("defs",null,E.createElement("linearGradient",{id:"hot_svg__paint0_linear_23665_194053",x1:3.536,y1:.28,x2:7.934,y2:6.743,gradientUnits:"userSpaceOnUse"},E.createElement("stop",{offset:.021,stopColor:"#FADF32"}),E.createElement("stop",{offset:.451,stopColor:"#EB9B46"}),E.createElement("stop",{offset:.782,stopColor:"#EB5854"})),E.createElement("linearGradient",{id:"hot_svg__paint1_linear_23665_194053",x1:2.616,y1:4.79,x2:10.598,y2:9.517,gradientUnits:"userSpaceOnUse"},E.createElement("stop",{stopColor:"#FFC533"}),E.createElement("stop",{offset:.436,stopColor:"#F26461"}),E.createElement("stop",{offset:.809,stopColor:"#FF0544"})),E.createElement("linearGradient",{id:"hot_svg__paint2_linear_23665_194053",x1:8.195,y1:11.127,x2:.577,y2:4.974,gradientUnits:"userSpaceOnUse"},E.createElement("stop",{offset:.134,stopColor:"#FA0951"}),E.createElement("stop",{offset:.354,stopColor:"#FA3E65"}),E.createElement("stop",{offset:.881,stopColor:"#F2AE49"}),E.createElement("stop",{offset:.998,stopColor:"#FAC032"})))))};function ce(){return ce=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ce.apply(this,arguments)}var se,de=function(e){return E.createElement("svg",ce({width:12,height:12,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),re||(re=E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.447 11.276L6 9.5l3.553 1.775A1 1 0 0011 10.38V1a1 1 0 00-1-1L2 .002a1 1 0 00-1 1v9.38a1 1 0 001.447.894zm3.108-8.74A1 1 0 004 3.368v3.263a1 1 0 001.555.832l2.529-1.686a.934.934 0 000-1.555l-2.53-1.686z",fill:"#FBFBFB"})))};function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ve.apply(this,arguments)}var fe,me=function(e){return E.createElement("svg",ve({width:6,height:10,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),se||(se=E.createElement("path",{d:"M1 1l4 4-4 4",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round"})))};function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pe.apply(this,arguments)}var ge=function(e){return E.createElement("svg",pe({width:17,height:18,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),fe||(fe=E.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.792 4.278a4.014 4.014 0 102.293 7.308l1.928 1.929a.708.708 0 001.002-1.002l-1.929-1.928a4.014 4.014 0 00-3.295-6.307zM5.194 8.292a2.597 2.597 0 115.195 0 2.597 2.597 0 01-5.194 0z",fill:"#fff",fillOpacity:.7})))},he=n(70675),_e=new(U())([["mix",E.createElement(z.Z,{key:"mix",src:ae,width:12,height:12,viewBox:"0 0 12 12"})],["hot",E.createElement(z.Z,{key:"hot",src:ue,width:12,height:12,viewBox:"0 0 12 12"})],["related",E.createElement(z.Z,{key:"related",src:de,width:12,height:12,viewBox:"0 0 12 12"})]]),ye=function(e){var t=e.item,n=e.awemeInfo,i=n.groupId,o=n.awemeId,a=n.mixInfo;return(0,E.useEffect)((function(){if("mix"===t.type&&K.sendLog("compilationEntranceShow",{enter_from:N.yW(),group_id:i,author_id:o,compilation_id:null==a?void 0:a.mixId}),"related"===t.type&&K.sendLog("relatedVideoEntranceShow",{enter_from:N.yW(),group_id:i,author_id:o}),"hot"===t.type){var e=t.customProps||{},n=e.trending_topic,l=e.first_tag_name,r=e.top;K.sendLog("hotEntranceShow",{enter_from:N.yW(),group_id:i,author_id:o,trending_topic:n,first_tag_name:l,top:r})}}),[]),E.createElement("div",{className:j,key:t.type,onClick:function(){if(t.onClick({awemeInfo:n}),"mix"===t.type&&K.sendLog("compilationEntranceClick",{enter_from:N.yW(),group_id:i,author_id:o,compilation_id:a.mixId}),"hot"===t.type){var e=(null==t?void 0:t.customProps)||{},l=e.trending_topic,r=e.first_tag_name,u=e.top;K.sendLog("hotEntranceClick",{enter_from:N.yW(),group_id:i,author_id:o,trending_topic:l,first_tag_name:r,top:u})}"related"===t.type&&K.sendLog("relatedVideoEntranceClick",{enter_from:N.yW(),group_id:i,author_id:o})}},E.createElement("span",{className:ee}),E.createElement("span",{className:x()(Y)},_e.get(t.type)),E.createElement("span",{className:Q},t.title))},we=function(e){var t,n=e.tag,i=e.awemeInfo,o=n.title,a=n.searchWord,l=n.index,r=a.word,u=i.awemeId;return(0,E.useEffect)((function(){K.sendLog("trendingWordsShow",{words_source:"related_search_anchor_v2",enter_from:N.yW(),words_content:r,enter_group_id:u,words_position:l})}),[r,u,l]),E.createElement(he.a,{href:k()(t="https://www.douyin.com/search/".concat(encodeURIComponent(r),"?source=related_search_anchor_v2&enter_from=")).call(t,N.vM()),spa:!1,className:X,onClick:function(){K.sendLog("trendingWordsClick",{words_source:"related_search_anchor_v2",enter_from:N.yW(),words_content:r,enter_group_id:u,words_position:l}),R.emit(R.EVENT.videoPause)},target:"_blank"},E.createElement(z.Z,{src:ge,width:17,height:18,viewBox:"0 0 17 18"}),E.createElement("span",{className:ee}),E.createElement("span",{className:J},o),E.createElement(z.Z,{className:$,src:me,width:5,height:10,viewBox:"0 0 6 10"}))},ke=function(e){var t=e.tagList,n=e.awemeInfo;return E.createElement("div",{className:G},W()(t).call(t,(function(e){return"related-search"===e.type?E.createElement(we,{tag:e,awemeInfo:n}):E.createElement(ye,{key:e.type,item:e,awemeInfo:n})})))},Ee=n(96466),be=new q.hD({clickTitleAt:{eventName:"click_title_at",params:{to_user_id:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0"}},clickVideoTitle:{eventName:"click_video_title",params:{action:"expand",author_id:"",group_id:"",enter_from:"",log_pb:"",previous_page:"",is_full_screen:"0"}},clickTitleHashtag:{eventName:"click_title_hashtag",params:{hashtag:"",author_id:"",group_id:"",log_pb:"",enter_from:"",previous_page:"",is_full_screen:"0",tag_id:"",status:""}},xiguaAnchorShow:{eventName:"xigua_anchor_show",params:{author_id:"",group_id:""}},xiguaAnchorClick:{eventName:"xigua_anchor_click",params:{author_id:"",group_id:""}},clickAuthorHead:{eventName:"click_author_head",params:{author_id:"",group_id:"",enter_from:"",previous_page:"",is_full_screen:"0",log_pb:"",from_follow_list:"0",from_xigua:0,click_from:"",clarity:"",aweme_type:"",is_auto:1}},trendingShow:{eventName:"trending_show",params:{words_source:"related_search_anchor_v2",enter_from:"",words_num:0,enter_group_id:""}}}),xe="_f3D05pF",Se="BWnYuaeE",Ce="e8ZKvWWv",Ie="Pz8t2meP",Le="xhDopcQ_",Ne="Jn1tVXor",Pe="bIxG2tpm",Te=n(59662),Ze=function(e){var t,n,i,o,u,s,v,m,g,_=e.awemeInfo,w=e.isTopicLinkSearchResult,b=e.videoHashtagClassName,V=e.isTopicLinkDetail,U=e.videoTags,H=void 0===U?[]:U,W=e.isShowCreateTime,z=void 0!==W&&W,q=e.abTestData,K=e.onClickUserName,G=e.className,j=(0,Te.n)(),Y=(0,E.useState)(!0),Q=(0,r.Z)(Y,2),X=Q[0],J=Q[1],$=null===(t=L.Le.getConfig(L.gI.WallPaperIds))||void 0===t?void 0:d()(t).call(t,null==_?void 0:_.awemeId),ee=_||{},te=ee.awemeType,ne=ee.awemeId,ie=ee.authorInfo,oe=ee.logPb,ae=ee.desc,le=ee.textExtra,re=ie||{},ue=re.enterpriseVerifyReason,ce=re.uid,se=re.customVerify,de=re.nickname,ve=re.remarkName||de,fe=(s=(0,E.useState)(I.p()?0:window.innerWidth),v=(0,r.Z)(s,2),m=v[0],g=v[1],(0,E.useEffect)((function(){var e=c()((function(){g(window.innerWidth)}),100,{trailing:!0});return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),m),me=(0,S.x)((function(){C.i.sendLog("postTimeShow",{enter_from:N.mo(),group_id:_.awemeId,post_time:P.MH(1e3*_.createTime)})})),pe=(0,E.useMemo)((function(){return fe<=1440?22:fe>=1920?26:22/1440*fe}),[fe]),ge=(0,E.useState)(500),he=(0,r.Z)(ge,2),_e=he[0],ye=he[1],we=Math.floor((_e-45-16)/pe),Ze=fe>=1920?1:2;(0,E.useEffect)((function(){var e=f()((function(){var e=document.getElementsByClassName("xg-video-container")[0],t=e?p()(window.getComputedStyle(e,null).height,10):800;ye(t)}),200);return function(){window.clearTimeout(e)}}),[]);var Re=h()(H).call(H,(function(e){return"related-search"===e.type})),De=h()(H).call(H,(function(e){return"related-search"!==e.type}));(0,E.useEffect)((function(){Re.length&&be.sendLog("trendingShow",{words_source:"related_search_anchor_v2",enter_from:N.yW(),words_num:Re.length,enter_group_id:_.awemeId})}),[]);var Ae=(0,E.useCallback)((function(){var e;(null==K||K(),te===M.ed.XgVideo)?(be.sendLog("clickAuthorHead",(0,l.Z)({click_from:"title",urlParamList:["previous_page"],author_id:ce,group_id:ne,log_pb:oe,enter_from:N.yW(),is_full_screen:T.r()?"1":"0",from_follow_list:null!==(e=L.Le.getConfig(L.gI.FromFollowList))&&void 0!==e&&e.tag?"1":"0",from_xigua:te===M.ed.XgVideo?1:0,aweme_type:te},Z.t())),R.emit(R.EVENT.videoPause),window.open(D.GN(ce))):R.emit(R.EVENT.videoTitleClick,ne)}),[ce,te,oe,ne,K]),Me=(0,E.useCallback)((function(){be.sendLog("xiguaAnchorClick",{author_id:ce,group_id:ne}),Ae()}),[Ae,ce,ne]),Be=(0,E.useMemo)((function(){return te===M.ed.XgVideo?(be.sendLog("xiguaAnchorShow",{author_id:ce,group_id:ne}),E.createElement("div",{className:"account-badge",onClick:Me},E.createElement("div",{className:"badge-xg-bg"},E.createElement("div",{className:"badge-xg"}),E.createElement("span",null,"\u6765\u81ea\u897f\u74dc\u89c6\u9891")))):""}),[ue,se,te,ne,ce,Me]),Fe=(0,E.useCallback)((function(e,t,n){w&&R.emit(R.EVENT.videoPause),R.emit(R.EVENT.videoTopicClick,{hashtagId:e,hashtagName:t,awemeId:ne,isCommerce:n}),be.sendLog("clickTitleHashtag",{hashtag:y()(t).call(t,1),urlParamList:["previous_page"],author_id:ce,group_id:ne,log_pb:oe,enter_from:N.yW(),is_full_screen:T.r()?"1":"0",tag_id:e,status:"on"})}),[ce,ne,oe,w]),Oe=(0,E.useCallback)((function(e){R.emit(R.EVENT.videoPause),be.sendLog("clickTitleAt",{to_user_id:e,urlParamList:["previous_page"],author_id:ce,group_id:ne,log_pb:oe,enter_from:N.yW(),is_full_screen:T.r()?"1":"0"})}),[ne,ce,oe]),Ve=(0,E.useCallback)((function(e){var t;R.emit(R.EVENT.hideFakeScreen,!1),null==j||null===(t=j.emit)||void 0===t||t.call(j,"titleIsFold",e),be.sendLog("clickVideoTitle",{action:e?"fold":"expand",urlParamList:["previous_page"],author_id:ce,group_id:ne,log_pb:oe,enter_from:N.yW(),is_full_screen:T.r()?"1":"0"}),J(e)}),[ne,ce,oe,j]);(0,E.useEffect)((function(){J(!0)}),[ne]);var Ue=(0,E.useCallback)((function(e){var t=e.isUnfold;return E.createElement(B.Z,{className:x()(Le,Ne),userTextClassName:x()(Se,Ie),hashTagClassName:x()((0,a.Z)({},Ce,w),b),getHashTagHref:function(e,t){var n;return w?k()(n="https://www.douyin.com/search/".concat(encodeURIComponent(e),"?source=pc_click_hashtag_feed&enter_from=")).call(n,N.vM()):V?D.bP(t):""},text:ae,isRemoveRowspan:!t,textExtra:le,awemeInfo:_,onClickHashtag:Fe,onClickUser:Oe,enterMethod:"video_title_at",searchWordsType:F.L.VideoInfoTitle,abtestData:q,player:j})}),[_,V,w,Fe,Oe,le,ae,b,q,j]);return null!=j&&j.video?E.createElement("div",{id:"video-info-wrap",className:x()("xgplayer-video-info-wrap xgplayer-video-info-wrap-new",{fullscreen:!X&&Boolean((null==q||null===(n=q.danmaku)||void 0===n?void 0:n.douyin_danmaku)||(null==q||null===(i=q.backendAbTest)||void 0===i||null===(o=i.douyin)||void 0===o?void 0:o.douyin_danmaku)||!1)}),"data-state":"normal"},E.createElement("div",{className:x()("video-info-detail",{isFireFox:A.vU(),canSelect:q.searchWords>0,wallpaperTitle:null===(u=L.Le.getConfig(L.gI.WallPaperIds))||void 0===u?void 0:d()(u).call(u,null==_?void 0:_.awemeId)},G),"data-e2e":"video-info","data-e2e-aweme-id":_.awemeId},E.createElement("div",{className:"account"},E.createElement("div",{className:"account-name","data-e2e":"feed-video-nickname"},E.createElement("span",{onClick:Ae},E.createElement(B.Z,{className:x()(Ie,Ne),text:"@".concat(ve)}))),E.createElement("div",{className:"video-create-time"},z&&E.createElement("span",{ref:me,className:"time"},"\xb7 ".concat(P.MH(1e3*_.createTime)))),Be,E.createElement("div",{className:"account-card"},te===M.ed.Note&&E.createElement(Ee.J,null))),E.createElement("div",{className:"title","data-e2e":"video-desc"},E.createElement(O.Z,{maxLine:we,lineClamp:Ze,btnClassName:x()(xe,Pe,Ne),onlyKey:ae,btnOnClick:Ve,lineHeight:pe,Content:Ue})),De.length>0&&!$?E.createElement("div",{className:"under-title-tag"},E.createElement(ke,{tagList:De,awemeInfo:_})):null,Re.length>0&&!$?E.createElement(ke,{tagList:Re,awemeInfo:_}):null),E.createElement("div",{className:"video-info-mask"}),E.createElement("div",{className:"mini-progress-outer"},E.createElement("div",{className:"mini-progress-inner"}))):null}},6749:function(e,t,n){n.d(t,{r7:function(){return F},Td:function(){return V}});var i=n(41257),o=n(53778),a=n(11789),l=n(10396),r=n.n(l),u=n(92334),c=n.n(u),s=n(4650),d=n.n(s),v=n(63862),f=n.n(v),m=n(88442),p=n.n(m),g=n(29493),h=n.n(g),_=n(90400),y=n.n(_),w=n(97448),k=n.n(w),E=n(18556),b=n.n(E),x=n(54882),S=n.n(x),C=n(26217),I=n.n(C),L=n(30234),N=n(66870),P=n(76481),T=n(18653),Z=n(61353),R=n(97456),D=n(78919),A=L.getBitrateSelectorDefaultVal().quality_filter,M=L.getBitrateSelectorDefaultVal().white_list,B={5:1,4:2,3:3,2:4},F=function(e,t,n,i){var l;if((null==n?void 0:n.awemeType)===N.ed.Note)return[];var u=e;if(function(e){var t,n,i,o,a,l;return r()(t=[null==L||null===(n=L.ClaritySelection)||void 0===n||null===(i=n.Real)||void 0===i?void 0:i.clarity,null==L||null===(o=L.ClaritySelection)||void 0===o||null===(a=o.Virtual)||void 0===a?void 0:a.clarity]).call(t,null==e||null===(l=e.claritySelection)||void 0===l?void 0:l.clarity)||!1}(t)){var s=function(e,t){var n,i,o,a,l,r=(null==t||null===(n=t.claritySelection)||void 0===n?void 0:n.allowList)||((null==t||null===(i=t.claritySelection)||void 0===i?void 0:i.clarity)===(null===(o=L.ClaritySelection)||void 0===o||null===(a=o.Real)||void 0===a?void 0:a.clarity)?L.ClaritySelection.Real.allowList:L.ClaritySelection.Virtual.allowList),u=[];return y()(l=k()(r)).call(l,(function(t){for(var n=r[t],i=function(i){var o=f()(e).call(e,(function(e){return e.gearName===n[i]}));if(null!=o&&o.length){var a=o[0];return a.definition=B[t],u.push(a),"break"}},o=0;o<n.length&&"break"!==i(o);o++);})),(null==u?void 0:u.length)>0?u:e}(u,t);(null==s?void 0:s.length)>0&&(u=s)}if(!i){var v,m,g=(null==t||null===(v=t.BitrateSelector)||void 0===v?void 0:v.quality_filter)||A;u=function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:A;if(!t||!c()(e))return e||[];var n=d()(e).call(e,(function(e,t){return e.bitRate&&e.bitRate<t.bitRate?e:t}),{}),i=f()(e).call(e,(function(e){for(var n=!0,i=0,o=p()(t);i<o.length;i++){var l,u=(0,a.Z)(o[i],2),c=u[0],s=u[1];if(null!=e&&r()(l=e.gearName).call(l,c)){var d=s||{},v=d.lower,f=d.upper;(e.bitRate<v||e.bitRate>f)&&(n=!1)}}return n}));return 0===i.length&&i.push(n),i}(function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:M,t=arguments.length>1?arguments[1]:undefined,n=(null==t?void 0:f()(t).call(t,(function(t){return null==e?void 0:h()(e).call(e,(function(e){var n;return null==t?void 0:r()(n=t.gearName).call(n,e)}))})))||[];return 0===(null==n?void 0:n.length)?t:n}((null==t||null===(m=t.BitrateSelector)||void 0===m?void 0:m.white_list)||M,e),g)}return null===(l=u)||void 0===l?void 0:b()(l).call(l,(function(e){var t,i;return{url:S()(t=[]).call(t,(0,o.Z)((null==e?void 0:e.playAddr)||[]),[{src:null==e?void 0:e.playApi}]),bitrate:null==e?void 0:e.bitRate,definition:(null==e?void 0:e.definition)||(null==e?void 0:e.qualityType),qualityType:null==e?void 0:e.qualityType,duration:(null==n||null===(i=n.video)||void 0===i?void 0:i.duration)/1e3,isH265:e.isH265}}))},O=function(e){var t=e.url,n=void 0===t?"":t,o=e.target,l=n,u=n.split("?"),c=(0,a.Z)(u,2),s=c[0],d=c[1];try{if(r()(n).call(n,"/aweme/v1/play")&&d){var v,f=(0,Z.parse)(d);l=S()(v="".concat(s,"?")).call(v,(0,Z.stringify)((0,i.Z)((0,i.Z)({},f),P.getSharkCommonParams({target:o}))))}}catch(m){}return l},V=function(e){var t,n,a,l,r,u,s,d,v,m,p,g,h,_=e.awemeInfo,y=e.abtestData,w=e.userselection,k=_;null!==(t=T.Le.getConfig(T.gI.RefetchAwemeInfo))&&void 0!==t&&t[null==_?void 0:_.awemeId]&&(k=T.Le.getConfig(T.gI.RefetchAwemeInfo)[null==_?void 0:_.awemeId]);var E,x,C,L,P=((k||{}).video||{}).bitRateList,Z=void 0===P?[]:P,A=null===(n=k)||void 0===n||null===(a=n.video)||void 0===a?void 0:a.playAddr,M=[];(c()(A)&&(M=b()(A).call(A,(function(e){var t;return{src:O({url:e.src,target:null===(t=k)||void 0===t?void 0:t.awemeId})}}))),null!==(l=k)&&void 0!==l&&null!==(r=l.video)&&void 0!==r&&r.playApi)&&(M=S()(E=[]).call(E,(0,o.Z)(M),[{src:O({url:null===(x=k)||void 0===x||null===(C=x.video)||void 0===C?void 0:C.playApi,target:null===(L=k)||void 0===L?void 0:L.awemeId})}]));var B=F(null==Z?void 0:f()(Z).call(Z,(function(e){return 0===e.isH265})),y,k,w),V={},U={};if((0,R.yf)({awemeInfo:k,abtestData:y})){var H,W=b()(H=k.video.videoModel.dynamicVideo.dynamic_video_list).call(H,(function(e){return{bitRate:e.real_bitrate,gearName:e.definition,qualityType:e.quality_type}})),z=F(W,y,k);I()(V,{DASHPlugin:(0,R.qs)({awemeInfo:k,abtestData:y}),definition:{list:z}})}else if((0,D.i)({awemeInfo:k,abtestData:y})){var q,K,G,j,Y,Q,X=F(null==Z?void 0:f()(Z).call(Z,(function(e){return 1===e.isH265})),y,k);M=S()(q=[]).call(q,(0,o.Z)(k.video.playAddrH265),[{src:null===(K=k)||void 0===K||null===(G=K.video)||void 0===G?void 0:G.playApiH265}]),I()(U,{H264DefinitionList:B,codecType:"h265",mediaType:"xg-video",defaultDefinition:(null==X||null===(j=X[0])||void 0===j?void 0:j.definition)||"",defaultBitrate:(null==X||null===(Y=X[0])||void 0===Y?void 0:Y.bitrate)||"",definition:{list:(null===(Q=k)||void 0===Q?void 0:Q.awemeType)===N.ed.Note?[]:X}})}else if((0,D.T)({awemeInfo:k,abtestData:y})){var J,$,ee,te=F(null==Z?void 0:f()(Z).call(Z,(function(e){return 1===e.isH265})),y,k);I()(U,{H264DefinitionList:B,codecType:"h265",defaultDefinition:(null==te||null===(J=te[0])||void 0===J?void 0:J.definition)||"",defaultBitrate:(null==te||null===($=te[0])||void 0===$?void 0:$.bitrate)||"",definition:{list:(null===(ee=k)||void 0===ee?void 0:ee.awemeType)===N.ed.Note?[]:te}})}return(0,i.Z)((0,i.Z)({poster:null===(u=k)||void 0===u||null===(s=u.video)||void 0===s?void 0:s.cover,vid:null===(d=k)||void 0===d?void 0:d.awemeId,defaultDefinition:(null==B||null===(v=B[0])||void 0===v?void 0:v.definition)||"",defaultBitrate:(null==B||null===(m=B[0])||void 0===m?void 0:m.bitrate)||"",duration:(null===(p=k)||void 0===p||null===(g=p.video)||void 0===g?void 0:g.duration)/1e3||0,url:M,vtype:(null===(h=k)||void 0===h?void 0:h.awemeType)===N.ed.Note?"MP3":"MP4",definition:{list:B},userSelectDefinition:w,codecType:"h264",mediaType:"video"},U),V)}},97456:function(e,t,n){n.d(t,{qs:function(){return h},dq:function(){return _},yf:function(){return y},Zf:function(){return w}});var i=n(53778),o=n(41257),a=n(18556),l=n.n(a),r=n(63862),u=n.n(r),c=n(29493),s=n.n(c),d=n(54882),v=n.n(d),f=n(58214),m=n.n(f),p=n(30234),g=n(6749),h=function(e){var t=e.awemeInfo,n=e.abtestData,i=_({awemeInfo:t,abtestData:n});return{preloadCacheType:1,preloadMaxCacheCount:20,minBufferLength:5,maxBufferLength:50,defaultFormat:"dash",dashOpts:{dynamic_video:(0,o.Z)((0,o.Z)({},t.video.videoModel.dynamicVideo),{},{dynamic_video_list:i})},duration:t.video.videoModel.videoDuration,vid:t.video.videoModel.videoId,defaultDefinition:t.video.videoModel.autoDefinition,focusUserDefinition:!1,needAutoBitrate:!0,smallGapLimit:1}},_=function(e){var t,n,i=e.abtestData,o=e.awemeInfo,a=l()(t=o.video.videoModel.dynamicVideo.dynamic_video_list).call(t,(function(e){return{bitRate:e.real_bitrate,gearName:e.definition,qualityType:e.quality_type}})),r=(0,g.r7)(a,i,o);return u()(n=o.video.videoModel.dynamicVideo.dynamic_video_list).call(n,(function(e){return s()(r).call(r,(function(t){return t.qualityType===e.quality_type}))}))},y=function(e){var t,n,i,o,a,l,r,u,c,s,d=e.awemeInfo,v=e.abtestData;return((null==v?void 0:v.useDashWeb)===p.UseDashWeb.OneMin&&(null==d||null===(t=d.video)||void 0===t?void 0:t.duration)>=6e4||(null==v?void 0:v.useDashWeb)===p.UseDashWeb.ThreeMin&&(null==d||null===(n=d.video)||void 0===n?void 0:n.duration)>=18e4)&&(null===(i=d.video.videoModel)||void 0===i||null===(o=i.dynamicVideo)||void 0===o||null===(a=o.dynamic_video_list)||void 0===a||null===(l=a[0])||void 0===l?void 0:l.codec_type)&&"bytevc1"!==(null===(r=d.video.videoModel)||void 0===r||null===(u=r.dynamicVideo)||void 0===u||null===(c=u.dynamic_video_list)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.codec_type)&&!1!==window.useDash&&m().encryptUtils.isSupported()},w=function(e,t,n){var o;y({awemeInfo:t,abtestData:n})&&(e.plugins=v()(o=[]).call(o,(0,i.Z)(e.plugins),[m()]))}},78919:function(e,t,n){n.d(t,{i:function(){return p},T:function(){return g}});var i=n(29493),o=n.n(i),a=n(10396),l=n.n(a),r=n(21972),u=n(73824),c=n(9220),s=n(30234),d=n(47999),v=[2,15,21,28,29],f=!1,m={fake:!0,getDeviceCapacity:function(){return{}},isSupported:function(){return!1},setDecodeCapacity:function(e){}};m.fake&&!r.p()&&Promise.all([n.e(4629),n.e(7558)]).then(n.bind(n,77558)).then((function(e){m=e.default}));var p=function(e){var t,n;if(r.p())return!1;var i=e.awemeInfo,a=e.abtestData,l=!1,v=m.getDeviceCapacity(),p=v.simd,g=v.thread,h=v.nbCpu,_=null==i||null===(t=i.video)||void 0===t?void 0:o()(n=t.bitRateList).call(n,(function(e){return 1===e.isH265})),y="video_detail"===u.vM(),w="light"===u.vM();return c.DT()||(null==a?void 0:a.use265Web)!==s.Use265Web.On||y||w||!_||c.DT()||d.G6()||!m.isSupported()||!(p&&h>=8||g&&h>8)||(f||(m.setDecodeCapacity({preloadDecoder:"h265",wasmFallbackToAsm:!1,evaluateVVCount:10,disabledByLowdecodePrecent:.5,reuseMseForAudio:!0,preciseSeek:Infinity}),f=!0),l=!0),l&&!window.use264},g=function(e){var t,n,i,a,u,s,d=e.awemeInfo,f=e.player,m=e.abtestData;return r.p()?0:null!=f&&null!==(t=f.curDefinition)&&void 0!==t&&t.isH265?1:0===(null==f||null===(n=f.curDefinition)||void 0===n?void 0:n.isH265)?0:null!=f&&null!==(i=f.curDefinition)&&void 0!==i&&i.qualityType?l()(v).call(v,null==f||null===(s=f.curDefinition)||void 0===s?void 0:s.qualityType)?1:0:null!=m&&m.use265Client&&c.DT()&&null!=d&&null!==(a=d.video)&&void 0!==a&&o()(u=a.bitRateList).call(u,(function(e){return 1===e.isH265}))?1:0}},82298:function(e,t,n){n.d(t,{rR:function(){return m},su:function(){return p},LX:function(){return g}});var i=n(53778),o=n(10396),a=n.n(o),l=n(54882),r=n.n(l),u=n(65261),c=n(58214),s=n.n(c),d=n(30234),v=n(66870),f=n(78919),m=function(e){var t,n=e.awemeInfo,i=e.abtestData,o=(0,f.i)({awemeInfo:n,abtestData:i}),l=a()(t=[d.VideoPreloadTypeABVal.NoPreload,d.VideoPreloadTypeABVal.Preload]).call(t,null==i?void 0:i.videoPreloadType),r=(null==i?void 0:i.videoPreloadType)===d.VideoPreloadTypeABVal.Preload;return{preloadTime:10,preloadCacheType:1,needAutoBitrate:!0,maxBufferLength:60,minBufferLength:10,maxPausedBufferLength:10,maxBufferLen:15,removeBufferLen:60,preloadMaxCacheCount:10,resumePlayWaterLevel:2,xhrSetup:function(){},focusUserDefinition:!0,needPreloadCheck:o||r,isOpenPreload:!o,forceVideoPlay:o,segmentMinDuration:o?2:l?15:2}},p=function(e){var t=e.awemeInfo,n=e.abtestData,i=(0,f.i)({awemeInfo:t,abtestData:n}),o=(null==n?void 0:n.videoPreloadType)>d.VideoPreloadTypeABVal.None,a=(null==t?void 0:t.awemeType)!==v.ed.Note&&u.Z.isSupported();return(i||o)&&a},g=function(e,t,n){var o,l,c=a()(o=e.plugins).call(o,s());p({awemeInfo:t,abtestData:n})&&!c&&(e.plugins=r()(l=[]).call(l,(0,i.Z)(e.plugins||[]),[u.Z]),e.mp4encryptplayer=m({awemeInfo:t,abtestData:n}))}},73682:function(e,t,n){n.d(t,{U:function(){return l}});var i=n(97456),o=n(78919),a=n(9220),l=function(e){var t,n,l=e.player,r=e.abtestData,u=e.awemeInfo;return"dash"===(null==l?void 0:l.playerType)||(0,i.yf)({awemeInfo:u,abtestData:r})?0:a.DT()?(0,o.T)({abtestData:r,awemeInfo:u,player:l}):l?null!==(t=null===(n=l.curDefinition)||void 0===n?void 0:n.isH265)&&void 0!==t?t:0:Number((0,o.i)({abtestData:r,awemeInfo:u}))}},61655:function(e,t,n){n.d(t,{v:function(){return r}});var i=n(18556),o=n.n(i),a=n(97448),l=n.n(a),r=function(e){var t,n=e.currentCodeMap,i=e.additionalCodeMap;o()(t=l()(i)).call(t,(function(e){delete n[e]}))}},5014:function(e,t,n){n.d(t,{t:function(){return i}});var i=function(e){var t,n,i,o;e&&(null===(t=e.plugins.volume)||void 0===t||null===(n=t.focus)||void 0===n||n.call(t),null===(i=e.plugins.volume)||void 0===i||null===(o=i.unFocus)||void 0===o||o.call(i,1e3,!0,null))}},22925:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(10396),o=n.n(i),a=n(21528),l=n(30234);function r(e){return(0,a.useMemo)((function(){var t,n,i,a,r,u;return o()(t=[null==l||null===(n=l.ClaritySelection)||void 0===n||null===(i=n.Real)||void 0===i?void 0:i.clarity,null==l||null===(a=l.ClaritySelection)||void 0===a||null===(r=a.Virtual)||void 0===r?void 0:r.clarity]).call(t,null==e||null===(u=e.claritySelection)||void 0===u?void 0:u.clarity)}),[null==e?void 0:e.claritySelection])}},97828:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(21528),o=n(66870);function a(e,t){return(0,i.useMemo)((function(){var n,i=null==t?void 0:t.video,a=null==t||null===(n=t.danmakuControl)||void 0===n?void 0:n.enableDanmaku,l=function(e){var t,n,i;return(null==e||null===(t=e.danmaku)||void 0===t?void 0:t.douyin_danmaku)||(null==e||null===(n=e.backendAbTest)||void 0===n||null===(i=n.douyin)||void 0===i?void 0:i.douyin_danmaku)}(e);return{hasDanmakuStyle:l||!1,hasDanmakuInput:l&&(null==i?void 0:i.duration)>3e4&&(null==t?void 0:t.awemeType)!==o.ed.Note&&a||!1}}),[null==e?void 0:e.danmaku,null==t?void 0:t.awemeId])}},36626:function(e,t){t.Z={container:"DhEeeU3v",shareCode:"J8_Uj1cS",failed:"hlk9n9AG",defaultContainer:"EDG47eF_",crossContainer:"F2u5rST7",columnContainer:"nFZmQGu5",shareToastWrap:"_2p8xYfq",hidden:"HwFBqYeT"}},81799:function(){},93669:function(e,t,n){e.exports=n.p+"image/generalBG.0640de7c.png"},66798:function(e,t,n){e.exports=n.p+"image/generalBG.0640de7c.png"}}]);