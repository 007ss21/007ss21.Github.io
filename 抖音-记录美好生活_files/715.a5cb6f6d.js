"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[715],{52596:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(11235),r=n.n(i),a=n(94978),o=n(12922),s=(n(86267),n(18839),function(){function e(){(0,a.Z)(this,e),this.timeID=null,this.func=null}return(0,o.Z)(e,[{key:"repeat",value:function(e,t){this.timeID=1,this.repeatInterval(e,t)}},{key:"repeatInterval",value:function(e,t){var n=this;this.timeID&&(null===this.func&&(this.func=e),this.func===e&&(this.timeID&&clearTimeout(this.timeID),this.timeID=null,this.timeID=r()((function(){e(),n.repeatInterval(e,t)}),t)))}},{key:"clear",value:function(){clearTimeout(this.timeID),this.timeID=null}}]),e}())},41587:function(e,t,n){n.d(t,{ZP:function(){return de}});var i=n(97448),r=n.n(i),a=n(44540),o=n.n(a),s=n(63862),u=n.n(s),l=n(66581),c=n.n(l),f=n(90400),d=n.n(f),h=n(33743),p=n.n(h),_=n(12067),g=n.n(_),y=n(84713),v=n.n(y),m=n(39382),T=n.n(m),E=n(12544),b=n.n(E),w=n(54882),A=n.n(w),k=n(70327),R=n.n(k),S=n(18556),M=n.n(S),I=n(38574),D=n.n(I),P=n(25239),O=n.n(P),x=n(24514),F=n.n(x),C=n(36210),B=n.n(C),L=(n(86332),n(22032),n(60892),n(15243),n(20145),n(48168),n(75645),n(86499),n(61396),n(86632),n(11757),n(47338),n(47976),n(58200)),U=n(53560),N=n(94978),X=n(12922),Z=n(34055),H=n(58010),Q=n(5233),W=n(91609),V=n.n(W),z=(n(83867),n(54590),n(32189),n(12551),n(94719),n(96362),n(44148),n(14652),n(43544),n(32543),n(67846),n(72831),n(8356),n(86919),n(21592),n(26592),n(10954),n(8340),n(37920),n(86240),n(78344),n(2517),n(3244),n(60208),n(9368),n(60968),n(43146),n(55507),n(53511),n(68976),n(85653),n(80034),n(29928),n(23914),n(9190),n(71198),n(47146),n(42755),n(5304),n(38750),n(64803),n(33267),n(50232),n(28374),n(35827),n(27085)),K=n(63352),q=n(91519),Y=n(66713),j=n(44699),G=n.n(j),J=n(28310),$=n(50685),ee=n(45118),te=n(25726),ne=n(90934),ie=n(10237);function re(e,t){var n=r()(e);if(o()){var i=o()(e);t&&(i=u()(i).call(i,(function(t){return c()(e,t).enumerable}))),n.push.apply(n,i)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n,i,r=null!=arguments[t]?arguments[t]:{};t%2?d()(n=re(Object(r),!0)).call(n,(function(t){(0,U.Z)(e,t,r[t])})):p()?g()(e,p()(r)):d()(i=re(Object(r))).call(i,(function(t){v()(e,t,c()(r,t))}))}return e}function oe(e){var t=function(){if("undefined"==typeof Reflect||!T())return!1;if(T().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(T()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,Q.Z)(e);if(t){var r=(0,Q.Z)(this).constructor;n=T()(i,arguments,r)}else n=i.apply(this,arguments);return(0,H.Z)(this,n)}}var se="h264",ue="h265",le=z.dJ,ce=null,fe=function(e){(0,Z.Z)(n,e);var t=oe(n);function n(){return(0,N.Z)(this,n),t.apply(this,arguments)}return(0,X.Z)(n,[{key:"init",value:function(){return b().resolve()}},{key:"preloadPredict",value:function(e){return e}}]),n}(K.Z),de=function(e){(0,Z.Z)(s,e);var t,n,i,a,o=oe(s);function s(e,t){var n;return(0,N.Z)(this,s),e.vtype=q.l0.MP4,(n=o.call(this,e)).player=t,n.loadingCount=0,n._mp4=null,n._loader=null,n._pendingPromise=null,n.playerId=t.playerId,n}return(0,X.Z)(s,[{key:"log",value:function(e){for(var t,n="[Preloader] ".concat(e),i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];ne.cM.apply(void 0,A()(t=[n]).call(t,r))}},{key:"before",value:function(){var e=this;this.handlers={start:function(t){var n,i,r=t.payload||[];if(0===r.length)return b().reject();var a=t.vid,o=t.vtype||q.l0.MP4,u=t.codecType||se,l=e.getUserSelectDefinition();if(e.checkCacheKey(a,r,l,o,u)||"MP3"===o)return b().reject();var c=e.getInitDefinition(r,e.options.definition,l);if(!c)return b().reject();var f=c.definition,d=t.preloadTime||e.options.preloadTime,h=t.preloadSize||e.options.preloadSize||Math.pow(25,4)-1,p=s.generateUniqueKey({vid:a,definition:f,vtype:o,codecType:u});(0,ne.cM)(A()(n=A()(i="".concat(a," start duration:")).call(i,c.duration," cacheKey:")).call(n,p));var _=ae({vid:a,definition:f,preloadTime:d,preloadSize:h,cacheKey:p,codecType:u,vtype:o},c);return e.loadingCount++,e.start(_)},onRequest:function(t,n){var i=t.url,r=t.range,a=t.extData;return e.getData(i,r,a,n)}},this.loggerConfig={logger:function(){},openLog:!1},this.predictInst=new fe(this.loggerConfig)}},{key:"start",value:function(e){var t=this,n={mediaInfos:{dynamic_video_list:[],dynamic_audio_list:[]},onObtain:function(){var e=new $.Z;return e.resolve(n.mediaInfos),e},onTransform:function(n){var i=new $.Z;t._pendingPromise=i;var r=e.preloadTime,a=e.codecType;return r&&a!==ue?t.loadByPreloadTime(e,i):t.loadByChunkSize(e,i),i}};return b().resolve(n)}},{key:"getInitDefinition",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null,i=null;if(s.BitRateAdapter)i=s.BitRateAdapter.getSuitableBitrate(e,n),this.log("Mp4Preloader.BitRateAdapter",i);else{for(var r=0,a=0;a<e.length;a++){var o=e[a];if(o.definition===t){r=a;break}}i=e[r]}return i||(i=e[0]),i}},{key:"getPreLoadData",value:function(e){var t=this,n=new $.Z;return this.getItemSameVid(e).then((function(e){if(t.log("getPreLoadData",e.value),e.value){var i=e.value,r=i.mediaSegList,a=i.meta,o=i.type,s=i.buffer,u=i.preloadTime,l=i.vid,c=i.cacheKey,f=i.definition,d=i.byteLength,h=i.duration,p=i.fileSize,_=i.from,g=i.vtype,y=i.codecType,v=i.initSeg,m={vid:l,type:o,vtype:g,codecType:y,definition:f,bitrate:i.bitrate,cacheKey:c,duration:h||0,byteLength:d,from:_,meta:a};o===le.SIZE?(m.buffer=s,m.fileSize=p||0):(m.mediaSegList=r,m.preloadTime=u,m.initSeg=v),n.resolve(m)}else n.resolve(null)})).catch((function(e){n.reject(e)})),n}},{key:"setPreLoadData",value:(a=(0,L.Z)(V().mark((function e(t,n){var i,r,a,o,s,u,l,c,f,d,h,p,_,g,y,v,m,T,E=this;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new $.Z,r=n.mediaSegList,a=n.meta,o=n.vid,s=n.definition,u=n.type,l=n.buffer,c=n.duration,f=n.byteLength,d=n.preloadTime,h=n.preloadSize,p=n.fileSize,_=n.from,g=n.vtype,y=n.codecType,v=n.initSeg,m=n.bitrate,T={codecType:y,vtype:g,vid:o,definition:s,cacheKey:t,type:u,from:_,meta:a,fileSize:p,bitrate:m},u===le.SIZE?(T.buffer=l,T.byteLength=f||0,T.preloadSize=h||0,T.fileSize=p,T.buffer&&T.buffer.byteLength>0&&(this.setItem(t,T),i.resolve(!0))):(T.mediaSegList=r||[],T.duration=c,T.byteLength=f||0,T.preloadTime=d||0,T.initSeg=v,a&&0===r.length?(this.setItem(t,T),i.resolve(!0)):(R()(r).call(r,(function(e){return!!e.buffer&&e.state}))||i.resolve(!1),this.setItem(t,T).then((function(){E.log("setPreLoadData1 success",t,(new Date).getTime())})),i.resolve(!0))),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"getInitCacheData",value:function(e,t){var n,i={type:e,meta:null,byteLength:0,fileSize:0,bitrate:0};return e===le.DURATION?(i.mediaSegList=[],i.initSeg=null,i.duration=0):i.buffer=null,M()(n=r()(t)).call(n,(function(e){i[e]=t[e]})),i}},{key:"updatePreCacheData",value:function(e,t,n,i,r,a,o){var s=e.mediaSegList;if(e.type===le.SIZE||-1===r)return e.buffer=G()(Uint8Array,e.buffer.buffer||[],new Uint8Array(t)),e;for(var u=-1,l=0;l<s.length;l++)if(s[l].index===r){u=l;break}var c=a||[0,0];return u>-1?(t&&(s[u].buffer=G()(Uint8Array,s[u].buffer||[],new Uint8Array(t))),n.length>1&&(s[u].range.length>1?s[u].range[1]=n[1]:s[u].range=n),-1!==o[1]&&(i=s[u].range[1]>=o[1]),s[u].state=i):(e.duration=c[1],s.push({buffer:t,range:n||[],index:r,totalRange:o||[],timeRange:[c[0],c[1]],state:i})),i&&(e.byteLength=n[1]),i}},{key:"checkCacheKey",value:function(e,t,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:q.l0.MP4,r=arguments.length>4&&arguments[4]!==undefined?arguments[4]:se;if(n){var a=s.generateUniqueKey({vid:e,definition:n,vtype:i,codecType:r});return this.hasItemSameVid(a)?a:null}for(var o=0;o<t.length;o++){var u=s.generateUniqueKey({vid:e,definition:t[o].definition,vtype:i,codecType:r}),l=this.hasItemSameVid(u);if(l)return u}return null}},{key:"checkCanPreloadNext",value:function(){var e=!0;return this.loadingCount>=1&&(e=!1),e&&this.preloadNext(),e}},{key:"loadByPreloadTime",value:function(e,t){var n=this,i=e.vid,r=e.cacheKey,a=e.preloadTime,o=e.definition,s=e.duration,u=e.bitrate,l=e.codecType,c=e.vtype,f=null;if(f="Array"===te.Z.typeOf(e.url)?e.url.length>1?e.url[1].src:e.url[0].src:e.url){f=te.Z.extUrl(f,{__vid:i}),this.log("loadByPreloadTime",e.cacheKey,e,e.definition);var d=te.Z.getFileSize(u,s);this._mp4=new ee.Z(f,u,{segmentDuration:this.options.segmentMinDuration,codecType:this.codecType,chunkSize:this.options.preloadSize,duration:s,fileSize:d,playerId:this.playerId,vid:i,useUrlRange:!1,retryCount:1,retryDelay:1e3},null,null,{},[],this.firstFrameTime,"");var h=this.getInitCacheData(le.DURATION,{vid:i,preloadTime:a,definition:o,cacheKey:r,codecType:l,vtype:c,bitrate:u||0});this._mp4.once("metaReady",(function(r){n.log("".concat(i," metaReady this._pendingPromise"),n._pendingPromise.state),h.meta=r,h.from=2,n._mp4.cancelLoading(),n.startLoadByFragments(h,e,t)})),this._mp4.on("error",(function(e){n._endLoadFragments()})),this._mp4.init({})}else this._endLoadFragments()}},{key:"loadByChunkSize",value:(i=(0,L.Z)(V().mark((function e(t){var n,i,r,a,o,s,u,l,c,f,d,h,p,_,g,y,v,m=this;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.vid,i=t.cacheKey,r=t.definition,a=t.duration,o=t.bitrate,s=t.codecType,u=t.vtype,l=this.options,c="Array"===te.Z.typeOf(t.url)?t.url[0].src:t.url){e.next=6;break}return this._endLoadChunk(),e.abrupt("return");case 6:return c=te.Z.extUrl(c,{__vid:n}),f=te.Z.getFileSize(o,a),d=(0,ie.T)(a,8e5,f),this.log("".concat(n,"loadByChunkSize"),t.cacheKey,t.definition,d,t),h=this.getInitCacheData(le.SIZE,{vid:n,definition:r,cacheKey:i,codecType:s,vtype:u,fileSize:f,bitrate:o||0}),this.MP4Loader=new J.b({url:c,retry:l.retry||2,retryDelay:l.retryDelay||1e3,timeout:3e3}),e.prev=12,p=new Uint8Array(0),_=0,g=null,y=null,v=function(e,t,n){if(e&&n.range[0]===_&&(p=G()(Uint8Array,p,new Uint8Array(e)),_+=e.byteLength),n.meta){m.MP4Loader.cancel();var r=n.meta,a=r.videoSegments,o=r.audioSegments;y=ae(ae({},r.meta),{},{ext:{videoTrak:a,audioTrak:o}}),h.meta=y,h.buffer=p,h.byteLength=p.byteLength,m.setPreLoadData(i,h),g=te.Z.getFragRange(0,a,o),m.log("".concat(i," onProgressHandle4 meta"),t,g,_,p.byteLength),g[0]<_&&(g[0]=_),m._loadOneChunk(h,g)}},e.next=20,this.MP4Loader.loadMetaProcess(this.MP4Loader.cache,[0,d],v);case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(12),this._endLoadChunk();case 26:case"end":return e.stop()}}),e,this,[[12,22]])}))),function(e){return i.apply(this,arguments)})},{key:"_loadOneChunk",value:(n=(0,L.Z)(V().mark((function e(t,n){var i,r,a,o,s,u,l,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.vid,r=t.cacheKey,a=t.buffer,e.prev=1,e.next=4,this.MP4Loader.loadData(n,this.MP4Loader.cache,{});case 4:o=e.sent,this.log("".concat(i," _loadOneChunk"),n,o),s=o.response,(u=o.data)?(this._endLoadChunk(),s&&s.headers&&(l=te.Z.getFileSize(s.headers))&&(t.fileSize=l),c=G()(Uint8Array,a,new Uint8Array(u)),t.buffer=c,t.byteLength=c.byteLength,this.log("".concat(i," _loadOneChunk ret"),r,c.byteLength,t),t.from=4,this.setPreLoadData(r,t)):this._endLoadChunk(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),this._endLoadChunk();case 14:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e,t){return n.apply(this,arguments)})},{key:"_endLoadChunk",value:function(){this.log("_endLoadChunk loadingCount:".concat(this.loadingCount),this._pendingPromise?this._pendingPromise.state:null),this._pendingPromise&&(this._pendingPromise.resolve(),this._pendingPromise=null),this.loadingCount>0&&this.loadingCount--,this.MP4Loader&&(this.MP4Loader.cancel(),this.MP4Loader.destroy(),this.MP4Loader=null)}},{key:"startLoadByFragments",value:(t=(0,L.Z)(V().mark((function e(t,n,i){var r,a,o,s,u,l=this;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=n.preloadTime,n.vid,a=[],o=0;o<this._mp4.timeRange.length;o++)this._mp4.timeRange[o][0]<r&&a.push(o);return s=function(e){l._endLoadFragments()},u=function(){var e=(0,L.Z)(V().mark((function e(n){var i,r,o,c,f,d,h,p,_;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l._mp4){e.next=2;break}return e.abrupt("return");case 2:if(i=n.buffer,r=n.context,o=n.state,c=n.initSeg,f=r.fragIndex,d=r.range,h=r.timeRange,p=l._mp4.getFragRange(f),!t.initSeg&&c&&(t.initSeg=c),_=l.updatePreCacheData(t,i,d,o,f,h,p),l.log("".concat(t.cacheKey," _successCallback"),f,o,_,d,h,p,t),t.from=3,!_){e.next=20;break}return e.next=12,l.setPreLoadData(t.cacheKey,t);case 12:if(!(f>=a.length-1)){e.next=17;break}l.log("".concat(t.cacheKey," mp4.load end"),f),l._endLoadFragments(),e.next=20;break;case 17:return l.log("".concat(t.cacheKey," mp4.load start"),f+1),e.next=20,l._mp4.loadAllFragmentData(f+1,u,s);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=8,this._mp4.loadAllFragmentData(0,u,s);case 8:case"end":return e.stop()}}),e,this)}))),function(e,n,i){return t.apply(this,arguments)})},{key:"_endLoadFragments",value:function(){this.log("_endLoadFragments loadingCount:".concat(this.loadingCount),this._pendingPromise?this._pendingPromise.state:null),this._pendingPromise&&(this._pendingPromise.resolve(),this._pendingPromise=null),this.loadingCount>0&&this.loadingCount--,this._mp4&&(this._mp4.destroy(),this._mp4=null)}},{key:"getFragment",value:function(e,t,n,i,r){var a=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{},o=new $.Z;return this.getData(e,t,a,!1).then((function(e){i.createFragment(new Uint8Array(e.res),t[0]-i.mdatStart,n,{range:t,context:e.context}).then((function(e){o.resolve(e)}))})),o}},{key:"getPreloadUrl",value:function(e){var t=e.url,n=e.range,i=e.definition,r=e.vid;return[{url:t,range:n,extData:{cacheKey:s.generateUniqueKey({vid:r,start:n[0],end:n[1],definition:i}),vid:r,format:"mp4"}}]}},{key:"getRangeList",value:function(e){var t=this.allCachedKeys,n={timeRange:[],contentRange:[]};for(var i in t)if(t.hasOwnProperty(i)&&D()(i).call(i,e)>-1){var r,a,o=i.split("#");if(0===D()(r=o[2]).call(r,"pretime"))n.timeRange.push([0,O()(F()(a=o[2]).call(a,7))]);else n.contentRange.push([B()(o[2]),B()(o[3])])}return n}},{key:"hasItemSameVid",value:function(e){if(!e)return!1;var t=this.allCachedKeys;for(var n in t)if(t.hasOwnProperty(n)){if(n===e)return n;var i=n.split("#"),r=e.split("#");if(i.length>=4&&r.length>=4&&i[0]===r[0]){var a,o;if(0===D()(a=i[2]).call(a,"pretime")&&0===D()(o=r[2]).call(o,"pretime"))return n;var s=[B()(i[2]),B()(i[3])],u=[B()(r[2]),B()(r[3])];if(u[0]>=s[0]&&u[1]>u[0]&&u[1]<=s[1])return n}}return!1}},{key:"removeOthers",value:function(){var e=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],n=this.allCachedKeys;for(var i in n)n.hasOwnProperty(i)&&i.split("#").length>=1&&function(){var n=i.split("#")[0];R()(t).call(t,(function(e){return e.split("#").length>=1&&e.split("#")[0]!==n}))&&(e.log("remove cache:".concat(i)),e.cacheInst.removeItem(i))}()}},{key:"getItemSameVid",value:function(e,t){var n,i=this.hasItemSameVid(e);return this.log(A()(n="getItemSameVid: key:".concat(e," checkResult:")).call(n,i)),i?this.cacheInst.getItem(i,t).then((function(e){return{value:e,key:i}})):b().resolve({})}},{key:"setItem",value:function(e,t){return this.cacheInst.setItem(e,t)}},{key:"allCachedKeys",get:function(){return this.cacheInst._allCachedKeys}},{key:"cacheInst",get:function(){return this._preloadManager._cacheInst}},{key:"cancelPreloadByVid",value:function(e){if(e){for(var t=this._preloadManager._preloadDataList,n=[],i=0;i<t.length;i++){t[i].data.vid!==e?n.push(t[i]):this.log("cancelPreloadByVid",e)}this._preloadManager._preloadDataList=n}}},{key:"cancelLoading",value:function(e){var t;this._endLoadFragments(),this._endLoadChunk();var n=this._preloadManager;if(n._currentPreloadInst){var i=n._currentPreloadInst._toLoadList,r=[];M()(i).call(i,(function(t){return t.playerId!==e&&r.push(t),t})),n._currentPreloadInst._toLoadList=r}var a=[],o=[];M()(t=n._preloadDataList).call(t,(function(t){return t.playerId!==e?a.push(t):o.push(t.data.vid),t})),this.log("cancelLoading",e,o.join(",")),n._preloadDataList=a}},{key:"checkIfExistInList",value:function(e){for(var t=this._preloadManager._preloadDataList,n=0;n<t.length;n++)if(e===t[n].data.vid)return!0;return!1}},{key:"addPreloader",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(e.data){e.data.vtype||(e.data.vtype=q.l0.MP4);var i=e.data.vid,r=this.checkIfExistInList(i);n&&i===n||r||(e.playerId=t,this.addDashPreloader(e))}}},{key:"addPreloaderList",value:function(){for(var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[],t=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"",n=[],i=0;i<e.length;i++){var r=e[i].data,a=r.vid,o=r.vtype,s=this.checkIfExistInList(a);t&&a===t||s||(o||(e[i].data.vtype=q.l0.MP4),n.push(e[i]))}this.addDashPreloaderList(n)}},{key:"setUserSelectDefinition",value:function(e){this._preloadManager&&(this._preloadManager.userDefinition=e)}},{key:"getUserSelectDefinition",value:function(){return this._preloadManager.userDefinition||null}},{key:"destroy",value:function(){this._endLoadFragments(),this._endLoadChunk(),this.cancelLoading(this.playerId)}}],[{key:"PRELOAD_TYPES",get:function(){return le}},{key:"BitRateAdapter",get:function(){return ce},set:function(e){ce=e}},{key:"generateUniqueKey",value:function(e){var t,n,i,r,a=e.vid,o=e.mediaType,s=e.definition,u=e.codecType,l=e.vtype;return o=o||"video",s=s||"-1",u=u||se,l=l||q.l0.MP4,a?A()(t=A()(n=A()(i=A()(r="".concat(a,"#")).call(r,o,"#")).call(i,u,"#")).call(n,l,"#")).call(t,s):null}}]),s}(Y.Z)},88260:function(e,t,n){n.d(t,{sF:function(){return m},Uy:function(){return v},on:function(){return b},Ru:function(){return T},f4:function(){return E}});var i=n(54882),r=n.n(i),a=(n(14652),n(50685)),o=n(90934),s=n(12544),u=n.n(s),l=n(18556),c=n.n(l),f=n(97448),d=n.n(f),h=n(30562),p=n.n(h),_=n(12922),g=n(94978),y=(n(83867),n(54590),n(32189),n(12551),n(94719),n(96362),n(44148),n(67846),n(72831),n(35827),(0,_.Z)((function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},n=t.url,i=t.method,a=void 0===i?"GET":i,o=t.type,s=void 0===o?"arraybuffer":o,l=t.data,f=void 0===l?{}:l;return(0,g.Z)(this,e),new(u())((function(e,t){var i,o=new window.XMLHttpRequest,u=a.toUpperCase(),l=[];if(s&&(o.responseType=s),c()(i=d()(f)).call(i,(function(e){l.push("k=".concat(f[e]))})),"GET"===u){var h;o.open(u,r()(h="".concat(n,"?")).call(h,l.join("&"))),o.send()}else{if("POST"!==u)throw new Error("xhr ".concat(u," is not supported"));o.open(u,n,!0),o.setRequestHeader("Content-Type","application/json"),o.send(p()(f))}o.onload=function(){200===o.status||206===o.status?e(o):t(o)},o.onerror=function(){t(o)}}))})));function v(e,t,n){var i,o=new a.Z;return new y({type:"json",method:"POST",url:n,data:{drm_type:"22",license_request:[{vid:e,kids:r()(i=[]).call(i,t)}]}}).then((function(n){var i=n.response;if(i){var r=i.play_licenses[e][t];o.resolve(r)}else o.reject()})).catch((function(){o.reject()})),o}function m(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",t=arguments.length>1?arguments[1]:undefined,n=arguments.length>2?arguments[2]:undefined,i=arguments.length>3?arguments[3]:undefined,r=new a.Z;if(n){(0,o.cM)("[getKeyValue]>before openBox");var s=i.awManager.openBox(n);if((0,o.cM)("[getKeyValue]>after openBox: ",s),t){var u={clearKeys:{}};u.clearKeys[t]=s,r.resolve(u)}else r.resolve(s)}else{var l=v(e,t,i.config.getLicenseUrl);l.id="requestPromise",i._addPendingPromise(l),l.then((function(e){if(i._removePendingPromise(l),i.awManager){(0,o.cM)("[getKeyValue]>before openBox");var n=i.awManager.openBox(e);(0,o.cM)("[getKeyValue]>after openBox: ",n);var a={clearKeys:{}};a.clearKeys[t]=n,r.resolve(a)}else(0,o.cM)("[getKeyValue]>awManager not exist, player destroyed")})).catch((function(e){throw(0,o.cM)("[getKeyValue]>requestPromise reject"),e}))}return r}var T={playBtnClick:function(e,t,n,i){e.paused||e.waitingMoreBuffer&&(e.waitingMoreBuffer=!1),i.call(e,t,n)}},E={waiting:function(e,t){var n=e.player,i=e.eventName;n.waitingMoreBuffer=!0,t(i,e)},play:function(e,t){var n=e.player,i=e.eventName;n.waitingMoreBuffer||t(i,e)},pause:function(e,t){var n=e.player,i=e.eventName;n.waitingMoreBuffer||t(i,e)},seeking:function(e,t){var n=e.player,i=e.eventName;n.isSeekingStart=!0,t(i,e)},progress:function(e,t){(0,o.cM)(">>>>progress");var n=e.player,i=e.eventName;if(n.waitingMoreBuffer){var r=n.getBufferedRange(n.buffered2);0===r[0]&&0===r[1]||(n.inWaitingStart===undefined||n.isSeekingStart?((0,o.cM)("progress \u8d77\u64ad\u6216seek\u7ed3\u675f"),r[1]-n.currentTime>=(n.config.canplayWaterLevel||1)||r[1]>n.duration-1?((0,o.cM)("progress \u51fa\u8d77\u64ad\u6c34\u4f4d"),n.play()):((0,o.cM)("progress \u672a\u51fa\u8d77\u64ad\u6c34\u4f4d"),n.emit("waiting"))):((0,o.cM)("progress video\u5361\u987f\u7ed3\u675f"),r[1]-n.currentTime>=(n.config.bufferWaterLevel||5)||r[1]>n.duration-1?((0,o.cM)("progress \u51fa\u5361\u987f\u6c34\u4f4d"),n.play()):((0,o.cM)("progress \u672a\u51fa\u5361\u987f\u6c34\u4f4d"),n.emit("waiting"))))}t(i,e)},playing:function(e,t){var n=e.player,i=e.eventName;(0,o.cM)("playing");var r=n.getBufferedRange(n.buffered2);if(0===r[0]&&0===r[1])return(0,o.cM)("playing \u5f53\u524d\u64ad\u653e\u65f6\u523b\u6ca1\u6709\u7f13\u5b58 \u672a\u51fa\u6c34\u4f4d"),n.waitingMoreBuffer=!0,n.pause(),void t.call("waiting",e);n.inWaitingStart===undefined||n.isSeekingStart?((0,o.cM)("playing \u8d77\u64ad\u6216seek\u7ed3\u675f"),r[1]-n.currentTime>=(n.config.canplayWaterLevel||1)||r[1]>n.duration-1?((0,o.cM)("playing \u51fa\u8d77\u64ad\u6c34\u4f4d"),n.waitingMoreBuffer=!1,n.isSeekingStart=!1,t(i,e)):((0,o.cM)("playing \u672a\u51fa\u8d77\u64ad\u6c34\u4f4d"),n.waitingMoreBuffer=!0,n.pause(),t.call("waiting",e))):((0,o.cM)("playing video\u5361\u987f\u7ed3\u675f"),r[1]-n.currentTime>=(n.config.bufferWaterLevel||5)||r[1]>n.duration-1?((0,o.cM)("playing \u51fa\u5361\u987f\u6c34\u4f4d"),n.waitingMoreBuffer=!1,t(i,e)):((0,o.cM)("playing \u672a\u51fa\u5361\u987f\u6c34\u4f4d"),n.waitingMoreBuffer=!0,n.pause(),t.call("waiting",e)))}};function b(e,t,n,i){if(i)e.on(t,n),function(e,t,n,i){e.once(i,(function r(){e.off(t,n),e.off(i,r)}))}(e,t,n,i);else{e.on(t,(function i(r){n(r),e.off(t,i)}))}}},67573:function(e,t,n){n.d(t,{Z:function(){return x}});var i=n(38574),r=n.n(i),a=n(75423),o=n.n(a),s=n(10441),u=n.n(s),l=n(66581),c=n.n(l),f=n(84713),d=n.n(f),h=n(65776),p=n.n(h),_=n(95572),g=n.n(_),y=n(93162),v=n.n(y),m=n(88945),T=n.n(m),E=n(93326),b=n.n(E),w=n(61138),A=n.n(w),k=n(12544),R=n.n(k),S=n(24514),M=n.n(S),I=n(11235),D=n.n(I),P=n(11599),O=(n(5304),n(2248),n(8356),n(86919),n(83867),n(21592),n(26592),n(10954),n(8340),n(37920),n(86240),n(78344),n(2517),n(3244),n(60208),n(9368),n(60968),n(43146),n(55507),n(53511),n(68976),n(85653),n(80034),n(29928),n(23914),n(9190),n(71198),n(47146),n(42755),n(81584),n(86499),n(47976),n(14470),n(38750),n(21177),n(44145),n(41863),n(49126),n(1765),n(89253),n(91763),n(4584),n(32543),n(67858),n(49339),n(92429),n(3751),n(64100),n(86267),n(18839),n(89771),n(54590),n(32189),n(12551),n(94719),n(96362),n(44148),n(35827),n(50232),n(46863));!function(e,t){var n,i=(n="undefined"!=typeof document&&document.currentScript?document.currentScript.src:undefined,function(e){var t,i,a,s=void 0!==(e=e||{})?e:{},l={};for(a in s)s.hasOwnProperty(a)&&(l[a]=s[a]);if(s.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -s ENVIRONMENT=web or -s ENVIRONMENT=node)");var f="";if(document.currentScript&&(f=document.currentScript.src),n&&(f=n),f=0!==r()(f).call(f,"blob:")?f.substr(0,o()(f).call(f,"/")+1):"","object"!==("undefined"==typeof window?"undefined":(0,P.Z)(window))&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var h,_=s.print||u()(t=console.log).call(t,console),y=s.printErr||u()(i=console.warn).call(i,console);for(a in l)l.hasOwnProperty(a)&&(s[a]=l[a]);function m(e){m.shown||(m.shown={}),m.shown[e]||(m.shown[e]=1,y(e))}l=null,s.arguments&&s.arguments,c()(s,"arguments")||d()(s,"arguments",{configurable:!0,get:function(){ie("Module.arguments has been replaced with plain arguments_")}}),s.thisProgram&&s.thisProgram,c()(s,"thisProgram")||d()(s,"thisProgram",{configurable:!0,get:function(){ie("Module.thisProgram has been replaced with plain thisProgram")}}),s.quit&&s.quit,c()(s,"quit")||d()(s,"quit",{configurable:!0,get:function(){ie("Module.quit has been replaced with plain quit_")}}),I("undefined"==typeof s.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),I("undefined"==typeof s.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),I("undefined"==typeof s.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),I("undefined"==typeof s.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),I("undefined"==typeof s.read,"Module.read option was removed (modify read_ in JS)"),I("undefined"==typeof s.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),I("undefined"==typeof s.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),I("undefined"==typeof s.setWindowTitle,"Module.setWindowTitle option was removed (modify setWindowTitle in JS)"),c()(s,"read")||d()(s,"read",{configurable:!0,get:function(){ie("Module.read has been replaced with plain read_")}}),c()(s,"readAsync")||d()(s,"readAsync",{configurable:!0,get:function(){ie("Module.readAsync has been replaced with plain readAsync")}}),c()(s,"readBinary")||d()(s,"readBinary",{configurable:!0,get:function(){ie("Module.readBinary has been replaced with plain readBinary")}}),Re=function(){ie("cannot use the stack before compiled code is ready to run, and has provided stack access")},s.wasmBinary&&(h=s.wasmBinary),c()(s,"wasmBinary")||d()(s,"wasmBinary",{configurable:!0,get:function(){ie("Module.wasmBinary has been replaced with plain wasmBinary")}}),s.noExitRuntime&&s.noExitRuntime,c()(s,"noExitRuntime")||d()(s,"noExitRuntime",{configurable:!0,get:function(){ie("Module.noExitRuntime has been replaced with plain noExitRuntime")}});var E,w={Memory:function(e){return{buffer:new ArrayBuffer(65536*e.initial),grow:function(e){var t=this.buffer,n=Me(e);return I(this.buffer!==t),n}}},Table:function(e){var t=new Array(e.initial);return t.grow=function(e){t.length>=1&&ie("Unable to grow wasm table. Use a higher value for RESERVED_FUNCTION_POINTERS or set ALLOW_TABLE_GROWTH."),t.push(null)},t.set=function(e,n){t[e]=n},t.get=function(e){return t[e]},t},Module:function(e){return{}},Instance:function(e,t){var n=function(e,t,n){return function(e,t,i){var r=t.memory,a=n,o=new e.Int8Array(i);new e.Int16Array(i);var s=new e.Int32Array(i),u=new e.Uint8Array(i);new e.Uint16Array(i);var l=new e.Uint32Array(i);new e.Float32Array(i),new e.Float64Array(i);var c=e.Math.imul;e.Math.fround,e.Math.abs,e.Math.clz32,e.Math.min,e.Math.max,e.Math.floor,e.Math.ceil,e.Math.sqrt,t.abort,e.NaN,e.Infinity;var f=t.emscripten_memcpy_big,d=t.emscripten_resize_heap,h=t.__unlock,p=t.__lock,_=9744;function g(e){var t,n=0;return t=b(),(e=(n=s[388])+e|0)>>>0<=t<<16>>>0||d(0|e)?(s[388]=e,n):(s[256]=48,-1)}function y(e){var t,n=0,i=0,r=0,a=0,o=0,c=0,f=0,d=0,h=0,p=0,y=0,v=0;_=t=_-16|0;e:{t:{n:{i:{r:{a:{o:{s:{u:{l:{c:{if((e|=0)>>>0<=244){if(3&(n=(o=s[261])>>>(e=(c=e>>>0<11?16:e+11&-8)>>>3))){e=(n=s[1092+(a=(i=e+(1&(-1^n))|0)<<3)>>2])+8|0,(0|(r=s[n+8>>2]))!=(0|(a=a+1084|0))?(s[r+12>>2]=a,s[a+8>>2]=r):(y=1044,v=E(i)&o,s[y>>2]=v),i<<=3,s[n+4>>2]=3|i,s[4+(n=n+i|0)>>2]=1|s[n+4>>2];break e}if(c>>>0<=(d=s[263])>>>0)break c;if(n){i=n=(e=(0-(e=(0-(i=2<<e)|i)&n<<e)&e)-1|0)>>>12&16,i|=n=(e>>>=n)>>>5&8,i|=n=(e>>>=n)>>>2&4,n=s[1092+(r=(i=((i|=n=(e>>>=n)>>>1&2)|(n=(e>>>=n)>>>1&1))+(e>>>n)|0)<<3)>>2],(0|(e=s[n+8>>2]))!=(0|(r=r+1084|0))?(s[e+12>>2]=r,s[r+8>>2]=e):(o=E(i)&o,s[261]=o),e=n+8|0,s[n+4>>2]=3|c,a=(i<<=3)-c|0,s[4+(f=n+c|0)>>2]=1|a,s[n+i>>2]=a,d&&(n=1084+((i=d>>>3)<<3)|0,r=s[266],(i=1<<i)&o?i=s[n+8>>2]:(s[261]=i|o,i=n),s[n+8>>2]=r,s[i+12>>2]=r,s[r+12>>2]=n,s[r+8>>2]=i),s[266]=f,s[263]=a;break e}if(!(p=s[262]))break c;for(i=n=(e=(p&0-p)-1|0)>>>12&16,i|=n=(e>>>=n)>>>5&8,i|=n=(e>>>=n)>>>2&4,n=s[1348+(((i|=n=(e>>>=n)>>>1&2)|(n=(e>>>=n)>>>1&1))+(e>>>n)<<2)>>2],r=(-8&s[n+4>>2])-c|0,i=n;(e=s[i+16>>2])||(e=s[i+20>>2]);)r=(i=(a=(-8&s[e+4>>2])-c|0)>>>0<r>>>0)?a:r,n=i?e:n,i=e;if(h=s[n+24>>2],(0|(a=s[n+12>>2]))!=(0|n)){e=s[n+8>>2],s[e+12>>2]=a,s[a+8>>2]=e;break t}if(!(e=s[(i=n+20|0)>>2])){if(!(e=s[n+16>>2]))break l;i=n+16|0}for(;f=i,a=e,(e=s[(i=e+20|0)>>2])||(i=a+16|0,e=s[a+16>>2]););s[f>>2]=0;break t}if(c=-1,!(e>>>0>4294967231)&&(c=-8&(n=e+11|0),d=s[262])){i=0-c|0,o=0,(n>>>=8)&&(o=31,c>>>0>16777215||(o=28+((e=((o=(n<<=r=n+1048320>>>16&8)<<(e=n+520192>>>16&4))<<(n=o+245760>>>16&2)>>>15)-(n|e|r)|0)<<1|c>>>e+21&1)|0));f:{d:{if(r=s[1348+(o<<2)>>2])for(n=c<<(31==(0|o)?0:25-(o>>>1)|0),e=0;;){if(!((f=(-8&s[r+4>>2])-c|0)>>>0>=i>>>0||(a=r,i=f))){i=0,e=r;break d}if(f=s[r+20>>2],r=s[16+((n>>>29&4)+r|0)>>2],e=f?(0|f)==(0|r)?e:f:e,n<<=0!=(0|r),!r)break}else e=0;if(!(e|a)){if(!(e=(0-(e=2<<o)|e)&d))break c;r=n=(e=(e&0-e)-1|0)>>>12&16,r|=n=(e>>>=n)>>>5&8,r|=n=(e>>>=n)>>>2&4,e=s[1348+(((r|=n=(e>>>=n)>>>1&2)|(n=(e>>>=n)>>>1&1))+(e>>>n)<<2)>>2]}if(!e)break f}for(;i=(n=(r=(-8&s[e+4>>2])-c|0)>>>0<i>>>0)?r:i,a=n?e:a,e=(n=s[e+16>>2])||s[e+20>>2];);}if(!(!a|i>>>0>=s[263]-c>>>0)){if(f=s[a+24>>2],(0|a)!=(0|(n=s[a+12>>2]))){e=s[a+8>>2],s[e+12>>2]=n,s[n+8>>2]=e;break n}if(!(e=s[(r=a+20|0)>>2])){if(!(e=s[a+16>>2]))break u;r=a+16|0}for(;o=r,n=e,(e=s[(r=e+20|0)>>2])||(r=n+16|0,e=s[n+16>>2]););s[o>>2]=0;break n}}}if((n=s[263])>>>0>=c>>>0){e=s[266],(i=n-c|0)>>>0>=16?(s[263]=i,r=e+c|0,s[266]=r,s[r+4>>2]=1|i,s[e+n>>2]=i,s[e+4>>2]=3|c):(s[266]=0,s[263]=0,s[e+4>>2]=3|n,s[4+(n=e+n|0)>>2]=1|s[n+4>>2]),e=e+8|0;break e}if((r=s[264])>>>0>c>>>0){n=r-c|0,s[264]=n,i=(e=s[267])+c|0,s[267]=i,s[i+4>>2]=1|n,s[e+4>>2]=3|c,e=e+8|0;break e}if(e=0,i=a=c+47|0,s[379]?n=s[381]:(s[382]=-1,s[383]=-1,s[380]=4096,s[381]=4096,s[379]=t+12&-16^1431655768,s[384]=0,s[372]=0,n=4096),(i=(o=i+n|0)&(f=0-n|0))>>>0<=c>>>0)break e;if((n=s[371])&&(h=(d=s[369])+i|0)>>>0<=d>>>0|h>>>0>n>>>0)break e;if(4&u[1488])break a;c:{f:{if(n=s[267])for(e=1492;;){if((d=s[e>>2])+s[e+4>>2]>>>0>n>>>0&&d>>>0<=n>>>0)break f;if(!(e=s[e+8>>2]))break}if(-1==(0|(n=g(0))))break o;if(o=i,(r=(e=s[380])+-1|0)&n&&(o=(i-n|0)+(n+r&0-e)|0),o>>>0<=c>>>0|o>>>0>2147483646)break o;if((e=s[371])&&(f=(r=s[369])+o|0)>>>0<=r>>>0|f>>>0>e>>>0)break o;if((0|n)!=(0|(e=g(o))))break c;break r}if((o=f&o-r)>>>0>2147483646)break o;if((0|(n=g(o)))==(s[e>>2]+s[e+4>>2]|0))break s;e=n}if(n=e,!(c+48>>>0<=o>>>0|o>>>0>2147483646|-1==(0|e))){if((e=(e=s[381])+(a-o|0)&0-e)>>>0>2147483646)break r;if(-1!=(0|g(e))){o=e+o|0;break r}g(0-o|0);break o}if(-1!=(0|n))break r;break o}a=0;break t}n=0;break n}if(-1!=(0|n))break r}s[372]=4|s[372]}if(i>>>0>2147483646)break i;if((n=g(i))>>>0>=(e=g(0))>>>0|-1==(0|n)|-1==(0|e))break i;if((o=e-n|0)>>>0<=c+40>>>0)break i}e=s[369]+o|0,s[369]=e,e>>>0>l[370]&&(s[370]=e);r:{a:{o:{if(i=s[267]){for(e=1492;;){if(((r=s[e>>2])+(a=s[e+4>>2])|0)==(0|n))break o;if(!(e=s[e+8>>2]))break}break a}for(n>>>0>=(e=s[265])>>>0&&e||(s[265]=n),e=0,s[374]=o,s[373]=n,s[269]=-1,s[270]=s[379],s[376]=0;r=1084+(i=e<<3)|0,s[i+1092>>2]=r,s[i+1096>>2]=r,32!=(0|(e=e+1|0)););r=(e=o+-40|0)-(i=n+8&7?-8-n&7:0)|0,s[264]=r,i=n+i|0,s[267]=i,s[i+4>>2]=1|r,s[4+(e+n|0)>>2]=40,s[268]=s[383];break r}if(!(8&u[e+12|0]|n>>>0<=i>>>0|r>>>0>i>>>0)){s[e+4>>2]=a+o,n=(e=i+8&7?-8-i&7:0)+i|0,s[267]=n,e=(r=s[264]+o|0)-e|0,s[264]=e,s[n+4>>2]=1|e,s[4+(i+r|0)>>2]=40,s[268]=s[383];break r}}n>>>0<(a=s[265])>>>0&&(s[265]=n,a=0),r=n+o|0,e=1492;a:{o:{s:{u:{l:{c:{for(;;){if((0|r)!=s[e>>2]){if(e=s[e+8>>2])continue;break c}break}if(!(8&u[e+12|0]))break l}for(e=1492;;){if((r=s[e>>2])>>>0<=i>>>0&&(a=r+s[e+4>>2]|0)>>>0>i>>>0)break u;e=s[e+8>>2]}}if(s[e>>2]=n,s[e+4>>2]=s[e+4>>2]+o,s[4+(h=(n+8&7?-8-n&7:0)+n|0)>>2]=3|c,e=((n=r+(r+8&7?-8-r&7:0)|0)-h|0)-c|0,f=c+h|0,(0|n)==(0|i)){s[267]=f,e=s[264]+e|0,s[264]=e,s[f+4>>2]=1|e;break o}if(s[266]==(0|n)){s[266]=f,e=s[263]+e|0,s[263]=e,s[f+4>>2]=1|e,s[e+f>>2]=e;break o}if(1==(3&(i=s[n+4>>2]))){p=-8&i;l:if(i>>>0<=255){if(a=i>>>3,i=s[n+8>>2],(0|(r=s[n+12>>2]))==(0|i)){y=1044,v=s[261]&E(a),s[y>>2]=v;break l}s[i+12>>2]=r,s[r+8>>2]=i}else{if(d=s[n+24>>2],(0|(o=s[n+12>>2]))==(0|n))if((c=s[(r=n+20|0)>>2])||(c=s[(r=n+16|0)>>2])){for(;i=r,o=c,(c=s[(r=c+20|0)>>2])||(r=o+16|0,c=s[o+16>>2]););s[i>>2]=0}else o=0;else i=s[n+8>>2],s[i+12>>2]=o,s[o+8>>2]=i;if(d){i=s[n+28>>2];c:{if(s[(r=1348+(i<<2)|0)>>2]==(0|n)){if(s[r>>2]=o,o)break c;y=1048,v=s[262]&E(i),s[y>>2]=v;break l}if(s[d+(s[d+16>>2]==(0|n)?16:20)>>2]=o,!o)break l}s[o+24>>2]=d,(i=s[n+16>>2])&&(s[o+16>>2]=i,s[i+24>>2]=o),(i=s[n+20>>2])&&(s[o+20>>2]=i,s[i+24>>2]=o)}}n=n+p|0,e=e+p|0}if(s[n+4>>2]=-2&s[n+4>>2],s[f+4>>2]=1|e,s[e+f>>2]=e,e>>>0<=255){e=1084+((n=e>>>3)<<3)|0,(i=s[261])&(n=1<<n)?n=s[e+8>>2]:(s[261]=n|i,n=e),s[e+8>>2]=f,s[n+12>>2]=f,s[f+12>>2]=e,s[f+8>>2]=n;break o}if(n=0,(r=e>>>8)&&(n=31,e>>>0>16777215||(n=28+((n=((c=(r<<=a=r+1048320>>>16&8)<<(n=r+520192>>>16&4))<<(r=c+245760>>>16&2)>>>15)-(r|n|a)|0)<<1|e>>>n+21&1)|0)),s[(i=f)+28>>2]=n,s[f+16>>2]=0,s[f+20>>2]=0,i=1348+(n<<2)|0,(r=s[262])&(a=1<<n)){for(r=e<<(31==(0|n)?0:25-(n>>>1)|0),n=s[i>>2];;){if(i=n,(-8&s[n+4>>2])==(0|e))break s;if(n=r>>>29,r<<=1,!(n=s[16+(a=(4&n)+i|0)>>2]))break}s[a+16>>2]=f}else s[262]=r|a,s[i>>2]=f;s[f+24>>2]=i,s[f+12>>2]=f,s[f+8>>2]=f;break o}for(f=(e=o+-40|0)-(r=n+8&7?-8-n&7:0)|0,s[264]=f,r=n+r|0,s[267]=r,s[r+4>>2]=1|f,s[4+(e+n|0)>>2]=40,s[268]=s[383],s[(r=(e=(a+(a+-39&7?39-a&7:0)|0)-47|0)>>>0<i+16>>>0?i:e)+4>>2]=27,e=s[376],s[r+16>>2]=s[375],s[r+20>>2]=e,e=s[374],s[r+8>>2]=s[373],s[r+12>>2]=e,s[375]=r+8,s[374]=o,s[373]=n,s[376]=0,e=r+24|0;s[e+4>>2]=7,n=e+8|0,e=e+4|0,n>>>0<a>>>0;);if((0|i)==(0|r))break r;if(s[r+4>>2]=-2&s[r+4>>2],a=r-i|0,s[i+4>>2]=1|a,s[r>>2]=a,a>>>0<=255){e=1084+((n=a>>>3)<<3)|0,(r=s[261])&(n=1<<n)?n=s[e+8>>2]:(s[261]=n|r,n=e),s[e+8>>2]=i,s[n+12>>2]=i,s[i+12>>2]=e,s[i+8>>2]=n;break r}if(s[i+16>>2]=0,s[i+20>>2]=0,e=0,(r=a>>>8)&&(e=31,a>>>0>16777215||(e=28+((e=((f=(r<<=o=r+1048320>>>16&8)<<(e=r+520192>>>16&4))<<(r=f+245760>>>16&2)>>>15)-(r|e|o)|0)<<1|a>>>e+21&1)|0)),s[(n=i)+28>>2]=e,n=1348+(e<<2)|0,(r=s[262])&(o=1<<e)){for(e=a<<(31==(0|e)?0:25-(e>>>1)|0),n=s[n>>2];;){if(r=n,(0|a)==(-8&s[n+4>>2]))break a;if(n=e>>>29,e<<=1,!(n=s[16+(o=r+(4&n)|0)>>2]))break}s[o+16>>2]=i,s[i+24>>2]=r}else s[262]=r|o,s[n>>2]=i,s[i+24>>2]=n;s[i+12>>2]=i,s[i+8>>2]=i;break r}e=s[i+8>>2],s[e+12>>2]=f,s[i+8>>2]=f,s[f+24>>2]=0,s[f+12>>2]=i,s[f+8>>2]=e}e=h+8|0;break e}e=s[r+8>>2],s[e+12>>2]=i,s[r+8>>2]=i,s[i+24>>2]=0,s[i+12>>2]=r,s[i+8>>2]=e}if(!((e=s[264])>>>0<=c>>>0)){n=e-c|0,s[264]=n,i=(e=s[267])+c|0,s[267]=i,s[i+4>>2]=1|n,s[e+4>>2]=3|c,e=e+8|0;break e}}s[256]=48,e=0;break e}n:if(f){e=s[a+28>>2];i:{if(s[(r=1348+(e<<2)|0)>>2]==(0|a)){if(s[r>>2]=n,n)break i;d=E(e)&d,s[262]=d;break n}if(s[f+(s[f+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}s[n+24>>2]=f,(e=s[a+16>>2])&&(s[n+16>>2]=e,s[e+24>>2]=n),(e=s[a+20>>2])&&(s[n+20>>2]=e,s[e+24>>2]=n)}n:if(i>>>0<=15)e=i+c|0,s[a+4>>2]=3|e,s[4+(e=e+a|0)>>2]=1|s[e+4>>2];else if(s[a+4>>2]=3|c,s[4+(r=a+c|0)>>2]=1|i,s[i+r>>2]=i,i>>>0<=255)e=1084+((n=i>>>3)<<3)|0,(i=s[261])&(n=1<<n)?n=s[e+8>>2]:(s[261]=n|i,n=e),s[e+8>>2]=r,s[n+12>>2]=r,s[r+12>>2]=e,s[r+8>>2]=n;else{e=0,(c=i>>>8)&&(e=31,i>>>0>16777215||(e=28+((e=((f=(c<<=o=c+1048320>>>16&8)<<(e=c+520192>>>16&4))<<(c=f+245760>>>16&2)>>>15)-(c|e|o)|0)<<1|i>>>e+21&1)|0)),s[(n=r)+28>>2]=e,s[r+16>>2]=0,s[r+20>>2]=0,n=1348+(e<<2)|0;i:{if((c=1<<e)&d){for(e=i<<(31==(0|e)?0:25-(e>>>1)|0),c=s[n>>2];;){if((-8&s[(n=c)+4>>2])==(0|i))break i;if(c=e>>>29,e<<=1,!(c=s[16+(o=(4&c)+n|0)>>2]))break}s[o+16>>2]=r}else s[262]=c|d,s[n>>2]=r;s[r+24>>2]=n,s[r+12>>2]=r,s[r+8>>2]=r;break n}e=s[n+8>>2],s[e+12>>2]=r,s[n+8>>2]=r,s[r+24>>2]=0,s[r+12>>2]=n,s[r+8>>2]=e}e=a+8|0;break e}t:if(h){e=s[n+28>>2];n:{if(s[(i=1348+(e<<2)|0)>>2]==(0|n)){if(s[i>>2]=a,a)break n;y=1048,v=E(e)&p,s[y>>2]=v;break t}if(s[h+(s[h+16>>2]==(0|n)?16:20)>>2]=a,!a)break t}s[a+24>>2]=h,(e=s[n+16>>2])&&(s[a+16>>2]=e,s[e+24>>2]=a),(e=s[n+20>>2])&&(s[a+20>>2]=e,s[e+24>>2]=a)}r>>>0<=15?(e=r+c|0,s[n+4>>2]=3|e,s[4+(e=e+n|0)>>2]=1|s[e+4>>2]):(s[n+4>>2]=3|c,s[4+(c=n+c|0)>>2]=1|r,s[r+c>>2]=r,d&&(e=1084+((i=d>>>3)<<3)|0,a=s[266],(i=1<<i)&o?i=s[e+8>>2]:(s[261]=i|o,i=e),s[e+8>>2]=a,s[i+12>>2]=a,s[a+12>>2]=e,s[a+8>>2]=i),s[266]=c,s[263]=r),e=n+8|0}return _=t+16|0,0|e}function v(e){var t=0,n=0,i=0,r=0,a=0,o=0,u=0,c=0,f=0;e:if(e|=0){a=(i=e+-8|0)+(e=-8&(n=s[e+-4>>2]))|0;t:if(!(1&n)){if(!(3&n))break e;if((i=i-(n=s[i>>2])|0)>>>0<l[265])break e;if(e=e+n|0,s[266]==(0|i)){if(3==(3&(n=s[a+4>>2])))return s[263]=e,s[a+4>>2]=-2&n,s[i+4>>2]=1|e,void(s[e+i>>2]=e)}else{if(n>>>0<=255){if(r=s[i+8>>2],n>>>=3,(0|(t=s[i+12>>2]))==(0|r)){c=1044,f=s[261]&E(n),s[c>>2]=f;break t}s[r+12>>2]=t,s[t+8>>2]=r;break t}if(u=s[i+24>>2],(0|i)==(0|(n=s[i+12>>2])))if((t=s[(r=i+20|0)>>2])||(t=s[(r=i+16|0)>>2])){for(;o=r,(t=s[(r=(n=t)+20|0)>>2])||(r=n+16|0,t=s[n+16>>2]););s[o>>2]=0}else n=0;else t=s[i+8>>2],s[t+12>>2]=n,s[n+8>>2]=t;if(!u)break t;r=s[i+28>>2];n:{if(s[(t=1348+(r<<2)|0)>>2]==(0|i)){if(s[t>>2]=n,n)break n;c=1048,f=s[262]&E(r),s[c>>2]=f;break t}if(s[u+(s[u+16>>2]==(0|i)?16:20)>>2]=n,!n)break t}if(s[n+24>>2]=u,(t=s[i+16>>2])&&(s[n+16>>2]=t,s[t+24>>2]=n),!(t=s[i+20>>2]))break t;s[n+20>>2]=t,s[t+24>>2]=n}}if(!(a>>>0<=i>>>0)&&1&(n=s[a+4>>2])){t:{if(!(2&n)){if(s[267]==(0|a)){if(s[267]=i,e=s[264]+e|0,s[264]=e,s[i+4>>2]=1|e,s[266]!=(0|i))break e;return s[263]=0,void(s[266]=0)}if(s[266]==(0|a))return s[266]=i,e=s[263]+e|0,s[263]=e,s[i+4>>2]=1|e,void(s[e+i>>2]=e);e=(-8&n)+e|0;n:if(n>>>0<=255){if(n>>>=3,(0|(t=s[a+8>>2]))==(0|(r=s[a+12>>2]))){c=1044,f=s[261]&E(n),s[c>>2]=f;break n}s[t+12>>2]=r,s[r+8>>2]=t}else{if(u=s[a+24>>2],(0|a)==(0|(n=s[a+12>>2])))if((t=s[(r=a+20|0)>>2])||(t=s[(r=a+16|0)>>2])){for(;o=r,(t=s[(r=(n=t)+20|0)>>2])||(r=n+16|0,t=s[n+16>>2]););s[o>>2]=0}else n=0;else t=s[a+8>>2],s[t+12>>2]=n,s[n+8>>2]=t;if(u){r=s[a+28>>2];i:{if(s[(t=1348+(r<<2)|0)>>2]==(0|a)){if(s[t>>2]=n,n)break i;c=1048,f=s[262]&E(r),s[c>>2]=f;break n}if(s[u+(s[u+16>>2]==(0|a)?16:20)>>2]=n,!n)break n}s[n+24>>2]=u,(t=s[a+16>>2])&&(s[n+16>>2]=t,s[t+24>>2]=n),(t=s[a+20>>2])&&(s[n+20>>2]=t,s[t+24>>2]=n)}}if(s[i+4>>2]=1|e,s[e+i>>2]=e,s[266]!=(0|i))break t;return void(s[263]=e)}s[a+4>>2]=-2&n,s[i+4>>2]=1|e,s[e+i>>2]=e}if(e>>>0<=255)return n=1084+((e>>>=3)<<3)|0,(t=s[261])&(e=1<<e)?e=s[n+8>>2]:(s[261]=e|t,e=n),s[n+8>>2]=i,s[e+12>>2]=i,s[i+12>>2]=n,void(s[i+8>>2]=e);s[i+16>>2]=0,s[i+20>>2]=0,t=0,(r=e>>>8)&&(t=31,e>>>0>16777215||(t=r,t<<=r=r+1048320>>>16&8,t=28+((t=((t<<=u=t+520192>>>16&4)<<(o=t+245760>>>16&2)>>>15)-(o|r|u)|0)<<1|e>>>t+21&1)|0)),s[(n=i)+28>>2]=t,o=1348+(t<<2)|0;t:if((r=s[262])&(n=1<<t)){r=e<<(31==(0|t)?0:25-(t>>>1)|0),n=s[o>>2];n:{for(;;){if(t=n,(-8&s[n+4>>2])==(0|e))break n;if(n=r>>>29,r<<=1,!(n=s[16+(o=t+(4&n)|0)>>2]))break}s[o+16>>2]=i,s[i+12>>2]=i,s[i+24>>2]=t,s[i+8>>2]=i;break t}e=s[t+8>>2],s[e+12>>2]=i,s[t+8>>2]=i,s[i+24>>2]=0,s[i+12>>2]=t,s[i+8>>2]=e}else s[262]=n|r,s[o>>2]=i,s[i+12>>2]=i,s[i+24>>2]=o,s[i+8>>2]=i;if(e=s[269]+-1|0,s[269]=e,!e){for(i=1500;i=(e=s[i>>2])+8|0,e;);s[269]=-1}}}}function m(e){var t,n=0;return l[e+20>>2]<=l[e+28>>2]||(a[s[e+36>>2]](e,0,0),s[e+20>>2])?((n=s[e+4>>2])>>>0<(t=s[e+8>>2])>>>0&&(n=n-t|0,a[s[e+40>>2]](e,n,n>>31,1)),s[e+28>>2]=0,s[e+16>>2]=0,s[e+20>>2]=0,s[e+4>>2]=0,s[e+8>>2]=0,0):-1}function T(e){for(var t=0,n=0;n=t,e;)e&=e-1,t=t+1|0;return n}function E(e){var t;return(-1>>>(t=31&e)&-2)<<t|(-1<<(e=0-e&31)&-2)>>>e}function b(){return i.byteLength/65536|0}return{__wasm_call_ctors:function(){},malloc:y,openBox:function(e,t){e|=0,t|=0;var n,i,r,a=0;return _=n=_-16|0,s[n+12>>2]=0,s[n+8>>2]=0,s[n+4>>2]=0,s[n>>2]=0,function(e,t,n,i,r,a){var l=0,c=0,f=0,d=0,h=0,p=0;if(l=(u[e+2|0]^u[e+1|0]^u[0|e])<<24>>24,s[a>>2]=l+-48,l=47+(t-l|0)|0,s[i>>2]=l,h=n,p=y(l),s[h>>2]=p,c=s[a>>2],f=y(c),s[r>>2]=f,(0|c)>0)for(l=c;;){if(f=(c-l|0)+f|0,c=(t-c|0)+e|0,o[0|f]=u[(t-l|0)+e|0]^u[c+-1|0]^u[c+-2|0],(0|(l=l+-1|0))<1){l=s[i>>2];break}f=s[r>>2],c=s[a>>2]}if((0|l)>0)for(;t=s[n>>2]+d|0,d=d+1|0,o[0|t]=u[d+e|0],(0|d)<s[i>>2];);}(e,t,n+12|0,n+4|0,n+8|0,n),function(e,t){var n=0,i=0,r=0,a=0,s=0,l=0,c=0;if((0|t)>=1)for(r=85,a=250;i=T(n),s=u[0|(l=e+n|0)],c=i,i=1&n,o[0|l]=c+(21+((s^(i?r:a))<<24>>24)|0),a=i?a:s,r=i?s:r,(0|(n=n+1|0))!=(0|t););}(e=s[n+12>>2],t=s[n+4>>2]),i=function(e){var t=0;return(255&(t=e+-48|0))>>>0<=9?t<<24>>24:((e+-97&255)>>>0<26?e+-87|0:-1)<<24>>24}(o[0|e]),s[n>>2]=i,r=y(a=t-i|0),o[r+(a=a+-1|0)|0]=0,(0|a)>=1&&function(e,t,n){var i,r=0;if(n>>>0>=8192)f(0|e,0|t,0|n);else{i=e+n|0;e:if(3&(e^t))if(i>>>0<4)n=e;else if((r=i+-4|0)>>>0<e>>>0)n=e;else for(n=e;o[0|n]=u[0|t],o[n+1|0]=u[t+1|0],o[n+2|0]=u[t+2|0],o[n+3|0]=u[t+3|0],t=t+4|0,(n=n+4|0)>>>0<=r>>>0;);else{t:if((0|n)<1)n=e;else if(3&e)for(n=e;;){if(o[0|n]=u[0|t],t=t+1|0,(n=n+1|0)>>>0>=i>>>0)break t;if(!(3&n))break}else n=e;if(!((e=-4&i)>>>0<64||n>>>0>(r=e+-64|0)>>>0))for(;s[n>>2]=s[t>>2],s[n+4>>2]=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[n+12>>2]=s[t+12>>2],s[n+16>>2]=s[t+16>>2],s[n+20>>2]=s[t+20>>2],s[n+24>>2]=s[t+24>>2],s[n+28>>2]=s[t+28>>2],s[n+32>>2]=s[t+32>>2],s[n+36>>2]=s[t+36>>2],s[n+40>>2]=s[t+40>>2],s[n+44>>2]=s[t+44>>2],s[n+48>>2]=s[t+48>>2],s[n+52>>2]=s[t+52>>2],s[n+56>>2]=s[t+56>>2],s[n+60>>2]=s[t+60>>2],t=t- -64|0,(n=n- -64|0)>>>0<=r>>>0;);if(n>>>0>=e>>>0)break e;for(;s[n>>2]=s[t>>2],t=t+4|0,(n=n+4|0)>>>0<e>>>0;);}if(n>>>0<i>>>0)for(;o[0|n]=u[0|t],t=t+1|0,(0|i)!=(0|(n=n+1|0)););}}(r,e+1|0,t+(-1^i)|0),v(e),v(s[n+8>>2]),_=n+16|0,0|r},free:v,__errno_location:function(){return 1024},fflush:function e(t){var n=0;if(t|=0)return s[t+76>>2],0|m(t);if(s[260]&&(n=e(s[260])),p(1028),t=s[259])for(;l[t+20>>2]>l[t+28>>2]&&(n=m(t)|n),t=s[t+56>>2];);return h(1028),0|n},setThrew:function(e,t){e|=0,t|=0,s[385]||(s[386]=t,s[385]=e)},stackSave:function(){return 0|_},stackAlloc:function(e){return _=e=_-(e|=0)&-16,0|e},stackRestore:function(e){_=e|=0},__growWasmMemory:function(t){return 0|function(t){t|=0;var n=0|b(),a=n+t|0;if(n<a&&a<65536){var f=new ArrayBuffer(c(a,65536)),d=new e.Int8Array(f);d.set(o),o=d,o=new e.Int8Array(f),new e.Int16Array(f),s=new e.Int32Array(f),u=new e.Uint8Array(f),new e.Uint16Array(f),l=new e.Uint32Array(f),new e.Float32Array(f),new e.Float64Array(f),i=f,r.buffer=f}return n}(0|(t|=0))}}}({Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array,NaN:NaN,Infinity:Infinity,Math:Math},e,t.buffer)}(fe,E,k);return{exports:n}},instantiate:function(e,t){return{then:function(n,i){n({instance:new w.Instance(new w.Module(e,t))})}}},RuntimeError:Error};h=[],"object"!==(0,P.Z)(w)&&ie("No WebAssembly support found. Build with -s WASM=0 to target JavaScript instead.");var k=new w.Table({initial:1,maximum:1,element:"anyfunc"}),S=!1;function I(e,t){e||ie("Assertion failed: "+t)}var O,x,F,C,B,L="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):undefined;function U(e,t,n,i){if(!(i>0))return 0;for(var r=n,a=n+i-1,o=0;o<e.length;++o){var s=e.charCodeAt(o);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++o)),s<=127){if(n>=a)break;t[n++]=s}else if(s<=2047){if(n+1>=a)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=a)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=a)break;s>=2097152&&m("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-r}function N(e){for(var t=0,n=0;n<e.length;++n){var i=e.charCodeAt(n);i>=55296&&i<=57343&&(i=65536+((1023&i)<<10)|1023&e.charCodeAt(++n)),i<=127?++t:t+=i<=2047?2:i<=65535?3:4}return t}function X(e,t){return e%t>0&&(e+=t-e%t),e}function Z(e){O=e,s.HEAP8=x=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAP32=C=new Int32Array(e),s.HEAPU8=F=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAPU32=B=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=new Float64Array(e)}"undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):undefined;var H=1712;I(!0,"stack must start aligned"),I(!0,"heap must start aligned");var Q=8192;s.TOTAL_STACK&&I(Q===s.TOTAL_STACK,"the stack size can no longer be determined at runtime");var W=s.TOTAL_MEMORY||65536;function V(){I(!0),B[429]=34821223,B[430]=2310721022,C[0]=1668509029}function z(){var e=B[429],t=B[430];34821223==e&&2310721022==t||ie("Stack overflow! Stack cookie has been overwritten, expected hex dwords 0x89BACDFE and 0x02135467, but received 0x"+t.toString(16)+" "+e.toString(16)),1668509029!==C[0]&&ie("Runtime error: The application has corrupted its heap memory area (address zero)!")}function K(e){for(;e.length>0;){var t=e.shift();if("function"!=typeof t){var n=t.func;"number"==typeof n?t.arg===undefined?s.dynCall_v(n):s.dynCall_vi(n,t.arg):n(t.arg===undefined?null:t.arg)}else t()}}c()(s,"TOTAL_MEMORY")||d()(s,"TOTAL_MEMORY",{configurable:!0,get:function(){ie("Module.TOTAL_MEMORY has been replaced with plain INITIAL_TOTAL_MEMORY")}}),I(W>=Q,"TOTAL_MEMORY should be larger than TOTAL_STACK, was "+W+"! (TOTAL_STACK=8192)"),I("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&Int32Array.prototype.subarray!==undefined&&Int32Array.prototype.set!==undefined,"JS engine does not provide full typed array support"),(E=s.wasmMemory?s.wasmMemory:new w.Memory({initial:W/65536}))&&(O=E.buffer),I((W=O.byteLength)%65536==0),Z(O),C[388]=9904,function(){var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian!"}();var q=[],Y=[],j=[],G=[],J=!1;I(p(),"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(g(),"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(v(),"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(T(),"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var $=0,ee=null,te=null,ne={};function ie(e){s.onAbort&&s.onAbort(e),_(e+=""),y(e),S=!0;var t,n,i="abort("+e+") at "+(n=function(){var e=new Error;if(!e.stack){try{throw new Error(0)}catch(t){e=t}if(!e.stack)return"(no stack trace available)"}return e.stack.toString()}(),s.extraStackTrace&&(n+="\n"+s.extraStackTrace()),t=/\b_Z[\w\d_]+/g,n.replace(t,(function(e){var t,n=(t=e,m("warning: build with  -s DEMANGLE_SUPPORT=1  to link in libcxxabi demangling"),t);return e===n?e:n+" ["+e+"]"})));throw e=i,new w.RuntimeError(e)}s.preloadedImages={},s.preloadedAudios={};var re={error:function(){ie("Filesystem support (FS) was not included. The problem is that you are using files from JS, but files were not used from C/C++, so filesystem support was not auto-included. You can force-include filesystem support with  -s FORCE_FILESYSTEM=1")},init:function(){re.error()},createDataFile:function(){re.error()},createPreloadedFile:function(){re.error()},createLazyFile:function(){re.error()},open:function(){re.error()},mkdev:function(){re.error()},registerDevice:function(){re.error()},analyzePath:function(){re.error()},loadFilesFromDB:function(){re.error()},ErrnoError:function(){re.error()}};s.FS_createDataFile=re.createDataFile,s.FS_createPreloadedFile=re.createPreloadedFile;var ae="data:application/octet-stream;base64,";function oe(e){return A()(String.prototype)?A()(e).call(e,ae):0===r()(e).call(e,ae)}var se,ue="aw.wasm";function le(){try{if(h)return new Uint8Array(h);var e=function(e){if(oe(e))return function(e){try{for(var t=ce(e),n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}catch(r){throw new Error("Converting base64 string to bytes failed.")}}(M()(e).call(e,ae.length))}(ue);if(e)return e;throw"both async and sync fetching of the wasm failed"}catch(y){ie(y)}}oe(ue)||(se=ue,ue=s.locateFile?s.locateFile(se,f):f+se),Y.push({func:function(){Ae()}});var ce="function"==typeof atob?atob:function(e){var t,n,i,a,o,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l="",c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=r()(u).call(u,e.charAt(c++))<<2|(a=r()(u).call(u,e.charAt(c++)))>>4,n=(15&a)<<4|(o=r()(u).call(u,e.charAt(c++)))>>2,i=(3&o)<<6|(s=r()(u).call(u,e.charAt(c++))),l+=String.fromCharCode(t),64!==o&&(l+=String.fromCharCode(n)),64!==s&&(l+=String.fromCharCode(i))}while(c<e.length);return l},fe={__lock:function(){},__unlock:function(){},emscripten_memcpy_big:function(e,t,n){F.set(F.subarray(t,t+n),e)},emscripten_resize_heap:function(e){var t=x.length;I(e>t);var n=65536,i=2147418112;if(e>i)return y("Cannot enlarge memory, asked to go up to "+e+" bytes, but the limit is "+i+" bytes!"),!1;for(var r=Math.max(t,16777216);r<e;)(r=r<=536870912?X(2*r,n):Math.min(X((3*r+2147483648)/4,n),i))===t&&m("Cannot ask for more memory since we reached the practical limit in browsers (which is just below 2GB), so the request would have failed. Requesting only "+x.length);return function(e){try{return E.grow(e-O.byteLength+65535>>16),Z(E.buffer),1}catch(t){}}(r)?(y("Warning: Enlarging memory arrays, this is not fast! "+[t,r]),!0):(y("Failed to grow the heap from "+t+" bytes to "+r+" bytes, not enough memory!"),!1)},memory:E,table:k},de=function(){var e,t={env:fe,wasi_unstable:fe};function n(e,t){var n=e.exports;s.asm=n,function(e){if($--,s.monitorRunDependencies&&s.monitorRunDependencies($),e?(I(ne[e]),delete ne[e]):y("warning: run dependency removed without ID"),0==$&&(null!==ee&&(clearInterval(ee),ee=null),te)){var t=te;te=null,t()}}("wasm-instantiate")}e="wasm-instantiate",$++,s.monitorRunDependencies&&s.monitorRunDependencies($),e?(I(!ne[e]),ne[e]=1,null===ee&&void 0!==b()&&(ee=b()((function(){if(S)return clearInterval(ee),void(ee=null);var e=!1;for(var t in ne)e||(e=!0,y("still waiting on run dependencies:")),y("dependency: "+t);e&&y("(end of list)")}),1e4))):y("warning: run dependency added without ID");var i=s;function r(e){I(s===i,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),i=null,n(e.instance)}function a(e){return(h||"function"!=typeof fetch?new(R())((function(e,t){e(le())})):fetch(ue,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ue+"'";return e.arrayBuffer()})).catch((function(){return le()}))).then((function(e){return w.instantiate(e,t)})).then(e,(function(e){y("failed to asynchronously prepare wasm: "+e),ie(e)}))}if(s.instantiateWasm)try{return s.instantiateWasm(t,n)}catch(o){return y("Module.instantiateWasm callback failed with error: "+o),!1}return function(){if(h||"function"!=typeof w.instantiateStreaming||oe(ue)||"function"!=typeof fetch)return a(r);fetch(ue,{credentials:"same-origin"}).then((function(e){return w.instantiateStreaming(e,t).then(r,(function(e){y("wasm streaming compile failed: "+e),y("falling back to ArrayBuffer instantiation"),a(r)}))}))}(),{}}(),he=de.__wasm_call_ctors;de.__wasm_call_ctors=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),he.apply(null,arguments)};var pe=de.malloc;de.malloc=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),pe.apply(null,arguments)};var _e=de.openBox;de.openBox=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),_e.apply(null,arguments)};var ge=de.free;de.free=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ge.apply(null,arguments)};var ye=de.__errno_location;de.__errno_location=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ye.apply(null,arguments)};var ve=de.fflush;de.fflush=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),ve.apply(null,arguments)};var me=de.setThrew;de.setThrew=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),me.apply(null,arguments)};var Te=de.stackSave;de.stackSave=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Te.apply(null,arguments)};var Ee=de.stackAlloc;de.stackAlloc=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),Ee.apply(null,arguments)};var be=de.stackRestore;de.stackRestore=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),be.apply(null,arguments)};var we=de.__growWasmMemory;de.__growWasmMemory=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),we.apply(null,arguments)},s.asm=de;var Ae=s.___wasm_call_ctors=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.__wasm_call_ctors.apply(null,arguments)},ke=s._malloc=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.malloc.apply(null,arguments)};s._openBox=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.openBox.apply(null,arguments)},s._free=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.free.apply(null,arguments)},s.___errno_location=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.__errno_location.apply(null,arguments)},s._fflush=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.fflush.apply(null,arguments)},s._setThrew=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.setThrew.apply(null,arguments)};var Re=s.stackSave=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.stackSave.apply(null,arguments)};s.stackAlloc=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.stackAlloc.apply(null,arguments)},s.stackRestore=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.stackRestore.apply(null,arguments)};var Se,Me=s.__growWasmMemory=function(){return I(J,"you need to wait for the runtime to be ready (e.g. wait for main() to be called)"),I(!0,"the runtime was exited (use NO_EXIT_RUNTIME to keep it alive after main() exits)"),s.asm.__growWasmMemory.apply(null,arguments)};function Ie(e){function t(){Se||(Se=!0,S||(z(),I(!J),J=!0,K(Y),z(),K(j),s.onRuntimeInitialized&&s.onRuntimeInitialized(),I(!s._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){if(z(),s.postRun)for("function"==typeof s.postRun&&(s.postRun=[s.postRun]);s.postRun.length;)e=s.postRun.shift(),G.unshift(e);var e;K(G)}()))}$>0||(V(),function(){if(s.preRun)for("function"==typeof s.preRun&&(s.preRun=[s.preRun]);s.preRun.length;)e=s.preRun.shift(),q.unshift(e);var e;K(q)}(),$>0||(s.setStatus?(s.setStatus("Running..."),D()((function(){D()((function(){s.setStatus("")}),1),t()}),1)):t(),z()))}if(s.asm=de,s.intArrayFromString=function(e,t,n){var i=n>0?n:N(e)+1,r=new Array(i),a=U(e,r,0,r.length);return t&&(r.length=a),r},c()(s,"intArrayToString")||(s.intArrayToString=function(){ie("'intArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"ccall")||(s.ccall=function(){ie("'ccall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"cwrap")||(s.cwrap=function(){ie("'cwrap' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"setValue")||(s.setValue=function(){ie("'setValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getValue")||(s.getValue=function(){ie("'getValue' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"allocate")||(s.allocate=function(){ie("'allocate' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getMemory")||(s.getMemory=function(){ie("'getMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"AsciiToString")||(s.AsciiToString=function(){ie("'AsciiToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stringToAscii")||(s.stringToAscii=function(){ie("'stringToAscii' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"UTF8ArrayToString")||(s.UTF8ArrayToString=function(){ie("'UTF8ArrayToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),s.UTF8ToString=function(e,t){return e?function(e,t,n){for(var i=t+n,r=t;e[r]&&!(r>=i);)++r;if(r-t>16&&e.subarray&&L)return L.decode(e.subarray(t,r));for(var a="";t<r;){var o=e[t++];if(128&o){var s=63&e[t++];if(192!=(224&o)){var u=63&e[t++];if(224==(240&o)?o=(15&o)<<12|s<<6|u:(240!=(248&o)&&m("Invalid UTF-8 leading byte 0x"+o.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),o=(7&o)<<18|s<<12|u<<6|63&e[t++]),o<65536)a+=String.fromCharCode(o);else{var l=o-65536;a+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else a+=String.fromCharCode((31&o)<<6|s)}else a+=String.fromCharCode(o)}return a}(F,e,t):""},c()(s,"stringToUTF8Array")||(s.stringToUTF8Array=function(){ie("'stringToUTF8Array' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stringToUTF8")||(s.stringToUTF8=function(){ie("'stringToUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"lengthBytesUTF8")||(s.lengthBytesUTF8=function(){ie("'lengthBytesUTF8' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"UTF16ToString")||(s.UTF16ToString=function(){ie("'UTF16ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stringToUTF16")||(s.stringToUTF16=function(){ie("'stringToUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"lengthBytesUTF16")||(s.lengthBytesUTF16=function(){ie("'lengthBytesUTF16' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"UTF32ToString")||(s.UTF32ToString=function(){ie("'UTF32ToString' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stringToUTF32")||(s.stringToUTF32=function(){ie("'stringToUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"lengthBytesUTF32")||(s.lengthBytesUTF32=function(){ie("'lengthBytesUTF32' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),s.allocateUTF8=function(e){var t=N(e)+1,n=ke(t);return n&&U(e,x,n,t),n},c()(s,"stackTrace")||(s.stackTrace=function(){ie("'stackTrace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addOnPreRun")||(s.addOnPreRun=function(){ie("'addOnPreRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addOnInit")||(s.addOnInit=function(){ie("'addOnInit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addOnPreMain")||(s.addOnPreMain=function(){ie("'addOnPreMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addOnExit")||(s.addOnExit=function(){ie("'addOnExit' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addOnPostRun")||(s.addOnPostRun=function(){ie("'addOnPostRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"writeStringToMemory")||(s.writeStringToMemory=function(){ie("'writeStringToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"writeArrayToMemory")||(s.writeArrayToMemory=function(){ie("'writeArrayToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"writeAsciiToMemory")||(s.writeAsciiToMemory=function(){ie("'writeAsciiToMemory' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addRunDependency")||(s.addRunDependency=function(){ie("'addRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"removeRunDependency")||(s.removeRunDependency=function(){ie("'removeRunDependency' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"ENV")||(s.ENV=function(){ie("'ENV' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"FS")||(s.FS=function(){ie("'FS' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"FS_createFolder")||(s.FS_createFolder=function(){ie("'FS_createFolder' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_createPath")||(s.FS_createPath=function(){ie("'FS_createPath' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_createDataFile")||(s.FS_createDataFile=function(){ie("'FS_createDataFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_createPreloadedFile")||(s.FS_createPreloadedFile=function(){ie("'FS_createPreloadedFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_createLazyFile")||(s.FS_createLazyFile=function(){ie("'FS_createLazyFile' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_createLink")||(s.FS_createLink=function(){ie("'FS_createLink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_createDevice")||(s.FS_createDevice=function(){ie("'FS_createDevice' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"FS_unlink")||(s.FS_unlink=function(){ie("'FS_unlink' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}),c()(s,"GL")||(s.GL=function(){ie("'GL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"dynamicAlloc")||(s.dynamicAlloc=function(){ie("'dynamicAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"loadDynamicLibrary")||(s.loadDynamicLibrary=function(){ie("'loadDynamicLibrary' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"loadWebAssemblyModule")||(s.loadWebAssemblyModule=function(){ie("'loadWebAssemblyModule' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getLEB")||(s.getLEB=function(){ie("'getLEB' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getFunctionTables")||(s.getFunctionTables=function(){ie("'getFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"alignFunctionTables")||(s.alignFunctionTables=function(){ie("'alignFunctionTables' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"registerFunctions")||(s.registerFunctions=function(){ie("'registerFunctions' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"addFunction")||(s.addFunction=function(){ie("'addFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"removeFunction")||(s.removeFunction=function(){ie("'removeFunction' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getFuncWrapper")||(s.getFuncWrapper=function(){ie("'getFuncWrapper' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"prettyPrint")||(s.prettyPrint=function(){ie("'prettyPrint' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"makeBigInt")||(s.makeBigInt=function(){ie("'makeBigInt' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"dynCall")||(s.dynCall=function(){ie("'dynCall' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getCompilerSetting")||(s.getCompilerSetting=function(){ie("'getCompilerSetting' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stackSave")||(s.stackSave=function(){ie("'stackSave' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stackRestore")||(s.stackRestore=function(){ie("'stackRestore' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"stackAlloc")||(s.stackAlloc=function(){ie("'stackAlloc' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"establishStackSpace")||(s.establishStackSpace=function(){ie("'establishStackSpace' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"print")||(s.print=function(){ie("'print' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"printErr")||(s.printErr=function(){ie("'printErr' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"getTempRet0")||(s.getTempRet0=function(){ie("'getTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"setTempRet0")||(s.setTempRet0=function(){ie("'setTempRet0' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"callMain")||(s.callMain=function(){ie("'callMain' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"abort")||(s.abort=function(){ie("'abort' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),s.Pointer_stringify=function(e,t){ie("this function has been removed - you should use UTF8ToString(ptr, maxBytesToRead) instead!")},c()(s,"warnOnce")||(s.warnOnce=function(){ie("'warnOnce' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),s.writeStackCookie=V,s.checkStackCookie=z,s.abortStackOverflow=function(e){ie("Stack overflow! Attempted to allocate "+e+" bytes on the stack, but stack has only "+(H-Re()+e)+" bytes available!")},c()(s,"intArrayFromBase64")||(s.intArrayFromBase64=function(){ie("'intArrayFromBase64' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"tryParseAsDataURI")||(s.tryParseAsDataURI=function(){ie("'tryParseAsDataURI' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}),c()(s,"ALLOC_NORMAL")||d()(s,"ALLOC_NORMAL",{configurable:!0,get:function(){ie("'ALLOC_NORMAL' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),c()(s,"ALLOC_STACK")||d()(s,"ALLOC_STACK",{configurable:!0,get:function(){ie("'ALLOC_STACK' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),c()(s,"ALLOC_DYNAMIC")||d()(s,"ALLOC_DYNAMIC",{configurable:!0,get:function(){ie("'ALLOC_DYNAMIC' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),c()(s,"ALLOC_NONE")||d()(s,"ALLOC_NONE",{configurable:!0,get:function(){ie("'ALLOC_NONE' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ)")}}),c()(s,"calledRun")||d()(s,"calledRun",{configurable:!0,get:function(){ie("'calledRun' was not exported. add it to EXTRA_EXPORTED_RUNTIME_METHODS (see the FAQ). Alternatively, forcing filesystem support (-s FORCE_FILESYSTEM=1) can export this for you")}}),s.then=function(e){if(Se)e(s);else{var t=s.onRuntimeInitialized;s.onRuntimeInitialized=function(){t&&t(),e(s)}}return s},te=function e(){Se||Ie(),Se||(te=e)},s.run=Ie,s.preInit)for("function"==typeof s.preInit&&(s.preInit=[s.preInit]);s.preInit.length>0;)s.preInit.pop()();return Ie(),e});e.exports=i}(O.a);var x=O.a.exports},82612:function(e,t,n){n.d(t,{x:function(){return u}});var i=n(90400),r=n.n(i),a=n(97448),o=n.n(a),s=(n(61396),n(83867),n(86632),n(72831),n(38750),n(64803),n(3943),n(35827),n(28374),{"x-cache":"x_cache","x-response-sinfo":"server_ip","x-response-cinfo":"x-response-cinfo"});function u(e){var t,n={};return r()(t=o()(s)).call(t,(function(t){var i=s[t];e&&e.get&&e.get(t)&&(n[i]=e.get(t))})),n}},25726:function(e,t,n){n.d(t,{Z:function(){return k}});var i=n(63862),r=n.n(i),a=n(90400),o=n.n(a),s=n(54882),u=n.n(s),l=n(92021),c=n.n(l),f=n(36210),d=n.n(f),h=n(24514),p=n.n(h),_=n(92334),g=n.n(_),y=n(18556),v=n.n(y),m=n(38574),T=n.n(m),E=n(97448),b=n.n(E),w=n(70327),A=n.n(w),k=(n(75645),n(83867),n(61396),n(86632),n(14652),n(35827),n(32543),n(67858),n(54414),n(14470),n(86919),n(8356),n(21592),n(26592),n(10954),n(8340),n(37920),n(86240),n(78344),n(2517),n(3244),n(60208),n(9368),n(60968),n(43146),n(55507),n(53511),n(68976),n(85653),n(80034),n(29928),n(23914),n(9190),n(71198),n(47146),n(42755),n(28374),n(38750),n(21177),n(50232),n(73053),n(67846),n(74384),n(5304),n(72831),n(43544),{findBox:function(e,t){var n,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:[];if(e.type!==t){if(e&&e.subBox){var a,s,l=r()(a=e.subBox).call(a,(function(e){return e.type===t}));if(l.length)o()(l).call(l,(function(e){return i.push(e)}));else o()(s=e.subBox).call(s,(function(e){return k.findBox(e,t,i)}))}}else i.push(e);return(i=u()(n=[]).call(n,i)).length>1?i:i[0]},padStart:function(e,t,n){for(var i=String(n),r=t>>0,a=Math.ceil(r/i.length),o=[],s=String(e);a--;)o.push(i);return o.join("").substring(0,r-s.length)+s},toHex:function(){for(var e=[],t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return o()(n).call(n,(function(t){e.push(c()(k).call(k,Number(t).toString(16),2,0))})),e},sum:function(){for(var e=0,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return o()(n).call(n,(function(t){e+=t})),e},StringToArrayBuffer:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return t},fromHex:function(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=d()(e.substr(n,2),16);return t},fromCharCode:function(e){for(var t="",n=0;n<e.length;n+=16e3){var i=e.subarray(n,n+16e3);t+=String.fromCharCode.apply(null,i)}return t},ArrayBufferToString:function(e){for(var t="",n=new Uint8Array(e),i=0;i<n.length;i++)t+=String.fromCharCode(n[i]);return t},Base64ToHex:function(e){for(var t=window.atob(e.replace(/-/g,"+").replace(/_/g,"/")),n="",i=0;i<t.length;i++)n+=("0"+t.charCodeAt(i).toString(16)).substr(-2);return n},toBase64:function(e,t){var n=k.fromCharCode(e);t=t===undefined||t;var i=window.btoa(n).replace(/\+/g,"-").replace(/\//g,"_");return t?i:i.replace(/=*$/,"")},toUTF8:function(e){for(var t=encodeURIComponent(e),n=unescape(t),i=new Uint8Array(n.length),r=0;r<n.length;++r)i[r]=n.charCodeAt(r);return i.buffer},bufferToString:function(e){var t;return p()(t="0"+Number(e).toString(16)).call(t,-2).toUpperCase()},strToBuf:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(d()(e[n]+e[n+1],16));return new Uint8Array(t)},formatIV:function(e){var t="";if(o()(e).call(e,(function(e){t+=k.bufferToString(e)})),t.length<=32)for(var n=32-t.length,i=0;i<n;i++)t+="0";return t},str2hex:function(e){if(""===e)return"";for(var t=[],n=0;n<e.length;n++)t.push(e.charCodeAt(n));return t},parse:function(e){if(!g()(e)){for(var t=[],n="",i=0;i<e.length;i++)i%2&&(n=e[i-1]+e[i],t.push(d()(n,16)),n="");return t}return v()(e).call(e,(function(e){return d()(e,16)}))},generateUniqueKey:function(e){var t,n,i=e.vid;e.start,e.end;var r=e.mediaType,a=e.definition;return e.preloadTime,r=r||"video",a=a||"0",i?u()(t=u()(n="".concat(i,"#")).call(n,r,"#")).call(t,a,"#mp4"):null},validateFragment:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[];if(e instanceof ArrayBuffer){try{if(2===t.length){var n=t[1]-t[0]+1;if(!(e.byteLength===n))return}}catch(i){return!1}return!0}return!1},typeOf:function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]},getBufferSplits:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5e5,i=t-e;if(i-n<n/2||!t)return[[e,t]];for(var r=[];e<t;){var a=e+n;(a>t||t-a<n/2)&&(a=t),r.push([e,a]),e=a+1}return r},nowTime:function(){try{return d()(performance.now(),10)}catch(e){return(new Date).getTime()}},hashVal:function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n},extUrl:function(e,t){try{var n,i,r=T()(e).call(e,"?");if(r<0)v()(n=b()(t)).call(n,(function(n,i){var r,a;0===i?e+=u()(r="?".concat(n,"=")).call(r,t[n]):e+=u()(a="&".concat(n,"=")).call(a,t[n])}));else v()(i=b()(t)).call(i,(function(n,i){var a,o;r===e.length-1?e+=u()(a="".concat(n,"=")).call(a,t[n]):e+=u()(o="&".concat(n,"=")).call(o,t[n])}));return e}catch(a){return e}},getFileSize:function(e,t){try{return e&&t?d()(t*e/8,10):0}catch(n){return 0}},concatData:function(e,t){var n=[],i=0;e&&n.push(e),t&&n.push(t),A()(n).call(n,(function(e){return e&&(i+=e.byteLength),!0}));var r=new Uint8Array(i),a=0;return A()(n).call(n,(function(e){return e&&(r.set(e,a),a+=e.byteLength),!0})),r},getFragRange:function(e,t,n){var i=e<t.length?t[e]:null,r=e<n.length?n[e]:null,a=0,o=0;return e===t.length-1&&(a=-1),e===n.length-1&&(o=-1),[Math.min((null==i?void 0:i.range[0])||Infinity,(null==r?void 0:r.range[0])||Infinity),Math.max((null==i?void 0:i.range[1])+a||0,(null==r?void 0:r.range[1])+o||0)]}})},31109:function(e,t,n){n.d(t,{KI:function(){return f},Hs:function(){return h},Gb:function(){return p},pU:function(){return _},qK:function(){return d}});var i=n(38574),r=n.n(i),a=n(29493),o=n.n(a),s=n(97448),u=n.n(s),l=n(11599);n(5304),n(12150),n(83867),n(72831),n(22032),n(60892),n(15243),n(20145),n(48168),n(14756),n(38750),n(12345),n(8356),n(86919),n(21592),n(26592),n(10954),n(8340),n(37920),n(86240),n(78344),n(2517),n(3244),n(60208),n(9368),n(60968),n(43146),n(55507),n(53511),n(68976),n(85653),n(80034),n(29928),n(23914),n(9190),n(71198),n(47146),n(42755);function c(){var e=window.navigator.userAgent,t=r()(e).call(e,"MSIE "),n=r()(e).call(e,"Trident/");return t>0||n>0}function f(){var e,t,n,i,a,s,l,f,d,h,p;return!(!navigator.requestMediaKeySystemAccess||(l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),f=c(),i=navigator.mimeTypes,a=navigator.userAgent,s=!1,i&&r()(a).call(a,"Chrome")>1&&(s=o()(n=u()(i)).call(n,(function(e){var t,n,a;return!!(i[e].type&&r()(t=i[e].type).call(t,"360")>-1)||!!(i[e].type&&r()(n=i[e].type).call(n,"application/vnd.chromium.remoting-viewer")>-1)||!!(i[e].description&&r()(a=i[e].description).call(a,"360")>-1)}))),d=s,h=r()(e=navigator.userAgent).call(e,"Firefox")>0,p=r()(t=navigator.userAgent).call(t,"Edge")>0,l||f||d||h||p))}function d(){try{if("object"===("undefined"==typeof WebAssembly?"undefined":(0,l.Z)(WebAssembly))&&"function"==typeof WebAssembly.instantiate){var e=new WebAssembly.Module(Uint8Array.of(0,97,115,109,1,0,0,0));if(e instanceof WebAssembly.Module)return new WebAssembly.Instance(e)instanceof WebAssembly.Instance}}catch(t){}return!1}function h(){var e=window.MediaSource=window.MediaSource||window.WebKitMediaSource;return e&&"function"==typeof e.isTypeSupported}function p(){return h()&&d()&&!c()}function _(){return d()&&!c()}},90934:function(e,t,n){n.d(t,{qw:function(){return u},cM:function(){return l}});var i=n(54882),r=n.n(i),a=(n(14652),n(25726)),o=function(){try{return"undefined"!=typeof localStorage&&"setItem"in window.localStorage&&!!window.localStorage.setItem}catch(e){return!1}}()&&!function(){var e="_localstorage_support_test";try{return window.localStorage.setItem(e,!0),window.localStorage.removeItem(e),!1}catch(t){return!0}}(),s=u();function u(){if(o)try{return!!window.localStorage.getItem("playerlog")}catch(e){return!1}return!1}function l(e){for(var t,n,i=arguments.length,o=new Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];s&&console.log&&(n=console).log.apply(n,r()(t=["[logger]",a.Z.nowTime(),e]).call(t,o))}},50685:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(12544),r=n.n(i),a=n(94978),o=n(12922),s=(n(83867),n(54590),n(32189),n(12551),n(94719),n(96362),n(44148),function(){function e(){var t,n;(0,a.Z)(this,e);var i=new(r())((function(e,i){t=e,n=i}));return i.resolve=function(e){t(e),i.state="fulfilled"},i.reject=function(e){n(e),i.state="rejected",i.isBreak="DESTROYED"===e},i.state="pending",i}return(0,o.Z)(e,[{key:"resolve",value:function(e){}},{key:"reject",value:function(e){}}]),e}())},75557:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(11235),r=n.n(i),a=n(94978),o=n(12922),s=(n(86267),n(18839),function(){function e(t){(0,a.Z)(this,e),this.onTick_=t,this.cancelPending_=null}return(0,o.Z)(e,[{key:"tickAfter",value:function(e){var t=this,n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;this.stop();var i=!0,a=null;this.cancelPending_=function(){window.clearTimeout(a),i=!1};var o=function(){i&&(t.onTick_(),n&&n())};return a=r()(o,1e3*e),this}},{key:"tickEvery",value:function(e){var t=this;this.tickAfter(e,(function(){t.tickEvery(e)}))}},{key:"stop",value:function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)}}]),e}())},73807:function(e,t,n){n.d(t,{Z:function(){return i}});var i=JSON.parse('"3.0.0-alpha.34-30"')},93865:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(12544),r=n.n(i),a=n(94978),o=n(12922),s=(n(8356),n(83867),n(54590),n(32189),n(12551),n(94719),n(96362),n(44148),n(7195),n(92676),function(){function e(){(0,a.Z)(this,e),this.queue=[]}return(0,o.Z)(e,[{key:"push",value:function(e){this.queue.push(e)}},{key:"startup",value:function(){return r().all(this.queue)}},{key:"destroy",value:function(){this.queue=[]}}]),e}())},42249:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(94978),r=n(12922),a=n(72711),o=n(14402),s=n.n(o),u=function(){function e(t){var n=this;(0,i.Z)(this,e),s()(this),this.openlog=t.openLog,this.codecType=t.codecType,this.worker=new a.Z,this.worker.onmessage=function(e){n.emit(e.data.method,e.data)},this.worker.postMessage({method:"init",id:t.id||0,args:{openlog:this.openlog,codecType:this.codecType}})}return(0,r.Z)(e,[{key:"transmux",value:function(e,t,n,i,r,a,o,s){this.worker&&this.worker.postMessage({method:"transmux",id:e,args:{buffer:t,start:n,videoIdx:i,audioIdx:r,moov:a,useEME:o,kidValue:s}})}},{key:"reset",value:function(){this.worker&&this.worker.postMessage({method:"reset"})}},{key:"destroy",value:function(){this.worker&&this.worker.terminate()}}]),e}()},36387:function(e,t,n){n.d(t,{_c:function(){return V},ZP:function(){return J}});var i=n(39382),r=n.n(i),a=n(10441),o=n.n(a),s=n(23947),u=n.n(s),l=n(90400),c=n.n(l),f=n(97448),d=n.n(f),h=n(11235),p=n.n(h),_=n(52708),g=n.n(_),y=n(51247),v=n.n(y),m=n(64059),T=n.n(m),E=n(18556),b=n.n(E),w=n(30562),A=n.n(w),k=n(24514),R=n.n(k),S=n(25239),M=n.n(S),I=(n(50253),n(46818)),D=n(94978),P=n(12922),O=n(47517),x=n(34055),F=n(58010),C=n(5233),B=(n(49046),n(29437),n(33094),n(67263),n(22354),n(60782),n(24177),n(61296),n(54284),n(88231),n(69383),n(22036),n(18259),n(31936),n(92551),n(59790),n(79921),n(7476),n(89038),n(99241),n(21110),n(78322),n(19954),n(43508),n(56639),n(69563),n(21271),n(45765),n(18610),n(29339),n(26584),n(10568),n(85367),n(55144),n(23178),n(18847),n(65560),n(82129),n(92621),n(86887),n(41994),n(31651),n(18807),n(28902)),L=n(87802),U=n(36210),N=n.n(U),X=(n(98130),n(5097),n(89812)),Z=n(54987),H="danger_d_speed";var Q=function(){function e(t,n,i,r){var a=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{logger:function(){},openLog:!1};(0,D.Z)(this,e),this.bitrate=n,this.segment_duration=r||5e3,this.logger=a.logger,this.openLog=a.openLog,this.cdnHost=t.cdnHost,this._loadedPromise=new X.Z,this._wasmPromise=new X.Z,this.config=t,this.autoBitrateOpts=t.autoBitrateOpts||{},this.stall_penalty=this.autoBitrateOpts.stall_penalty||11,this.switch_penalty=this.autoBitrateOpts.switch_penalty||4,this.interval=this.autoBitrateOpts.interval||1e3;var o=t.progressTimer||1e3,s=this.autoBitrateOpts.startInterval||o;this.initInterval=.8*s,this._prealodMethod=t.preloadmethod||0,this._videoWidth=0,this._videoHeight=0,this._hasDeviceInfoChanged=!0,this.updateMediaInfos(i,!1)}return(0,P.Z)(e,[{key:"onLoadWasm",value:function(){var e=this,t=this.module={onRuntimeInitialized:function(){e._wasmPromise.resolve()}};return(0,this.autoBitrateOpts.module)(t),this._wasmPromise}},{key:"updateMediaInfos",value:function(e){var t,n=this;arguments.length>1&&undefined;this._heightToDefitionConfig=new(u()),this._bitrateToDefitionConfig=new(u()),e&&(this.mediaInfos=e,c()(t=this.mediaInfos.dynamic_video_list).call(t,(function(e){n._heightToDefitionConfig.set(e.vheight,e),n._bitrateToDefitionConfig.set(e.bitrate,e)})))}},{key:"parseMPD",value:function(){if(this.setDebugModel(this.openLog),this.mediaInfos){this.logger("mediaInfos",this.mediaInfos);try{for(var e=[],t=this.mediaInfos.dynamic_video_list,n=0;n<t.length;n++){var i=t[n];e.push({stream_id:"s".concat(n),bandwidth:i.bitrate||i.bandwidth,width:i.vwidth||i.width,height:i.vheight||i.height,codec:i.codecs||i.codec_type||"h264",frame_rate:Number(i.fps)||-1,segment_duration:this.segment_duration})}var r={v_adaptation:e},a=A()(r);this.module.ccall("parseMPD","null",["string"],[a])}catch(o){}}}},{key:"_getDefautSpeed",value:function(e){var t=0,n=window.navigator.connection;if(n&&n.downlink)t=1024*navigator.connection.downlink/8,this.logger("initSpeed connect",t);else try{t=M()(Z.Z.getItem(H))||0,this.logger("initSpeed connect",t)}catch(i){}return 0===t&&(t=e&&e.historyAvspeed||0,this.logger("initSpeed history",t)),t}},{key:"setDebugModel",value:function(e){this.module._setDebugModel(e)}},{key:"updateBitrate",value:function(e){this.bitrate=e}},{key:"_updatePreloadSupplier",value:function(e,t){this.module._updatePreloadSupplier(e,t)}},{key:"updatePreloadSupplier",value:function(e){var t=this._getDefautSpeed();this._updatePreloadSupplier(t,e)}},{key:"getPreloadBitrate",value:function(){var e,t=null,n=[];try{this.logger("preloadMethod",this._prealodMethod),e=this.module._getPreloadBitrate(this._prealodMethod);for(var i=0;i<5;i++)n.push(this.module.HEAP32[e/Int32Array.BYTES_PER_ELEMENT+i]);var r={bitrate:n[0],pduration:n[1],preloadType:n[2],size:n[3],mediaType:n[4]};return this.logger("getPreloadBitrate",r),r}catch(a){t=null}finally{this.module._free(e)}return t}},{key:"_updateDeviceInfo",value:function(e){try{if(this._hasDeviceInfoChanged){var t=window.devicePixelRatio||1;this.module._updateDeviceInfo(this._videoWidth||Number(this.config.width),this._videoHeight||Number(this.config.height),t,e||-1)}this._hasDeviceInfoChanged=!1}catch(n){}}},{key:"preload",value:function(e){this.parseMPD(),this.updatePreloadSupplier(e),this._updateDeviceInfo(-1);var t=window.devicePixelRatio||1;return this.logger("baseAbr updateDeviceInfo width",this._videoWidth||Number(this.config.width),"height",this._videoHeight||Number(this.config.height),"dpr",t),this.getPreloadBitrate()}}]),e}();function W(e){var t=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,C.Z)(e);if(t){var a=(0,C.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,F.Z)(this,n)}}Q.SPPED_CACHE=H;var V={ABR_CHANGE:"ABR_CHANGE_A",ABR_UPDATE_SPEC:"ABR_UPDATE_SPEC",START_ABR:"START_ABR",UPDATE_AUTO_DESC:"UPDATE_AUTO_DESC",ABR_START_PROGRESS:"ABR_START_PROGRESS",MAX_BUFFER_CHANGE:"MAX_BUFFER_CHANGE"},z=0,K=1,q=-1,Y=0,j=1,G={PLAYBACK_BITRATE:"avg_play_bitrate",DOWNLOAD_BITRATE:"avg_download_bitrate",DOWNLOAD_NETWORK_SPEED:"avg_download_speed",PREDICT_NETWORK_SPEED:"avg_predict_speed",BUFFER_LENGTH:"avg_buffer_length",QOE:"avg_qoe"},J=function(e){(0,x.Z)(n,e);var t=W(n);function n(e,i,r,a,s){var l,f,h,p,_,g,y,v,m,T,E,b,w,A,k=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{logger:function(){},openLog:!1};(0,D.Z)(this,n),(A=t.call(this,i,r,a,s,k)).player=e,A.timerId=0,A.isOpenAutoDefi=!!A.autoBitrateOpts.isOpenAutoDefi,A.onPlayrateChange=o()(l=A._onPlayrateChange).call(l,(0,O.Z)(A)),A.onPlay=o()(f=A._onPlay).call(f,(0,O.Z)(A)),A._stop=o()(h=A.stop).call(h,(0,O.Z)(A)),A._bufferRange=new(u()),A._sortedBufferRange=[],A._lastCheckResolutionStamp=0,A._currentDefinition=null,A._isSeeking=!1,A._waitingStartTime=0,A._stallCount=0,A._seekState=z,A._stallState=Y,A._videoCurrentTime=0,A.listeners=[{evt:"playbackrateChange",handler:A.onPlayrateChange},{evt:"ended",handler:A._stop},{evt:"error",handler:A._stop},{evt:"timeupdate",handler:o()(p=A._onTimeUpdate).call(p,(0,O.Z)(A))},{evt:"addVideoBufferEnd",handler:o()(_=A._bufferRangeUpdate).call(_,(0,O.Z)(A))},{evt:"canplay",handler:o()(g=A._updateAutoDesc).call(g,(0,O.Z)(A))},{evt:"play",handler:o()(y=A._onplayStart).call(y,(0,O.Z)(A))},{evt:V.MAX_BUFFER_CHANGE,handler:o()(v=A._onMaxBufferChange).call(v,(0,O.Z)(A))},{evt:"seeking",handler:o()(m=A._onSeeking).call(m,(0,O.Z)(A))},{evt:"seeked",handler:o()(T=A._onSeekEnd).call(T,(0,O.Z)(A))},{evt:"waiting",handler:o()(E=A._onWaiting).call(E,(0,O.Z)(A))},{evt:"playing",handler:o()(b=A._onPlaying).call(b,(0,O.Z)(A))}],A._hasStart=!1,c()(w=A.listeners).call(w,(function(e){var t=e.evt,n=e.handler;A.player.on(t,n)})),A._isPaused=!1,A._hasAddFrament=!1,A._eventInfo={local_time_ms:0,internet_speed:0,buffer_length:0,last_bitrate:0,now_bitrate:0,play_speed:1},A._bitrateSet=[],A._generalInfo={},A._currentInAbr=!1,A._hasCalcTimelineLog=!1,A._abr_play_info={start_play_time_ms:0,is_hint:0,playback_info:{internet_speed_record:[],play_bitrate_record:[],buffer_length_record:[],play_speed_record:[],qoe_record:[],qoe_a_record:[],qoe_b_record:[],qoe_c_record:[]}},A._abrMethod=A.autoBitrateOpts.method||0,A.logger("abr: constructor"),A._loopInterval=A.initInterval,A._tickCount=0,A._fps=30,B.Z.install(),A.startTime=performance.now(),A.logger("time abr",(new Date).getTime()),A._maxCacheTimeVideo=A.config.maxBufferLength||A.config.preloadTime||50,A._maxCacheTimeAudio=A._maxCacheTimeVideo,A._prevDefinitionItem=null,A._currentItem=null,A._switchCount=0,A._switchBitrate=0,A._avgStatItems={};for(var R=d()(G),S=0;S<R.length;S++){var M=R[S],I=G[M];A._avgStatItems[I]=new $}return A._qoeArgs=[0,0,0,0],A._abrUsed=-1,A._abrAlwaysOn=1,A._prelaodInfo=null,A._hasLogStartInfo=!1,A._hasExecuteAbrAlgo=!1,A._lastExecuteTimeInMs=0,A}return(0,P.Z)(n,[{key:"init",value:function(e){return this._mediaList=e,this.isOpenAutoDefi?this.onLoadWasm():this._wasmPromise.resolve(),this._wasmPromise}},{key:"execute",value:function(){return this.listenSize(),this.initFps(),this.onWinElemSizeChange(),this.onPlay()}},{key:"_onSeeking",value:function(){this._isSeeking=!0,this.player.currentTime<this._videoCurrentTime?this._seekState=q:this._seekState=K,this.logger("seekState",this._seekState)}},{key:"_onSeekEnd",value:function(){this._isSeeking=!1}},{key:"_onWaiting",value:function(){var e=this;this._isSeeking||this._waitingStartTime>0||(this._waitingStartTime=(new Date).getTime(),this._stallId=p()((function(){clearTimeout(e._stallId),e._stallCount++,e._stallState=j}),200))}},{key:"_onPlaying",value:function(){this._waitingStartTime=0,this._stallState=Y,clearTimeout(this._stallId)}},{key:"initFps",value:function(){this.fpsDetection=new B.Z,this.fpsDetection.start(),this._fps=this.fpsDetection.fps,this._hasDeviceInfoChanged=!0}},{key:"listenSize",value:function(){var e;this.mediaElem=this.player.video,this._onWinSizeChange=(0,L.Z)(o()(e=this.onWinElemSizeChange).call(e,this),1e3,!1),window.addEventListener("resize",this._onWinSizeChange)}},{key:"onWinElemSizeChange",value:function(){if(this.mediaElem){var e=this.mediaElem.getBoundingClientRect();this._videoWidth=Math.floor(e.width),this._videoHeight=Math.floor(e.height),this._hasDeviceInfoChanged=!0}}},{key:"_onMaxBufferChange",value:function(e){var t=e.videoCacheTime,n=e.audioCacheTime;this._maxCacheTimeAudio=n,this._maxCacheTimeVideo=t}},{key:"_onTimeUpdate",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(this._sortedBufferRange&&0!==this._sortedBufferRange.length&&this._currentInAbr){this._videoCurrentTime=this.player.currentTime;var n=g()();if(!(n-this._lastCheckResolutionStamp<1e3&&0!==this._lastCheckResolutionStamp)||t){this._lastCheckResolutionStamp=n;for(var i=this.player.currentTime,r=0,a=this._sortedBufferRange.length-1,o=null;r<=a;){var s=Math.floor(r+(a-r)/2),u=this._sortedBufferRange[s];if(i<u.start)a=s-1;else{if(!(i>=u.end)){o=u;break}r=s+1}}if(o){var l=this._bitrateToDefitionConfig.get(o.bandwidth),c=l&&l.definition;if(this._currentDefinition===c&&!t||!c)return void(c||this.logger("error defintion, mpd\u914d\u7f6e\u4e0e\u63a5\u53e3\u914d\u7f6e\u4e0d\u4e00\u81f4"));this._currentDefinition=c,this._prevDefinitionItem=this._currentItem,this._currentFps=l.fps,this._currentItem=l,this._emitAutoDescChange(c,!1,this._currentFps,l)}}}}},{key:"_emitAutoDescChange",value:function(e,t,n,i){this.player.emit(V.UPDATE_AUTO_DESC,{definition:e,reset:t,fps:n,item:i,pre_item:this._prevDefinitionItem})}},{key:"_onplayStart",value:function(){this._hasStart=!0,this.logger("onplaystart")}},{key:"_updateAutoDesc",value:function(){var e=this;this._currentInAbr&&this._currentDefinition&&(this._updateId=p()((function(){clearTimeout(e._updateId),e._emitAutoDescChange(e._currentDefinition,!1,e._currentFps,e._currentItem)}),0))}},{key:"_bufferRangeUpdate",value:function(e){var t;if(e.start!==undefined){null===this._currentItem&&this._onTimeUpdate(null,!0);var n=e.start;this._hasAddFrament=!0,this._bufferRange.set(n,e);var i=(0,I.Z)(v()(t=this._bufferRange).call(t));this._sortedBufferRange=T()(i).call(i,(function(e,t){return e.start-t.start})),this.avgStat(G.DOWNLOAD_BITRATE,e.bandwidth)}}},{key:"_onPlayrateChange",value:function(){this.module&&this.updateBufferInfo()}},{key:"_onPlay",value:function(){var e=this;if(!this.isOpenAutoDefi)return this.logger("onPlay"),0;var t=0;try{this.logger("abr: loadeddata"),this.updateSwitchInfo(),this.parseMPD(),this.updateDeviceInfo();var i=n.getIsPlayAutoDefi(this.autoBitrateOpts);if(this.isOpenAutoDefi&&i){this._abrUsed=1;var r=this._getDefautSpeed(this.player);t=this._loopAbr(r),this.start(),this.logger("time abr start prgress",(new Date).getTime()),this.logger("time abr costTime",performance.now()-this.startTime),this.logger("abr onplay"),this.startTimer=p()((function(){e._loopInterval=e.interval,clearTimeout(e.startTimer),e.logger("interval change")}),5e3)}}catch(a){this.logger("abr: loadeddata error",a),this.logger("time abr costTime err",performance.now()-this.startTime)}return t}},{key:"start",value:function(){if(this.logger("abr: start"),this._isPaused=!1,!this._hasCalcTimelineLog){var e=1===Math.floor(100*Math.random());this._abr_play_info.is_hint=e?1:0}this._hasCalcTimelineLog=!0,this._loop()}},{key:"_loop",value:function(){var e=this;this._isPaused||(clearTimeout(this.timerId),this.timerId=p()((function(){if(!e.player.paused||!e.player.config.autoplay&&!e._hasStart){var t=e._hasAddFrament?undefined:e._getDefautSpeed(e.player);e._loopAbr(t)}e._loop()}),this._loopInterval))}},{key:"updateDeviceInfo",value:function(){try{if(this.fpsDetection){var e=this.fpsDetection.fps;e!==this._fps&&(this._fps=e,this._hasDeviceInfoChanged=!0)}this._updateDeviceInfo(this._fps)}catch(t){}}},{key:"updateBufferInfo",value:function(e){var t=this.player.playbackRate,n=this.bufferLength,i=e||Math.floor(this.player.downloadSpeed);return this._tickCount<5&&0===i&&(i=this._getDefautSpeed(this.player),this.logger("initSpeed fix")),this.logger("maxCacheTimeAudio:",this._maxCacheTimeAudio,"maxCacheVideoTime",this._maxCacheTimeVideo,"seekState",this._seekState,"stallState",this._stallState),this.module._updateBufferInfo(t,this._maxCacheTimeAudio,this._maxCacheTimeVideo,n,n,i,this._seekState,this.player.currentTime,this._stallState),this._seekState=z,this._eventInfo={internet_speed:i,buffer_length:n,last_bitrate:this.bitrate,play_speed:t},this.logger("playRate:",t,"buff:",n,"downloadSpeed:",i),{buffer:n,downloadSpeed:i}}},{key:"updateSwitchInfo",value:function(){var e=(new Date).getTime();this._openTimeMs=e,this._abr_play_info.start_play_time_ms=e;var t,n,i=this.player.config.preloadTime||50,r=(n=(t=e).toString(16)).length<=8?{high:0,low:t}:{high:N()(n.substr(0,n.length-8),16),low:N()(n.substr(n.length-8),16)},a=this.autoBitrateOpts.noStallCheckTime||5,o=this.openLog;this.logger("openTime:",e,"this.logger",o),this.module._updateSwitchInfo(r.low,r.high,a,o,this.stall_penalty,this.switch_penalty);var s=this._mediaList.video,u=b()(s).call(s,(function(e){var t=e.bandwidth,n=e.bitrate;return t||n}));this._bitrateSet=b()(u).call(u,(function(e,t){return{bitrate:e,codecs:s[t].codecs||s[t].codec_type}})),this._generalInfo={max_cache_time:i,bitrate_set:this._bitrateSet,segment_duration:this.segment_duration,preload_info:{},startup_info:{}}}},{key:"updatePreloadCacheInfo",value:function(e){try{this._prelaodInfo=e,this.logger("update preloadInfo",e),e&&e.item_num!==e.items.length&&(this.logger("preloadInfo invalid"),this._prelaodInfo=null)}catch(t){this.logger("updatePreloadCacheInfo",t),this._prelaodInfo=null}}},{key:"updatePreloadLogInfo",value:function(e){this._generalInfo.preload_info=e||{}}},{key:"_updatePreloadInfo",value:function(){try{var e=this.player.getPreloadInfos();if(e){var t=e.preloadInfo,n=e.abr;this.updatePreloadLogInfo(t),n&&this.updatePreloadCacheInfo(t)}if(this.logger("_updatePreloadInfo preloadinfos",e),null!=this._prelaodInfo){var i=A()(this._prelaodInfo);this.module.ccall("updatePreloadInfo","null",["string"],[i])}else this.logger("_updatePreloadInfo preloadinfo null, no preload")}catch(r){this.logger("_updatePreloadInfo err",r)}}},{key:"_loopAbr",value:function(e){var t;this._tickCount++;var n=[];try{this.updateDeviceInfo();var i=this.updateBufferInfo(e),r=i.downloadSpeed,a=i.buffer;t=this.module._getPredictedBitrate(this.bitrate,this._abrMethod);for(var o=0;o<7;o++)n.push(this.module.HEAP32[t/Int32Array.BYTES_PER_ELEMENT+o]);var s=n[0],u=1===n[1];this._eventInfo.now_bitrate=s,this._eventInfo.local_time_ms=(new Date).getTime();var l=0;if(s!==this.bitrate&&0!==s){var c=this.bitrate;l=Math.abs(c-s);for(var f=[],d=this.player.video.buffered,h=0;h<d.length;h++)f.push({start:d.start(h),end:d.end(h)});var p=this._videoWidth||Number(this.config.width),_=this._videoHeight||Number(this.config.height),g=(new Date).getTime(),y={speed:"".concat(r," KB/s"),buffer_length:"".concat(a," s"),video_pos:this.player.currentTime,all_buffers:f,seek_state:this._seekState,stall_state:this._stallState,screen_width:p,screen_height:_,dpr:window&&window.devicePixelRatio,playbackRate:this.player.playbackRate,bitrateSet:this._bitrateSet,abrMethod:this._abrMethod,delta:this._hasExecuteAbrAlgo?g-this._lastExecuteTimeInMs:0};this._lastExecuteTimeInMs=g,this._hasExecuteAbrAlgo=!0,this.player.emit(V.ABR_CHANGE,this.bitrate,s,u,A()(y)),this.logger("abr loop predicte:",s,"willStall:",u,"switchBitrate",l,"cur",c),this.bitrate=s}this._hasLogStartInfo||(this._hasLogStartInfo=!0,this._generalInfo.startup_info={predict_bitrate:s,download_speed:r,screen_width:this._videoWidth||Number(this.config.width),screen_height:this._videoHeight||Number(this.config.height),device_pixel_ratio:window&&window.devicePixelRatio,screen_fps:this._fps,startup_method:this._abrMethod}),this.player.emit("ABR_LOOP"),this.onAbrLoop(r,n[2],l,R()(n).call(n,3))}catch(v){this.logger("abr error",v)}finally{this.module._free(t)}return this.bitrate}},{key:"stop",value:function(){var e=arguments.length>0&&arguments[0]!==undefined&&arguments[0];!0===e&&(this._abrAlwaysOn=-1),clearTimeout(this.timerId),this._isPaused=!0,this.logger("abr: stop")}},{key:"destroy",value:function(){var e,t=this;this._stop(),c()(e=this.listeners).call(e,(function(e){var n=e.evt,i=e.handler;t.player.off(n,i)})),this.player=null,this._heightToDefitionConfig=null,this._bitrateToDefitionConfig=null,this._bufferRange=null,this._sortedBufferRange=null,this.module=null,clearTimeout(this._stallId),clearTimeout(this._updateId),clearTimeout(this.startTimer),window.removeEventListener("resize",this._onWinSizeChange),this.fpsDetection&&this.fpsDetection.stop(),this.player=null}},{key:"eventInfo",get:function(){return this._eventInfo}},{key:"generalInfo",get:function(){return this._generalInfo}},{key:"bufferLength",get:function(){var e=this.player.getBufferedRange(),t=this.player.video.currentTime,n=e[1]-Math.max(e[0],t);return n=Math.max(0,n).toFixed(2),M()(n)}},{key:"downloadSpeed",get:function(){return Math.floor(this.player.downloadSpeed)}},{key:"nowBitrate",get:function(){return this.bitrate}},{key:"openTimeMs",get:function(){return this._openTimeMs}},{key:"isCurrentInAbr",get:function(){return this._currentInAbr},set:function(e){this._currentInAbr=e}},{key:"onAbrLoop",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0,n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:[];if(this._qoeArgs=i,this._currentItem&&this.avgStat(G.PLAYBACK_BITRATE,this._currentItem.bitrate),this.avgStat(G.DOWNLOAD_NETWORK_SPEED,1e3*e*8),this.avgStat(G.PREDICT_NETWORK_SPEED,t),this.avgStat(G.BUFFER_LENGTH,this.bufferLength),this.avgStat(G.QOE,this.getQoeRelValue(0)),n>0&&(this._switchCount++,this._switchBitrate+=n),this._abr_play_info.is_hint){var r=this,a=((new Date).getTime()-this.openTimeMs)/1e3;a=M()(a.toFixed(2)),this._abr_play_info.playback_info.internet_speed_record.push([a,r.downloadSpeed]),this._abr_play_info.playback_info.play_bitrate_record.push([a,r.nowBitrate]),this._abr_play_info.playback_info.buffer_length_record.push([a,r.bufferLength]),this._abr_play_info.playback_info.play_speed_record.push([a,this.player.playbackRate]),this._abr_play_info.playback_info.qoe_record.push([a,this.getQoeRelValue(0)]),this._abr_play_info.playback_info.qoe_a_record.push([a,this.getQoeRelValue(1)]),this._abr_play_info.playback_info.qoe_b_record.push([a,this.getQoeRelValue(2)]),this._abr_play_info.playback_info.qoe_c_record.push([a,this.getQoeRelValue(3)])}}},{key:"getQoeRelValue",value:function(e){return this._qoeArgs[e]/100}},{key:"avgStat",value:function(e,t){var n=this._avgStatItems[e];n&&n.add(t)}},{key:"getAbrPlayInfo",value:function(){return this._abr_play_info}},{key:"updateAbrMethod",value:function(e){this._abrMethod=e}},{key:"getAbrMethod",value:function(){return this._abrMethod}},{key:"getAbrVVStats",value:function(){for(var e={},t=d()(G),n=0;n<t.length;n++){var i=t[n],r=G[i],a=this._avgStatItems[r];e[r]=a.avg()}return e.switch_counts=this._switchCount,e.avg_switch_bitrate=0===this._switchCount?0:this._switchBitrate/this._switchCount,e.abr_qoe=this.getQoeRelValue(0),e.abr_qoe_a=this.getQoeRelValue(1),e.abr_qoe_b=this.getQoeRelValue(2),e.abr_qoe_c=this.getQoeRelValue(3),e.abr_method=this._abrMethod,e.abr_used=this._abrUsed,e.abr_always_on=this._abrAlwaysOn,this.logger("abrVVStats",e),e}}],[{key:"getIsPlayAutoDefi",value:function(e){return!!e.isPlayAutoDefi}}]),n}(Q),$=function(){function e(){(0,D.Z)(this,e),this.total=0,this.count=0}return(0,P.Z)(e,[{key:"add",value:function(e){this.total+=e,this.count++}},{key:"avg",value:function(){if(0===this.count)return 0;var e=this.total/this.count;return Math.floor(e)}}]),e}()},57350:function(e,t,n){n.d(t,{Z:function(){return K}});var i=n(39382),r=n.n(i),a=n(54882),o=n.n(a),s=n(64059),u=n.n(s),l=(n(20274),n(88251),n(2749)),c=n(3515),f=n(19771),d=n(38837),h=n(68096),p=n(71211),_=n(9889),g=(n(79022),n(8991),n(72464)),y=n(18556),v=n.n(y),m=n(97448),T=n.n(m),E=n(63862),b=n.n(E),w=n(90400),A=n.n(w),k=(n(74577),n(99394),n(82226),n(15638),n(9008),n(75984),n(52708)),R=n.n(k),S=n(11235),M=n.n(S),I=(n(51736),n(40236),n(89862),function(){function e(t){var n=this;(0,l.Z)(this,e),(0,_.Z)(this,"_onPlay",(function(){n._calcPausedTime()})),(0,_.Z)(this,"_onPause",(function(){n._prevPauseTime=R()()})),(0,_.Z)(this,"_onEnded",(function(){!n._info.downloadDuration&&n._info.canPlayTime&&(n._info.downloadDuration=(R()()-n._info.canPlayTime)/1e3),n.disable()})),(0,_.Z)(this,"_canPlay",(function(){n._info.canPlayTime=R()();var e=n.video.buffered;e.length&&(n._info.startBufferTime=e.end(e.length-1))})),(0,_.Z)(this,"_onProgress",(function(){var e=n.video.buffered;n._info.canPlayTime&&e.length&&e.end(e.length-1)+.8>n.video.duration&&(n._info.downloadDuration=(R()()-n._info.canPlayTime)/1e3)})),(0,_.Z)(this,"_onTick",(function(){var e=n.video;if(e){n._timer=M()(n._onTick,500);var t=e.currentTime;!e.paused||e.ended||0===e.playbackRate||0===e.readyState?(n._prevCurrentTime===t?n._prevStallTime||(n._prevStallTime=R()()):n._calcStallTime(),n._prevCurrentTime=t):n._prevCurrentTime=t}})),this.video=t,this._timer=null,this._prevPauseTime=0,this._prevStallTime=0,this._prevCurrentTime=0,this.resetInfo(),this.enable()}return(0,c.Z)(e,[{key:"isStalling",get:function(){return!!this._prevStallTime}},{key:"enable",value:function(){this.disable();var e=this.video;e&&(e.addEventListener("play",this._onPlay),e.addEventListener("pause",this._onPause),e.addEventListener("canplay",this._canPlay),e.addEventListener("progress",this._onProgress),e.addEventListener("ended",this._onEnded),this._timer=M()(this._onTick,500))}},{key:"disable",value:function(){clearTimeout(this._timer),this.resetInfo();var e=this.video;e&&(e.removeEventListener("play",this._onPlay),e.removeEventListener("pause",this._onPause),e.removeEventListener("canplay",this._canPlay),e.removeEventListener("progress",this._onProgress),e.removeEventListener("ended",this._onEnded))}},{key:"endPlay",value:function(){if(this.video){var e=this.video.buffered;if(e.length)try{this._info.endBufferTime=e.end(e.length-1)}catch(t){}this._info.leaveWithBlock=this.isStalling,this._calcPausedTime(),this._calcStallTime(),!this._info.downloadDuration&&this._info.canPlayTime&&(this._info.downloadDuration=(R()()-this._info.canPlayTime)/1e3)}}},{key:"getInfo",value:function(){return this._info}},{key:"resetInfo",value:function(){this._prevPauseTime=0,this._prevStallTime=0,this._prevCurrentTime=0,this._info={pausedTime:0,stalledTime:0,downloadDuration:0,startBufferTime:0,endBufferTime:0,canPlayTime:0,leaveWithBlock:!1}}},{key:"destroy",value:function(){this.disable(),this.video=null}},{key:"_calcStallTime",value:function(){this._prevStallTime&&(this._info.stalledTime+=(R()()-this._prevStallTime)/1e3,this._prevStallTime=0)}},{key:"_calcPausedTime",value:function(){this._prevPauseTime&&(this._info.pausedTime+=(R()()-this._prevPauseTime)/1e3,this._prevPauseTime=0)}}]),e}()),D=n(26217),P=n.n(D),O=n(24514),x=n.n(O),F=n(4650),C=n.n(F),B=(n(44841),n(78716),n(18991),new(function(){function e(t){(0,l.Z)(this,e),this._queue=[],this._current={},this.setConfig(t)}return(0,c.Z)(e,[{key:"setConfig",value:function(e){this._config=P()({},e)}},{key:"setCurrent",value:function(e){P()(this._current,e)}},{key:"getCurrent",value:function(){return this._current}},{key:"resetCurrent",value:function(){this._current={}}},{key:"calcAndReset",value:function(){var e=this._current,t=e.startBufferTime,n=e.duration,i=e.endBufferTime,r=e.leaveWithBlock,a=e.stalledTime,o=e.pausedTime,s=e.downloadDuration,u=e.bitrate;if(n&&u&&i){var l=this._config,c=l.paramBf,f=l.paramBp,d=l.paramUpperBl,h=l.paramUpper,p=l.slidingWindowWeight,_=l.slidingWindowType,g=l.slidingWindowWeightThreshold,y=l.slidingWindowCountThreshold,v=1+((i-t)*c-(a+o)*f)/s;r&&(v=Math.min(v,d));var m=u*Math.max(h,v),T=0;if(T="time"===p?Math.min(s,n+a):Math.min(s,n)*u,this._queue.push([m,T,this._current]),"by_weight"===_){var E,b;this._queue=x()(E=this._queue).call(E,-30);for(var w=C()(b=this._queue).call(b,(function(e,t){return e+t[1]}),0)-g;w>0;){var A=this._queue.shift();if(!A)break;if(A[1]>w){A[1]-=w,this._queue.unshift(A);break}w-=A[1]}}else{var k;this._queue=x()(k=this._queue).call(k,-y)}this.resetCurrent()}else this.resetCurrent()}},{key:"getDefaultBitrate",value:function(e){if(!e||0===e.length)return 0;for(var t=this._config.defaultTargetBitrate||1e6,n=0,i=0;i<e.length;i++)e[i].bitrate<=t&&e[i].bitrate>=n&&(n=e[i].bitrate);return n||(n=e[e.length-1].bitrate),n}},{key:"getTargetBitrate",value:function(e){var t;if(!this._queue.length||!e)return 0;var n=this._config,i=n.paramVlLower,r=n.paramVlUpper,a=n.paramVl1,o=n.paramVl2,s=n.bitrateLower,u=n.bitrateUpper,l=n.slidingWindowExtraction,c=0,f=C()(t=this._queue).call(t,(function(e,t){return e+t[1]}),0);if("weighted_median"===l){var d,h=f/2,p=Infinity,_=0;A()(d=this._queue).call(d,(function(e){(_=Math.abs(h-e[1]))<p&&(c=e[0],p=_)}))}else{var g;c=C()(g=this._queue).call(g,(function(e,t){return e+t[1]/f*t[0]}),0)}var y=Math.min(r,Math.max(i,a+o/e));return Math.max(s,Math.min(u,c*y))}}]),e}())),L=function(){function e(t,n){var i=this;(0,l.Z)(this,e),(0,_.Z)(this,"_onEnded",(function(){i._updateInfo()})),(0,_.Z)(this,"_onPlayNext",(function(){i._updateInfo()})),this._rule=B,this._player=t,t&&(this._playingInfo=new I(t.video)),this._bindEvent(),B.setConfig(n)}return(0,c.Z)(e,[{key:"select",value:function(e){if(e.length){var t,n=e[0].duration||0;1===e.length&&(t=e[0]);var i=0;if(!t){if(i=B.getTargetBitrate(n,e)){var r=Infinity;A()(e).call(e,(function(e){var n=Math.abs(e.bitrate-i);r>n&&(t=e,r=n)}))}else t=e[0];t._targetBitrate=i}return B.resetCurrent(),B.setCurrent({bitrate:t.bitrate,duration:n}),this._playingInfo&&this._playingInfo.enable(),t}}},{key:"_bindEvent",value:function(){if(!this._player)return this._player;this._player.on("ended",this._onEnded),this._player.on("playnext",this._onPlayNext)}},{key:"getTargetBitrate",value:function(e,t){return B.getTargetBitrate(e,t)}},{key:"destroy",value:function(){this._endPlay(),this._player&&(this._playingInfo.destroy(),this._player.off("ended",this._onEnded),this._player.off("playnext",this._onPlayNext))}},{key:"_updateInfo",value:function(){this._playingInfo.endPlay();var e=this._playingInfo.getInfo();this._playingInfo.resetInfo(),B.setCurrent({downloadDuration:e.downloadDuration||B.getCurrent().duration,startBufferTime:e.startBufferTime,endBufferTime:e.endBufferTime,pausedTime:e.pausedTime,stalledTime:e.stalledTime,leaveWithBlock:e.leaveWithBlock}),this._prevPlayInfo=B.getCurrent(),B.calcAndReset()}},{key:"_endPlay",value:function(){this._updateInfo(),this._playingInfo.disable()}}]),e}(),U=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,[{key:"select",value:function(e,t,n){if(e.length<=1)return e[0];for(var i=n.autoBitrateParams,r=i.paramA,a=i.paramB,o=i.paramC,s=i.paramD,u=n.defaultBitrate,l=-1===t?u:r*Math.pow(t,3)+a*Math.pow(t,2)+o*t+s,c=-1,f=0;f<e.length;f++)if(l>=e[f].bitrate){c=f;break}return c<0&&(c=e.length-1),e[c]}}]),e}(),N=20,X=function(){function e(t,n){var i,r=this;(0,l.Z)(this,e),this.config=e.defaultConfig;var a=t.config||{};v()(i=T()(a)).call(i,(function(e){r.config[e]=a[e]})),this.netRecords=[],this.speed=0,this.speedKB=0,this._selectorMap={simple:new U,"buffer-info":new L(n,this.config)}}return(0,c.Z)(e,[{key:"netSampling",value:function(t){this.netRecords.push(t),this.netRecords.length>e.MaxQueueCapacity&&(this.netRecords=this.netRecords.shift(0)),this.speed=this.getSpeed(),this.speedKB=this.speed/8/1024}},{key:"getSpeed",value:function(){var e,t=-1;if(this.netRecords.length<this.config.mSpeedRecordValidThreshold)return t;var n=[];v()(e=this.netRecords).call(e,(function(e){n.push(e)})),u()(n).call(n,(function(e,t){return e.mSpeedInbPS-t.mSpeedInbPS}));for(var i=n.length,r=0,a=0;a<i;a++)r+=n[a].mBytes;r/=2;for(var o=0;o<i;o++)(r-=n[o].mBytes)<=0&&(t=n[o].mSpeedInbPS);return t<0?-1:t}},{key:"select",value:function(e,t){var n;if(!this.config.disabled){t=t||this.config.mode;var i=this.config,r=i.bitrateRange,a=i.defaultBitrate,o=u()(n=b()(e).call(e,(function(e){return e.bitrate>=r[0]&&e.bitrate<=r[1]}))).call(n,(function(e,t){return t.bitrate-e.bitrate}));if(!o.length){var s,l=Infinity;A()(e).call(e,(function(e){var t=Math.abs(e.bitrate-a);t<l&&(s=e,l=t)})),s&&o.push(s)}return(this._selectorMap[t]||this._selectorMap.simple).select(o,this.speed,this.config)||o[0]}}},{key:"selector",get:function(){var e=this.config.mode;return this._selectorMap[e]||this._selectorMap.simple}},{key:"getTargetBitrate",value:function(e,t){var n=this.selector;if(n&&n.getTargetBitrate)return n.getTargetBitrate(e,t)}},{key:"addSelect",value:function(e,t){this._selectorMap[e||t.name]=t}},{key:"destroy",value:function(){var e,t=this._selectorMap;A()(e=T()(t)).call(e,(function(e){"function"==typeof t[e].destroy&&t[e].destroy()}))}}],[{key:"defaultConfig",get:function(){return{paramBf:.3,paramBp:.5,paramUpper:1.5,paramLower:.6,paramUpperBl:.7,paramVl1:.7,paramVl2:1e3,paramVlUpper:.9,paramVlLower:.8,bitrateUpper:2e6,bitrateLower:2e5,slidingWindowType:"by_weight",slidingWindowWeight:"size",slidingWindowWeightThreshold:3e5,slidingWindowCountThreshold:30,slidingWindowExtraction:"weighted_median",bitrateRange:[2e5,25e5],defaultBitrate:1e6,autoBitrateParams:{paramA:0,paramB:4.04330129e-9,paramC:.0164405979,paramD:225511.28,minBitrate:2e5},mSpeedRecordValidThreshold:2,mode:"simple",needCheckDuration:!0}}},{key:"MaxQueueCapacity",get:function(){return N},set:function(e){N=e}}]),e}(),Z=n(36210),H=n.n(Z),Q=(n(96963),function(){function e(){var t,n=this,i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};(0,l.Z)(this,e),this.config={size:30,severeBlockDuration:1500,slightBlockDuration:100,highBitrateRatio:1.5,lowBitrateRatio:.8,highLadderSelectedCnt:1,lowLadderSelectedCnt:1,blockSumMaxTime:6e5},v()(t=T()(i)).call(t,(function(e){n.config[e]=i[e]})),this.timerId=null,this.setTimer()}return(0,c.Z)(e,[{key:"setConfig",value:function(e){var t,n=this;v()(t=T()(e)).call(t,(function(t){n.config[t]=e[t]}))}},{key:"resetCurrent",value:function(){this._info.currentBlockDur=0}},{key:"setTimer",value:function(){var e=this;this._blockQueue=[],this._tBQueue=[],this._sBQueue=[],this._hCount=0,this._lCount=0,this._info={blockDurationSum:0,currentBlockDur:0,targetBitrateAvg:0,selectedBitrateAvg:0,higherSelectedCnt:0,lowerSelectedCnt:0},this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.timerId=M()((function(){e.setTimer()}),this.config.blockSumMaxTime)}},{key:"targetBitRate",set:function(e){var t;if(e&&"number"==typeof e){this._tBQueue.push(H()(e,10)),this._tBQueue.length>this.config.size&&this._tBQueue.shift(0,1);var n=0;v()(t=this._tBQueue).call(t,(function(e){n+=e})),this._info.targetBitrateAvg=n/this._tBQueue.length}}},{key:"selectBitRate",set:function(e){var t;if(e&&"number"==typeof e){this._sBQueue.push(e),this._sBQueue.length>this.config.size&&this._sBQueue.shift(0,1);var n=0;v()(t=this._sBQueue).call(t,(function(e){n+=e})),this._info.selectedBitrateAvg=n/this._sBQueue.length}}},{key:"blockDuration",set:function(e){var t;this._blockQueue.push(e),this._blockQueue.length>this.config.size&&this._blockQueue.shift(0,1);var n=0;v()(t=this._blockQueue).call(t,(function(e){n+=e})),this._info.blockDurationSum=n}},{key:"currentBlockDur",set:function(e){this._info.currentBlockDur+=e}},{key:"updateBitRateInfo",value:function(e,t){e&&t&&(e>t?this._info.higherSelectedCnt++:e<t&&this._info.lowerSelectedCnt++)}},{key:"checkDefinition",value:function(){var e=this.config,t=this._info;return t.blockDurationSum>e.severeBlockDuration&&(t.selectedBitrateAvg>t.targetBitrateAvg*e.highBitrateRatio&&t.higherSelectedCnt>=e.highLadderSelectedCnt||t.currentBlockDur>e.severeBlockDuration)?1:t.blockDurationSum<e.slightBlockDuration&&t.selectedBitrateAvg<t.targetBitrateAvg*e.lowBitrateRatio&&t.lowerSelectedCnt>=e.lowLadderSelectedCnt?2:0}}]),e}());function W(e){var t=function(){if("undefined"==typeof Reflect||!r())return!1;if(r().sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(r()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;n=r()(i,arguments,a)}else n=i.apply(this,arguments);return(0,h.Z)(this,n)}}var V=new Q({}),z=null,K=function(e){(0,d.Z)(n,e);var t=W(n);function n(){var e,i;(0,l.Z)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return i=t.call.apply(t,o()(e=[this]).call(e,a)),(0,_.Z)((0,f.Z)(i),"_onXLog",(function(e){"waitingEnd"===e.eventType&&0===e.type&&(V.blockDuration=e.costTime,i.player.isUserActive&&(V.currentBlockDur=e.costTime))})),i}return(0,c.Z)(n,[{key:"afterCreate",value:function(){this._bindEvent(),this.bitRateAdapter=new X({config:this.config},this.player),z||(z=new X({config:this.config})),V.setConfig(this.config.detectConfig||{}),V.resetCurrent(),this.curBitRate=this.getInitBitrate(),this.player.curDefinition=this.curBitRate}},{key:"beforePlayerInit",value:function(){this.curBitRate=this.getInitBitrate(),this.player.curDefinition=this.curBitRate}},{key:"_bindEvent",value:function(){this.on("xglog",this._onXLog)}},{key:"getInitBitrate",value:function(){if(!this.config.disabled){var e=this.player,t=this.config,n=this.playerConfig,i=this.getSuitableBitrate(e.definitionList,n.userSelectDefinition);return i?n.url=i.url:i={url:n.url,definition:n.defaultDefinition||t.definition,bitrate:n.defaultBitrate||n.bitrate,type:"default"},i.networkSpeed=e.speed,i}}},{key:"getSuitableBitrate",value:function(e,t){if(this.bitRateAdapter&&e&&!(e.length<1)){var i=u()(e).call(e,(function(e,t){return t.bitrate-e.bitrate})),r=this.getAdaptBitrate(i),a=r?r.duration:0,o=this.bitRateAdapter.getTargetBitrate(a,e);if(o&&(V.targetBitRate=o),t){var s=n.getUserSelectBitrate(i,t);s&&(V.selectBitRate=s.bitrate,V.updateBitRateInfo(s.bitrate,o),r=s)}return r}}},{key:"getAdaptBitrate",value:function(e){if(!this.config.disabled){var t=this.player,n=null;return e&&e.length&&this.bitRateAdapter&&(this.bitRateAdapter.speed=t.speed,n=this.bitRateAdapter.select(e)),n&&(n.type="bitRateAdapter"),n}}},{key:"getDefinition",value:function(e,t,n){for(var i=-1,r=0;r<e.length;r++)e[r].bitrate===t&&(i=r);return-1===i?null:n&&e.length>i+1?e[i+1]:!n&&i-1>=0?e[i-1]:null}},{key:"needChangeDefinition",value:function(){var e=this.player,t=e.curDefinition,i=e.definitionList,r=this.playerConfig,a=r.userSelectDefinition,o=r.extDefinition,s=o&&o.length>0?o:i,u={type:0,message:"DO_NOT_UPDATE",targetDefinition:null};if(!a||s.length<2)return u;var l=t;a&&(l=n.getUserSelectBitrate(s,a));var c=V.checkDefinition();u.type=c;var f=this.getAdaptBitrate(s);if(!(f&&0!==c&&f&&f.bitrate&&l&&l.bitrate))return u.message="DO_NOT_UPDATE",u;var d=f.bitrate>=l.bitrate,h=f.bitrate<l.bitrate,p=null;switch(1===c?p=d?this.getDefinition(s,l.bitrate,!0):f:2===c&&(p=h?this.getDefinition(s,l.bitrate,!1):f),u.targetDefinition=p,u.targetDefinition&&u.targetDefinition.definition!==a||(u.type=0),u.type){case 1:u.message="NEED_TO_REDUCE_BITRATE";break;case 2:u.message="CAN_UPGRADE_BITRATE";break;default:u.message="DO_NOT_UPDATE"}return u}},{key:"detectDefInfo",get:function(){return V}},{key:"destroy",value:function(){this.bitRateAdapter&&this.bitRateAdapter.destroy(),this.bitRateAdapter=null,this.off("xglog",this._onXLog),V&&V.resetCurrent()}}],[{key:"pluginName",get:function(){return"BitrateSelector"}},{key:"defaultConfig",get:function(){return{needCheckDuration:!0}}},{key:"getSuitableBitrate",value:function(e,t){if(e&&!(e.length<1)){var i=u()(e).call(e,(function(e,t){return t.bitrate-e.bitrate})),r=null;i&&i.length&&z&&(r=z.select(i)),r&&(r.type="bitRateAdapter");var a=r?r.duration:0,o=z?z.getTargetBitrate(a,e):null;if(o&&(V.targetBitRate=o),t){var s=n.getUserSelectBitrate(i,t);s&&(V.selectBitRate=s.bitrate,V.updateBitRateInfo(s.bitrate,o),r=s)}return r}}},{key:"getUserSelectBitrate",value:function(e,t){if(t&&e&&e.length>0){for(var n=null,i=null,r=0;r<e.length;r++){if(t===e[r].definition){n=e[r];break}!i&&t<e[r].definition&&(i=e[r])}return n||(n=i||e[e.length-1]),n.type="userSelect",n}return null}}]),n}(g.ZP)}}]);